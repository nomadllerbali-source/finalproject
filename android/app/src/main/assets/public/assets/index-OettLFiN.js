(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ky(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _y(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var S1={exports:{}},ph={},k1={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),Cy=Symbol.for("react.portal"),Ay=Symbol.for("react.fragment"),Ty=Symbol.for("react.strict_mode"),Py=Symbol.for("react.profiler"),Ly=Symbol.for("react.provider"),Ey=Symbol.for("react.context"),Dy=Symbol.for("react.forward_ref"),Iy=Symbol.for("react.suspense"),Oy=Symbol.for("react.memo"),Fy=Symbol.for("react.lazy"),Sx=Symbol.iterator;function My(e){return e===null||typeof e!="object"?null:(e=Sx&&e[Sx]||e["@@iterator"],typeof e=="function"?e:null)}var _1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C1=Object.assign,A1={};function bo(e,t,n){this.props=e,this.context=t,this.refs=A1,this.updater=n||_1}bo.prototype.isReactComponent={};bo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function T1(){}T1.prototype=bo.prototype;function I0(e,t,n){this.props=e,this.context=t,this.refs=A1,this.updater=n||_1}var O0=I0.prototype=new T1;O0.constructor=I0;C1(O0,bo.prototype);O0.isPureReactComponent=!0;var kx=Array.isArray,P1=Object.prototype.hasOwnProperty,F0={current:null},L1={key:!0,ref:!0,__self:!0,__source:!0};function E1(e,t,n){var r,a={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)P1.call(t,r)&&!L1.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var d=Array(o),u=0;u<o;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Xc,type:e,key:i,ref:l,props:a,_owner:F0.current}}function Ry(e,t){return{$$typeof:Xc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function M0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xc}function $y(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _x=/\/+/g;function Pm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$y(""+e.key):t.toString(36)}function bu(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Xc:case Cy:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+Pm(l,0):r,kx(a)?(n="",e!=null&&(n=e.replace(_x,"$&/")+"/"),bu(a,t,n,"",function(u){return u})):a!=null&&(M0(a)&&(a=Ry(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_x,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",kx(e))for(var o=0;o<e.length;o++){i=e[o];var d=r+Pm(i,o);l+=bu(i,t,n,d,a)}else if(d=My(e),typeof d=="function")for(e=d.call(e),o=0;!(i=e.next()).done;)i=i.value,d=r+Pm(i,o++),l+=bu(i,t,n,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Yd(e,t,n){if(e==null)return e;var r=[],a=0;return bu(e,r,"","",function(i){return t.call(n,i,a++)}),r}function By(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dn={current:null},yu={transition:null},Uy={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:yu,ReactCurrentOwner:F0};function D1(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:Yd,forEach:function(e,t,n){Yd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yd(e,function(){t++}),t},toArray:function(e){return Yd(e,function(t){return t})||[]},only:function(e){if(!M0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=bo;gt.Fragment=Ay;gt.Profiler=Py;gt.PureComponent=I0;gt.StrictMode=Ty;gt.Suspense=Iy;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy;gt.act=D1;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=C1({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=F0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)P1.call(t,d)&&!L1.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&o!==void 0?o[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){o=Array(d);for(var u=0;u<d;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Xc,type:e.type,key:a,ref:i,props:r,_owner:l}};gt.createContext=function(e){return e={$$typeof:Ey,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ly,_context:e},e.Consumer=e};gt.createElement=E1;gt.createFactory=function(e){var t=E1.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:Dy,render:e}};gt.isValidElement=M0;gt.lazy=function(e){return{$$typeof:Fy,_payload:{_status:-1,_result:e},_init:By}};gt.memo=function(e,t){return{$$typeof:Oy,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=yu.transition;yu.transition={};try{e()}finally{yu.transition=t}};gt.unstable_act=D1;gt.useCallback=function(e,t){return dn.current.useCallback(e,t)};gt.useContext=function(e){return dn.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return dn.current.useDeferredValue(e)};gt.useEffect=function(e,t){return dn.current.useEffect(e,t)};gt.useId=function(){return dn.current.useId()};gt.useImperativeHandle=function(e,t,n){return dn.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return dn.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return dn.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return dn.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return dn.current.useReducer(e,t,n)};gt.useRef=function(e){return dn.current.useRef(e)};gt.useState=function(e){return dn.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return dn.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return dn.current.useTransition()};gt.version="18.3.1";k1.exports=gt;var ce=k1.exports;const Za=ky(ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy=ce,qy=Symbol.for("react.element"),Hy=Symbol.for("react.fragment"),Vy=Object.prototype.hasOwnProperty,Wy=zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gy={key:!0,ref:!0,__self:!0,__source:!0};function I1(e,t,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Vy.call(t,r)&&!Gy.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:qy,type:e,key:i,ref:l,props:a,_owner:Wy.current}}ph.Fragment=Hy;ph.jsx=I1;ph.jsxs=I1;S1.exports=ph;var s=S1.exports,O1={exports:{}},Fn={},F1={exports:{}},M1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,Z){var V=H.length;H.push(Z);e:for(;0<V;){var ie=V-1>>>1,D=H[ie];if(0<a(D,Z))H[ie]=Z,H[V]=D,V=ie;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],V=H.pop();if(V!==Z){H[0]=V;e:for(var ie=0,D=H.length,q=D>>>1;ie<q;){var J=2*(ie+1)-1,ee=H[J],ae=J+1,de=H[ae];if(0>a(ee,V))ae<D&&0>a(de,ee)?(H[ie]=de,H[ae]=V,ie=ae):(H[ie]=ee,H[J]=V,ie=J);else if(ae<D&&0>a(de,V))H[ie]=de,H[ae]=V,ie=ae;else break e}}return Z}function a(H,Z){var V=H.sortIndex-Z.sortIndex;return V!==0?V:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],u=[],p=1,f=null,N=3,h=!1,b=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(H){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=H)r(u),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=n(u)}}function A(H){if(j=!1,y(H),!b)if(n(d)!==null)b=!0,G(P);else{var Z=n(u);Z!==null&&M(A,Z.startTime-H)}}function P(H,Z){b=!1,j&&(j=!1,x(S),S=-1),h=!0;var V=N;try{for(y(Z),f=n(d);f!==null&&(!(f.expirationTime>Z)||H&&!E());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,N=f.priorityLevel;var D=ie(f.expirationTime<=Z);Z=e.unstable_now(),typeof D=="function"?f.callback=D:f===n(d)&&r(d),y(Z)}else r(d);f=n(d)}if(f!==null)var q=!0;else{var J=n(u);J!==null&&M(A,J.startTime-Z),q=!1}return q}finally{f=null,N=V,h=!1}}var _=!1,T=null,S=-1,L=5,R=-1;function E(){return!(e.unstable_now()-R<L)}function I(){if(T!==null){var H=e.unstable_now();R=H;var Z=!0;try{Z=T(!0,H)}finally{Z?Y():(_=!1,T=null)}}else _=!1}var Y;if(typeof g=="function")Y=function(){g(I)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=I,Y=function(){te.postMessage(null)}}else Y=function(){C(I,0)};function G(H){T=H,_||(_=!0,Y())}function M(H,Z){S=C(function(){H(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){b||h||(b=!0,G(P))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(H){switch(N){case 1:case 2:case 3:var Z=3;break;default:Z=N}var V=N;N=Z;try{return H()}finally{N=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=N;N=H;try{return Z()}finally{N=V}},e.unstable_scheduleCallback=function(H,Z,V){var ie=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ie+V:ie):V=ie,H){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=V+D,H={id:p++,callback:Z,priorityLevel:H,startTime:V,expirationTime:D,sortIndex:-1},V>ie?(H.sortIndex=V,t(u,H),n(d)===null&&H===n(u)&&(j?(x(S),S=-1):j=!0,M(A,V-ie))):(H.sortIndex=D,t(d,H),b||h||(b=!0,G(P))),H},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(H){var Z=N;return function(){var V=N;N=Z;try{return H.apply(this,arguments)}finally{N=V}}}})(M1);F1.exports=M1;var Yy=F1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=ce,On=Yy;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R1=new Set,Pc={};function qi(e,t){lo(e,t),lo(e+"Capture",t)}function lo(e,t){for(Pc[e]=t,e=0;e<t.length;e++)R1.add(t[e])}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yf=Object.prototype.hasOwnProperty,Ky=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cx={},Ax={};function Xy(e){return yf.call(Ax,e)?!0:yf.call(Cx,e)?!1:Ky.test(e)?Ax[e]=!0:(Cx[e]=!0,!1)}function Qy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zy(e,t,n,r){if(t===null||typeof t>"u"||Qy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function un(e,t,n,r,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var qs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qs[e]=new un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qs[t]=new un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qs[e]=new un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qs[e]=new un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qs[e]=new un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qs[e]=new un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qs[e]=new un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qs[e]=new un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qs[e]=new un(e,5,!1,e.toLowerCase(),null,!1,!1)});var R0=/[\-:]([a-z])/g;function $0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R0,$0);qs[t]=new un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R0,$0);qs[t]=new un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R0,$0);qs[t]=new un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qs[e]=new un(e,1,!1,e.toLowerCase(),null,!1,!1)});qs.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qs[e]=new un(e,1,!1,e.toLowerCase(),null,!0,!0)});function B0(e,t,n,r){var a=qs.hasOwnProperty(t)?qs[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zy(t,n,a,r)&&(n=null),r||a===null?Xy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var pa=Jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jd=Symbol.for("react.element"),Ml=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),B1=Symbol.for("react.context"),z0=Symbol.for("react.forward_ref"),Nf=Symbol.for("react.suspense"),jf=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),U1=Symbol.for("react.offscreen"),Tx=Symbol.iterator;function tc(e){return e===null||typeof e!="object"?null:(e=Tx&&e[Tx]||e["@@iterator"],typeof e=="function"?e:null)}var Zt=Object.assign,Lm;function hc(e){if(Lm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lm=t&&t[1]||""}return`
`+Lm+e}var Em=!1;function Dm(e,t){if(!e||Em)return"";Em=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=o);break}}}finally{Em=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hc(e):""}function e5(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=Dm(e.type,!1),e;case 11:return e=Dm(e.type.render,!1),e;case 1:return e=Dm(e.type,!0),e;default:return""}}function Sf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rl:return"Fragment";case Ml:return"Portal";case wf:return"Profiler";case U0:return"StrictMode";case Nf:return"Suspense";case jf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B1:return(e.displayName||"Context")+".Consumer";case $1:return(e._context.displayName||"Context")+".Provider";case z0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case q0:return t=e.displayName||null,t!==null?t:Sf(e.type)||"Memo";case Fa:t=e._payload,e=e._init;try{return Sf(e(t))}catch{}}return null}function t5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sf(t);case 8:return t===U0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ei(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s5(e){var t=z1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kd(e){e._valueTracker||(e._valueTracker=s5(e))}function q1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function kf(e,t){var n=t.checked;return Zt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Px(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ei(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function H1(e,t){t=t.checked,t!=null&&B0(e,"checked",t,!1)}function _f(e,t){H1(e,t);var n=ei(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Cf(e,t.type,ei(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Lx(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Cf(e,t,n){(t!=="number"||Fu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mc=Array.isArray;function Kl(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ei(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Af(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Zt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ex(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Re(92));if(mc(n)){if(1<n.length)throw Error(Re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ei(n)}}function V1(e,t){var n=ei(t.value),r=ei(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Dx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xd,G1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xd=Xd||document.createElement("div"),Xd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n5=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(e){n5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gc[t]=gc[e]})});function Y1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gc.hasOwnProperty(e)&&gc[e]?(""+t).trim():t+"px"}function J1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Y1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var r5=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pf(e,t){if(t){if(r5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function Lf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=null;function H0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Df=null,Xl=null,Ql=null;function Ix(e){if(e=ed(e)){if(typeof Df!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=yh(t),Df(e.stateNode,e.type,t))}}function K1(e){Xl?Ql?Ql.push(e):Ql=[e]:Xl=e}function X1(){if(Xl){var e=Xl,t=Ql;if(Ql=Xl=null,Ix(e),t)for(e=0;e<t.length;e++)Ix(t[e])}}function Q1(e,t){return e(t)}function Z1(){}var Im=!1;function ev(e,t,n){if(Im)return e(t,n);Im=!0;try{return Q1(e,t,n)}finally{Im=!1,(Xl!==null||Ql!==null)&&(Z1(),X1())}}function Ec(e,t){var n=e.stateNode;if(n===null)return null;var r=yh(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Re(231,t,typeof n));return n}var If=!1;if(ua)try{var sc={};Object.defineProperty(sc,"passive",{get:function(){If=!0}}),window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{If=!1}function a5(e,t,n,r,a,i,l,o,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var vc=!1,Mu=null,Ru=!1,Of=null,i5={onError:function(e){vc=!0,Mu=e}};function l5(e,t,n,r,a,i,l,o,d){vc=!1,Mu=null,a5.apply(i5,arguments)}function o5(e,t,n,r,a,i,l,o,d){if(l5.apply(this,arguments),vc){if(vc){var u=Mu;vc=!1,Mu=null}else throw Error(Re(198));Ru||(Ru=!0,Of=u)}}function Hi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ox(e){if(Hi(e)!==e)throw Error(Re(188))}function c5(e){var t=e.alternate;if(!t){if(t=Hi(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ox(a),e;if(i===r)return Ox(a),t;i=i.sibling}throw Error(Re(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?e:t}function sv(e){return e=c5(e),e!==null?nv(e):null}function nv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nv(e);if(t!==null)return t;e=e.sibling}return null}var rv=On.unstable_scheduleCallback,Fx=On.unstable_cancelCallback,d5=On.unstable_shouldYield,u5=On.unstable_requestPaint,ds=On.unstable_now,h5=On.unstable_getCurrentPriorityLevel,V0=On.unstable_ImmediatePriority,av=On.unstable_UserBlockingPriority,$u=On.unstable_NormalPriority,m5=On.unstable_LowPriority,iv=On.unstable_IdlePriority,xh=null,$r=null;function f5(e){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(xh,e,void 0,(e.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:g5,p5=Math.log,x5=Math.LN2;function g5(e){return e>>>=0,e===0?32:31-(p5(e)/x5|0)|0}var Qd=64,Zd=4194304;function fc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=fc(o):(i&=l,i!==0&&(r=fc(i)))}else l=n&~a,l!==0?r=fc(l):i!==0&&(r=fc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-br(t),a=1<<n,r|=e[n],t&=~a;return r}function v5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b5(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-br(i),o=1<<l,d=a[l];d===-1?(!(o&n)||o&r)&&(a[l]=v5(o,t)):d<=t&&(e.expiredLanes|=o),i&=~o}}function Ff(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lv(){var e=Qd;return Qd<<=1,!(Qd&4194240)&&(Qd=64),e}function Om(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-br(t),e[t]=n}function y5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-br(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function W0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-br(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Dt=0;function ov(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cv,G0,dv,uv,hv,Mf=!1,eu=[],Ha=null,Va=null,Wa=null,Dc=new Map,Ic=new Map,Ra=[],w5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mx(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Dc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(t.pointerId)}}function nc(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ed(t),t!==null&&G0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function N5(e,t,n,r,a){switch(t){case"focusin":return Ha=nc(Ha,e,t,n,r,a),!0;case"dragenter":return Va=nc(Va,e,t,n,r,a),!0;case"mouseover":return Wa=nc(Wa,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Dc.set(i,nc(Dc.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Ic.set(i,nc(Ic.get(i)||null,e,t,n,r,a)),!0}return!1}function mv(e){var t=Pi(e.target);if(t!==null){var n=Hi(t);if(n!==null){if(t=n.tag,t===13){if(t=tv(n),t!==null){e.blockedOn=t,hv(e.priority,function(){dv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ef=r,n.target.dispatchEvent(r),Ef=null}else return t=ed(n),t!==null&&G0(t),e.blockedOn=n,!1;t.shift()}return!0}function Rx(e,t,n){wu(e)&&n.delete(t)}function j5(){Mf=!1,Ha!==null&&wu(Ha)&&(Ha=null),Va!==null&&wu(Va)&&(Va=null),Wa!==null&&wu(Wa)&&(Wa=null),Dc.forEach(Rx),Ic.forEach(Rx)}function rc(e,t){e.blockedOn===t&&(e.blockedOn=null,Mf||(Mf=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,j5)))}function Oc(e){function t(a){return rc(a,e)}if(0<eu.length){rc(eu[0],e);for(var n=1;n<eu.length;n++){var r=eu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ha!==null&&rc(Ha,e),Va!==null&&rc(Va,e),Wa!==null&&rc(Wa,e),Dc.forEach(t),Ic.forEach(t),n=0;n<Ra.length;n++)r=Ra[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ra.length&&(n=Ra[0],n.blockedOn===null);)mv(n),n.blockedOn===null&&Ra.shift()}var Zl=pa.ReactCurrentBatchConfig,Uu=!0;function S5(e,t,n,r){var a=Dt,i=Zl.transition;Zl.transition=null;try{Dt=1,Y0(e,t,n,r)}finally{Dt=a,Zl.transition=i}}function k5(e,t,n,r){var a=Dt,i=Zl.transition;Zl.transition=null;try{Dt=4,Y0(e,t,n,r)}finally{Dt=a,Zl.transition=i}}function Y0(e,t,n,r){if(Uu){var a=Rf(e,t,n,r);if(a===null)Vm(e,t,r,zu,n),Mx(e,r);else if(N5(a,e,t,n,r))r.stopPropagation();else if(Mx(e,r),t&4&&-1<w5.indexOf(e)){for(;a!==null;){var i=ed(a);if(i!==null&&cv(i),i=Rf(e,t,n,r),i===null&&Vm(e,t,r,zu,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Vm(e,t,r,null,n)}}var zu=null;function Rf(e,t,n,r){if(zu=null,e=H0(r),e=Pi(e),e!==null)if(t=Hi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zu=e,null}function fv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h5()){case V0:return 1;case av:return 4;case $u:case m5:return 16;case iv:return 536870912;default:return 16}default:return 16}}var Ua=null,J0=null,Nu=null;function pv(){if(Nu)return Nu;var e,t=J0,n=t.length,r,a="value"in Ua?Ua.value:Ua.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[i-r];r++);return Nu=a.slice(e,1<r?1-r:void 0)}function ju(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tu(){return!0}function $x(){return!1}function Mn(e){function t(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tu:$x,this.isPropagationStopped=$x,this}return Zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),t}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K0=Mn(yo),Zc=Zt({},yo,{view:0,detail:0}),_5=Mn(Zc),Fm,Mm,ac,gh=Zt({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ac&&(ac&&e.type==="mousemove"?(Fm=e.screenX-ac.screenX,Mm=e.screenY-ac.screenY):Mm=Fm=0,ac=e),Fm)},movementY:function(e){return"movementY"in e?e.movementY:Mm}}),Bx=Mn(gh),C5=Zt({},gh,{dataTransfer:0}),A5=Mn(C5),T5=Zt({},Zc,{relatedTarget:0}),Rm=Mn(T5),P5=Zt({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),L5=Mn(P5),E5=Zt({},yo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),D5=Mn(E5),I5=Zt({},yo,{data:0}),Ux=Mn(I5),O5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=M5[e])?!!t[e]:!1}function X0(){return R5}var $5=Zt({},Zc,{key:function(e){if(e.key){var t=O5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ju(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?F5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X0,charCode:function(e){return e.type==="keypress"?ju(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ju(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),B5=Mn($5),U5=Zt({},gh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zx=Mn(U5),z5=Zt({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X0}),q5=Mn(z5),H5=Zt({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),V5=Mn(H5),W5=Zt({},gh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G5=Mn(W5),Y5=[9,13,27,32],Q0=ua&&"CompositionEvent"in window,bc=null;ua&&"documentMode"in document&&(bc=document.documentMode);var J5=ua&&"TextEvent"in window&&!bc,xv=ua&&(!Q0||bc&&8<bc&&11>=bc),qx=" ",Hx=!1;function gv(e,t){switch(e){case"keyup":return Y5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $l=!1;function K5(e,t){switch(e){case"compositionend":return vv(t);case"keypress":return t.which!==32?null:(Hx=!0,qx);case"textInput":return e=t.data,e===qx&&Hx?null:e;default:return null}}function X5(e,t){if($l)return e==="compositionend"||!Q0&&gv(e,t)?(e=pv(),Nu=J0=Ua=null,$l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xv&&t.locale!=="ko"?null:t.data;default:return null}}var Q5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Q5[e.type]:t==="textarea"}function bv(e,t,n,r){K1(r),t=qu(t,"onChange"),0<t.length&&(n=new K0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yc=null,Fc=null;function Z5(e){Pv(e,0)}function vh(e){var t=zl(e);if(q1(t))return e}function ew(e,t){if(e==="change")return t}var yv=!1;if(ua){var $m;if(ua){var Bm="oninput"in document;if(!Bm){var Wx=document.createElement("div");Wx.setAttribute("oninput","return;"),Bm=typeof Wx.oninput=="function"}$m=Bm}else $m=!1;yv=$m&&(!document.documentMode||9<document.documentMode)}function Gx(){yc&&(yc.detachEvent("onpropertychange",wv),Fc=yc=null)}function wv(e){if(e.propertyName==="value"&&vh(Fc)){var t=[];bv(t,Fc,e,H0(e)),ev(Z5,t)}}function tw(e,t,n){e==="focusin"?(Gx(),yc=t,Fc=n,yc.attachEvent("onpropertychange",wv)):e==="focusout"&&Gx()}function sw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vh(Fc)}function nw(e,t){if(e==="click")return vh(t)}function rw(e,t){if(e==="input"||e==="change")return vh(t)}function aw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wr=typeof Object.is=="function"?Object.is:aw;function Mc(e,t){if(wr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!yf.call(t,a)||!wr(e[a],t[a]))return!1}return!0}function Yx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jx(e,t){var n=Yx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yx(n)}}function Nv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jv(){for(var e=window,t=Fu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Fu(e.document)}return t}function Z0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iw(e){var t=jv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nv(n.ownerDocument.documentElement,n)){if(r!==null&&Z0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=Jx(n,i);var l=Jx(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lw=ua&&"documentMode"in document&&11>=document.documentMode,Bl=null,$f=null,wc=null,Bf=!1;function Kx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bf||Bl==null||Bl!==Fu(r)||(r=Bl,"selectionStart"in r&&Z0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wc&&Mc(wc,r)||(wc=r,r=qu($f,"onSelect"),0<r.length&&(t=new K0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Bl)))}function su(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ul={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Um={},Sv={};ua&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function bh(e){if(Um[e])return Um[e];if(!Ul[e])return e;var t=Ul[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sv)return Um[e]=t[n];return e}var kv=bh("animationend"),_v=bh("animationiteration"),Cv=bh("animationstart"),Av=bh("transitionend"),Tv=new Map,Xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(e,t){Tv.set(e,t),qi(t,[e])}for(var zm=0;zm<Xx.length;zm++){var qm=Xx[zm],ow=qm.toLowerCase(),cw=qm[0].toUpperCase()+qm.slice(1);ii(ow,"on"+cw)}ii(kv,"onAnimationEnd");ii(_v,"onAnimationIteration");ii(Cv,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(Av,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dw=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function Qx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,o5(r,t,void 0,e),e.currentTarget=null}function Pv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],d=o.instance,u=o.currentTarget;if(o=o.listener,d!==i&&a.isPropagationStopped())break e;Qx(a,o,u),i=d}else for(l=0;l<r.length;l++){if(o=r[l],d=o.instance,u=o.currentTarget,o=o.listener,d!==i&&a.isPropagationStopped())break e;Qx(a,o,u),i=d}}}if(Ru)throw e=Of,Ru=!1,Of=null,e}function Ut(e,t){var n=t[Vf];n===void 0&&(n=t[Vf]=new Set);var r=e+"__bubble";n.has(r)||(Lv(t,e,2,!1),n.add(r))}function Hm(e,t,n){var r=0;t&&(r|=4),Lv(n,e,r,t)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[nu]){e[nu]=!0,R1.forEach(function(n){n!=="selectionchange"&&(dw.has(n)||Hm(n,!1,e),Hm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nu]||(t[nu]=!0,Hm("selectionchange",!1,t))}}function Lv(e,t,n,r){switch(fv(t)){case 1:var a=S5;break;case 4:a=k5;break;default:a=Y0}n=a.bind(null,t,n,e),a=void 0,!If||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Vm(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Pi(o),l===null)return;if(d=l.tag,d===5||d===6){r=i=l;continue e}o=o.parentNode}}r=r.return}ev(function(){var u=i,p=H0(n),f=[];e:{var N=Tv.get(e);if(N!==void 0){var h=K0,b=e;switch(e){case"keypress":if(ju(n)===0)break e;case"keydown":case"keyup":h=B5;break;case"focusin":b="focus",h=Rm;break;case"focusout":b="blur",h=Rm;break;case"beforeblur":case"afterblur":h=Rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Bx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=A5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=q5;break;case kv:case _v:case Cv:h=L5;break;case Av:h=V5;break;case"scroll":h=_5;break;case"wheel":h=G5;break;case"copy":case"cut":case"paste":h=D5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=zx}var j=(t&4)!==0,C=!j&&e==="scroll",x=j?N!==null?N+"Capture":null:N;j=[];for(var g=u,y;g!==null;){y=g;var A=y.stateNode;if(y.tag===5&&A!==null&&(y=A,x!==null&&(A=Ec(g,x),A!=null&&j.push($c(g,A,y)))),C)break;g=g.return}0<j.length&&(N=new h(N,b,null,n,p),f.push({event:N,listeners:j}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",N&&n!==Ef&&(b=n.relatedTarget||n.fromElement)&&(Pi(b)||b[ha]))break e;if((h||N)&&(N=p.window===p?p:(N=p.ownerDocument)?N.defaultView||N.parentWindow:window,h?(b=n.relatedTarget||n.toElement,h=u,b=b?Pi(b):null,b!==null&&(C=Hi(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(h=null,b=u),h!==b)){if(j=Bx,A="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(j=zx,A="onPointerLeave",x="onPointerEnter",g="pointer"),C=h==null?N:zl(h),y=b==null?N:zl(b),N=new j(A,g+"leave",h,n,p),N.target=C,N.relatedTarget=y,A=null,Pi(p)===u&&(j=new j(x,g+"enter",b,n,p),j.target=y,j.relatedTarget=C,A=j),C=A,h&&b)t:{for(j=h,x=b,g=0,y=j;y;y=Sl(y))g++;for(y=0,A=x;A;A=Sl(A))y++;for(;0<g-y;)j=Sl(j),g--;for(;0<y-g;)x=Sl(x),y--;for(;g--;){if(j===x||x!==null&&j===x.alternate)break t;j=Sl(j),x=Sl(x)}j=null}else j=null;h!==null&&Zx(f,N,h,j,!1),b!==null&&C!==null&&Zx(f,C,b,j,!0)}}e:{if(N=u?zl(u):window,h=N.nodeName&&N.nodeName.toLowerCase(),h==="select"||h==="input"&&N.type==="file")var P=ew;else if(Vx(N))if(yv)P=rw;else{P=sw;var _=tw}else(h=N.nodeName)&&h.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(P=nw);if(P&&(P=P(e,u))){bv(f,P,n,p);break e}_&&_(e,N,u),e==="focusout"&&(_=N._wrapperState)&&_.controlled&&N.type==="number"&&Cf(N,"number",N.value)}switch(_=u?zl(u):window,e){case"focusin":(Vx(_)||_.contentEditable==="true")&&(Bl=_,$f=u,wc=null);break;case"focusout":wc=$f=Bl=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Kx(f,n,p);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":Kx(f,n,p)}var T;if(Q0)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else $l?gv(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(xv&&n.locale!=="ko"&&($l||S!=="onCompositionStart"?S==="onCompositionEnd"&&$l&&(T=pv()):(Ua=p,J0="value"in Ua?Ua.value:Ua.textContent,$l=!0)),_=qu(u,S),0<_.length&&(S=new Ux(S,e,null,n,p),f.push({event:S,listeners:_}),T?S.data=T:(T=vv(n),T!==null&&(S.data=T)))),(T=J5?K5(e,n):X5(e,n))&&(u=qu(u,"onBeforeInput"),0<u.length&&(p=new Ux("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=T))}Pv(f,t)})}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ec(e,n),i!=null&&r.unshift($c(e,i,a)),i=Ec(e,t),i!=null&&r.push($c(e,i,a))),e=e.return}return r}function Sl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zx(e,t,n,r,a){for(var i=t._reactName,l=[];n!==null&&n!==r;){var o=n,d=o.alternate,u=o.stateNode;if(d!==null&&d===r)break;o.tag===5&&u!==null&&(o=u,a?(d=Ec(n,i),d!=null&&l.unshift($c(n,d,o))):a||(d=Ec(n,i),d!=null&&l.push($c(n,d,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var uw=/\r\n?/g,hw=/\u0000|\uFFFD/g;function eg(e){return(typeof e=="string"?e:""+e).replace(uw,`
`).replace(hw,"")}function ru(e,t,n){if(t=eg(t),eg(e)!==t&&n)throw Error(Re(425))}function Hu(){}var Uf=null,zf=null;function qf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,fw=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(e){return tg.resolve(null).then(e).catch(pw)}:Hf;function pw(e){setTimeout(function(){throw e})}function Wm(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Oc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Oc(t)}function Ga(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Mr="__reactFiber$"+wo,Bc="__reactProps$"+wo,ha="__reactContainer$"+wo,Vf="__reactEvents$"+wo,xw="__reactListeners$"+wo,gw="__reactHandles$"+wo;function Pi(e){var t=e[Mr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[Mr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sg(e);e!==null;){if(n=e[Mr])return n;e=sg(e)}return t}e=n,n=e.parentNode}return null}function ed(e){return e=e[Mr]||e[ha],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function yh(e){return e[Bc]||null}var Wf=[],ql=-1;function li(e){return{current:e}}function Ht(e){0>ql||(e.current=Wf[ql],Wf[ql]=null,ql--)}function Bt(e,t){ql++,Wf[ql]=e.current,e.current=t}var ti={},tn=li(ti),wn=li(!1),Fi=ti;function oo(e,t){var n=e.type.contextTypes;if(!n)return ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Nn(e){return e=e.childContextTypes,e!=null}function Vu(){Ht(wn),Ht(tn)}function ng(e,t,n){if(tn.current!==ti)throw Error(Re(168));Bt(tn,t),Bt(wn,n)}function Ev(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Re(108,t5(e)||"Unknown",a));return Zt({},n,r)}function Wu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ti,Fi=tn.current,Bt(tn,e),Bt(wn,wn.current),!0}function rg(e,t,n){var r=e.stateNode;if(!r)throw Error(Re(169));n?(e=Ev(e,t,Fi),r.__reactInternalMemoizedMergedChildContext=e,Ht(wn),Ht(tn),Bt(tn,e)):Ht(wn),Bt(wn,n)}var la=null,wh=!1,Gm=!1;function Dv(e){la===null?la=[e]:la.push(e)}function vw(e){wh=!0,Dv(e)}function oi(){if(!Gm&&la!==null){Gm=!0;var e=0,t=Dt;try{var n=la;for(Dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}la=null,wh=!1}catch(a){throw la!==null&&(la=la.slice(e+1)),rv(V0,oi),a}finally{Dt=t,Gm=!1}}return null}var Hl=[],Vl=0,Gu=null,Yu=0,Wn=[],Gn=0,Mi=null,oa=1,ca="";function Si(e,t){Hl[Vl++]=Yu,Hl[Vl++]=Gu,Gu=e,Yu=t}function Iv(e,t,n){Wn[Gn++]=oa,Wn[Gn++]=ca,Wn[Gn++]=Mi,Mi=e;var r=oa;e=ca;var a=32-br(r)-1;r&=~(1<<a),n+=1;var i=32-br(t)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,oa=1<<32-br(t)+a|n<<a|r,ca=i+e}else oa=1<<i|n<<a|r,ca=e}function ep(e){e.return!==null&&(Si(e,1),Iv(e,1,0))}function tp(e){for(;e===Gu;)Gu=Hl[--Vl],Hl[Vl]=null,Yu=Hl[--Vl],Hl[Vl]=null;for(;e===Mi;)Mi=Wn[--Gn],Wn[Gn]=null,ca=Wn[--Gn],Wn[Gn]=null,oa=Wn[--Gn],Wn[Gn]=null}var In=null,En=null,Wt=!1,vr=null;function Ov(e,t){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ag(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,In=e,En=Ga(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,In=e,En=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mi!==null?{id:oa,overflow:ca}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,In=e,En=null,!0):!1;default:return!1}}function Gf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yf(e){if(Wt){var t=En;if(t){var n=t;if(!ag(e,t)){if(Gf(e))throw Error(Re(418));t=Ga(n.nextSibling);var r=In;t&&ag(e,t)?Ov(r,n):(e.flags=e.flags&-4097|2,Wt=!1,In=e)}}else{if(Gf(e))throw Error(Re(418));e.flags=e.flags&-4097|2,Wt=!1,In=e}}}function ig(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;In=e}function au(e){if(e!==In)return!1;if(!Wt)return ig(e),Wt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qf(e.type,e.memoizedProps)),t&&(t=En)){if(Gf(e))throw Fv(),Error(Re(418));for(;t;)Ov(e,t),t=Ga(t.nextSibling)}if(ig(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){En=Ga(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}En=null}}else En=In?Ga(e.stateNode.nextSibling):null;return!0}function Fv(){for(var e=En;e;)e=Ga(e.nextSibling)}function co(){En=In=null,Wt=!1}function sp(e){vr===null?vr=[e]:vr.push(e)}var bw=pa.ReactCurrentBatchConfig;function ic(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,e))}return e}function iu(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lg(e){var t=e._init;return t(e._payload)}function Mv(e){function t(x,g){if(e){var y=x.deletions;y===null?(x.deletions=[g],x.flags|=16):y.push(g)}}function n(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=Xa(x,g),x.index=0,x.sibling=null,x}function i(x,g,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<g?(x.flags|=2,g):y):(x.flags|=2,g)):(x.flags|=1048576,g)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,g,y,A){return g===null||g.tag!==6?(g=ef(y,x.mode,A),g.return=x,g):(g=a(g,y),g.return=x,g)}function d(x,g,y,A){var P=y.type;return P===Rl?p(x,g,y.props.children,A,y.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Fa&&lg(P)===g.type)?(A=a(g,y.props),A.ref=ic(x,g,y),A.return=x,A):(A=Pu(y.type,y.key,y.props,null,x.mode,A),A.ref=ic(x,g,y),A.return=x,A)}function u(x,g,y,A){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=tf(y,x.mode,A),g.return=x,g):(g=a(g,y.children||[]),g.return=x,g)}function p(x,g,y,A,P){return g===null||g.tag!==7?(g=Ii(y,x.mode,A,P),g.return=x,g):(g=a(g,y),g.return=x,g)}function f(x,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ef(""+g,x.mode,y),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Jd:return y=Pu(g.type,g.key,g.props,null,x.mode,y),y.ref=ic(x,null,g),y.return=x,y;case Ml:return g=tf(g,x.mode,y),g.return=x,g;case Fa:var A=g._init;return f(x,A(g._payload),y)}if(mc(g)||tc(g))return g=Ii(g,x.mode,y,null),g.return=x,g;iu(x,g)}return null}function N(x,g,y,A){var P=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:o(x,g,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jd:return y.key===P?d(x,g,y,A):null;case Ml:return y.key===P?u(x,g,y,A):null;case Fa:return P=y._init,N(x,g,P(y._payload),A)}if(mc(y)||tc(y))return P!==null?null:p(x,g,y,A,null);iu(x,y)}return null}function h(x,g,y,A,P){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(y)||null,o(g,x,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Jd:return x=x.get(A.key===null?y:A.key)||null,d(g,x,A,P);case Ml:return x=x.get(A.key===null?y:A.key)||null,u(g,x,A,P);case Fa:var _=A._init;return h(x,g,y,_(A._payload),P)}if(mc(A)||tc(A))return x=x.get(y)||null,p(g,x,A,P,null);iu(g,A)}return null}function b(x,g,y,A){for(var P=null,_=null,T=g,S=g=0,L=null;T!==null&&S<y.length;S++){T.index>S?(L=T,T=null):L=T.sibling;var R=N(x,T,y[S],A);if(R===null){T===null&&(T=L);break}e&&T&&R.alternate===null&&t(x,T),g=i(R,g,S),_===null?P=R:_.sibling=R,_=R,T=L}if(S===y.length)return n(x,T),Wt&&Si(x,S),P;if(T===null){for(;S<y.length;S++)T=f(x,y[S],A),T!==null&&(g=i(T,g,S),_===null?P=T:_.sibling=T,_=T);return Wt&&Si(x,S),P}for(T=r(x,T);S<y.length;S++)L=h(T,x,S,y[S],A),L!==null&&(e&&L.alternate!==null&&T.delete(L.key===null?S:L.key),g=i(L,g,S),_===null?P=L:_.sibling=L,_=L);return e&&T.forEach(function(E){return t(x,E)}),Wt&&Si(x,S),P}function j(x,g,y,A){var P=tc(y);if(typeof P!="function")throw Error(Re(150));if(y=P.call(y),y==null)throw Error(Re(151));for(var _=P=null,T=g,S=g=0,L=null,R=y.next();T!==null&&!R.done;S++,R=y.next()){T.index>S?(L=T,T=null):L=T.sibling;var E=N(x,T,R.value,A);if(E===null){T===null&&(T=L);break}e&&T&&E.alternate===null&&t(x,T),g=i(E,g,S),_===null?P=E:_.sibling=E,_=E,T=L}if(R.done)return n(x,T),Wt&&Si(x,S),P;if(T===null){for(;!R.done;S++,R=y.next())R=f(x,R.value,A),R!==null&&(g=i(R,g,S),_===null?P=R:_.sibling=R,_=R);return Wt&&Si(x,S),P}for(T=r(x,T);!R.done;S++,R=y.next())R=h(T,x,S,R.value,A),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?S:R.key),g=i(R,g,S),_===null?P=R:_.sibling=R,_=R);return e&&T.forEach(function(I){return t(x,I)}),Wt&&Si(x,S),P}function C(x,g,y,A){if(typeof y=="object"&&y!==null&&y.type===Rl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Jd:e:{for(var P=y.key,_=g;_!==null;){if(_.key===P){if(P=y.type,P===Rl){if(_.tag===7){n(x,_.sibling),g=a(_,y.props.children),g.return=x,x=g;break e}}else if(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Fa&&lg(P)===_.type){n(x,_.sibling),g=a(_,y.props),g.ref=ic(x,_,y),g.return=x,x=g;break e}n(x,_);break}else t(x,_);_=_.sibling}y.type===Rl?(g=Ii(y.props.children,x.mode,A,y.key),g.return=x,x=g):(A=Pu(y.type,y.key,y.props,null,x.mode,A),A.ref=ic(x,g,y),A.return=x,x=A)}return l(x);case Ml:e:{for(_=y.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(x,g.sibling),g=a(g,y.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else t(x,g);g=g.sibling}g=tf(y,x.mode,A),g.return=x,x=g}return l(x);case Fa:return _=y._init,C(x,g,_(y._payload),A)}if(mc(y))return b(x,g,y,A);if(tc(y))return j(x,g,y,A);iu(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(x,g.sibling),g=a(g,y),g.return=x,x=g):(n(x,g),g=ef(y,x.mode,A),g.return=x,x=g),l(x)):n(x,g)}return C}var uo=Mv(!0),Rv=Mv(!1),Ju=li(null),Ku=null,Wl=null,np=null;function rp(){np=Wl=Ku=null}function ap(e){var t=Ju.current;Ht(Ju),e._currentValue=t}function Jf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eo(e,t){Ku=e,np=Wl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yn=!0),e.firstContext=null)}function Qn(e){var t=e._currentValue;if(np!==e)if(e={context:e,memoizedValue:t,next:null},Wl===null){if(Ku===null)throw Error(Re(308));Wl=e,Ku.dependencies={lanes:0,firstContext:e}}else Wl=Wl.next=e;return t}var Li=null;function ip(e){Li===null?Li=[e]:Li.push(e)}function $v(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,ip(t)):(n.next=a.next,a.next=n),t.interleaved=n,ma(e,r)}function ma(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ma=!1;function lp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ya(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,ma(e,n)}return a=r.interleaved,a===null?(t.next=t,ip(r)):(t.next=a.next,a.next=t),r.interleaved=t,ma(e,n)}function Su(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,W0(e,n)}}function og(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xu(e,t,n,r){var a=e.updateQueue;Ma=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var d=o,u=d.next;d.next=null,l===null?i=u:l.next=u,l=d;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==l&&(o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=d))}if(i!==null){var f=a.baseState;l=0,p=u=d=null,o=i;do{var N=o.lane,h=o.eventTime;if((r&N)===N){p!==null&&(p=p.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=e,j=o;switch(N=t,h=n,j.tag){case 1:if(b=j.payload,typeof b=="function"){f=b.call(h,f,N);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,N=typeof b=="function"?b.call(h,f,N):b,N==null)break e;f=Zt({},f,N);break e;case 2:Ma=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,N=a.effects,N===null?a.effects=[o]:N.push(o))}else h={eventTime:h,lane:N,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(u=p=h,d=f):p=p.next=h,l|=N;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;N=o,o=N.next,N.next=null,a.lastBaseUpdate=N,a.shared.pending=null}}while(!0);if(p===null&&(d=f),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);$i|=l,e.lanes=l,e.memoizedState=f}}function cg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Re(191,a));a.call(r)}}}var td={},Br=li(td),Uc=li(td),zc=li(td);function Ei(e){if(e===td)throw Error(Re(174));return e}function op(e,t){switch(Bt(zc,t),Bt(Uc,e),Bt(Br,td),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tf(t,e)}Ht(Br),Bt(Br,t)}function ho(){Ht(Br),Ht(Uc),Ht(zc)}function Uv(e){Ei(zc.current);var t=Ei(Br.current),n=Tf(t,e.type);t!==n&&(Bt(Uc,e),Bt(Br,n))}function cp(e){Uc.current===e&&(Ht(Br),Ht(Uc))}var Kt=li(0);function Qu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ym=[];function dp(){for(var e=0;e<Ym.length;e++)Ym[e]._workInProgressVersionPrimary=null;Ym.length=0}var ku=pa.ReactCurrentDispatcher,Jm=pa.ReactCurrentBatchConfig,Ri=0,Qt=null,_s=null,Ds=null,Zu=!1,Nc=!1,qc=0,yw=0;function Ws(){throw Error(Re(321))}function up(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wr(e[n],t[n]))return!1;return!0}function hp(e,t,n,r,a,i){if(Ri=i,Qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ku.current=e===null||e.memoizedState===null?Sw:kw,e=n(r,a),Nc){i=0;do{if(Nc=!1,qc=0,25<=i)throw Error(Re(301));i+=1,Ds=_s=null,t.updateQueue=null,ku.current=_w,e=n(r,a)}while(Nc)}if(ku.current=eh,t=_s!==null&&_s.next!==null,Ri=0,Ds=_s=Qt=null,Zu=!1,t)throw Error(Re(300));return e}function mp(){var e=qc!==0;return qc=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ds===null?Qt.memoizedState=Ds=e:Ds=Ds.next=e,Ds}function Zn(){if(_s===null){var e=Qt.alternate;e=e!==null?e.memoizedState:null}else e=_s.next;var t=Ds===null?Qt.memoizedState:Ds.next;if(t!==null)Ds=t,_s=e;else{if(e===null)throw Error(Re(310));_s=e,e={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},Ds===null?Qt.memoizedState=Ds=e:Ds=Ds.next=e}return Ds}function Hc(e,t){return typeof t=="function"?t(e):t}function Km(e){var t=Zn(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var r=_s,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,d=null,u=i;do{var p=u.lane;if((Ri&p)===p)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(o=d=f,l=r):d=d.next=f,Qt.lanes|=p,$i|=p}u=u.next}while(u!==null&&u!==i);d===null?l=r:d.next=o,wr(r,t.memoizedState)||(yn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Qt.lanes|=i,$i|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xm(e){var t=Zn(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);wr(i,t.memoizedState)||(yn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function zv(){}function qv(e,t){var n=Qt,r=Zn(),a=t(),i=!wr(r.memoizedState,a);if(i&&(r.memoizedState=a,yn=!0),r=r.queue,fp(Wv.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ds!==null&&Ds.memoizedState.tag&1){if(n.flags|=2048,Vc(9,Vv.bind(null,n,r,a,t),void 0,null),Os===null)throw Error(Re(349));Ri&30||Hv(n,t,a)}return a}function Hv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vv(e,t,n,r){t.value=n,t.getSnapshot=r,Gv(t)&&Yv(e)}function Wv(e,t,n){return n(function(){Gv(t)&&Yv(e)})}function Gv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wr(e,n)}catch{return!0}}function Yv(e){var t=ma(e,1);t!==null&&yr(t,e,1,-1)}function dg(e){var t=Or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:e},t.queue=e,e=e.dispatch=jw.bind(null,Qt,e),[t.memoizedState,e]}function Vc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jv(){return Zn().memoizedState}function _u(e,t,n,r){var a=Or();Qt.flags|=e,a.memoizedState=Vc(1|t,n,void 0,r===void 0?null:r)}function Nh(e,t,n,r){var a=Zn();r=r===void 0?null:r;var i=void 0;if(_s!==null){var l=_s.memoizedState;if(i=l.destroy,r!==null&&up(r,l.deps)){a.memoizedState=Vc(t,n,i,r);return}}Qt.flags|=e,a.memoizedState=Vc(1|t,n,i,r)}function ug(e,t){return _u(8390656,8,e,t)}function fp(e,t){return Nh(2048,8,e,t)}function Kv(e,t){return Nh(4,2,e,t)}function Xv(e,t){return Nh(4,4,e,t)}function Qv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zv(e,t,n){return n=n!=null?n.concat([e]):null,Nh(4,4,Qv.bind(null,t,e),n)}function pp(){}function e2(e,t){var n=Zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&up(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function t2(e,t){var n=Zn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&up(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function s2(e,t,n){return Ri&21?(wr(n,t)||(n=lv(),Qt.lanes|=n,$i|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yn=!0),e.memoizedState=n)}function ww(e,t){var n=Dt;Dt=n!==0&&4>n?n:4,e(!0);var r=Jm.transition;Jm.transition={};try{e(!1),t()}finally{Dt=n,Jm.transition=r}}function n2(){return Zn().memoizedState}function Nw(e,t,n){var r=Ka(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r2(e))a2(t,n);else if(n=$v(e,t,n,r),n!==null){var a=cn();yr(n,e,r,a),i2(n,t,r)}}function jw(e,t,n){var r=Ka(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r2(e))a2(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,wr(o,l)){var d=t.interleaved;d===null?(a.next=a,ip(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=$v(e,t,a,r),n!==null&&(a=cn(),yr(n,e,r,a),i2(n,t,r))}}function r2(e){var t=e.alternate;return e===Qt||t!==null&&t===Qt}function a2(e,t){Nc=Zu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function i2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,W0(e,n)}}var eh={readContext:Qn,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useInsertionEffect:Ws,useLayoutEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useMutableSource:Ws,useSyncExternalStore:Ws,useId:Ws,unstable_isNewReconciler:!1},Sw={readContext:Qn,useCallback:function(e,t){return Or().memoizedState=[e,t===void 0?null:t],e},useContext:Qn,useEffect:ug,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_u(4194308,4,Qv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _u(4194308,4,e,t)},useInsertionEffect:function(e,t){return _u(4,2,e,t)},useMemo:function(e,t){var n=Or();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Or();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Nw.bind(null,Qt,e),[r.memoizedState,e]},useRef:function(e){var t=Or();return e={current:e},t.memoizedState=e},useState:dg,useDebugValue:pp,useDeferredValue:function(e){return Or().memoizedState=e},useTransition:function(){var e=dg(!1),t=e[0];return e=ww.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qt,a=Or();if(Wt){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=t(),Os===null)throw Error(Re(349));Ri&30||Hv(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,ug(Wv.bind(null,r,i,e),[e]),r.flags|=2048,Vc(9,Vv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Or(),t=Os.identifierPrefix;if(Wt){var n=ca,r=oa;n=(r&~(1<<32-br(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kw={readContext:Qn,useCallback:e2,useContext:Qn,useEffect:fp,useImperativeHandle:Zv,useInsertionEffect:Kv,useLayoutEffect:Xv,useMemo:t2,useReducer:Km,useRef:Jv,useState:function(){return Km(Hc)},useDebugValue:pp,useDeferredValue:function(e){var t=Zn();return s2(t,_s.memoizedState,e)},useTransition:function(){var e=Km(Hc)[0],t=Zn().memoizedState;return[e,t]},useMutableSource:zv,useSyncExternalStore:qv,useId:n2,unstable_isNewReconciler:!1},_w={readContext:Qn,useCallback:e2,useContext:Qn,useEffect:fp,useImperativeHandle:Zv,useInsertionEffect:Kv,useLayoutEffect:Xv,useMemo:t2,useReducer:Xm,useRef:Jv,useState:function(){return Xm(Hc)},useDebugValue:pp,useDeferredValue:function(e){var t=Zn();return _s===null?t.memoizedState=e:s2(t,_s.memoizedState,e)},useTransition:function(){var e=Xm(Hc)[0],t=Zn().memoizedState;return[e,t]},useMutableSource:zv,useSyncExternalStore:qv,useId:n2,unstable_isNewReconciler:!1};function fr(e,t){if(e&&e.defaultProps){t=Zt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Kf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Zt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jh={isMounted:function(e){return(e=e._reactInternals)?Hi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cn(),a=Ka(e),i=da(r,a);i.payload=t,n!=null&&(i.callback=n),t=Ya(e,i,a),t!==null&&(yr(t,e,a,r),Su(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cn(),a=Ka(e),i=da(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ya(e,i,a),t!==null&&(yr(t,e,a,r),Su(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cn(),r=Ka(e),a=da(n,r);a.tag=2,t!=null&&(a.callback=t),t=Ya(e,a,r),t!==null&&(yr(t,e,r,n),Su(t,e,r))}};function hg(e,t,n,r,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Mc(n,r)||!Mc(a,i):!0}function l2(e,t,n){var r=!1,a=ti,i=t.contextType;return typeof i=="object"&&i!==null?i=Qn(i):(a=Nn(t)?Fi:tn.current,r=t.contextTypes,i=(r=r!=null)?oo(e,a):ti),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function mg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jh.enqueueReplaceState(t,t.state,null)}function Xf(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},lp(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qn(i):(i=Nn(t)?Fi:tn.current,a.context=oo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Kf(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&jh.enqueueReplaceState(a,a.state,null),Xu(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function mo(e,t){try{var n="",r=t;do n+=e5(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Qm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Cw=typeof WeakMap=="function"?WeakMap:Map;function o2(e,t,n){n=da(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sh||(sh=!0,o0=r),Qf(e,t)},n}function c2(e,t,n){n=da(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Qf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qf(e,t),typeof r!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function fg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Cw;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Uw.bind(null,e,t,n),t.then(e,e))}function pg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xg(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=da(-1,1),t.tag=2,Ya(n,t,1))),n.lanes|=1),e)}var Aw=pa.ReactCurrentOwner,yn=!1;function on(e,t,n,r){t.child=e===null?Rv(t,null,n,r):uo(t,e.child,n,r)}function gg(e,t,n,r,a){n=n.render;var i=t.ref;return eo(t,a),r=hp(e,t,n,r,i,a),n=mp(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fa(e,t,a)):(Wt&&n&&ep(t),t.flags|=1,on(e,t,r,a),t.child)}function vg(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!jp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,d2(e,t,i,r,a)):(e=Pu(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(l,r)&&e.ref===t.ref)return fa(e,t,a)}return t.flags|=1,e=Xa(i,r),e.ref=t.ref,e.return=t,t.child=e}function d2(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Mc(i,r)&&e.ref===t.ref)if(yn=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(yn=!0);else return t.lanes=e.lanes,fa(e,t,a)}return Zf(e,t,n,r,a)}function u2(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Yl,Ln),Ln|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(Yl,Ln),Ln|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Bt(Yl,Ln),Ln|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Bt(Yl,Ln),Ln|=r;return on(e,t,a,n),t.child}function h2(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zf(e,t,n,r,a){var i=Nn(n)?Fi:tn.current;return i=oo(t,i),eo(t,a),n=hp(e,t,n,r,i,a),r=mp(),e!==null&&!yn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fa(e,t,a)):(Wt&&r&&ep(t),t.flags|=1,on(e,t,n,a),t.child)}function bg(e,t,n,r,a){if(Nn(n)){var i=!0;Wu(t)}else i=!1;if(eo(t,a),t.stateNode===null)Cu(e,t),l2(t,n,r),Xf(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var d=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=Nn(n)?Fi:tn.current,u=oo(t,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||d!==u)&&mg(t,l,r,u),Ma=!1;var N=t.memoizedState;l.state=N,Xu(t,r,l,a),d=t.memoizedState,o!==r||N!==d||wn.current||Ma?(typeof p=="function"&&(Kf(t,n,p,r),d=t.memoizedState),(o=Ma||hg(t,n,o,r,N,d,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=u,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Bv(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:fr(t.type,o),l.props=u,f=t.pendingProps,N=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Qn(d):(d=Nn(n)?Fi:tn.current,d=oo(t,d));var h=n.getDerivedStateFromProps;(p=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||N!==d)&&mg(t,l,r,d),Ma=!1,N=t.memoizedState,l.state=N,Xu(t,r,l,a);var b=t.memoizedState;o!==f||N!==b||wn.current||Ma?(typeof h=="function"&&(Kf(t,n,h,r),b=t.memoizedState),(u=Ma||hg(t,n,u,r,N,b,d)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,b,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,b,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),l.props=r,l.state=b,l.context=d,r=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return e0(e,t,n,r,i,a)}function e0(e,t,n,r,a,i){h2(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&rg(t,n,!1),fa(e,t,i);r=t.stateNode,Aw.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=uo(t,e.child,null,i),t.child=uo(t,null,o,i)):on(e,t,o,i),t.memoizedState=r.state,a&&rg(t,n,!0),t.child}function m2(e){var t=e.stateNode;t.pendingContext?ng(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ng(e,t.context,!1),op(e,t.containerInfo)}function yg(e,t,n,r,a){return co(),sp(a),t.flags|=256,on(e,t,n,r),t.child}var t0={dehydrated:null,treeContext:null,retryLane:0};function s0(e){return{baseLanes:e,cachePool:null,transitions:null}}function f2(e,t,n){var r=t.pendingProps,a=Kt.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Bt(Kt,a&1),e===null)return Yf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=_h(l,r,0,null),e=Ii(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=s0(n),t.memoizedState=t0,e):xp(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Tw(e,t,l,r,o,a,n);if(i){i=r.fallback,l=t.mode,a=e.child,o=a.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Xa(a,d),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Xa(o,i):(i=Ii(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?s0(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=t0,r}return i=e.child,e=i.sibling,r=Xa(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function xp(e,t){return t=_h({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lu(e,t,n,r){return r!==null&&sp(r),uo(t,e.child,null,n),e=xp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tw(e,t,n,r,a,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Qm(Error(Re(422))),lu(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=_h({mode:"visible",children:r.children},a,0,null),i=Ii(i,a,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&uo(t,e.child,null,l),t.child.memoizedState=s0(l),t.memoizedState=t0,i);if(!(t.mode&1))return lu(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Re(419)),r=Qm(i,r,void 0),lu(e,t,l,r)}if(o=(l&e.childLanes)!==0,yn||o){if(r=Os,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ma(e,a),yr(r,e,a,-1))}return Np(),r=Qm(Error(Re(421))),lu(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=zw.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,En=Ga(a.nextSibling),In=t,Wt=!0,vr=null,e!==null&&(Wn[Gn++]=oa,Wn[Gn++]=ca,Wn[Gn++]=Mi,oa=e.id,ca=e.overflow,Mi=t),t=xp(t,r.children),t.flags|=4096,t)}function wg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jf(e.return,t,n)}function Zm(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function p2(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(on(e,t,r.children,n),r=Kt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wg(e,n,t);else if(e.tag===19)wg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bt(Kt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Qu(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Zm(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Qu(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Zm(t,!0,n,null,i);break;case"together":Zm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$i|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,n=Xa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Pw(e,t,n){switch(t.tag){case 3:m2(t),co();break;case 5:Uv(t);break;case 1:Nn(t.type)&&Wu(t);break;case 4:op(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Bt(Ju,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bt(Kt,Kt.current&1),t.flags|=128,null):n&t.child.childLanes?f2(e,t,n):(Bt(Kt,Kt.current&1),e=fa(e,t,n),e!==null?e.sibling:null);Bt(Kt,Kt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return p2(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Bt(Kt,Kt.current),r)break;return null;case 22:case 23:return t.lanes=0,u2(e,t,n)}return fa(e,t,n)}var x2,n0,g2,v2;x2=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n0=function(){};g2=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ei(Br.current);var i=null;switch(n){case"input":a=kf(e,a),r=kf(e,r),i=[];break;case"select":a=Zt({},a,{value:void 0}),r=Zt({},r,{value:void 0}),i=[];break;case"textarea":a=Af(e,a),r=Af(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hu)}Pf(n,r);var l;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var d=r[u];if(o=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&d!==o&&(d!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(i||(i=[]),i.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pc.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Ut("scroll",e),i||o===d||(i=[])):(i=i||[]).push(u,d))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};v2=function(e,t,n,r){n!==r&&(t.flags|=4)};function lc(e,t){if(!Wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lw(e,t,n){var r=t.pendingProps;switch(tp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:return Nn(t.type)&&Vu(),Gs(t),null;case 3:return r=t.stateNode,ho(),Ht(wn),Ht(tn),dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(au(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vr!==null&&(u0(vr),vr=null))),n0(e,t),Gs(t),null;case 5:cp(t);var a=Ei(zc.current);if(n=t.type,e!==null&&t.stateNode!=null)g2(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Re(166));return Gs(t),null}if(e=Ei(Br.current),au(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Mr]=t,r[Bc]=i,e=(t.mode&1)!==0,n){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(a=0;a<pc.length;a++)Ut(pc[a],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":Px(r,i),Ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ut("invalid",r);break;case"textarea":Ex(r,i),Ut("invalid",r)}Pf(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,o,e),a=["children",""+o]):Pc.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ut("scroll",r)}switch(n){case"input":Kd(r),Lx(r,i,!0);break;case"textarea":Kd(r),Dx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hu)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Mr]=t,e[Bc]=r,x2(e,t,!1,!1),t.stateNode=e;e:{switch(l=Lf(n,r),n){case"dialog":Ut("cancel",e),Ut("close",e),a=r;break;case"iframe":case"object":case"embed":Ut("load",e),a=r;break;case"video":case"audio":for(a=0;a<pc.length;a++)Ut(pc[a],e);a=r;break;case"source":Ut("error",e),a=r;break;case"img":case"image":case"link":Ut("error",e),Ut("load",e),a=r;break;case"details":Ut("toggle",e),a=r;break;case"input":Px(e,r),a=kf(e,r),Ut("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Zt({},r,{value:void 0}),Ut("invalid",e);break;case"textarea":Ex(e,r),a=Af(e,r),Ut("invalid",e);break;default:a=r}Pf(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var d=o[i];i==="style"?J1(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&G1(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Lc(e,d):typeof d=="number"&&Lc(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pc.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ut("scroll",e):d!=null&&B0(e,i,d,l))}switch(n){case"input":Kd(e),Lx(e,r,!1);break;case"textarea":Kd(e),Dx(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ei(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Kl(e,!!r.multiple,i,!1):r.defaultValue!=null&&Kl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Hu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&t.stateNode!=null)v2(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Re(166));if(n=Ei(zc.current),Ei(Br.current),au(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mr]=t,(i=r.nodeValue!==n)&&(e=In,e!==null))switch(e.tag){case 3:ru(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ru(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mr]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ht(Kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wt&&En!==null&&t.mode&1&&!(t.flags&128))Fv(),co(),t.flags|=98560,i=!1;else if(i=au(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Re(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Re(317));i[Mr]=t}else co(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else vr!==null&&(u0(vr),vr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Kt.current&1?Cs===0&&(Cs=3):Np())),t.updateQueue!==null&&(t.flags|=4),Gs(t),null);case 4:return ho(),n0(e,t),e===null&&Rc(t.stateNode.containerInfo),Gs(t),null;case 10:return ap(t.type._context),Gs(t),null;case 17:return Nn(t.type)&&Vu(),Gs(t),null;case 19:if(Ht(Kt),i=t.memoizedState,i===null)return Gs(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)lc(i,!1);else{if(Cs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Qu(e),l!==null){for(t.flags|=128,lc(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bt(Kt,Kt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ds()>fo&&(t.flags|=128,r=!0,lc(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qu(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Wt)return Gs(t),null}else 2*ds()-i.renderingStartTime>fo&&n!==1073741824&&(t.flags|=128,r=!0,lc(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ds(),t.sibling=null,n=Kt.current,Bt(Kt,r?n&1|2:n&1),t):(Gs(t),null);case 22:case 23:return wp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ln&1073741824&&(Gs(t),t.subtreeFlags&6&&(t.flags|=8192)):Gs(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function Ew(e,t){switch(tp(t),t.tag){case 1:return Nn(t.type)&&Vu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ho(),Ht(wn),Ht(tn),dp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cp(t),null;case 13:if(Ht(Kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));co()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ht(Kt),null;case 4:return ho(),null;case 10:return ap(t.type._context),null;case 22:case 23:return wp(),null;case 24:return null;default:return null}}var ou=!1,Qs=!1,Dw=typeof WeakSet=="function"?WeakSet:Set,We=null;function Gl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){as(e,t,r)}else n.current=null}function r0(e,t,n){try{n()}catch(r){as(e,t,r)}}var Ng=!1;function Iw(e,t){if(Uf=Uu,e=jv(),Z0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,d=-1,u=0,p=0,f=e,N=null;t:for(;;){for(var h;f!==n||a!==0&&f.nodeType!==3||(o=l+a),f!==i||r!==0&&f.nodeType!==3||(d=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(h=f.firstChild)!==null;)N=f,f=h;for(;;){if(f===e)break t;if(N===n&&++u===a&&(o=l),N===i&&++p===r&&(d=l),(h=f.nextSibling)!==null)break;f=N,N=f.parentNode}f=h}n=o===-1||d===-1?null:{start:o,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(zf={focusedElem:e,selectionRange:n},Uu=!1,We=t;We!==null;)if(t=We,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,We=e;else for(;We!==null;){t=We;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,C=b.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?j:fr(t.type,j),C);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(A){as(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,We=e;break}We=t.return}return b=Ng,Ng=!1,b}function jc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&r0(t,n,i)}a=a.next}while(a!==r)}}function Sh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function a0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function b2(e){var t=e.alternate;t!==null&&(e.alternate=null,b2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mr],delete t[Bc],delete t[Vf],delete t[xw],delete t[gw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y2(e){return e.tag===5||e.tag===3||e.tag===4}function jg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function i0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hu));else if(r!==4&&(e=e.child,e!==null))for(i0(e,t,n),e=e.sibling;e!==null;)i0(e,t,n),e=e.sibling}function l0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(l0(e,t,n),e=e.sibling;e!==null;)l0(e,t,n),e=e.sibling}var Us=null,xr=!1;function La(e,t,n){for(n=n.child;n!==null;)w2(e,t,n),n=n.sibling}function w2(e,t,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(xh,n)}catch{}switch(n.tag){case 5:Qs||Gl(n,t);case 6:var r=Us,a=xr;Us=null,La(e,t,n),Us=r,xr=a,Us!==null&&(xr?(e=Us,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Us.removeChild(n.stateNode));break;case 18:Us!==null&&(xr?(e=Us,n=n.stateNode,e.nodeType===8?Wm(e.parentNode,n):e.nodeType===1&&Wm(e,n),Oc(e)):Wm(Us,n.stateNode));break;case 4:r=Us,a=xr,Us=n.stateNode.containerInfo,xr=!0,La(e,t,n),Us=r,xr=a;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&r0(n,t,l),a=a.next}while(a!==r)}La(e,t,n);break;case 1:if(!Qs&&(Gl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){as(n,t,o)}La(e,t,n);break;case 21:La(e,t,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,La(e,t,n),Qs=r):La(e,t,n);break;default:La(e,t,n)}}function Sg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dw),t.forEach(function(r){var a=qw.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function dr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Us=o.stateNode,xr=!1;break e;case 3:Us=o.stateNode.containerInfo,xr=!0;break e;case 4:Us=o.stateNode.containerInfo,xr=!0;break e}o=o.return}if(Us===null)throw Error(Re(160));w2(i,l,a),Us=null,xr=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){as(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)N2(t,e),t=t.sibling}function N2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dr(t,e),Dr(e),r&4){try{jc(3,e,e.return),Sh(3,e)}catch(j){as(e,e.return,j)}try{jc(5,e,e.return)}catch(j){as(e,e.return,j)}}break;case 1:dr(t,e),Dr(e),r&512&&n!==null&&Gl(n,n.return);break;case 5:if(dr(t,e),Dr(e),r&512&&n!==null&&Gl(n,n.return),e.flags&32){var a=e.stateNode;try{Lc(a,"")}catch(j){as(e,e.return,j)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&H1(a,i),Lf(o,l);var u=Lf(o,i);for(l=0;l<d.length;l+=2){var p=d[l],f=d[l+1];p==="style"?J1(a,f):p==="dangerouslySetInnerHTML"?G1(a,f):p==="children"?Lc(a,f):B0(a,p,f,u)}switch(o){case"input":_f(a,i);break;case"textarea":V1(a,i);break;case"select":var N=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?Kl(a,!!i.multiple,h,!1):N!==!!i.multiple&&(i.defaultValue!=null?Kl(a,!!i.multiple,i.defaultValue,!0):Kl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Bc]=i}catch(j){as(e,e.return,j)}}break;case 6:if(dr(t,e),Dr(e),r&4){if(e.stateNode===null)throw Error(Re(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(j){as(e,e.return,j)}}break;case 3:if(dr(t,e),Dr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oc(t.containerInfo)}catch(j){as(e,e.return,j)}break;case 4:dr(t,e),Dr(e);break;case 13:dr(t,e),Dr(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(bp=ds())),r&4&&Sg(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Qs=(u=Qs)||p,dr(t,e),Qs=u):dr(t,e),Dr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(We=e,p=e.child;p!==null;){for(f=We=p;We!==null;){switch(N=We,h=N.child,N.tag){case 0:case 11:case 14:case 15:jc(4,N,N.return);break;case 1:Gl(N,N.return);var b=N.stateNode;if(typeof b.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(j){as(r,n,j)}}break;case 5:Gl(N,N.return);break;case 22:if(N.memoizedState!==null){_g(f);continue}}h!==null?(h.return=N,We=h):_g(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,d=f.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=Y1("display",l))}catch(j){as(e,e.return,j)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(j){as(e,e.return,j)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dr(t,e),Dr(e),r&4&&Sg(e);break;case 21:break;default:dr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y2(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Lc(a,""),r.flags&=-33);var i=jg(e);l0(e,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=jg(e);i0(e,o,l);break;default:throw Error(Re(161))}}catch(d){as(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ow(e,t,n){We=e,j2(e)}function j2(e,t,n){for(var r=(e.mode&1)!==0;We!==null;){var a=We,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||ou;if(!l){var o=a.alternate,d=o!==null&&o.memoizedState!==null||Qs;o=ou;var u=Qs;if(ou=l,(Qs=d)&&!u)for(We=a;We!==null;)l=We,d=l.child,l.tag===22&&l.memoizedState!==null?Cg(a):d!==null?(d.return=l,We=d):Cg(a);for(;i!==null;)We=i,j2(i),i=i.sibling;We=a,ou=o,Qs=u}kg(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,We=i):kg(e)}}function kg(e){for(;We!==null;){var t=We;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qs||Sh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:fr(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cg(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cg(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Oc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Qs||t.flags&512&&a0(t)}catch(N){as(t,t.return,N)}}if(t===e){We=null;break}if(n=t.sibling,n!==null){n.return=t.return,We=n;break}We=t.return}}function _g(e){for(;We!==null;){var t=We;if(t===e){We=null;break}var n=t.sibling;if(n!==null){n.return=t.return,We=n;break}We=t.return}}function Cg(e){for(;We!==null;){var t=We;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Sh(4,t)}catch(d){as(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(d){as(t,a,d)}}var i=t.return;try{a0(t)}catch(d){as(t,i,d)}break;case 5:var l=t.return;try{a0(t)}catch(d){as(t,l,d)}}}catch(d){as(t,t.return,d)}if(t===e){We=null;break}var o=t.sibling;if(o!==null){o.return=t.return,We=o;break}We=t.return}}var Fw=Math.ceil,th=pa.ReactCurrentDispatcher,gp=pa.ReactCurrentOwner,Kn=pa.ReactCurrentBatchConfig,jt=0,Os=null,ys=null,zs=0,Ln=0,Yl=li(0),Cs=0,Wc=null,$i=0,kh=0,vp=0,Sc=null,vn=null,bp=0,fo=1/0,aa=null,sh=!1,o0=null,Ja=null,cu=!1,za=null,nh=0,kc=0,c0=null,Au=-1,Tu=0;function cn(){return jt&6?ds():Au!==-1?Au:Au=ds()}function Ka(e){return e.mode&1?jt&2&&zs!==0?zs&-zs:bw.transition!==null?(Tu===0&&(Tu=lv()),Tu):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:fv(e.type)),e):1}function yr(e,t,n,r){if(50<kc)throw kc=0,c0=null,Error(Re(185));Qc(e,n,r),(!(jt&2)||e!==Os)&&(e===Os&&(!(jt&2)&&(kh|=n),Cs===4&&$a(e,zs)),jn(e,r),n===1&&jt===0&&!(t.mode&1)&&(fo=ds()+500,wh&&oi()))}function jn(e,t){var n=e.callbackNode;b5(e,t);var r=Bu(e,e===Os?zs:0);if(r===0)n!==null&&Fx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Fx(n),t===1)e.tag===0?vw(Ag.bind(null,e)):Dv(Ag.bind(null,e)),fw(function(){!(jt&6)&&oi()}),n=null;else{switch(ov(r)){case 1:n=V0;break;case 4:n=av;break;case 16:n=$u;break;case 536870912:n=iv;break;default:n=$u}n=L2(n,S2.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function S2(e,t){if(Au=-1,Tu=0,jt&6)throw Error(Re(327));var n=e.callbackNode;if(to()&&e.callbackNode!==n)return null;var r=Bu(e,e===Os?zs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rh(e,r);else{t=r;var a=jt;jt|=2;var i=_2();(Os!==e||zs!==t)&&(aa=null,fo=ds()+500,Di(e,t));do try{$w();break}catch(o){k2(e,o)}while(!0);rp(),th.current=i,jt=a,ys!==null?t=0:(Os=null,zs=0,t=Cs)}if(t!==0){if(t===2&&(a=Ff(e),a!==0&&(r=a,t=d0(e,a))),t===1)throw n=Wc,Di(e,0),$a(e,r),jn(e,ds()),n;if(t===6)$a(e,r);else{if(a=e.current.alternate,!(r&30)&&!Mw(a)&&(t=rh(e,r),t===2&&(i=Ff(e),i!==0&&(r=i,t=d0(e,i))),t===1))throw n=Wc,Di(e,0),$a(e,r),jn(e,ds()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Re(345));case 2:ki(e,vn,aa);break;case 3:if($a(e,r),(r&130023424)===r&&(t=bp+500-ds(),10<t)){if(Bu(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){cn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Hf(ki.bind(null,e,vn,aa),t);break}ki(e,vn,aa);break;case 4:if($a(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-br(r);i=1<<l,l=t[l],l>a&&(a=l),r&=~i}if(r=a,r=ds()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fw(r/1960))-r,10<r){e.timeoutHandle=Hf(ki.bind(null,e,vn,aa),r);break}ki(e,vn,aa);break;case 5:ki(e,vn,aa);break;default:throw Error(Re(329))}}}return jn(e,ds()),e.callbackNode===n?S2.bind(null,e):null}function d0(e,t){var n=Sc;return e.current.memoizedState.isDehydrated&&(Di(e,t).flags|=256),e=rh(e,t),e!==2&&(t=vn,vn=n,t!==null&&u0(t)),e}function u0(e){vn===null?vn=e:vn.push.apply(vn,e)}function Mw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!wr(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $a(e,t){for(t&=~vp,t&=~kh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-br(t),r=1<<n;e[n]=-1,t&=~r}}function Ag(e){if(jt&6)throw Error(Re(327));to();var t=Bu(e,0);if(!(t&1))return jn(e,ds()),null;var n=rh(e,t);if(e.tag!==0&&n===2){var r=Ff(e);r!==0&&(t=r,n=d0(e,r))}if(n===1)throw n=Wc,Di(e,0),$a(e,t),jn(e,ds()),n;if(n===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ki(e,vn,aa),jn(e,ds()),null}function yp(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(fo=ds()+500,wh&&oi())}}function Bi(e){za!==null&&za.tag===0&&!(jt&6)&&to();var t=jt;jt|=1;var n=Kn.transition,r=Dt;try{if(Kn.transition=null,Dt=1,e)return e()}finally{Dt=r,Kn.transition=n,jt=t,!(jt&6)&&oi()}}function wp(){Ln=Yl.current,Ht(Yl)}function Di(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mw(n)),ys!==null)for(n=ys.return;n!==null;){var r=n;switch(tp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:ho(),Ht(wn),Ht(tn),dp();break;case 5:cp(r);break;case 4:ho();break;case 13:Ht(Kt);break;case 19:Ht(Kt);break;case 10:ap(r.type._context);break;case 22:case 23:wp()}n=n.return}if(Os=e,ys=e=Xa(e.current,null),zs=Ln=t,Cs=0,Wc=null,vp=kh=$i=0,vn=Sc=null,Li!==null){for(t=0;t<Li.length;t++)if(n=Li[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}Li=null}return e}function k2(e,t){do{var n=ys;try{if(rp(),ku.current=eh,Zu){for(var r=Qt.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Zu=!1}if(Ri=0,Ds=_s=Qt=null,Nc=!1,qc=0,gp.current=null,n===null||n.return===null){Cs=1,Wc=t,ys=null;break}e:{var i=e,l=n.return,o=n,d=t;if(t=zs,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,p=o,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var N=p.alternate;N?(p.updateQueue=N.updateQueue,p.memoizedState=N.memoizedState,p.lanes=N.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=pg(l);if(h!==null){h.flags&=-257,xg(h,l,o,i,t),h.mode&1&&fg(i,u,t),t=h,d=u;var b=t.updateQueue;if(b===null){var j=new Set;j.add(d),t.updateQueue=j}else b.add(d);break e}else{if(!(t&1)){fg(i,u,t),Np();break e}d=Error(Re(426))}}else if(Wt&&o.mode&1){var C=pg(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),xg(C,l,o,i,t),sp(mo(d,o));break e}}i=d=mo(d,o),Cs!==4&&(Cs=2),Sc===null?Sc=[i]:Sc.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=o2(i,d,t);og(i,x);break e;case 1:o=d;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ja===null||!Ja.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var A=c2(i,o,t);og(i,A);break e}}i=i.return}while(i!==null)}A2(n)}catch(P){t=P,ys===n&&n!==null&&(ys=n=n.return);continue}break}while(!0)}function _2(){var e=th.current;return th.current=eh,e===null?eh:e}function Np(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),Os===null||!($i&268435455)&&!(kh&268435455)||$a(Os,zs)}function rh(e,t){var n=jt;jt|=2;var r=_2();(Os!==e||zs!==t)&&(aa=null,Di(e,t));do try{Rw();break}catch(a){k2(e,a)}while(!0);if(rp(),jt=n,th.current=r,ys!==null)throw Error(Re(261));return Os=null,zs=0,Cs}function Rw(){for(;ys!==null;)C2(ys)}function $w(){for(;ys!==null&&!d5();)C2(ys)}function C2(e){var t=P2(e.alternate,e,Ln);e.memoizedProps=e.pendingProps,t===null?A2(e):ys=t,gp.current=null}function A2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ew(n,t),n!==null){n.flags&=32767,ys=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cs=6,ys=null;return}}else if(n=Lw(n,t,Ln),n!==null){ys=n;return}if(t=t.sibling,t!==null){ys=t;return}ys=t=e}while(t!==null);Cs===0&&(Cs=5)}function ki(e,t,n){var r=Dt,a=Kn.transition;try{Kn.transition=null,Dt=1,Bw(e,t,n,r)}finally{Kn.transition=a,Dt=r}return null}function Bw(e,t,n,r){do to();while(za!==null);if(jt&6)throw Error(Re(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(y5(e,i),e===Os&&(ys=Os=null,zs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cu||(cu=!0,L2($u,function(){return to(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kn.transition,Kn.transition=null;var l=Dt;Dt=1;var o=jt;jt|=4,gp.current=null,Iw(e,n),N2(n,e),iw(zf),Uu=!!Uf,zf=Uf=null,e.current=n,Ow(n),u5(),jt=o,Dt=l,Kn.transition=i}else e.current=n;if(cu&&(cu=!1,za=e,nh=a),i=e.pendingLanes,i===0&&(Ja=null),f5(n.stateNode),jn(e,ds()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(sh)throw sh=!1,e=o0,o0=null,e;return nh&1&&e.tag!==0&&to(),i=e.pendingLanes,i&1?e===c0?kc++:(kc=0,c0=e):kc=0,oi(),null}function to(){if(za!==null){var e=ov(nh),t=Kn.transition,n=Dt;try{if(Kn.transition=null,Dt=16>e?16:e,za===null)var r=!1;else{if(e=za,za=null,nh=0,jt&6)throw Error(Re(331));var a=jt;for(jt|=4,We=e.current;We!==null;){var i=We,l=i.child;if(We.flags&16){var o=i.deletions;if(o!==null){for(var d=0;d<o.length;d++){var u=o[d];for(We=u;We!==null;){var p=We;switch(p.tag){case 0:case 11:case 15:jc(8,p,i)}var f=p.child;if(f!==null)f.return=p,We=f;else for(;We!==null;){p=We;var N=p.sibling,h=p.return;if(b2(p),p===u){We=null;break}if(N!==null){N.return=h,We=N;break}We=h}}}var b=i.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var C=j.sibling;j.sibling=null,j=C}while(j!==null)}}We=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,We=l;else e:for(;We!==null;){if(i=We,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,We=x;break e}We=i.return}}var g=e.current;for(We=g;We!==null;){l=We;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,We=y;else e:for(l=g;We!==null;){if(o=We,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Sh(9,o)}}catch(P){as(o,o.return,P)}if(o===l){We=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,We=A;break e}We=o.return}}if(jt=a,oi(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(xh,e)}catch{}r=!0}return r}finally{Dt=n,Kn.transition=t}}return!1}function Tg(e,t,n){t=mo(n,t),t=o2(e,t,1),e=Ya(e,t,1),t=cn(),e!==null&&(Qc(e,1,t),jn(e,t))}function as(e,t,n){if(e.tag===3)Tg(e,e,n);else for(;t!==null;){if(t.tag===3){Tg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ja===null||!Ja.has(r))){e=mo(n,e),e=c2(t,e,1),t=Ya(t,e,1),e=cn(),t!==null&&(Qc(t,1,e),jn(t,e));break}}t=t.return}}function Uw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=cn(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(zs&n)===n&&(Cs===4||Cs===3&&(zs&130023424)===zs&&500>ds()-bp?Di(e,0):vp|=n),jn(e,t)}function T2(e,t){t===0&&(e.mode&1?(t=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):t=1);var n=cn();e=ma(e,t),e!==null&&(Qc(e,t,n),jn(e,n))}function zw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),T2(e,n)}function qw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(t),T2(e,n)}var P2;P2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||wn.current)yn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yn=!1,Pw(e,t,n);yn=!!(e.flags&131072)}else yn=!1,Wt&&t.flags&1048576&&Iv(t,Yu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cu(e,t),e=t.pendingProps;var a=oo(t,tn.current);eo(t,n),a=hp(null,t,r,e,a,n);var i=mp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nn(r)?(i=!0,Wu(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,lp(t),a.updater=jh,t.stateNode=a,a._reactInternals=t,Xf(t,r,e,n),t=e0(null,t,r,!0,i,n)):(t.tag=0,Wt&&i&&ep(t),on(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cu(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=Vw(r),e=fr(r,e),a){case 0:t=Zf(null,t,r,e,n);break e;case 1:t=bg(null,t,r,e,n);break e;case 11:t=gg(null,t,r,e,n);break e;case 14:t=vg(null,t,r,fr(r.type,e),n);break e}throw Error(Re(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:fr(r,a),Zf(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:fr(r,a),bg(e,t,r,a,n);case 3:e:{if(m2(t),e===null)throw Error(Re(387));r=t.pendingProps,i=t.memoizedState,a=i.element,Bv(e,t),Xu(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=mo(Error(Re(423)),t),t=yg(e,t,r,n,a);break e}else if(r!==a){a=mo(Error(Re(424)),t),t=yg(e,t,r,n,a);break e}else for(En=Ga(t.stateNode.containerInfo.firstChild),In=t,Wt=!0,vr=null,n=Rv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===a){t=fa(e,t,n);break e}on(e,t,r,n)}t=t.child}return t;case 5:return Uv(t),e===null&&Yf(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,qf(r,a)?l=null:i!==null&&qf(r,i)&&(t.flags|=32),h2(e,t),on(e,t,l,n),t.child;case 6:return e===null&&Yf(t),null;case 13:return f2(e,t,n);case 4:return op(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=uo(t,null,r,n):on(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:fr(r,a),gg(e,t,r,a,n);case 7:return on(e,t,t.pendingProps,n),t.child;case 8:return on(e,t,t.pendingProps.children,n),t.child;case 12:return on(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Bt(Ju,r._currentValue),r._currentValue=l,i!==null)if(wr(i.value,l)){if(i.children===a.children&&!wn.current){t=fa(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var d=o.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=da(-1,n&-n),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?d.next=d:(d.next=p.next,p.next=d),u.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Jf(i.return,n,t),o.lanes|=n;break}d=d.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Re(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Jf(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}on(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,eo(t,n),a=Qn(a),r=r(a),t.flags|=1,on(e,t,r,n),t.child;case 14:return r=t.type,a=fr(r,t.pendingProps),a=fr(r.type,a),vg(e,t,r,a,n);case 15:return d2(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:fr(r,a),Cu(e,t),t.tag=1,Nn(r)?(e=!0,Wu(t)):e=!1,eo(t,n),l2(t,r,a),Xf(t,r,a,n),e0(null,t,r,!0,e,n);case 19:return p2(e,t,n);case 22:return u2(e,t,n)}throw Error(Re(156,t.tag))};function L2(e,t){return rv(e,t)}function Hw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,n,r){return new Hw(e,t,n,r)}function jp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vw(e){if(typeof e=="function")return jp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===z0)return 11;if(e===q0)return 14}return 2}function Xa(e,t){var n=e.alternate;return n===null?(n=Yn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,a,i){var l=2;if(r=e,typeof e=="function")jp(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Rl:return Ii(n.children,a,i,t);case U0:l=8,a|=8;break;case wf:return e=Yn(12,n,t,a|2),e.elementType=wf,e.lanes=i,e;case Nf:return e=Yn(13,n,t,a),e.elementType=Nf,e.lanes=i,e;case jf:return e=Yn(19,n,t,a),e.elementType=jf,e.lanes=i,e;case U1:return _h(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $1:l=10;break e;case B1:l=9;break e;case z0:l=11;break e;case q0:l=14;break e;case Fa:l=16,r=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=Yn(l,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Ii(e,t,n,r){return e=Yn(7,e,r,t),e.lanes=n,e}function _h(e,t,n,r){return e=Yn(22,e,r,t),e.elementType=U1,e.lanes=n,e.stateNode={isHidden:!1},e}function ef(e,t,n){return e=Yn(6,e,null,t),e.lanes=n,e}function tf(e,t,n){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ww(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Om(0),this.expirationTimes=Om(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Om(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Sp(e,t,n,r,a,i,l,o,d){return e=new Ww(e,t,n,o,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Yn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(i),e}function Gw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function E2(e){if(!e)return ti;e=e._reactInternals;e:{if(Hi(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var n=e.type;if(Nn(n))return Ev(e,n,t)}return t}function D2(e,t,n,r,a,i,l,o,d){return e=Sp(n,r,!0,e,a,i,l,o,d),e.context=E2(null),n=e.current,r=cn(),a=Ka(n),i=da(r,a),i.callback=t??null,Ya(n,i,a),e.current.lanes=a,Qc(e,a,r),jn(e,r),e}function Ch(e,t,n,r){var a=t.current,i=cn(),l=Ka(a);return n=E2(n),t.context===null?t.context=n:t.pendingContext=n,t=da(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ya(a,t,l),e!==null&&(yr(e,a,l,i),Su(e,a,l)),l}function ah(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kp(e,t){Pg(e,t),(e=e.alternate)&&Pg(e,t)}function Yw(){return null}var I2=typeof reportError=="function"?reportError:function(e){console.error(e)};function _p(e){this._internalRoot=e}Ah.prototype.render=_p.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));Ch(e,t,null,null)};Ah.prototype.unmount=_p.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bi(function(){Ch(null,e,null,null)}),t[ha]=null}};function Ah(e){this._internalRoot=e}Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=uv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ra.length&&t!==0&&t<Ra[n].priority;n++);Ra.splice(n,0,e),n===0&&mv(e)}};function Cp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function Jw(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=ah(l);i.call(u)}}var l=D2(t,r,e,0,null,!1,!1,"",Lg);return e._reactRootContainer=l,e[ha]=l.current,Rc(e.nodeType===8?e.parentNode:e),Bi(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var u=ah(d);o.call(u)}}var d=Sp(e,0,!1,null,null,!1,!1,"",Lg);return e._reactRootContainer=d,e[ha]=d.current,Rc(e.nodeType===8?e.parentNode:e),Bi(function(){Ch(t,d,n,r)}),d}function Ph(e,t,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var d=ah(l);o.call(d)}}Ch(t,l,e,a)}else l=Jw(n,t,e,a,r);return ah(l)}cv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=fc(t.pendingLanes);n!==0&&(W0(t,n|1),jn(t,ds()),!(jt&6)&&(fo=ds()+500,oi()))}break;case 13:Bi(function(){var r=ma(e,1);if(r!==null){var a=cn();yr(r,e,1,a)}}),kp(e,1)}};G0=function(e){if(e.tag===13){var t=ma(e,134217728);if(t!==null){var n=cn();yr(t,e,134217728,n)}kp(e,134217728)}};dv=function(e){if(e.tag===13){var t=Ka(e),n=ma(e,t);if(n!==null){var r=cn();yr(n,e,t,r)}kp(e,t)}};uv=function(){return Dt};hv=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}};Df=function(e,t,n){switch(t){case"input":if(_f(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=yh(r);if(!a)throw Error(Re(90));q1(r),_f(r,a)}}}break;case"textarea":V1(e,n);break;case"select":t=n.value,t!=null&&Kl(e,!!n.multiple,t,!1)}};Q1=yp;Z1=Bi;var Kw={usingClientEntryPoint:!1,Events:[ed,zl,yh,K1,X1,yp]},oc={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xw={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sv(e),e===null?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||Yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{xh=du.inject(Xw),$r=du}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kw;Fn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(t))throw Error(Re(200));return Gw(e,t,null,n)};Fn.createRoot=function(e,t){if(!Cp(e))throw Error(Re(299));var n=!1,r="",a=I2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Sp(e,1,!1,null,null,n,!1,r,a),e[ha]=t.current,Rc(e.nodeType===8?e.parentNode:e),new _p(t)};Fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=sv(t),e=e===null?null:e.stateNode,e};Fn.flushSync=function(e){return Bi(e)};Fn.hydrate=function(e,t,n){if(!Th(t))throw Error(Re(200));return Ph(null,e,t,!0,n)};Fn.hydrateRoot=function(e,t,n){if(!Cp(e))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=I2;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=D2(t,null,e,1,n??null,a,!1,i,l),e[ha]=t.current,Rc(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ah(t)};Fn.render=function(e,t,n){if(!Th(t))throw Error(Re(200));return Ph(null,e,t,!1,n)};Fn.unmountComponentAtNode=function(e){if(!Th(e))throw Error(Re(40));return e._reactRootContainer?(Bi(function(){Ph(null,null,e,!1,function(){e._reactRootContainer=null,e[ha]=null})}),!0):!1};Fn.unstable_batchedUpdates=yp;Fn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Th(n))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return Ph(e,t,n,!1,r)};Fn.version="18.3.1-next-f1338f8080-20240426";function O2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O2)}catch(e){console.error(e)}}O2(),O1.exports=Fn;var Qw=O1.exports,F2,Eg=Qw;F2=Eg.createRoot,Eg.hydrateRoot;const Zw="modulepreload",eN=function(e){return"/"+e},Dg={},si=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=eN(d),d in Dg)return;Dg[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Zw,u||(f.as="script"),f.crossOrigin="",f.href=d,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((N,h)=>{f.addEventListener("load",N),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},tN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>No);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ap extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class sN extends Ap{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ig extends Ap{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Og extends Ap{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var h0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(h0||(h0={}));var nN=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};class rN{constructor(t,{headers:n={},customFetch:r,region:a=h0.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=tN(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return nN(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=n;let o={},{region:d}=n;d||(d=this.region);const u=new URL(`${this.url}/${t}`);d&&d!=="any"&&(o["x-region"]=d,u.searchParams.set("forceFunctionRegion",d));let p;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(o["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(o["Content-Type"]="application/json",p=JSON.stringify(l)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:p}).catch(j=>{throw new sN(j)}),N=f.headers.get("x-relay-error");if(N&&N==="true")throw new Ig(f);if(!f.ok)throw new Og(f);let h=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return h==="application/json"?b=yield f.json():h==="application/octet-stream"?b=yield f.blob():h==="text/event-stream"?b=f:h==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Og||a instanceof Ig?a.context:void 0}}})}}var bn={},Tp={},Lh={},sd={},Eh={},Dh={},aN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},po=aN();const iN=po.fetch,M2=po.fetch.bind(po),R2=po.Headers,lN=po.Request,oN=po.Response,No=Object.freeze(Object.defineProperty({__proto__:null,Headers:R2,Request:lN,Response:oN,default:M2,fetch:iN},Symbol.toStringTag,{value:"Module"})),cN=_y(No);var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});let dN=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ih.default=dN;var $2=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dh,"__esModule",{value:!0});const uN=$2(cN),hN=$2(Ih);let mN=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=uN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,d,u;let p=null,f=null,N=null,h=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?f=g:f=JSON.parse(g))}const C=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(d=i.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");C&&x&&x.length>1&&(N=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(p={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,N=null,h=406,b="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const C=await i.text();try{p=JSON.parse(C),Array.isArray(p)&&i.status===404&&(f=[],p=null,h=200,b="OK")}catch{i.status===404&&C===""?(h=204,b="No Content"):p={message:C}}if(p&&this.isMaybeSingle&&(!((u=p==null?void 0:p.details)===null||u===void 0)&&u.includes("0 rows"))&&(p=null,h=200,b="OK"),p&&this.shouldThrowOnError)throw new hN.default(p)}return{error:p,data:f,count:N,status:h,statusText:b}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,d;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Dh.default=mN;var fN=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eh,"__esModule",{value:!0});const pN=fN(Dh);let xN=class extends pN.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const d=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Eh.default=xN;var gN=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});const vN=gN(Eh);let bN=class extends vN.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${l}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};sd.default=bN;var yN=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lh,"__esModule",{value:!0});const cc=yN(sd);let wN=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),r&&this.headers.append("Prefer",`count=${r}`),new cc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(l.length>0){const o=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new cc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new cc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new cc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new cc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Lh.default=wN;var B2=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tp,"__esModule",{value:!0});const NN=B2(Lh),jN=B2(sd);let SN=class U2{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new NN.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new U2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var l;let o;const d=new URL(`${this.url}/rpc/${t}`);let u;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,N])=>N!==void 0).map(([f,N])=>[f,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([f,N])=>{d.searchParams.append(f,N)})):(o="POST",u=n);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new jN.default({method:o,url:d,headers:p,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Tp.default=SN;var jo=Xn&&Xn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bn,"__esModule",{value:!0});bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const z2=jo(Tp);bn.PostgrestClient=z2.default;const q2=jo(Lh);bn.PostgrestQueryBuilder=q2.default;const H2=jo(sd);bn.PostgrestFilterBuilder=H2.default;const V2=jo(Eh);bn.PostgrestTransformBuilder=V2.default;const W2=jo(Dh);bn.PostgrestBuilder=W2.default;const G2=jo(Ih);bn.PostgrestError=G2.default;var kN=bn.default={PostgrestClient:z2.default,PostgrestQueryBuilder:q2.default,PostgrestFilterBuilder:H2.default,PostgrestTransformBuilder:V2.default,PostgrestBuilder:W2.default,PostgrestError:G2.default};const{PostgrestClient:_N,PostgrestQueryBuilder:tS,PostgrestFilterBuilder:sS,PostgrestTransformBuilder:nS,PostgrestBuilder:rS,PostgrestError:aS}=kN;class CN{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const AN="2.15.5",TN=`realtime-js/${AN}`,PN="1.0.0",m0=1e4,LN=1e3,EN=100;var _c;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_c||(_c={}));var Ss;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ss||(Ss={}));var gr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gr||(gr={}));var f0;(function(e){e.websocket="websocket"})(f0||(f0={}));var Ai;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ai||(Ai={}));class DN{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let l=this.HEADER_LENGTH+2;const o=r.decode(t.slice(l,l+a));l=l+a;const d=r.decode(t.slice(l,l+i));l=l+i;const u=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:d,payload:u}}}class Y2{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})($t||($t={}));const Fg=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,l)=>(i[l]=IN(l,e,t,a),i),{})},IN=(e,t,n,r)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=n[e];return i&&!r.includes(i)?J2(i,l):p0(l)},J2=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return RN(t,n)}switch(e){case $t.bool:return ON(t);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return FN(t);case $t.json:case $t.jsonb:return MN(t);case $t.timestamp:return $N(t);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:return p0(t);default:return p0(t)}},p0=e=>e,ON=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},FN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},MN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},RN=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const l=e.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>J2(t,o))}return e},$N=e=>typeof e=="string"?e.replace(" ","T"):e,K2=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class sf{constructor(t,n,r={},a=m0){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mg||(Mg={}));class Cc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cc.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=Cc.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Cc.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),l=this.transformState(n),o={},d={};return this.map(i,(u,p)=>{l[u]||(d[u]=p)}),this.map(l,(u,p)=>{const f=i[u];if(f){const N=p.map(C=>C.presence_ref),h=f.map(C=>C.presence_ref),b=p.filter(C=>h.indexOf(C.presence_ref)<0),j=f.filter(C=>N.indexOf(C.presence_ref)<0);b.length>0&&(o[u]=b),j.length>0&&(d[u]=j)}else o[u]=p}),this.syncDiff(i,{joins:o,leaves:d},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(o,d)=>{var u;const p=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(d),p.length>0){const f=t[o].map(h=>h.presence_ref),N=p.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...N)}r(o,p,d)}),this.map(l,(o,d)=>{let u=t[o];if(!u)return;const p=d.map(f=>f.presence_ref);u=u.filter(f=>p.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,d),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Rg||(Rg={}));var Ac;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ac||(Ac={}));var ia;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ia||(ia={}));class Pp{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ss.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sf(this,gr.join,this.params,this.timeout),this.rejoinTimer=new Y2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ss.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ss.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ss.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ss.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ss.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Cc(this),this.broadcastEndpointURL=K2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ss.closed){const{config:{broadcast:l,presence:o,private:d}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Ac.PRESENCE]&&this.bindings[Ac.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},N={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:p}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(ia.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(ia.CLOSED)),this.updateJoinPayload(Object.assign({config:N},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var b;if(this.socket.setAuth(),h===void 0){t==null||t(ia.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,C=(b=j==null?void 0:j.length)!==null&&b!==void 0?b:0,x=[];for(let g=0;g<C;g++){const y=j[g],{filter:{event:A,schema:P,table:_,filter:T}}=y,S=h&&h[g];if(S&&S.event===A&&S.schema===P&&S.table===_&&S.filter===T)x.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=Ss.errored,t==null||t(ia.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ia.SUBSCRIBED);return}}).receive("error",h=>{this.state=Ss.errored,t==null||t(ia.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ia.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ss.joined&&t===Ac.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,d;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ss.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new sf(this,gr.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ss.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sf(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>EN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:d,leave:u,join:p}=gr;if(r&&[o,d,u,p].indexOf(l)>=0&&r!==this._joinRef())return;let N=this._onMessage(l,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var b,j,C;return((b=h.filter)===null||b===void 0?void 0:b.event)==="*"||((C=(j=h.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===l}).map(h=>h.callback(N,r)):(i=this.bindings[l])===null||i===void 0||i.filter(h=>{var b,j,C,x,g,y;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in h){const A=h.id,P=(b=h.filter)===null||b===void 0?void 0:b.event;return A&&((j=n.ids)===null||j===void 0?void 0:j.includes(A))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const A=(g=(x=h==null?void 0:h.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return A==="*"||A===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===l}).map(h=>{if(typeof N=="object"&&"ids"in N){const b=N.data,{schema:j,table:C,commit_timestamp:x,type:g,errors:y}=b;N=Object.assign(Object.assign({},{schema:j,table:C,commit_timestamp:x,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(b))}h.callback(N,r)})}_isClosed(){return this.state===Ss.closed}_isJoined(){return this.state===Ss.joined}_isJoining(){return this.state===Ss.joining}_isLeaving(){return this.state===Ss.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Pp.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gr.close,{},t)}_onError(t){this._on(gr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ss.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Fg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Fg(t.columns,t.old_record)),n}}const nf=()=>{},uu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BN=[1e3,2e3,5e3,1e4],UN=1e4,zN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qN{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=m0,this.transport=null,this.heartbeatIntervalMs=uu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nf,this.ref=0,this.reconnectTimer=null,this.logger=nf,this.conn=null,this.sendBuffer=[],this.serializer=new DN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>si(async()=>{const{default:o}=await Promise.resolve().then(()=>No);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${f0.websocket}`,this.httpEndpoint=K2(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:PN}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _c.connecting:return Ai.Connecting;case _c.open:return Ai.Open;case _c.closing:return Ai.Closing;default:return Ai.Closed}}isConnected(){return this.connectionState()===Ai.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new Pp(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var d;(d=this.conn)===null||d===void 0||d.send(o)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(LN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},uu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:l}=n,o=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${r} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(gr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([zN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:TN};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(gr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Y2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,l,o,d,u,p;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:m0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:uu.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:nf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:f=>BN[f-1]||UN,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,N)=>N(JSON.stringify(f)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Lp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ks(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class HN extends Lp{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class x0 extends Lp{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var VN=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};const X2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>No);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},WN=()=>VN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield si(()=>Promise.resolve().then(()=>No),void 0)).Response:Response}),g0=e=>{if(Array.isArray(e))return e.map(n=>g0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=g0(r)}),t},GN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Vi=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};const rf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YN=(e,t,n)=>Vi(void 0,void 0,void 0,function*(){const r=yield WN();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,l=(a==null?void 0:a.statusCode)||i+"";t(new HN(rf(a),i,l))}).catch(a=>{t(new x0(rf(a),a))}):t(new x0(rf(e),e))}),JN=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(GN(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function nd(e,t,n,r,a,i){return Vi(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(n,JN(t,r,a,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>YN(d,o,r))})})}function ih(e,t,n,r){return Vi(this,void 0,void 0,function*(){return nd(e,"GET",t,n,r)})}function Fr(e,t,n,r,a){return Vi(this,void 0,void 0,function*(){return nd(e,"POST",t,r,a,n)})}function v0(e,t,n,r,a){return Vi(this,void 0,void 0,function*(){return nd(e,"PUT",t,r,a,n)})}function KN(e,t,n,r){return Vi(this,void 0,void 0,function*(){return nd(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Q2(e,t,n,r,a){return Vi(this,void 0,void 0,function*(){return nd(e,"DELETE",t,r,a,n)})}var ln=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};const XN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$g={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QN{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=X2(a)}uploadOrUpdate(t,n,r,a){return ln(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},$g),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,d&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const u=this._removeEmptyFolders(n),p=this._getFinalPath(u),f=yield(t=="PUT"?v0:Fr)(this.fetch,`${this.url}/object/${p}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(ks(i))return{data:null,error:i};throw i}})}upload(t,n,r){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return ln(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",n);try{let d;const u=Object.assign({upsert:$g.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const f=yield v0(this.fetch,o.toString(),d,{headers:p});return{data:{path:i,fullPath:f.Key},error:null}}catch(d){if(ks(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,n){return ln(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield Fr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new Lp("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}update(t,n,r){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ln(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}copy(t,n,r){return ln(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return ln(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Fr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return ln(this,void 0,void 0,function*(){try{const a=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}download(t,n){return ln(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ih(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ks(o))return{data:null,error:o};throw o}})}info(t){return ln(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ih(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:g0(r),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}exists(t){return ln(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield KN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ks(r)&&r instanceof x0){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(t){return ln(this,void 0,void 0,function*(){try{return{data:yield Q2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ks(n))return{data:null,error:n};throw n}})}list(t,n,r){return ln(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},XN),n),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(ks(a))return{data:null,error:a};throw a}})}listV2(t,n){return ln(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const ZN="2.11.1",ej={"X-Client-Info":`storage-js/${ZN}`};var kl=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};class tj{constructor(t,n={},r,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ej),n),this.fetch=X2(r)}listBuckets(){return kl(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ks(t))return{data:null,error:t};throw t}})}getBucket(t){return kl(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ks(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return kl(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return kl(this,void 0,void 0,function*(){try{return{data:yield v0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ks(r))return{data:null,error:r};throw r}})}emptyBucket(t){return kl(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ks(n))return{data:null,error:n};throw n}})}deleteBucket(t){return kl(this,void 0,void 0,function*(){try{return{data:yield Q2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ks(n))return{data:null,error:n};throw n}})}}class sj extends tj{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new QN(this.url,this.headers,t,this.fetch)}}const nj="2.57.2";let xc="";typeof Deno<"u"?xc="deno":typeof document<"u"?xc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xc="react-native":xc="node";const rj={"X-Client-Info":`supabase-js-${xc}/${nj}`},aj={headers:rj},ij={schema:"public"},lj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oj={};var cj=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};const dj=e=>{let t;return e?t=e:typeof fetch>"u"?t=M2:t=fetch,(...n)=>t(...n)},uj=()=>typeof Headers>"u"?R2:Headers,hj=(e,t,n)=>{const r=dj(n),a=uj();return(i,l)=>cj(void 0,void 0,void 0,function*(){var o;const d=(o=yield t())!==null&&o!==void 0?o:e;let u=new a(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},l),{headers:u}))})};var mj=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};function fj(e){return e.endsWith("/")?e:e+"/"}function pj(e,t){var n,r;const{db:a,auth:i,realtime:l,global:o}=e,{db:d,auth:u,realtime:p,global:f}=t,N={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},p),l),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>mj(this,void 0,void 0,function*(){return""})};return e.accessToken?N.accessToken=e.accessToken:delete N.accessToken,N}const Z2="2.71.1",El=30*1e3,b0=3,af=b0*El,xj="http://localhost:9999",gj="supabase.auth.token",vj={"X-Client-Info":`gotrue-js/${Z2}`},y0="X-Supabase-Api-Version",eb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yj=10*60*1e3;class Ep extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ht(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wj extends Ep{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Nj(e){return ht(e)&&e.name==="AuthApiError"}class tb extends Ep{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ci extends Ep{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Oa extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jj(e){return ht(e)&&e.name==="AuthSessionMissingError"}class hu extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mu extends ci{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fu extends ci{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Sj(e){return ht(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bg extends ci{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class w0 extends ci{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function lf(e){return ht(e)&&e.name==="AuthRetryableFetchError"}class Ug extends ci{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class N0 extends ci{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const lh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zg=` 	
\r=`.split(""),kj=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<zg.length;t+=1)e[zg[t].charCodeAt(0)]=-2;for(let t=0;t<lh.length;t+=1)e[lh[t].charCodeAt(0)]=t;return e})();function qg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(lh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(lh[r]),t.queuedBits-=6}}function sb(e,t,n){const r=kj[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hg(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{Aj(l,r,n)};for(let l=0;l<e.length;l+=1)sb(e.charCodeAt(l),a,i);return t.join("")}function _j(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Cj(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}_j(r,t)}}function Aj(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Tj(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)sb(e.charCodeAt(a),n,r);return new Uint8Array(t)}function Pj(e){const t=[];return Cj(e,n=>t.push(n)),new Uint8Array(t)}function Lj(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>qg(a,n,r)),qg(null,n,r),t.join("")}function Ej(e){return Math.round(Date.now()/1e3)+e}function Dj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const mr=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},nb=()=>{if(!mr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function Ij(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const rb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>No);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Oj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Dl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ji=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ea=async(e,t)=>{await e.removeItem(t)};class Oh{constructor(){this.promise=new Oh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Oh.promiseConstructor=Promise;function of(e){const t=e.split(".");if(t.length!==3)throw new N0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!bj.test(t[r]))throw new N0("JWT not in base64url format");return{header:JSON.parse(Hg(t[0])),payload:JSON.parse(Hg(t[1])),signature:Tj(t[2]),raw:{header:t[0],payload:t[1]}}}async function Fj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Mj(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){r(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function Rj(e){return("0"+e.toString(16)).substr(-2)}function $j(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,Rj).join("")}async function Bj(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Uj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Bj(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _l(e,t,n=!1){const r=$j();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Dl(e,`${t}-code-verifier`,a);const i=await Uj(r);return[i,r===i?"plain":"s256"]}const zj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qj(e){const t=e.headers.get(y0);if(!t||!t.match(zj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Hj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Vj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Cl(e){if(!Wj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vg(e){return JSON.parse(JSON.stringify(e))}var Gj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const _i=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yj=[502,503,504];async function Wg(e){var t;if(!Oj(e))throw new w0(_i(e),0);if(Yj.includes(e.status))throw new w0(_i(e),e.status);let n;try{n=await e.json()}catch(i){throw new tb(_i(i),i)}let r;const a=qj(e);if(a&&a.getTime()>=eb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ug(_i(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Oa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Ug(_i(n),e.status,n.weak_password.reasons);throw new wj(_i(n),e.status||500,r)}const Jj=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function xt(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[y0]||(i[y0]=eb["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await Kj(e,t,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function Kj(e,t,n,r,a,i){const l=Jj(t,r,a,i);let o;try{o=await e(n,Object.assign({},l))}catch(d){throw console.error(d),new w0(_i(d),0)}if(o.ok||await Wg(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(d){await Wg(d)}}function ra(e){var t;let n=null;e4(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Ej(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Gg(e){const t=ra(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ba(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xj(e){return{data:e,error:null}}function Qj(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,l=Gj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:o,user:d},error:null}}function Zj(e){return e}function e4(e){return e.access_token&&e.refresh_token&&e.expires_in}const df=["global","local","others"];var t4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class s4{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=rb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=df[0]){if(df.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${df.join(", ")}`);try{return await xt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ht(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ba})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=t4(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Qj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ht(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ba})}catch(n){if(ht(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,l,o,d;try{const u={nextPage:null,lastPage:0,total:0},p=await xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Zj});if(p.error)throw p.error;const f=await p.json(),N=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,h=(d=(o=p.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&d!==void 0?d:[];return h.length>0&&(h.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(b.split(";")[1].split("=")[1]);u[`${C}Page`]=j}),u.total=parseInt(N)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ht(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Cl(t);try{return await xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ba})}catch(n){if(ht(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Cl(t);try{return await xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ba})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Cl(t);try{return await xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ba})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Cl(t.userId);try{const{data:n,error:r}=await xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(ht(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Cl(t.userId),Cl(t.id);try{return{data:await xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ht(n))return{data:null,error:n};throw n}}}function Yg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function n4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Al={debug:!!(globalThis&&nb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ab extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class r4 extends ab{}async function a4(e,t,n){Al.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Al.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Al.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Al.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Al.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new r4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Al.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}n4();const i4={url:xj,storageKey:gj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jg(e,t,n){return await n()}const Tl={};class Gc{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gc.nextInstanceID,Gc.nextInstanceID+=1,this.instanceID>0&&mr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},i4),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new s4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=rb(a.fetch),this.lock=a.lock||Jg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:mr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=a4:this.lock=Jg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:nb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),mr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Tl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Tl[this.storageKey]=Object.assign(Object.assign({},Tl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Tl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Tl[this.storageKey]=Object.assign(Object.assign({},Tl[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Z2}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Ij(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),mr()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Sj(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ht(n)?{error:n}:{error:new tb("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ra}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(ht(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:p,password:f,options:N}=t;let h=null,b=null;this.flowType==="pkce"&&([h,b]=await _l(this.storage,this.storageKey)),i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:p,password:f,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:h,code_challenge_method:b},xform:ra})}else if("phone"in t){const{phone:p,password:f,options:N}=t;i=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(a=N==null?void 0:N.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:ra})}else throw new mu("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const d=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(ht(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:l,options:o}=t;n=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gg})}else if("phone"in t){const{phone:i,password:l,options:o}=t;n=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gg})}else throw new mu("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hu}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(ht(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,i,l,o,d,u,p,f,N,h;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:C,wallet:x,statement:g,options:y}=t;let A;if(mr())if(typeof x=="object")A=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))A=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=x}const P=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const _=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),g?{statement:g}:null));let T;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")T=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)T=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)b=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),j=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(a=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(p=y==null?void 0:y.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const _=await A.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=_}}try{const{data:C,error:x}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Lj(j)},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ra});if(x)throw x;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new hu}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:x})}catch(C){if(ht(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(t){const n=await ji(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:l}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ra});if(await Ea(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(ht(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:l}=t,o=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ra}),{data:d,error:u}=o;return u?{data:{user:null,session:null},error:u}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new hu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:u})}catch(n){if(ht(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,l;try{if("email"in t){const{email:o,options:d}=t;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await _l(this.storage,this.storageKey));const{error:f}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:d}=t,{data:u,error:p}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new mu("You must provide either an email or phone number.")}catch(o){if(ht(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:o}=await xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ra});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,u=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(a){if(ht(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await _l(this.storage,this.storageKey)),await xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:Xj})}catch(i){if(ht(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Oa;const{error:a}=await xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ht(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:l}=await xt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:l,error:o}=await xt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new mu("You must provide either an email or phone number and a type")}catch(n){if(ht(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<af:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await ji(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=cf()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,u,p)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,u,p))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ba}):await this._useSession(async n=>{var r,a,i;const{data:l,error:o}=n;if(o)throw o;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oa}:await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ba})})}catch(n){if(ht(n))return jj(n)&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Oa;const l=a.session;let o=null,d=null;this.flowType==="pkce"&&t.email!=null&&([o,d]=await _l(this.storage,this.storageKey));const{data:u,error:p}=await xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:d}),jwt:l.access_token,xform:Ba});if(p)throw p;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(ht(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Oa;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:l}=of(t.access_token);if(l.exp&&(r=l.exp,a=r<=n),a){const{session:o,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ht(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:o}=n;if(o)throw o;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Oa;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ht(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!mr())throw new fu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Bg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bg("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:d,token_type:u}=t;if(!i||!o||!l||!u)throw new fu("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(o);let N=p+f;d&&(N=parseInt(d));const h=N-p;h*1e3<=El&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const b=N-f;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,N,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,N,p);const{data:j,error:C}=await this._getUser(i);if(C)throw C;const x={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:N,refresh_token:l,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(ht(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ji(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const l=(r=a.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(Nj(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Dj(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await _l(this.storage,this.storageKey,!0));try{return await xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ht(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ht(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var l,o,d,u,p;const{data:f,error:N}=i;if(N)throw N;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await xt(this.fetch,"GET",h,{headers:this.headers,jwt:(p=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return mr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ht(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)throw l;return await xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ht(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Mj(async a=>(a>0&&await Fj(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ra})),(a,i)=>{const l=200*Math.pow(2,a);return i&&lf(i)&&Date.now()+l-r<El})}catch(r){if(this._debug(n,"error",r),ht(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),mr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ji(this.storage,this.storageKey);if(a&&this.userStorage){let l=await ji(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Dl(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:cf()}else if(a&&!a.user&&!a.user){const l=await ji(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ea(this.storage,this.storageKey+"-user"),await Dl(this.storage,this.storageKey,a)):a.user=cf()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<af;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${af}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),lf(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Oa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Oh;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Oa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),ht(i)){const l={session:null,error:i};return lf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Dl(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Vg(a);await Dl(this.storage,this.storageKey,i)}else{const a=Vg(n);await Dl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ea(this.storage,this.storageKey),await Ea(this.storage,this.storageKey+"-code-verifier"),await Ea(this.storage,this.storageKey+"-user"),this.userStorage&&await Ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&mr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),El);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/El);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${El}ms, refresh threshold is ${b0} ticks`),a<=b0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ab)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await _l(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ht(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:l}=n;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:u}=await xt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(ht(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:l,error:o}=await xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ht(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ht(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=of(a.access_token);let o=null;l.aal&&(o=l.aal);let d=o;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=l.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+yj>a)return r;const{data:i,error:l}=await xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:h,error:b}=await this.getSession();if(b||!h.session)return{data:null,error:b};r=h.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:d}}=of(r);n!=null&&n.allowExpired||Hj(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:a,signature:l},error:null}}const p=Vj(a.alg),f=await crypto.subtle.importKey("jwk",u,p,!0,["verify"]);if(!await crypto.subtle.verify(p,f,l,Pj(`${o}.${d}`)))throw new N0("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(r){if(ht(r))return{data:null,error:r};throw r}}}Gc.nextInstanceID=0;const l4=Gc;class o4 extends l4{constructor(t){super(t)}}var c4=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function o(p){try{u(r.next(p))}catch(f){l(f)}}function d(p){try{u(r.throw(p))}catch(f){l(f)}}function u(p){p.done?i(p.value):a(p.value).then(o,d)}u((r=r.apply(e,t||[])).next())})};class d4{constructor(t,n,r){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=fj(t),d=new URL(o);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const u=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:ij,realtime:oj,auth:Object.assign(Object.assign({},lj),{storageKey:u}),global:aj},f=pj(r??{},p);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(N,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=hj(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new _N(new URL("rest/v1",d).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new sj(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new rN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return c4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:l,flowType:o,lock:d,debug:u},p,f){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o4({url:this.authUrl.href,headers:Object.assign(Object.assign({},N),p),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:o,lock:d,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new qN(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u4=(e,t,n)=>new d4(e,t,n);function h4(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}h4()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ib="https://mzbzvupalrdmerpxqwxo.supabase.co",m4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16Ynp2dXBhbHJkbWVycHhxd3hvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NDk4MDYsImV4cCI6MjA3NzIyNTgwNn0.twnzj1cyjc2-_A5Ytfpp35dwZrejJQhngAsFDnb_0J0",Il=()=>ib!=="your-supabase-project-url",Fe=u4(ib,m4,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),f4={user:null,session:null,isAuthenticated:!1,isLoading:!0,registeredAgents:[]},p4=(e,t)=>{switch(t.type){case"SET_SESSION":return{...e,user:t.payload.user,session:t.payload.session,isAuthenticated:!!t.payload.user,isLoading:!1};case"SET_LOADING":return{...e,isLoading:t.payload};case"LOGOUT":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1};case"SET_REGISTERED_AGENTS":return{...e,registeredAgents:t.payload};case"ADD_AGENT_REGISTRATION":return{...e,registeredAgents:[...e.registeredAgents,t.payload]};case"UPDATE_AGENT_STATUS":return{...e,registeredAgents:e.registeredAgents.map(n=>n.id===t.payload.id?{...n,status:t.payload.status}:n)};case"DELETE_AGENT":return{...e,registeredAgents:e.registeredAgents.filter(n=>n.id!==t.payload)};default:return e}},lb=ce.createContext(null),x4=({children:e})=>{const[t,n]=ce.useReducer(p4,f4);ce.useEffect(()=>{if((async()=>{if(!Fe){console.log("Running in demo mode - no Supabase connection"),n({type:"SET_LOADING",payload:!1});return}try{const{data:{session:b}}=await Fe.auth.getSession();if(b!=null&&b.user){const j=await r(b.user.id);n({type:"SET_SESSION",payload:{user:j,session:b}})}else n({type:"SET_LOADING",payload:!1})}catch(b){console.error("Auth initialization error:",b),n({type:"SET_LOADING",payload:!1})}})(),Fe){const{data:{subscription:b}}=Fe.auth.onAuthStateChange((j,C)=>{(async()=>{if(C!=null&&C.user){const x=await r(C.user.id);n({type:"SET_SESSION",payload:{user:x,session:C}})}else n({type:"LOGOUT"})})()});return()=>b.unsubscribe()}},[]),ce.useEffect(()=>{(async()=>{if(!(!t.user||t.user.role!=="admin"))try{const{data:b,error:j}=await Fe.from("agent_registrations").select("*").order("created_at",{ascending:!1});if(j){console.error("Error loading agent registrations:",j);return}n({type:"SET_REGISTERED_AGENTS",payload:b||[]})}catch(b){console.error("Error loading agent registrations:",b)}})()},[t.user]);const r=async h=>{if(!Fe)return null;try{const{data:b,error:j}=await Fe.from("profiles").select("*").eq("id",h).maybeSingle();return j?(console.error("Error fetching profile:",j),null):b||(console.error("Profile not found for user:",h),null)}catch(b){return console.error("Error fetching profile:",b),null}},a=async(h,b)=>{var j;n({type:"SET_LOADING",payload:!0});try{if(!Il()||!Fe)return console.error("Supabase not configured"),n({type:"SET_LOADING",payload:!1}),{success:!1,error:"Supabase not configured"};console.log("Attempting login for:",h);const{data:C,error:x}=await Fe.auth.signInWithPassword({email:h,password:b});if(x)return console.error("Login error:",x),n({type:"SET_LOADING",payload:!1}),{success:!1,error:x.message};if(console.log("Login successful, user:",(j=C.user)==null?void 0:j.id),C.user){console.log("Fetching profile for user:",C.user.id);const g=await r(C.user.id);if(console.log("Profile fetched:",g),g)return console.log("Setting session with profile:",g.role),n({type:"SET_SESSION",payload:{user:g,session:C.session}}),n({type:"SET_LOADING",payload:!1}),{success:!0};console.error("Profile not found for user:",C.user.id)}return n({type:"SET_LOADING",payload:!1}),{success:!1,error:"Profile not found"}}catch(C){return console.error("Unexpected login error:",C),n({type:"SET_LOADING",payload:!1}),{success:!1,error:"An unexpected error occurred"}}},i=async()=>{Fe&&await Fe.auth.signOut(),n({type:"LOGOUT"})},l=async(h,b,j)=>{if(!Fe){const C={id:`demo-${j.role}-${Date.now()}`,email:h,full_name:j.full_name,role:j.role,company_name:j.company_name||null,company_logo:null,phone_number:null,address:null};return n({type:"SET_SESSION",payload:{user:C,session:null}}),{success:!0}}try{const{data:C,error:x}=await Fe.auth.signUp({email:h,password:b,options:{data:{full_name:j.full_name,role:j.role,company_name:j.company_name}}});return x?{success:!1,error:x.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},o=async h=>{try{if(Il()&&Fe){const{data:y,error:A}=await Fe.from("agent_registrations").insert([{company_name:h.companyName,company_logo:h.companyLogo,address:h.address,email:h.email,phone_no:h.phoneNo,username:h.username}]).select().single();return A?{success:!1,message:A.message}:(n({type:"ADD_AGENT_REGISTRATION",payload:y}),{success:!0,message:"Registration successful! Your account is pending admin approval."})}const b={id:Date.now().toString(),company_name:h.companyName,company_logo:h.companyLogo||null,address:h.address,email:h.email,phone_no:h.phoneNo,username:h.username,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),approved_by:null,approved_at:null},j=localStorage.getItem("registeredAgents")||"[]",C=JSON.parse(j),x=C.some(y=>y.email===h.email),g=C.some(y=>y.username===h.username);return x||g?{success:!1,message:"Email or username already exists"}:(C.push(b),localStorage.setItem("registeredAgents",JSON.stringify(C)),n({type:"ADD_AGENT_REGISTRATION",payload:b}),{success:!0,message:"Registration successful! Your account is pending admin approval."})}catch{return{success:!1,message:"An unexpected error occurred"}}},d=async(h,b)=>{var j;if(!t.user||t.user.role!=="admin")return{success:!1,message:"Unauthorized"};try{if(Il()&&Fe){const{error:y}=await Fe.from("agent_registrations").update({status:b,approved_by:(j=t.user)==null?void 0:j.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",h);if(y)return{success:!1,message:y.message}}const C=localStorage.getItem("registeredAgents")||"[]",g=JSON.parse(C).map(y=>y.id===h?{...y,status:b,approved_by:t.user.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}:y);return localStorage.setItem("registeredAgents",JSON.stringify(g)),n({type:"UPDATE_AGENT_STATUS",payload:{id:h,status:b}}),{success:!0,message:`Agent ${b} successfully`}}catch{return{success:!1,message:"An unexpected error occurred"}}},u=async h=>{if(!t.user||t.user.role!=="admin")return{success:!1,message:"Unauthorized"};try{if(Il()&&Fe){const{error:x}=await Fe.from("agent_registrations").delete().eq("id",h);if(x)return{success:!1,message:x.message}}const b=localStorage.getItem("registeredAgents")||"[]",C=JSON.parse(b).filter(x=>x.id!==h);return localStorage.setItem("registeredAgents",JSON.stringify(C)),n({type:"DELETE_AGENT",payload:h}),{success:!0,message:"Agent deleted successfully"}}catch{return{success:!1,message:"An unexpected error occurred"}}},p=async(h,b)=>{try{if(Il()&&Fe){const{error:j}=await Fe.from("profiles").update({company_name:b.companyName,company_logo:b.companyLogo,updated_at:new Date().toISOString()}).eq("id",h);if(j)return{success:!1,message:j.message}}if(t.user&&t.user.id===h){const j={...t.user,company_name:b.companyName,company_logo:b.companyLogo};n({type:"SET_SESSION",payload:{user:j,session:t.session}})}return{success:!0,message:"Profile updated successfully"}}catch{return{success:!1,message:"An unexpected error occurred"}}},f=async h=>{if(!Fe)return{success:!0,message:"Password reset email sent! (Demo mode - no actual email sent)"};try{const{error:b}=await Fe.auth.resetPasswordForEmail(h);return b?{success:!1,message:b.message}:{success:!0,message:"Password reset email sent! Check your inbox."}}catch{return{success:!1,message:"Failed to send reset email. Please try again."}}},N=async(h,b)=>Fe?{success:!0,message:"Password updated successfully!"}:{success:!0,message:"Password updated successfully! (Demo mode)"};return s.jsx(lb.Provider,{value:{state:t,login:a,logout:i,signUp:l,registerAgent:o,updateAgentStatus:d,deleteAgent:u,updateAgentProfile:p,forgotPassword:f,resetPassword:N,dispatch:n},children:e})},Yt=()=>{const e=ce.useContext(lb);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ke=(e,t)=>{const n=ce.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:d,...u},p)=>ce.createElement("svg",{ref:p,...g4,width:a,height:a,stroke:r,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${v4(e)}`,o].join(" "),...u},[...t.map(([f,N])=>ce.createElement(f,N)),...Array.isArray(d)?d:[d]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Ke("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Ke("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Ke("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ke("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Ke("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Ke("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Ke("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Ke("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Ke("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Ke("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ke("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ke("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=Ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Ke("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=Ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Ke("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Ke("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Ke("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=Ke("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=Ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ke("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Ke("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),E4=({onBack:e,onSuccess:t})=>{const{registerAgent:n}=Yt(),[r,a]=ce.useState(!1),[i,l]=ce.useState(!1),[o,d]=ce.useState(!1),[u,p]=ce.useState(null),[f,N]=ce.useState({companyName:"",address:"",email:"",phoneNo:"",username:"",password:"",confirmPassword:""}),[h,b]=ce.useState({}),j=()=>{const g={};return f.companyName.trim()||(g.companyName="Company name is required"),f.address.trim()||(g.address="Address is required"),f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(g.email="Please enter a valid email address"):g.email="Email is required",f.phoneNo.trim()?/^\+?[\d\s-()]{10,}$/.test(f.phoneNo)||(g.phoneNo="Please enter a valid phone number"):g.phoneNo="Phone number is required",f.username.trim()?f.username.length<3&&(g.username="Username must be at least 3 characters"):g.username="Username is required",f.password?f.password.length<6&&(g.password="Password must be at least 6 characters"):g.password="Password is required",f.confirmPassword?f.password!==f.confirmPassword&&(g.confirmPassword="Passwords do not match"):g.confirmPassword="Please confirm your password",b(g),Object.keys(g).length===0},C=async g=>{if(g.preventDefault(),!!j()){a(!0),p(null);try{const y=await n({companyName:f.companyName,address:f.address,email:f.email,phoneNo:f.phoneNo,username:f.username,password:f.password});y.success?(p({type:"success",text:y.message}),setTimeout(()=>{t()},2e3)):p({type:"error",text:y.message})}catch{p({type:"error",text:"Registration failed. Please try again."})}finally{a(!1)}}},x=(g,y)=>{N({...f,[g]:y}),h[g]&&b({...h,[g]:""})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-2xl w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Wi,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(_t,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Agent Registration"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Join Nomadller Solutions as a Travel Agent"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[u&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${u.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[u.type==="success"?s.jsx(Xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(So,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${u.type==="success"?"text-green-700":"text-red-700"}`,children:u.text})]}),s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(_t,{className:"h-5 w-5 mr-2 text-teal-600"}),"Company Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.companyName,onChange:g=>x("companyName",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.companyName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter your company name",disabled:r})]}),h.companyName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(qr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:f.phoneNo,onChange:g=>x("phoneNo",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.phoneNo?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter phone number",disabled:r})]}),h.phoneNo&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.phoneNo})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pt,{className:"h-5 w-5 text-slate-400 absolute left-3 top-3"}),s.jsx("textarea",{value:f.address,onChange:g=>x("address",g.target.value),rows:3,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors resize-none ${h.address?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter complete company address",disabled:r})]}),h.address&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(zi,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:f.email,onChange:g=>x("email",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.email?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter email address",disabled:r})]}),h.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.email})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(vo,{className:"h-5 w-5 mr-2 text-teal-600"}),"Login Credentials"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Username *"}),s.jsxs("div",{className:"relative",children:[s.jsx(vo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.username,onChange:g=>x("username",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.username?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Choose a username",disabled:r})]}),h.username&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.username})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:i?"text":"password",value:f.password,onChange:g=>x("password",g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.password?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Create a password",disabled:r}),s.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:r,children:i?s.jsx(Jc,{className:"h-5 w-5"}):s.jsx(ni,{className:"h-5 w-5"})})]}),h.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:o?"text":"password",value:f.confirmPassword,onChange:g=>x("confirmPassword",g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Confirm your password",disabled:r}),s.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:r,children:o?s.jsx(Jc,{className:"h-5 w-5"}):s.jsx(ni,{className:"h-5 w-5"})})]}),h.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.confirmPassword})]})]})]}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-slate-600",children:"By registering, you agree to our Terms of Service and Privacy Policy. Your account will be activated after admin approval."})}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-teal-600 to-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-teal-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:r?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Agent Account"})]})]})]})})})},D4=({onBack:e})=>{const{forgotPassword:t}=Yt(),[n,r]=ce.useState(""),[a,i]=ce.useState(!1),[l,o]=ce.useState(null),d=async u=>{if(u.preventDefault(),!n.trim()){o({type:"error",text:"Please enter your email address"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){o({type:"error",text:"Please enter a valid email address"});return}i(!0),o(null);try{const p=await t(n);o({type:p.success?"success":"error",text:p.message}),p.success&&setTimeout(()=>{e()},3e3)}catch{o({type:"error",text:"Failed to send reset email. Please try again."})}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Wi,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(zi,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Forgot Password"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Reset your account password"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsx("p",{className:"text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})}),l&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${l.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.type==="success"?s.jsx(Xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(So,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-700":"text-red-700"}`,children:l.text})]}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(zi,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:n,onChange:u=>r(u.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email address",disabled:a,required:!0})]})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:a?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending Reset Link..."})]}):"Send Reset Link"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Back to Login"})})]})]})})})},I4=({onBack:e,onSuccess:t})=>{const{signUp:n}=Yt(),[r,a]=ce.useState(!1),[i,l]=ce.useState(!1),[o,d]=ce.useState(!1),[u,p]=ce.useState(null),[f,N]=ce.useState({email:"",password:"",confirmPassword:"",fullName:"",role:"agent",companyName:""}),[h,b]=ce.useState({}),j=()=>{const g={};return f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(g.email="Please enter a valid email address"):g.email="Email is required",f.fullName.trim()||(g.fullName="Full name is required"),f.role==="agent"&&!f.companyName.trim()&&(g.companyName="Company name is required for agents"),f.password?f.password.length<6&&(g.password="Password must be at least 6 characters"):g.password="Password is required",f.confirmPassword?f.password!==f.confirmPassword&&(g.confirmPassword="Passwords do not match"):g.confirmPassword="Please confirm your password",b(g),Object.keys(g).length===0},C=async g=>{if(g.preventDefault(),!!j()){a(!0),p(null);try{const y=await n(f.email,f.password,{full_name:f.fullName,role:f.role,company_name:f.role==="agent"?f.companyName:void 0});y.success?(p({type:"success",text:"Account created successfully! Please check your email to verify your account."}),setTimeout(()=>{t()},2e3)):p({type:"error",text:y.error||"Registration failed"})}catch{p({type:"error",text:"Registration failed. Please try again."})}finally{a(!1)}}},x=(g,y)=>{N({...f,[g]:y}),h[g]&&b({...h,[g]:""})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Wi,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(vo,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Create Account"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Join Nomadller Solutions"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[u&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${u.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[u.type==="success"?s.jsx(Xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(So,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${u.type==="success"?"text-green-700":"text-red-700"}`,children:u.text})]}),s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(zi,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:f.email,onChange:g=>x("email",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${h.email?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your email address",disabled:r})]}),h.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(vo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.fullName,onChange:g=>x("fullName",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${h.fullName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your full name",disabled:r})]}),h.fullName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.fullName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Type *"}),s.jsxs("select",{value:f.role,onChange:g=>x("role",g.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:r,children:[s.jsx("option",{value:"agent",children:"Travel Agent"}),s.jsx("option",{value:"admin",children:"Administrator"})]})]}),(f.role==="agent"||f.role==="sales")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.companyName,onChange:g=>x("companyName",g.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${h.companyName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your company name",disabled:r})]}),h.companyName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:i?"text":"password",value:f.password,onChange:g=>x("password",g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${h.password?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Create a password",disabled:r}),s.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:r,children:i?s.jsx(Jc,{className:"h-5 w-5"}):s.jsx(ni,{className:"h-5 w-5"})})]}),h.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:o?"text":"password",value:f.confirmPassword,onChange:g=>x("confirmPassword",g.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${h.confirmPassword?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Confirm your password",disabled:r}),s.jsx("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:r,children:o?s.jsx(Jc,{className:"h-5 w-5"}):s.jsx(ni,{className:"h-5 w-5"})})]}),h.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.confirmPassword})]}),s.jsxs("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:[s.jsx("option",{value:"sales",children:"Sales Representative"}),r?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Account"]})]})]})]})})})},Xg=()=>{const{login:e,state:t}=Yt(),[n,r]=ce.useState("login"),[a,i]=ce.useState({email:"",password:""}),[l,o]=ce.useState(!1),[d,u]=ce.useState(""),p=async h=>{if(h.preventDefault(),u(""),!a.email||!a.password){u("Please enter both email and password");return}const b=await e(a.email,a.password);b.success||u(b.error||"Invalid email or password")},f=()=>{r("login")},N=()=>{r("login"),u("")};return n==="register"?s.jsx(E4,{onBack:N,onSuccess:f}):n==="forgot"?s.jsx(D4,{onBack:N}):n==="signup"?s.jsx(I4,{onBack:N,onSuccess:f}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Travel Agency Management"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[s.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Welcome Back"}),s.jsx("p",{className:"text-slate-600 mt-2 text-sm md:text-base",children:"Sign in to your account to continue"})]}),d&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-3",children:[s.jsx(So,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-700 text-sm",children:d})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(zi,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:a.email,onChange:h=>i({...a,email:h.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter your email address",disabled:t.isLoading})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:l?"text":"password",value:a.password,onChange:h=>i({...a,password:h.target.value}),className:"w-full pl-10 pr-12 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter your password",disabled:t.isLoading}),s.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:t.isLoading,children:l?s.jsx(Jc,{className:"h-5 w-5"}):s.jsx(ni,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>r("forgot"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",disabled:t.isLoading,children:"Forgot Password?"})}),s.jsx("button",{type:"submit",disabled:t.isLoading,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 text-sm md:text-base",children:t.isLoading?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Signing in..."})]}):"Sign In"})]})]})]})})})},Mh=e=>({id:e.id,name:e.name,whatsapp:e.whatsapp,countryCode:e.country_code,travelDates:{startDate:e.travel_dates_start_date||"",endDate:e.travel_dates_end_date||"",isFlexible:e.travel_dates_is_flexible,flexibleMonth:e.travel_dates_flexible_month||""},numberOfPax:{adults:e.number_of_pax_adults,children:e.number_of_pax_children},numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,createdAt:e.created_at,createdBy:e.created_by||void 0,followUpStatus:e.follow_up_status_status?{status:e.follow_up_status_status,updatedAt:e.follow_up_status_updated_at||"",remarks:e.follow_up_status_remarks||"",nextFollowUpDate:e.next_follow_up_date||void 0,nextFollowUpTime:e.next_follow_up_time||void 0}:void 0,nextFollowUpDate:e.next_follow_up_date||void 0,nextFollowUpTime:e.next_follow_up_time||void 0}),db=e=>{var t,n,r;return{id:e.id,name:e.name,whatsapp:e.whatsapp,country_code:e.countryCode,travel_dates_start_date:e.travelDates.startDate||null,travel_dates_end_date:e.travelDates.endDate||null,travel_dates_is_flexible:e.travelDates.isFlexible,travel_dates_flexible_month:e.travelDates.flexibleMonth||null,number_of_pax_adults:e.numberOfPax.adults,number_of_pax_children:e.numberOfPax.children,number_of_days:e.numberOfDays,transportation_mode:e.transportationMode,created_at:e.createdAt,created_by:e.createdBy||null,follow_up_status_status:((t=e.followUpStatus)==null?void 0:t.status)||null,follow_up_status_updated_at:((n=e.followUpStatus)==null?void 0:n.updatedAt)||null,follow_up_status_remarks:((r=e.followUpStatus)==null?void 0:r.remarks)||null,next_follow_up_date:e.nextFollowUpDate||null,next_follow_up_time:e.nextFollowUpTime||null}},Fp=e=>({id:e.id,type:e.type,vehicleName:e.vehicle_name,costPerDay:e.cost_per_day}),ub=e=>({id:e.id,type:e.type,vehicle_name:e.vehicleName,cost_per_day:e.costPerDay}),Mp=e=>({id:e.id,name:e.name,place:e.place,starCategory:e.star_category,roomTypes:e.room_types?e.room_types.map(O4):[]}),hb=e=>({id:e.id,name:e.name,place:e.place,star_category:e.starCategory}),O4=e=>({id:e.id,name:e.name,peakSeasonPrice:e.peak_season_price,seasonPrice:e.season_price,offSeasonPrice:e.off_season_price}),ch=(e,t)=>({id:e.id,hotel_id:t,name:e.name,peak_season_price:e.peakSeasonPrice,season_price:e.seasonPrice,off_season_price:e.offSeasonPrice}),Rp=e=>({id:e.id,name:e.name,description:e.description,transportationMode:e.transportation_mode,vehicleCosts:e.vehicle_costs||void 0}),mb=e=>({id:e.id,name:e.name,description:e.description,transportation_mode:e.transportationMode,vehicle_costs:e.vehicleCosts||null}),$p=e=>({id:e.id,name:e.name,location:e.location,options:e.activity_options?e.activity_options.map(F4):[]}),fb=e=>({id:e.id,name:e.name,location:e.location}),F4=e=>({id:e.id,name:e.name,cost:e.cost,costForHowMany:e.cost_for_how_many}),dh=(e,t)=>({id:e.id,activity_id:t,name:e.name,cost:e.cost,cost_for_how_many:e.costForHowMany}),Bp=e=>({id:e.id,name:e.name,cost:e.cost,sightseeingId:e.sightseeing_id}),pb=e=>({id:e.id,name:e.name,cost:e.cost,sightseeing_id:e.sightseeingId}),Up=e=>({id:e.id,type:e.type,place:e.place,cost:e.cost}),xb=e=>({id:e.id,type:e.type,place:e.place,cost:e.cost}),M4=e=>({day:e.day,sightseeing:e.sightseeing_ids||[],hotel:e.hotel_id&&e.room_type_id&&e.hotel_place?{place:e.hotel_place,hotelId:e.hotel_id,roomTypeId:e.room_type_id}:null,activities:e.activities_data||[],entryTickets:e.entry_ticket_ids||[],meals:e.meal_ids||[]}),uh=(e,t)=>{var n,r,a;return{itinerary_id:t,day:e.day,sightseeing_ids:e.sightseeing,hotel_place:((n=e.hotel)==null?void 0:n.place)||null,hotel_id:((r=e.hotel)==null?void 0:r.hotelId)||null,room_type_id:((a=e.hotel)==null?void 0:a.roomTypeId)||null,activities_data:e.activities,entry_ticket_ids:e.entryTickets,meal_ids:e.meals}},zp=e=>({id:e.id,client:e.clients?Mh(e.clients):{},dayPlans:e.day_plans?e.day_plans.map(M4):[],totalBaseCost:e.total_base_cost,profitMargin:e.profit_margin,finalPrice:e.final_price,exchangeRate:e.exchange_rate,version:e.version,lastUpdated:e.last_updated,updatedBy:e.updated_by,changeLog:[]}),gb=e=>({id:e.id,client_id:e.client.id,total_base_cost:e.totalBaseCost,profit_margin:e.profitMargin,final_price:e.finalPrice,exchange_rate:e.exchangeRate,version:e.version,last_updated:e.lastUpdated,updated_by:e.updatedBy}),qp=e=>({id:e.id,name:e.name,numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,baseCost:e.base_cost,inclusions:e.inclusions,exclusions:e.exclusions,dayPlans:e.day_plans_data||[],createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by}),vb=e=>({id:e.id,name:e.name,number_of_days:e.numberOfDays,transportation_mode:e.transportationMode,base_cost:e.baseCost,inclusions:e.inclusions,exclusions:e.exclusions,day_plans_data:e.dayPlans,created_at:e.createdAt,updated_at:e.updatedAt,created_by:e.createdBy}),R4=async()=>{if(!Fe)return null;try{const[{data:e,error:t},{data:n,error:r},{data:a,error:i},{data:l,error:o},{data:d,error:u},{data:p,error:f},{data:N,error:h},{data:b,error:j},{data:C,error:x}]=await Promise.all([Fe.from("clients").select("*"),Fe.from("transportations").select("*"),Fe.from("hotels").select("*, room_types(*)"),Fe.from("sightseeings").select("*"),Fe.from("activities").select("*, activity_options(*)"),Fe.from("entry_tickets").select("*"),Fe.from("meals").select("*"),Fe.from("itineraries").select("*, clients(*), day_plans(*)"),Fe.from("fixed_itineraries").select("*")]);if(t)throw t;if(r)throw r;if(i)throw i;if(o)throw o;if(u)throw u;if(f)throw f;if(h)throw h;if(j)throw j;if(x)throw x;return{clients:(e==null?void 0:e.map(Mh))||[],transportations:(n==null?void 0:n.map(Fp))||[],hotels:(a==null?void 0:a.map(Mp))||[],sightseeings:(l==null?void 0:l.map(Rp))||[],activities:(d==null?void 0:d.map($p))||[],entryTickets:(p==null?void 0:p.map(Bp))||[],meals:(N==null?void 0:N.map(Up))||[],itineraries:(b==null?void 0:b.map(zp))||[],fixedItineraries:(C==null?void 0:C.map(qp))||[]}}catch(e){throw console.error("Error fetching all data:",e),e}},$4=async e=>{if(!Fe)return null;const t=db(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("clients").insert(r).select().single();if(i)throw i;return Mh(a)},B4=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("clients").update(db(e)).eq("id",e.id).select().single();if(n)throw n;return Mh(t)},U4=async e=>{if(!Fe)return;const{error:t}=await Fe.from("clients").delete().eq("id",e);if(t)throw t},z4=async e=>{if(!Fe)return null;const t=ub(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("transportations").insert(r).select().single();if(i)throw i;return Fp(a)},q4=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("transportations").update(ub(e)).eq("id",e.id).select().single();if(n)throw n;return Fp(t)},H4=async e=>{if(!Fe)return;const{error:t}=await Fe.from("transportations").delete().eq("id",e);if(t)throw t},V4=async e=>{if(!Fe)return null;const t=hb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("hotels").insert(r).select().single();if(i)throw i;if(e.roomTypes.length>0){const l=e.roomTypes.map(d=>{const{id:u,...p}=ch(d,a.id);return p}),{error:o}=await Fe.from("room_types").insert(l);if(o)throw o}return Mp({...a,room_types:e.roomTypes.map(l=>ch(l,a.id))})},W4=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("hotels").update(hb(e)).eq("id",e.id).select().single();if(n)throw n;const{error:r}=await Fe.from("room_types").delete().eq("hotel_id",e.id);if(r)throw r;if(e.roomTypes.length>0){const a=e.roomTypes.map(l=>ch(l,e.id)),{error:i}=await Fe.from("room_types").insert(a);if(i)throw i}return Mp({...t,room_types:e.roomTypes.map(a=>ch(a,e.id))})},G4=async e=>{if(!Fe)return;const{error:t}=await Fe.from("hotels").delete().eq("id",e);if(t)throw t},Y4=async e=>{if(!Fe)return null;const t=mb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("sightseeings").insert(r).select().single();if(i)throw i;return Rp(a)},J4=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("sightseeings").update(mb(e)).eq("id",e.id).select().single();if(n)throw n;return Rp(t)},K4=async e=>{if(!Fe)return;const{error:t}=await Fe.from("sightseeings").delete().eq("id",e);if(t)throw t},X4=async e=>{if(!Fe)return null;const t=fb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("activities").insert(r).select().single();if(i)throw i;if(e.options.length>0){const l=e.options.map(d=>{const{id:u,...p}=dh(d,a.id);return p}),{error:o}=await Fe.from("activity_options").insert(l);if(o)throw o}return $p({...a,activity_options:e.options.map(l=>dh(l,a.id))})},Q4=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("activities").update(fb(e)).eq("id",e.id).select().single();if(n)throw n;const{error:r}=await Fe.from("activity_options").delete().eq("activity_id",e.id);if(r)throw r;if(e.options.length>0){const a=e.options.map(l=>dh(l,e.id)),{error:i}=await Fe.from("activity_options").insert(a);if(i)throw i}return $p({...t,activity_options:e.options.map(a=>dh(a,e.id))})},Z4=async e=>{if(!Fe)return;const{error:t}=await Fe.from("activities").delete().eq("id",e);if(t)throw t},e3=async e=>{if(!Fe)return null;const t=pb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("entry_tickets").insert(r).select().single();if(i)throw i;return Bp(a)},t3=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("entry_tickets").update(pb(e)).eq("id",e.id).select().single();if(n)throw n;return Bp(t)},s3=async e=>{if(!Fe)return;const{error:t}=await Fe.from("entry_tickets").delete().eq("id",e);if(t)throw t},n3=async e=>{if(!Fe)return null;const t=xb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("meals").insert(r).select().single();if(i)throw i;return Up(a)},r3=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("meals").update(xb(e)).eq("id",e.id).select().single();if(n)throw n;return Up(t)},a3=async e=>{if(!Fe)return;const{error:t}=await Fe.from("meals").delete().eq("id",e);if(t)throw t},i3=async e=>{if(!Fe)return null;const t=gb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("itineraries").insert(r).select().single();if(i)throw i;if(e.dayPlans.length>0){const l=e.dayPlans.map(d=>uh(d,a.id)),{error:o}=await Fe.from("day_plans").insert(l);if(o)throw o}return zp({...a,day_plans:e.dayPlans.map(l=>uh(l,a.id))})},l3=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("itineraries").update(gb(e)).eq("id",e.id).select().single();if(n)throw n;const{error:r}=await Fe.from("day_plans").delete().eq("itinerary_id",e.id);if(r)throw r;if(e.dayPlans.length>0){const a=e.dayPlans.map(l=>uh(l,e.id)),{error:i}=await Fe.from("day_plans").insert(a);if(i)throw i}return zp({...t,day_plans:e.dayPlans.map(a=>uh(a,e.id))})},o3=async e=>{if(!Fe)return;const{error:t}=await Fe.from("itineraries").delete().eq("id",e);if(t)throw t},c3=async e=>{if(!Fe)return null;const t=vb(e),{id:n,...r}=t,{data:a,error:i}=await Fe.from("fixed_itineraries").insert(r).select().single();if(i)throw i;return qp(a)},d3=async e=>{if(!Fe)return null;const{data:t,error:n}=await Fe.from("fixed_itineraries").update(vb(e)).eq("id",e.id).select().single();if(n)throw n;return qp(t)},u3=async e=>{if(!Fe)return;const{error:t}=await Fe.from("fixed_itineraries").delete().eq("id",e);if(t)throw t},h3=[{id:"1",type:"cab",vehicleName:"Private Cab Service",costPerDay:0},{id:"2",type:"self-drive-car",vehicleName:"Toyota Avanza",costPerDay:45},{id:"3",type:"self-drive-car",vehicleName:"Honda Brio",costPerDay:35},{id:"4",type:"self-drive-scooter",vehicleName:"Honda Vario",costPerDay:8},{id:"5",type:"self-drive-scooter",vehicleName:"Yamaha NMAX",costPerDay:12},{id:"6",type:"self-drive-car",vehicleName:"Toyota Innova",costPerDay:55},{id:"7",type:"self-drive-car",vehicleName:"Mitsubishi Pajero",costPerDay:75},{id:"8",type:"self-drive-car",vehicleName:"Daihatsu Terios",costPerDay:38},{id:"9",type:"self-drive-scooter",vehicleName:"Yamaha Aerox",costPerDay:12},{id:"10",type:"self-drive-scooter",vehicleName:"Honda ADV 150",costPerDay:15},{id:"11",type:"self-drive-scooter",vehicleName:"Vespa Primavera",costPerDay:18},{id:"12",type:"cab",vehicleName:"Luxury Car Service",costPerDay:0}],m3=[{id:"1",name:"Ubud Palace Resort",place:"Ubud",starCategory:"5-star",roomTypes:[{id:"1-1",name:"Deluxe Garden View",peakSeasonPrice:180,seasonPrice:150,offSeasonPrice:120},{id:"1-2",name:"Premium Pool View",peakSeasonPrice:220,seasonPrice:180,offSeasonPrice:150},{id:"1-3",name:"Royal Suite",peakSeasonPrice:350,seasonPrice:280,offSeasonPrice:220}]},{id:"2",name:"Seminyak Beach Hotel",place:"Seminyak",starCategory:"4-star",roomTypes:[{id:"2-1",name:"Superior Room",peakSeasonPrice:120,seasonPrice:100,offSeasonPrice:80},{id:"2-2",name:"Ocean View Room",peakSeasonPrice:160,seasonPrice:130,offSeasonPrice:110}]},{id:"3",name:"Kuta Beach Resort",place:"Kuta",starCategory:"3-star",roomTypes:[{id:"3-1",name:"Standard Room",peakSeasonPrice:80,seasonPrice:65,offSeasonPrice:50},{id:"3-2",name:"Beach View Room",peakSeasonPrice:110,seasonPrice:90,offSeasonPrice:70}]},{id:"4",name:"Sanur Sunrise Hotel",place:"Sanur",starCategory:"4-star",roomTypes:[{id:"4-1",name:"Garden Room",peakSeasonPrice:100,seasonPrice:85,offSeasonPrice:70},{id:"4-2",name:"Beachfront Suite",peakSeasonPrice:180,seasonPrice:150,offSeasonPrice:120}]},{id:"5",name:"Lovina Beach Resort",place:"Lovina",starCategory:"4-star",roomTypes:[{id:"5-1",name:"Ocean View Room",peakSeasonPrice:140,seasonPrice:115,offSeasonPrice:90},{id:"5-2",name:"Dolphin Suite",peakSeasonPrice:200,seasonPrice:165,offSeasonPrice:130}]},{id:"6",name:"Amed Beach Villa",place:"Amed",starCategory:"3-star",roomTypes:[{id:"6-1",name:"Garden Villa",peakSeasonPrice:90,seasonPrice:75,offSeasonPrice:60},{id:"6-2",name:"Sea View Villa",peakSeasonPrice:130,seasonPrice:105,offSeasonPrice:85}]},{id:"7",name:"Munduk Mountain Resort",place:"Munduk",starCategory:"4-star",roomTypes:[{id:"7-1",name:"Mountain View Room",peakSeasonPrice:120,seasonPrice:100,offSeasonPrice:80},{id:"7-2",name:"Lake View Suite",peakSeasonPrice:170,seasonPrice:140,offSeasonPrice:115}]},{id:"8",name:"Sidemen Valley Lodge",place:"Sidemen",starCategory:"3-star",roomTypes:[{id:"8-1",name:"Valley View Room",peakSeasonPrice:85,seasonPrice:70,offSeasonPrice:55}]},{id:"9",name:"Candidasa Beach Hotel",place:"Candidasa",starCategory:"4-star",roomTypes:[{id:"9-1",name:"Beach Front Room",peakSeasonPrice:150,seasonPrice:125,offSeasonPrice:100}]},{id:"10",name:"Pemuteran Bay Resort",place:"Pemuteran",starCategory:"5-star",roomTypes:[{id:"10-1",name:"Luxury Ocean Suite",peakSeasonPrice:280,seasonPrice:230,offSeasonPrice:180}]},{id:"11",name:"Tabanan Rice Field Resort",place:"Tabanan",starCategory:"4-star",roomTypes:[{id:"11-1",name:"Rice Field View Room",peakSeasonPrice:110,seasonPrice:90,offSeasonPrice:75}]},{id:"12",name:"Denpasar City Hotel",place:"Denpasar",starCategory:"3-star",roomTypes:[{id:"12-1",name:"Standard City Room",peakSeasonPrice:70,seasonPrice:60,offSeasonPrice:45},{id:"12-2",name:"Executive Room",peakSeasonPrice:95,seasonPrice:80,offSeasonPrice:65}]}],f3=[{id:"1",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"cab",vehicleCosts:{avanza:45,hiace:65,miniBus:85,bus32:120,bus39:140}},{id:"2",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"cab",vehicleCosts:{avanza:50,hiace:70,miniBus:90,bus32:125,bus39:145}},{id:"3",name:"Besakih Temple",description:"Mother temple of Bali with panoramic mountain views",transportationMode:"cab",vehicleCosts:{avanza:80,hiace:110,miniBus:140,bus32:180,bus39:210}},{id:"4",name:"Jatiluwih Rice Terraces",description:"UNESCO World Heritage rice terraces",transportationMode:"cab",vehicleCosts:{avanza:70,hiace:95,miniBus:125,bus32:160,bus39:185}},{id:"5",name:"Nusa Penida Day Trip",description:"Island adventure with pristine beaches and cliffs",transportationMode:"cab",vehicleCosts:{avanza:120,hiace:150,miniBus:180,bus32:220,bus39:250}},{id:"6",name:"Lovina Dolphin Watching",description:"Early morning dolphin watching tour",transportationMode:"cab",vehicleCosts:{avanza:90,hiace:120,miniBus:150,bus32:190,bus39:220}},{id:"7",name:"Banyumala Twin Waterfalls",description:"Hidden twin waterfalls with crystal clear pools",transportationMode:"cab",vehicleCosts:{avanza:60,hiace:85,miniBus:110,bus32:145,bus39:170}},{id:"8",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"cab",vehicleCosts:{avanza:35,hiace:50,miniBus:70,bus32:95,bus39:115}},{id:"9",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"cab",vehicleCosts:{avanza:55,hiace:75,miniBus:95,bus32:125,bus39:145}},{id:"10",name:"Goa Gajah Elephant Cave",description:"Ancient archaeological site with intricate stone carvings",transportationMode:"cab",vehicleCosts:{avanza:40,hiace:60,miniBus:80,bus32:105,bus39:125}},{id:"11",name:"Gunung Kawi Temple",description:"Ancient rock-cut temple complex in lush valley",transportationMode:"cab",vehicleCosts:{avanza:50,hiace:70,miniBus:90,bus32:120,bus39:140}},{id:"12",name:"Batukaru Temple",description:"Peaceful mountain temple surrounded by forest",transportationMode:"cab",vehicleCosts:{avanza:75,hiace:100,miniBus:130,bus32:165,bus39:190}},{id:"13",name:"Jembrana Beach Drive",description:"Scenic coastal drive with black sand beaches",transportationMode:"cab",vehicleCosts:{avanza:85,hiace:115,miniBus:145,bus32:185,bus39:215}},{id:"14",name:"Bangli Traditional Villages",description:"Cultural village tour with traditional crafts",transportationMode:"cab",vehicleCosts:{avanza:65,hiace:90,miniBus:115,bus32:150,bus39:175}},{id:"15",name:"Klungkung Royal Palace",description:"Historical palace with traditional Balinese architecture",transportationMode:"cab",vehicleCosts:{avanza:55,hiace:75,miniBus:95,bus32:125,bus39:145}},{id:"16",name:"Buleleng Waterfall Circuit",description:"Multiple waterfalls tour in northern Bali",transportationMode:"cab",vehicleCosts:{avanza:95,hiace:125,miniBus:155,bus32:195,bus39:225}},{id:"17",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"self-drive-car"},{id:"18",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"self-drive-car"},{id:"19",name:"Besakih Temple",description:"Mother temple of Bali with panoramic mountain views",transportationMode:"self-drive-car"},{id:"20",name:"Jatiluwih Rice Terraces",description:"UNESCO World Heritage rice terraces",transportationMode:"self-drive-car"},{id:"21",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"self-drive-car"},{id:"22",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"self-drive-car"},{id:"23",name:"Goa Gajah Elephant Cave",description:"Ancient archaeological site with intricate stone carvings",transportationMode:"self-drive-car"},{id:"24",name:"Gunung Kawi Temple",description:"Ancient rock-cut temple complex in lush valley",transportationMode:"self-drive-car"},{id:"25",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"self-drive-scooter"},{id:"26",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"self-drive-scooter"},{id:"27",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"self-drive-scooter"},{id:"28",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"self-drive-scooter"}],p3=[{id:"1",name:"Bali Swing",location:"Ubud",options:[{id:"1-1",name:"Single Swing",cost:25,costForHowMany:1},{id:"1-2",name:"Couple Swing",cost:40,costForHowMany:2}]},{id:"2",name:"ATV Ride",location:"Ubud",options:[{id:"2-1",name:"Single ATV",cost:35,costForHowMany:1},{id:"2-2",name:"Tandem ATV",cost:55,costForHowMany:2}]},{id:"3",name:"White Water Rafting",location:"Ubud",options:[{id:"3-1",name:"Ayung River Rafting",cost:45,costForHowMany:1},{id:"3-2",name:"Telaga Waja Rafting",cost:55,costForHowMany:1}]},{id:"4",name:"Snorkeling",location:"Amed",options:[{id:"4-1",name:"Half Day Snorkeling",cost:30,costForHowMany:1},{id:"4-2",name:"Full Day with Lunch",cost:65,costForHowMany:1}]},{id:"5",name:"Mount Batur Sunrise Hike",location:"Kintamani",options:[{id:"5-1",name:"Standard Hike with Breakfast",cost:55,costForHowMany:1},{id:"5-2",name:"Private Guide Hike",cost:85,costForHowMany:1}]},{id:"6",name:"Yoga Class",location:"Ubud",options:[{id:"6-1",name:"Group Morning Session",cost:20,costForHowMany:1},{id:"6-2",name:"Private Instruction",cost:80,costForHowMany:2}]},{id:"7",name:"Batik Making Workshop",location:"Ubud",options:[{id:"7-1",name:"Basic Workshop",cost:35,costForHowMany:1},{id:"7-2",name:"Advanced with Take-home",cost:65,costForHowMany:1}]},{id:"8",name:"Silver Jewelry Making",location:"Celuk",options:[{id:"8-1",name:"Basic Ring Making",cost:45,costForHowMany:1},{id:"8-2",name:"Custom Jewelry Design",cost:85,costForHowMany:1}]},{id:"9",name:"Wood Carving Class",location:"Mas",options:[{id:"9-1",name:"Small Sculpture",cost:40,costForHowMany:1},{id:"9-2",name:"Large Art Piece",cost:75,costForHowMany:1}]},{id:"10",name:"Kite Flying",location:"Sanur",options:[{id:"10-1",name:"Traditional Kite Experience",cost:25,costForHowMany:1},{id:"10-2",name:"Kite Making & Flying",cost:45,costForHowMany:1}]},{id:"11",name:"Fishing Trip",location:"Sanur",options:[{id:"11-1",name:"Traditional Fishing",cost:50,costForHowMany:1},{id:"11-2",name:"Deep Sea Fishing",cost:120,costForHowMany:4}]},{id:"12",name:"Photography Tour",location:"Various",options:[{id:"12-1",name:"Sunrise Photography Tour",cost:75,costForHowMany:2},{id:"12-2",name:"Full Day Workshop",cost:150,costForHowMany:4}]},{id:"13",name:"Meditation Retreat",location:"Ubud",options:[{id:"13-1",name:"Half Day Session",cost:60,costForHowMany:1},{id:"13-2",name:"Full Day Retreat",cost:120,costForHowMany:1}]},{id:"14",name:"Surfing Lessons",location:"Kuta",options:[{id:"14-1",name:"Beginner Lesson",cost:40,costForHowMany:1},{id:"14-2",name:"Advanced Coaching",cost:70,costForHowMany:1}]},{id:"15",name:"Horseback Riding",location:"Canggu",options:[{id:"15-1",name:"Beach Ride",cost:55,costForHowMany:1},{id:"15-2",name:"Sunset Ride",cost:75,costForHowMany:1}]},{id:"16",name:"Traditional Dance Class",location:"Ubud",options:[{id:"16-1",name:"Balinese Dance Lesson",cost:35,costForHowMany:1},{id:"16-2",name:"Private Performance",cost:150,costForHowMany:6}]},{id:"17",name:"Jungle Trekking",location:"Munduk",options:[{id:"17-1",name:"Half Day Trek",cost:45,costForHowMany:1},{id:"17-2",name:"Full Day Adventure",cost:85,costForHowMany:1}]}],x3=[{id:"1",name:"Tanah Lot Temple Entry",cost:5,sightseeingId:"1"},{id:"2",name:"Uluwatu Temple Entry",cost:6,sightseeingId:"2"},{id:"3",name:"Kecak Fire Dance Show",cost:15,sightseeingId:"2"},{id:"4",name:"Besakih Temple Entry",cost:8,sightseeingId:"3"},{id:"5",name:"Jatiluwih Rice Terraces Entry",cost:4,sightseeingId:"4"},{id:"6",name:"Nusa Penida Fast Boat",cost:35,sightseeingId:"5"},{id:"7",name:"Kelingking Beach Access",cost:3,sightseeingId:"5"},{id:"8",name:"Dolphin Watching Boat",cost:25,sightseeingId:"6"},{id:"9",name:"Banyumala Waterfall Entry",cost:6,sightseeingId:"7"},{id:"10",name:"Tegallalang Rice Terraces Entry",cost:5,sightseeingId:"8"},{id:"11",name:"Bali Swing Experience",cost:20,sightseeingId:"8"},{id:"12",name:"Tirta Empul Temple Entry",cost:8,sightseeingId:"9"},{id:"13",name:"Holy Water Blessing Ceremony",cost:15,sightseeingId:"9"},{id:"14",name:"Goa Gajah Elephant Cave Entry",cost:7,sightseeingId:"10"},{id:"15",name:"Gunung Kawi Temple Entry",cost:9,sightseeingId:"11"},{id:"16",name:"Batukaru Temple Entry",cost:6,sightseeingId:"12"},{id:"17",name:"Klungkung Palace Entry",cost:8,sightseeingId:"15"},{id:"18",name:"Traditional Art Gallery",cost:5,sightseeingId:"15"}],g3=[{id:"1",type:"breakfast",place:"Hotel Restaurant",cost:12},{id:"2",type:"lunch",place:"Local Warung",cost:15},{id:"3",type:"dinner",place:"Sunset Restaurant",cost:25}],v3=[{id:"1",name:"Bali Highlights - 5 Days",numberOfDays:5,transportationMode:"Private Cab Service",baseCost:850,inclusions:`• 5 days private cab transportation with driver
• 4 nights accommodation in 4-star hotels
• Daily breakfast at hotels
• Sightseeing tours: Tanah Lot, Uluwatu, Tegallalang Rice Terraces, Tirta Empul Temple
• Entry tickets to all mentioned attractions
• Professional English-speaking driver/guide
• Fuel, parking, and toll charges
• 24/7 customer support`,exclusions:`• International/domestic flights
• Travel insurance
• Lunch and dinner (except where mentioned)
• Personal expenses and shopping
• Tips and gratuities
• Activities not mentioned in inclusions
• Visa fees and documentation
• Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["1"],hotel:{place:"Seminyak",hotelId:"2",roomTypeId:"2-1"},activities:[],entryTickets:["1"],meals:["1"]},{day:2,sightseeing:["2"],hotel:{place:"Seminyak",hotelId:"2",roomTypeId:"2-1"},activities:[],entryTickets:["2"],meals:["1"]},{day:3,sightseeing:["8"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"1",optionId:"1-1"}],entryTickets:["10","11"],meals:["1"]},{day:4,sightseeing:["9"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[],entryTickets:["12","13"],meals:["1"]},{day:5,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"},{id:"2",name:"Bali Adventure - 7 Days",numberOfDays:7,transportationMode:"Toyota Avanza",baseCost:1200,inclusions:`• 7 days self-drive Toyota Avanza rental
• 6 nights accommodation in mixed 3-4 star hotels
• Daily breakfast at hotels
• Comprehensive sightseeing: Tanah Lot, Uluwatu, Besakih Temple, Jatiluwih Rice Terraces
• Adventure activities: Bali Swing, ATV Ride, White Water Rafting
• Entry tickets to all attractions
• Fuel allowance and insurance
• GPS navigation system
• 24/7 roadside assistance`,exclusions:`• International/domestic flights
• Travel insurance beyond vehicle coverage
• Lunch and dinner
• Personal expenses and shopping
• Tips and gratuities
• Additional fuel beyond allowance
• Traffic violation fines
• Visa fees and documentation
• Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["17"],hotel:{place:"Kuta",hotelId:"3",roomTypeId:"3-1"},activities:[],entryTickets:["1"],meals:["1"]},{day:2,sightseeing:["18"],hotel:{place:"Kuta",hotelId:"3",roomTypeId:"3-1"},activities:[],entryTickets:["2"],meals:["1"]},{day:3,sightseeing:["21"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-2"},activities:[{activityId:"1",optionId:"1-2"}],entryTickets:["10","11"],meals:["1"]},{day:4,sightseeing:["22"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-2"},activities:[{activityId:"2",optionId:"2-1"}],entryTickets:["12","13"],meals:["1"]},{day:5,sightseeing:["19"],hotel:{place:"Sanur",hotelId:"4",roomTypeId:"4-1"},activities:[{activityId:"3",optionId:"3-1"}],entryTickets:["4"],meals:["1"]},{day:6,sightseeing:["20"],hotel:{place:"Sanur",hotelId:"4",roomTypeId:"4-1"},activities:[],entryTickets:[],meals:["1"]},{day:7,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"},{id:"3",name:"Bali Cultural Experience - 3 Days",numberOfDays:3,transportationMode:"Honda Vario",baseCost:320,inclusions:`• 3 days Honda Vario scooter rental
• 2 nights accommodation in 3-star hotel
• Daily breakfast
• Cultural sightseeing: Tegallalang Rice Terraces, Tirta Empul Temple
• Traditional activities: Batik Making Workshop, Wood Carving Class
• Entry tickets to cultural sites
• Helmet and safety gear
• Basic insurance coverage`,exclusions:`• International/domestic flights
• Travel insurance beyond basic coverage
• Lunch and dinner
• Personal expenses and shopping
• Tips and gratuities
• Fuel costs
• Traffic violation fines
• Visa fees and documentation
• Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["27"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"7",optionId:"7-1"}],entryTickets:["10","11"],meals:["1"]},{day:2,sightseeing:["28"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"9",optionId:"9-1"}],entryTickets:["12","13"],meals:["1"]},{day:3,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"}],Qg={clients:[],transportations:h3,hotels:m3,sightseeings:f3,activities:p3,entryTickets:x3,meals:g3,itineraries:[],fixedItineraries:v3},b3=(e,t)=>{let n;switch(t.type){case"SET_DATA":n={...e,...t.payload};break;case"ADD_CLIENT":n={...e,clients:[...e.clients,t.payload]};break;case"UPDATE_CLIENT":n={...e,clients:e.clients.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_CLIENT":n={...e,clients:e.clients.filter(r=>r.id!==t.payload)};break;case"ADD_TRANSPORTATION":n={...e,transportations:[...e.transportations,t.payload]};break;case"UPDATE_TRANSPORTATION":n={...e,transportations:e.transportations.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_TRANSPORTATION":n={...e,transportations:e.transportations.filter(r=>r.id!==t.payload)};break;case"ADD_HOTEL":n={...e,hotels:[...e.hotels,t.payload]};break;case"UPDATE_HOTEL":n={...e,hotels:e.hotels.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_HOTEL":n={...e,hotels:e.hotels.filter(r=>r.id!==t.payload)};break;case"ADD_SIGHTSEEING":n={...e,sightseeings:[...e.sightseeings,t.payload]};break;case"UPDATE_SIGHTSEEING":n={...e,sightseeings:e.sightseeings.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_SIGHTSEEING":n={...e,sightseeings:e.sightseeings.filter(r=>r.id!==t.payload)};break;case"ADD_ACTIVITY":n={...e,activities:[...e.activities,t.payload]};break;case"UPDATE_ACTIVITY":n={...e,activities:e.activities.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_ACTIVITY":n={...e,activities:e.activities.filter(r=>r.id!==t.payload)};break;case"ADD_ENTRY_TICKET":n={...e,entryTickets:[...e.entryTickets,t.payload]};break;case"UPDATE_ENTRY_TICKET":n={...e,entryTickets:e.entryTickets.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_ENTRY_TICKET":n={...e,entryTickets:e.entryTickets.filter(r=>r.id!==t.payload)};break;case"ADD_MEAL":n={...e,meals:[...e.meals,t.payload]};break;case"UPDATE_MEAL":n={...e,meals:e.meals.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_MEAL":n={...e,meals:e.meals.filter(r=>r.id!==t.payload)};break;case"ADD_ITINERARY":n={...e,itineraries:[...e.itineraries,t.payload]};break;case"UPDATE_ITINERARY":n={...e,itineraries:e.itineraries.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_ITINERARY":n={...e,itineraries:e.itineraries.filter(r=>r.id!==t.payload)};break;case"ADD_FIXED_ITINERARY":n={...e,fixedItineraries:[...e.fixedItineraries,t.payload]};break;case"UPDATE_FIXED_ITINERARY":n={...e,fixedItineraries:e.fixedItineraries.map(r=>r.id===t.payload.id?t.payload:r)};break;case"DELETE_FIXED_ITINERARY":n={...e,fixedItineraries:e.fixedItineraries.filter(r=>r.id!==t.payload)};break;default:return e}return n},bb=ce.createContext(null),Hp=({children:e})=>{const[t,n]=ce.useReducer(b3,Qg);ce.useEffect(()=>{const G=H=>{H.detail&&n({type:"SET_DATA",payload:H.detail})};window.addEventListener("refreshData",G);const M=H=>{if(H.key==="appData"&&H.newValue)try{const Z=JSON.parse(H.newValue);n({type:"SET_DATA",payload:Z})}catch(Z){console.error("Error parsing storage data:",Z)}};return window.addEventListener("storage",M),()=>{window.removeEventListener("refreshData",G),window.removeEventListener("storage",M)}},[]),ce.useEffect(()=>{(async()=>{try{const Z=await R4();Z&&n({type:"SET_DATA",payload:Z})}catch(Z){console.error("Error fetching data from Supabase:",Z),n({type:"SET_DATA",payload:Qg})}})();const M=Z=>{Z.detail&&n({type:"SET_DATA",payload:Z.detail})};window.addEventListener("refreshData",M);const H=Z=>{};return window.addEventListener("storage",H),()=>{window.removeEventListener("refreshData",M),window.removeEventListener("storage",H)}},[]);const r=async G=>{try{const M=await $4(G);M&&n({type:"ADD_CLIENT",payload:M})}catch(M){console.error("Error adding client to Supabase:",M),n({type:"ADD_CLIENT",payload:G})}},a=async G=>{try{const M=await B4(G);M&&n({type:"UPDATE_CLIENT",payload:M})}catch(M){console.error("Error updating client in Supabase:",M),n({type:"UPDATE_CLIENT",payload:G})}},i=async G=>{try{await U4(G),n({type:"DELETE_CLIENT",payload:G})}catch(M){console.error("Error deleting client from Supabase:",M),n({type:"DELETE_CLIENT",payload:G})}},l=async G=>{try{const M=await z4(G);M&&n({type:"ADD_TRANSPORTATION",payload:M})}catch(M){console.error("Error adding transportation to Supabase:",M),n({type:"ADD_TRANSPORTATION",payload:G})}},o=async G=>{try{const M=await q4(G);M&&n({type:"UPDATE_TRANSPORTATION",payload:M})}catch(M){console.error("Error updating transportation in Supabase:",M),n({type:"UPDATE_TRANSPORTATION",payload:G})}},d=async G=>{try{await H4(G),n({type:"DELETE_TRANSPORTATION",payload:G})}catch(M){console.error("Error deleting transportation from Supabase:",M),n({type:"DELETE_TRANSPORTATION",payload:G})}},u=async G=>{try{const M=await V4(G);M&&n({type:"ADD_HOTEL",payload:M})}catch(M){console.error("Error adding hotel to Supabase:",M),n({type:"ADD_HOTEL",payload:G})}},p=async G=>{try{const M=await W4(G);M&&n({type:"UPDATE_HOTEL",payload:M})}catch(M){console.error("Error updating hotel in Supabase:",M),n({type:"UPDATE_HOTEL",payload:G})}},f=async G=>{try{await G4(G),n({type:"DELETE_HOTEL",payload:G})}catch(M){console.error("Error deleting hotel from Supabase:",M),n({type:"DELETE_HOTEL",payload:G})}},N=async G=>{try{const M=await Y4(G);M&&n({type:"ADD_SIGHTSEEING",payload:M})}catch(M){console.error("Error adding sightseeing to Supabase:",M),n({type:"ADD_SIGHTSEEING",payload:G})}},h=async G=>{try{const M=await J4(G);M&&n({type:"UPDATE_SIGHTSEEING",payload:M})}catch(M){console.error("Error updating sightseeing in Supabase:",M),n({type:"UPDATE_SIGHTSEEING",payload:G})}},b=async G=>{try{await K4(G),n({type:"DELETE_SIGHTSEEING",payload:G})}catch(M){console.error("Error deleting sightseeing from Supabase:",M),n({type:"DELETE_SIGHTSEEING",payload:G})}},j=async G=>{try{const M=await X4(G);M&&n({type:"ADD_ACTIVITY",payload:M})}catch(M){console.error("Error adding activity to Supabase:",M),n({type:"ADD_ACTIVITY",payload:G})}},C=async G=>{try{const M=await Q4(G);M&&n({type:"UPDATE_ACTIVITY",payload:M})}catch(M){console.error("Error updating activity in Supabase:",M),n({type:"UPDATE_ACTIVITY",payload:G})}},x=async G=>{try{await Z4(G),n({type:"DELETE_ACTIVITY",payload:G})}catch(M){console.error("Error deleting activity from Supabase:",M),n({type:"DELETE_ACTIVITY",payload:G})}},g=async G=>{try{const M=await e3(G);M&&n({type:"ADD_ENTRY_TICKET",payload:M})}catch(M){console.error("Error adding entry ticket to Supabase:",M),n({type:"ADD_ENTRY_TICKET",payload:G})}},y=async G=>{try{const M=await t3(G);M&&n({type:"UPDATE_ENTRY_TICKET",payload:M})}catch(M){console.error("Error updating entry ticket in Supabase:",M),n({type:"UPDATE_ENTRY_TICKET",payload:G})}},A=async G=>{try{await s3(G),n({type:"DELETE_ENTRY_TICKET",payload:G})}catch(M){console.error("Error deleting entry ticket from Supabase:",M),n({type:"DELETE_ENTRY_TICKET",payload:G})}},P=async G=>{try{const M=await n3(G);M&&n({type:"ADD_MEAL",payload:M})}catch(M){console.error("Error adding meal to Supabase:",M),n({type:"ADD_MEAL",payload:G})}},_=async G=>{try{const M=await r3(G);M&&n({type:"UPDATE_MEAL",payload:M})}catch(M){console.error("Error updating meal in Supabase:",M),n({type:"UPDATE_MEAL",payload:G})}},T=async G=>{try{await a3(G),n({type:"DELETE_MEAL",payload:G})}catch(M){console.error("Error deleting meal from Supabase:",M),n({type:"DELETE_MEAL",payload:G})}},S=async G=>{try{const M=await i3(G);M&&n({type:"ADD_ITINERARY",payload:M})}catch(M){console.error("Error adding itinerary to Supabase:",M),n({type:"ADD_ITINERARY",payload:G})}},L=async G=>{try{const M=await l3(G);M&&n({type:"UPDATE_ITINERARY",payload:M})}catch(M){console.error("Error updating itinerary in Supabase:",M),n({type:"UPDATE_ITINERARY",payload:G})}},R=async G=>{try{await o3(G),n({type:"DELETE_ITINERARY",payload:G})}catch(M){console.error("Error deleting itinerary from Supabase:",M),n({type:"DELETE_ITINERARY",payload:G})}},E=async G=>{try{const M=await c3(G);M&&n({type:"ADD_FIXED_ITINERARY",payload:M})}catch(M){console.error("Error adding fixed itinerary to Supabase:",M),n({type:"ADD_FIXED_ITINERARY",payload:G})}},I=async G=>{try{const M=await d3(G);M&&n({type:"UPDATE_FIXED_ITINERARY",payload:M})}catch(M){console.error("Error updating fixed itinerary in Supabase:",M),n({type:"UPDATE_FIXED_ITINERARY",payload:G})}},Y=async G=>{try{await u3(G),n({type:"DELETE_FIXED_ITINERARY",payload:G})}catch(M){console.error("Error deleting fixed itinerary from Supabase:",M),n({type:"DELETE_FIXED_ITINERARY",payload:G})}},K=async(G,M,H)=>{try{const Z={id:Date.now().toString(),version:G.version,changeType:M,description:H,timestamp:new Date().toISOString(),updatedBy:G.updatedBy},V={...G,changeLog:[...G.changeLog||[],Z]};Il()&&await L(V)}catch(Z){throw console.error("Error updating itinerary with change log:",Z),Z}},te=G=>{const M=t.itineraries.filter(H=>H.client.id===G);return M.length===0?null:M.reduce((H,Z)=>Z.version>H.version?Z:H)};return s.jsx(bb.Provider,{value:{state:t,dispatch:n,updateItinerary:K,getLatestItinerary:te,addClient:r,updateClientData:a,deleteClientData:i,addTransportation:l,updateTransportationData:o,deleteTransportationData:d,addHotel:u,updateHotelData:p,deleteHotelData:f,addSightseeing:N,updateSightseeingData:h,deleteSightseeingData:b,addActivity:j,updateActivityData:C,deleteActivityData:x,addEntryTicket:g,updateEntryTicketData:y,deleteEntryTicketData:A,addMeal:P,updateMealData:_,deleteMealData:T,addItinerary:S,updateItineraryData:L,deleteItineraryData:R,addFixedItinerary:E,updateFixedItineraryData:I,deleteFixedItineraryData:Y},children:e})},At=()=>{const e=ce.useContext(bb);if(!e)throw new Error("useData must be used within a DataProvider");return e},sn=({children:e,title:t,subtitle:n,hideHeader:r=!1})=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[!r&&s.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50",children:s.jsx("div",{className:"w-full mx-auto px-3 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center justify-between h-14 sm:h-16 overflow-hidden",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[s.jsx("div",{className:"bg-blue-600 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:s.jsx(pt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-sm sm:text-xl font-bold text-slate-900 truncate",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-xs text-slate-500 hidden sm:block truncate",children:"Travel Agency Management"})]})]})})})}),s.jsxs("main",{className:`w-full mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8 pb-6 sm:pb-8 overflow-x-hidden ${r?"pt-4":""}`,children:[s.jsxs("div",{className:"mb-4 sm:mb-8",children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-slate-900 break-words",children:t}),n&&s.jsx("p",{className:"mt-1 sm:mt-2 text-sm sm:text-base text-slate-600 break-words",children:n})]}),e]})]}),y3=()=>{At();const{state:e}=Yt(),[t,n]=ce.useState("idle"),[r,a]=ce.useState(""),[i,l]=ce.useState("");ce.useEffect(()=>{(async()=>{try{const{data:{session:u}}=await Fe.auth.getSession();u!=null&&u.user&&(n("connected"),a("Connected to Supabase"))}catch(u){console.error("Connection check failed:",u)}})()},[e.isAuthenticated]);const o=async()=>{n("connecting"),a("Testing connection..."),l("");try{const{data:{session:d},error:u}=await Fe.auth.getSession();if(u)throw new Error(`Session error: ${u.message}`);const{error:p}=await Fe.from("profiles").select("count").limit(1);if(p)throw new Error(`Database connection error: ${p.message}`);n("connected"),a("Successfully connected to Supabase")}catch(d){n("error"),a("Connection failed"),l(d.message||d.toString()),console.error("Supabase connection failed:",d)}};return s.jsx("div",{className:`border rounded-lg p-4 mb-6 ${t==="connected"?"bg-green-50 border-green-200":t==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsx(w4,{className:`h-5 w-5 flex-shrink-0 ${t==="connected"?"text-green-600":t==="error"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h4",{className:`font-medium ${t==="connected"?"text-green-800":t==="error"?"text-red-800":"text-blue-800"}`,children:t==="connected"?"Connected to Supabase":t==="error"?"Connection Failed":t==="connecting"?"Connecting...":"Supabase Database"}),s.jsx("p",{className:`text-sm mt-1 ${t==="connected"?"text-green-700":t==="error"?"text-red-700":"text-blue-700"}`,children:r||(t==="idle"?"Test your Supabase connection":"")}),i&&s.jsx("p",{className:"text-xs mt-1 text-red-600 break-words",children:i})]})]}),(t==="idle"||t==="connected")&&s.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg transition-colors flex-shrink-0 ml-4 ${t==="connected"?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:t==="connected"?"Test Again":"Test Connection"}),t==="connecting"&&s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4",children:[s.jsx(N4,{className:"h-4 w-4 animate-spin text-blue-600"}),s.jsx("span",{className:"text-blue-700 text-sm",children:"Testing..."})]}),t==="error"&&s.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex-shrink-0 ml-4",children:"Retry"})]})})},w3=({onNavigateToSection:e})=>{const{state:t,dispatch:n}=At(),{clients:r,itineraries:a}=t,[i,l]=ce.useState("all");Za.useEffect(()=>{const b=localStorage.getItem("appData");if(b)try{const C=JSON.parse(b);(C.clients||C.itineraries)&&n({type:"SET_DATA",payload:C})}catch(C){console.error("Error loading dashboard data:",C)}const j=setInterval(()=>{const C=localStorage.getItem("appData");if(C)try{const x=JSON.parse(C);(x.clients||x.itineraries)&&n({type:"SET_DATA",payload:x})}catch(x){console.error("Error loading dashboard data:",x)}},3e3);return()=>clearInterval(j)},[]);const o=r,d=a,u=d.reduce((b,j)=>b+j.finalPrice,0),p=d.length>0?u/d.length:0,f=()=>{switch(i){case"clients":return{clients:o,itineraries:[]};case"itineraries":return{clients:[],itineraries:d};default:return{clients:o,itineraries:d}}},{clients:N,itineraries:h}=f();return s.jsxs(sn,{title:"Admin Dashboard",subtitle:"Manage your travel agency operations and view client leads",children:[s.jsx(y3,{}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Admin Panel"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[s.jsxs("button",{onClick:()=>e("guests"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Op,{className:"h-4 w-4 mr-2"}),"Guest Management"]}),s.jsxs("button",{onClick:()=>e("fixedItineraries"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(ws,{className:"h-4 w-4 mr-2"}),"Fixed Itineraries"]}),s.jsxs("button",{onClick:()=>e("transportation"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Transportation"]}),s.jsxs("button",{onClick:()=>e("hotels"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-violet-600 text-white rounded-lg hover:from-purple-700 hover:to-violet-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(_t,{className:"h-4 w-4 mr-2"}),"Hotels"]}),s.jsxs("button",{onClick:()=>e("sightseeing"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(pt,{className:"h-4 w-4 mr-2"}),"Sightseeing"]}),s.jsxs("button",{onClick:()=>e("activities"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Activities"]}),s.jsxs("button",{onClick:()=>e("meals"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Meals"]}),s.jsxs("button",{onClick:()=>e("tickets"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(ps,{className:"h-4 w-4 mr-2"}),"Entry Tickets"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="clients"?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"}`,onClick:()=>l(i==="clients"?"all":"clients"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Clients"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="itineraries"?"border-teal-500 ring-2 ring-teal-200":"border-slate-200"}`,onClick:()=>l(i==="itineraries"?"all":"itineraries"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Itineraries"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:d.length})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(pt,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",u.toFixed(0)]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Quote Value"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",p.toFixed(0)]})]}),s.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-amber-600"})})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All Data"}),s.jsxs("button",{onClick:()=>l("clients"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="clients"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Clients Only (",o.length,")"]}),s.jsxs("button",{onClick:()=>l("itineraries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="itineraries"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Itineraries Only (",d.length,")"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:i==="clients"?"All Clients":i==="itineraries"?"All Itineraries":"Recent Client Leads"}),s.jsx("p",{className:"text-slate-500 text-sm",children:i==="clients"?"Complete list of all client inquiries":i==="itineraries"?"All generated itineraries and quotes":"Latest inquiries from the itinerary builder"})]}),N.length===0&&h.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(zr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i==="clients"?"No clients yet":i==="itineraries"?"No itineraries yet":"No data yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i==="clients"?"Client leads will appear here when created through the itinerary builder.":i==="itineraries"?"Completed itineraries will appear here.":"Data will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Itinerary Details":"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pax & Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Total Cost":"Transportation"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[N.map(b=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:b.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-1"}),b.countryCode," ",b.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),b.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",b.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(b.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(b.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[b.numberOfPax.adults+b.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[b.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:b.transportationMode})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(b.createdAt).toLocaleDateString()})]},b.id)),h.map((b,j)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:b.client.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-1"}),b.client.countryCode," ",b.client.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),b.client.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",b.client.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(b.client.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(b.client.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[b.client.numberOfPax.adults+b.client.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[b.client.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-green-600",children:["$",b.finalPrice.toFixed(0)]}),s.jsxs("div",{className:"text-slate-500",children:["₹",(b.finalPrice*b.exchangeRate).toLocaleString("en-IN")]})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(b.client.createdAt).toLocaleDateString()})]},j))]})]})})]})]})},N3=()=>{const{state:e,addTransportation:t,updateTransportationData:n,deleteTransportationData:r}=At(),{transportations:a}=e,[i,l]=ce.useState(null),[o,d]=ce.useState({}),[u,p]=ce.useState(!1),[f,N]=ce.useState({type:"cab",vehicleName:"",costPerDay:0}),h=async()=>{const g={...f,id:Date.now().toString()};await t(g),N({type:"cab",vehicleName:"",costPerDay:0}),p(!1)},b=g=>{l(g.id),d(g)},j=async()=>{i&&o.id&&(await n(o),l(null),d({}))},C=async g=>{confirm("Are you sure you want to delete this transportation option?")&&await r(g)},x=g=>{switch(g){case"cab":return s.jsx(Qa,{className:"h-5 w-5"});case"self-drive-car":return s.jsx(P4,{className:"h-5 w-5"});case"self-drive-scooter":return s.jsx(y4,{className:"h-5 w-5"});default:return s.jsx(Qa,{className:"h-5 w-5"})}};return s.jsx(sn,{title:"Transportation Management",subtitle:"Manage vehicle types and pricing",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"Add New Transportation"}),s.jsxs("button",{onClick:()=>p(!u),className:"inline-flex items-center justify-center px-4 py-2.5 sm:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base touch-target w-full sm:w-auto",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Add Transportation"})]})]})}),u&&s.jsxs("div",{className:"p-3 sm:p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Transportation Type"}),s.jsxs("select",{value:f.type,onChange:g=>N({...f,type:g.target.value}),className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Vehicle Name"}),s.jsx("input",{type:"text",value:f.vehicleName,onChange:g=>N({...f,vehicleName:g.target.value}),placeholder:"e.g., Avanza, Honda Activa",className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Cost per Day ($)"}),s.jsx("input",{type:"number",inputMode:"decimal",value:f.costPerDay,onChange:g=>N({...f,costPerDay:parseFloat(g.target.value)||0}),className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"}),f.type==="cab"&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Can default to $0 (cost tied to sightseeing)"})]})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 mt-4",children:[s.jsx("button",{onClick:()=>p(!1),className:"w-full sm:w-auto px-4 py-2.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors touch-target",children:"Cancel"}),s.jsxs("button",{onClick:h,disabled:!f.vehicleName,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-target",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Add Transportation"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"All Transportation Options"})}),a.length===0?s.jsxs("div",{className:"p-6 sm:p-12 text-center",children:[s.jsx(Qa,{className:"h-10 w-10 sm:h-12 sm:w-12 text-slate-400 mx-auto mb-3 sm:mb-4"}),s.jsx("h4",{className:"text-base sm:text-lg text-slate-900 font-medium",children:"No transportation options yet"}),s.jsx("p",{className:"text-sm sm:text-base text-slate-500 mt-1",children:"Add your first transportation option to get started."})]}):s.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:s.jsxs("table",{className:"w-full min-w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider whitespace-nowrap",children:"Cost/Day"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(g=>s.jsx("tr",{className:"hover:bg-slate-50 transition-colors",children:i===g.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("select",{value:o.type,onChange:y=>d({...o,type:y.target.value}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsx("input",{type:"text",value:o.vehicleName||"",onChange:y=>d({...o,vehicleName:y.target.value}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target"})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsx("input",{type:"number",inputMode:"decimal",value:o.costPerDay||0,onChange:y=>d({...o,costPerDay:parseFloat(y.target.value)||0}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target"})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[s.jsx("button",{onClick:j,className:"p-2 sm:p-2.5 text-green-600 hover:bg-green-100 rounded-lg transition-colors touch-target","aria-label":"Save",children:s.jsx(Ts,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{l(null),d({})},className:"p-2 sm:p-2.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors touch-target","aria-label":"Cancel",children:s.jsx(zt,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"text-slate-600 flex-shrink-0",children:x(g.type)}),s.jsx("span",{className:"capitalize text-sm sm:text-base text-slate-900 truncate",children:g.type.replace("-"," ")})]})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 font-medium text-sm sm:text-base text-slate-900",children:s.jsx("div",{className:"truncate max-w-[150px] sm:max-w-none",children:g.vehicleName})}),s.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm sm:text-base text-slate-900 font-semibold whitespace-nowrap",children:["$",g.costPerDay]}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[s.jsx("button",{onClick:()=>b(g),className:"p-2 sm:p-2.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors touch-target","aria-label":"Edit",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>C(g.id),className:"p-2 sm:p-2.5 text-red-600 hover:bg-red-100 rounded-lg transition-colors touch-target","aria-label":"Delete",children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]})},g.id))})]})})]})]})})},j3=()=>{const{state:e,addHotel:t,updateHotelData:n,deleteHotelData:r}=At(),{hotels:a}=e,[i,l]=ce.useState(""),[o,d]=ce.useState(null),[u,p]=ce.useState({}),[f,N]=ce.useState(!1),[h,b]=ce.useState({name:"",place:"",starCategory:"3-star",roomTypes:[]}),j=a.filter(S=>S.name.toLowerCase().includes(i.toLowerCase())||S.place.toLowerCase().includes(i.toLowerCase())),C=(S=!1)=>{const L={id:Date.now().toString(),name:"",peakSeasonPrice:0,seasonPrice:0,offSeasonPrice:0};S?b({...h,roomTypes:[...h.roomTypes,L]}):u.roomTypes&&p({...u,roomTypes:[...u.roomTypes,L]})},x=(S,L,R,E=!1)=>{if(E){const I=[...h.roomTypes];I[S]={...I[S],[L]:R},b({...h,roomTypes:I})}else if(u.roomTypes){const I=[...u.roomTypes];I[S]={...I[S],[L]:R},p({...u,roomTypes:I})}},g=(S,L=!1)=>{if(L){const R=h.roomTypes.filter((E,I)=>I!==S);b({...h,roomTypes:R})}else if(u.roomTypes){const R=u.roomTypes.filter((E,I)=>I!==S);p({...u,roomTypes:R})}},y=async()=>{if(h.roomTypes.length===0){alert("Please add at least one room type.");return}const S={...h,id:Date.now().toString()};await t(S),b({name:"",place:"",starCategory:"3-star",roomTypes:[]}),N(!1)},A=S=>{d(S.id),p(S)},P=async()=>{o&&u.id&&(await n(u),d(null),p({}))},_=async S=>{confirm("Are you sure you want to delete this hotel?")&&await r(S)},T=S=>{const L=parseInt(S.charAt(0));return Array(L).fill(0).map((R,E)=>s.jsx(A4,{className:"h-4 w-4 fill-current text-yellow-400"},E))};return s.jsx(sn,{title:"Hotel Management",subtitle:"Manage hotels, room types, and seasonal pricing",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 flex-shrink-0",children:"Hotel Management"}),s.jsxs("div",{className:"relative flex-1 max-w-full sm:max-w-md",children:[s.jsx(Zs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search hotels by name or place...",value:i,onChange:S=>l(S.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"})]}),s.jsxs("button",{onClick:()=>N(!f),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 sm:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors touch-target flex-shrink-0",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Hotel"]})]})}),f&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hotel Name"}),s.jsx("input",{type:"text",value:h.name,onChange:S=>b({...h,name:S.target.value}),placeholder:"Enter hotel name",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Place/Location"}),s.jsx("input",{type:"text",value:h.place,onChange:S=>b({...h,place:S.target.value}),placeholder:"Enter location",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Star Category"}),s.jsxs("select",{value:h.starCategory,onChange:S=>b({...h,starCategory:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"3-star",children:"3 Star"}),s.jsx("option",{value:"4-star",children:"4 Star"}),s.jsx("option",{value:"5-star",children:"5 Star"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Room Types & Pricing"}),s.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Add Room Type"]})]}),h.roomTypes.map((S,L)=>s.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room Type Name"}),s.jsx("input",{type:"text",value:S.name,onChange:R=>x(L,"name",R.target.value,!0),placeholder:"e.g., Deluxe Room",className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Peak Season ($)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Dec 20 - Jan 5"})]}),s.jsx("input",{type:"number",value:S.peakSeasonPrice,onChange:R=>x(L,"peakSeasonPrice",parseFloat(R.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Season ($)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Jul 1 - Aug 31"})]}),s.jsx("input",{type:"number",value:S.seasonPrice,onChange:R=>x(L,"seasonPrice",parseFloat(R.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Off-Season ($)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Other dates"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:S.offSeasonPrice,onChange:R=>x(L,"offSeasonPrice",parseFloat(R.target.value)||0,!0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>g(L,!0),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})]})},L))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:y,disabled:!h.name||!h.place||h.roomTypes.length===0,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add Hotel"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:j.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(_t,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i?"No hotels found":"No hotels yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i?"Try adjusting your search terms":"Add your first hotel to get started."})]}):j.map(S=>{var L;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:o===S.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hotel Name"}),s.jsx("input",{type:"text",value:u.name||"",onChange:R=>p({...u,name:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Place/Location"}),s.jsx("input",{type:"text",value:u.place||"",onChange:R=>p({...u,place:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Star Category"}),s.jsxs("select",{value:u.starCategory,onChange:R=>p({...u,starCategory:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"3-star",children:"3 Star"}),s.jsx("option",{value:"4-star",children:"4 Star"}),s.jsx("option",{value:"5-star",children:"5 Star"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Room Types & Pricing"}),s.jsxs("button",{onClick:()=>C(!1),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Add Room Type"]})]}),(L=u.roomTypes)==null?void 0:L.map((R,E)=>s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room Type Name"}),s.jsx("input",{type:"text",value:R.name,onChange:I=>x(E,"name",I.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Peak Season ($)"}),s.jsx("input",{type:"number",value:R.peakSeasonPrice,onChange:I=>x(E,"peakSeasonPrice",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Season ($)"}),s.jsx("input",{type:"number",value:R.seasonPrice,onChange:I=>x(E,"seasonPrice",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Off-Season ($)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:R.offSeasonPrice,onChange:I=>x(E,"offSeasonPrice",parseFloat(I.target.value)||0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>g(E),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})]})},R.id))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{d(null),p({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(_t,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:S.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:S.place}),s.jsx("div",{className:"flex items-center",children:T(S.starCategory)})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>A(S),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>_(S.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-4",children:"Room Types & Pricing"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.roomTypes.map(R=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-slate-900 mb-3",children:R.name}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Peak Season:"}),s.jsxs("span",{className:"font-medium",children:["$",R.peakSeasonPrice]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Season:"}),s.jsxs("span",{className:"font-medium",children:["$",R.seasonPrice]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Off-Season:"}),s.jsxs("span",{className:"font-medium",children:["$",R.offSeasonPrice]})]})]})]},R.id))})]})]})},S.id)})})]})})},S3=()=>{const{state:e,addSightseeing:t,updateSightseeingData:n,deleteSightseeingData:r}=At(),{sightseeings:a}=e,[i,l]=ce.useState(""),[o,d]=ce.useState(null),[u,p]=ce.useState({}),[f,N]=ce.useState(!1),[h,b]=ce.useState({name:"",description:"",transportationMode:"cab",vehicleCosts:{avanza:0,hiace:0,miniBus:0,bus32:0,bus39:0}}),j=a.filter(_=>_.name.toLowerCase().includes(i.toLowerCase())||_.description.toLowerCase().includes(i.toLowerCase())),C=async()=>{const _=["cab","self-drive-car","self-drive-scooter"];for(const T of _){const S={id:`${Date.now()}-${T}`,name:h.name,description:h.description,transportationMode:T,vehicleCosts:T==="cab"?h.vehicleCosts:void 0};await t(S)}b({name:"",description:"",transportationMode:"cab",vehicleCosts:{avanza:0,hiace:0,miniBus:0,bus32:0,bus39:0}}),N(!1)},x=_=>{d(_.id),p(_)},g=async()=>{o&&u.id&&(await n(u),d(null),p({}))},y=async _=>{confirm("Are you sure you want to delete this sightseeing spot?")&&await r(_)},A=(_,T,S=!1)=>{S?b({...h,vehicleCosts:{...h.vehicleCosts,[_]:T}}):u.vehicleCosts&&p({...u,vehicleCosts:{...u.vehicleCosts,[_]:T}})},P=(_,T=!1)=>{if(!_)return null;const S=[{key:"avanza",name:"Avanza",pax:"2-6 pax"},{key:"hiace",name:"Hiace",pax:"6-12 pax"},{key:"miniBus",name:"Mini Bus",pax:"12-27 pax"},{key:"bus32",name:"Bus 32",pax:"27-32 pax"},{key:"bus39",name:"Bus 39",pax:"32-39 pax"}];return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(L=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[L.name," Cost ($)",s.jsx("span",{className:"text-xs text-slate-500 block",children:L.pax})]}),s.jsx("input",{type:"number",value:_[L.key],onChange:R=>A(L.key,parseFloat(R.target.value)||0,T),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]},L.key))})};return s.jsx(sn,{title:"Sightseeing Management",subtitle:"Manage sightseeing spots and transportation costs",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sightseeing Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search sightseeing spots...",value:i,onChange:_=>l(_.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>N(!f),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Sightseeing"]})]})}),f&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Name"}),s.jsx("input",{type:"text",value:h.name,onChange:_=>b({...h,name:_.target.value}),placeholder:"Enter sightseeing spot name",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation Mode"}),s.jsxs("select",{value:h.transportationMode,onChange:_=>b({...h,transportationMode:_.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:h.description,onChange:_=>b({...h,description:_.target.value}),placeholder:"Enter description of the sightseeing spot",rows:3,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.transportationMode==="cab"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Qa,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs (for Cab mode)"]}),P(h.vehicleCosts,!0)]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:C,disabled:!h.name||!h.description,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add Sightseeing"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:j.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(pt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i?"No sightseeing spots found":"No sightseeing spots yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i?"Try adjusting your search terms":"Add your first sightseeing spot to get started."})]}):j.map(_=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:o===_.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Name"}),s.jsx("input",{type:"text",value:u.name||"",onChange:T=>p({...u,name:T.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation Mode"}),s.jsxs("select",{value:u.transportationMode,onChange:T=>p({...u,transportationMode:T.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:u.description||"",onChange:T=>p({...u,description:T.target.value}),rows:3,className:"w-full p-3 border border-slate-300 rounded-lg"})]}),u.transportationMode==="cab"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Qa,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs (for Cab mode)"]}),P(u.vehicleCosts)]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{d(null),p({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(pt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:_.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:_.description}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:_.transportationMode.replace("-"," ")})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>x(_),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>y(_.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})}),_.transportationMode==="cab"&&_.vehicleCosts&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Qa,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Avanza (2-6 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.vehicleCosts.avanza]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Hiace (6-12 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.vehicleCosts.hiace]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Mini Bus (12-27 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.vehicleCosts.miniBus]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Bus 32 (27-32 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.vehicleCosts.bus32]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Bus 39 (32-39 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.vehicleCosts.bus39]})]})]})]})]})},_.id))})]})})},k3=()=>{const{state:e,addEntryTicket:t,updateEntryTicketData:n,deleteEntryTicketData:r}=At(),{entryTickets:a,sightseeings:i}=e,[l,o]=ce.useState(""),[d,u]=ce.useState(null),[p,f]=ce.useState({}),[N,h]=ce.useState(!1),[b,j]=ce.useState({name:"",cost:0,sightseeingId:""}),C=a.filter(_=>_.name.toLowerCase().includes(l.toLowerCase())||x(_.sightseeingId).toLowerCase().includes(l.toLowerCase()));function x(_){const T=i.find(S=>S.id===_);return T?T.name:"Unknown Location"}const g=async()=>{const _={...b,id:Date.now().toString()};await t(_),j({name:"",cost:0,sightseeingId:""}),h(!1)},y=_=>{u(_.id),f(_)},A=async()=>{d&&p.id&&(await n(p),u(null),f({}))},P=async _=>{confirm("Are you sure you want to delete this entry ticket?")&&await r(_)};return s.jsx(sn,{title:"Entry Ticket Management",subtitle:"Manage entry tickets for sightseeing locations",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Entry Ticket Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search entry tickets...",value:l,onChange:_=>o(_.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>h(!N),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Entry Ticket"]})]})}),N&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ticket Name"}),s.jsx("input",{type:"text",value:b.name,onChange:_=>j({...b,name:_.target.value}),placeholder:"e.g., Temple Entry, Museum Pass",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost per Person ($)"}),s.jsx("input",{type:"number",value:b.cost,onChange:_=>j({...b,cost:parseFloat(_.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Location"}),s.jsxs("select",{value:b.sightseeingId,onChange:_=>j({...b,sightseeingId:_.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select location"}),i.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:g,disabled:!b.name||!b.sightseeingId,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add Entry Ticket"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Entry Tickets"})}),C.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ps,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:l?"No entry tickets found":"No entry tickets yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:l?"Try adjusting your search terms":"Add your first entry ticket to get started."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ticket Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Cost/Person"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:C.map(_=>s.jsx("tr",{className:"hover:bg-slate-50",children:d===_.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:p.name||"",onChange:T=>f({...p,name:T.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:p.sightseeingId||"",onChange:T=>f({...p,sightseeingId:T.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Select location"}),i.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"number",value:p.cost||0,onChange:T=>f({...p,cost:parseFloat(T.target.value)||0}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:A,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:s.jsx(Ts,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{u(null),f({})},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(zt,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ps,{className:"h-4 w-4 text-blue-600"})}),s.jsx("span",{className:"font-medium text-slate-900",children:_.name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{className:"h-4 w-4 text-slate-400"}),s.jsx("span",{className:"text-slate-900",children:x(_.sightseeingId)})]})}),s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900",children:["$",_.cost]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(_),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>P(_.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]})},_.id))})]})})]})]})})},_3=()=>{const{state:e,addActivity:t,updateActivityData:n,deleteActivityData:r}=At(),{activities:a,sightseeings:i}=e,[l,o]=ce.useState(""),[d,u]=ce.useState(null),[p,f]=ce.useState({}),[N,h]=ce.useState(!1),[b,j]=ce.useState({name:"",location:"",options:[]}),C=a.filter(S=>S.name.toLowerCase().includes(l.toLowerCase())||S.options.some(L=>L.name.toLowerCase().includes(l.toLowerCase()))||S.location.toLowerCase().includes(l.toLowerCase()));i.reduce((S,L)=>(S.find(R=>R.name===L.name)||S.push({id:L.id,name:L.name}),S),[]);const x=(S=!1)=>{const L={id:Date.now().toString(),name:"",cost:0,costForHowMany:1};S?j({...b,options:[...b.options,L]}):p.options&&f({...p,options:[...p.options,L]})},g=(S,L,R,E=!1)=>{if(E){const I=[...b.options];I[S]={...I[S],[L]:R},j({...b,options:I})}else if(p.options){const I=[...p.options];I[S]={...I[S],[L]:R},f({...p,options:I})}},y=(S,L=!1)=>{if(L){const R=b.options.filter((E,I)=>I!==S);j({...b,options:R})}else if(p.options){const R=p.options.filter((E,I)=>I!==S);f({...p,options:R})}},A=async()=>{if(b.options.length===0){alert("Please add at least one activity option.");return}const S={...b,id:Date.now().toString()};await t(S),j({name:"",location:"",options:[]}),h(!1)},P=S=>{u(S.id),f(S)},_=async()=>{d&&p.id&&(await n(p),u(null),f({}))},T=async S=>{confirm("Are you sure you want to delete this activity?")&&await r(S)};return s.jsx(sn,{title:"Activity Management",subtitle:"Manage activities and their pricing options",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Activity Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search activities...",value:l,onChange:S=>o(S.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>h(!N),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),N&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Activity Name"}),s.jsx("input",{type:"text",value:b.name,onChange:S=>j({...b,name:S.target.value}),placeholder:"e.g., Bali Swing, ATV Ride, Snorkeling",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1 mt-4",children:"Location"}),s.jsx("input",{type:"text",value:b.location,onChange:S=>j({...b,location:S.target.value}),placeholder:"e.g., Ubud, Seminyak, Kuta",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Activity Options & Pricing"}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),b.options.map((S,L)=>s.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Option Name"}),s.jsx("input",{type:"text",value:S.name,onChange:R=>g(L,"name",R.target.value,!0),placeholder:"e.g., Single Rider, Tandem Rider",className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost ($)"}),s.jsx("input",{type:"number",value:S.cost,onChange:R=>g(L,"cost",parseFloat(R.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost for How Many People"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",min:"1",value:S.costForHowMany,onChange:R=>g(L,"costForHowMany",parseInt(R.target.value)||1,!0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>y(L,!0),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})]})},L)),b.options.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(is,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:'No options added yet. Click "Add Option" to get started.'})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:A,disabled:!b.name||!b.location||b.options.length===0,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:C.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(is,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:l?"No activities found":"No activities yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:l?"Try adjusting your search terms":"Add your first activity to get started."})]}):C.map(S=>{var L;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:d===S.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Activity Name"}),s.jsx("input",{type:"text",value:p.name||"",onChange:R=>f({...p,name:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"}),s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1 mt-4",children:"Location"}),s.jsx("input",{type:"text",value:p.location||"",onChange:R=>f({...p,location:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Activity Options & Pricing"}),s.jsxs("button",{onClick:()=>x(!1),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(L=p.options)==null?void 0:L.map((R,E)=>s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Option Name"}),s.jsx("input",{type:"text",value:R.name,onChange:I=>g(E,"name",I.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost ($)"}),s.jsx("input",{type:"number",value:R.cost,onChange:I=>g(E,"cost",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost for How Many People"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",min:"1",value:R.costForHowMany,onChange:I=>g(E,"costForHowMany",parseInt(I.target.value)||1),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>y(E),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})]})},R.id))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{u(null),f({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:_,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(is,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:S.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:S.location}),s.jsx("span",{className:"text-slate-400",children:"•"}),s.jsxs("span",{className:"text-slate-600",children:[S.options.length," option",S.options.length!==1?"s":""," available"]})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>P(S),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(S.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-4",children:"Available Options"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.options.map(R=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-slate-900 mb-2",children:R.name}),s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",R.cost]}),s.jsxs("div",{className:"text-sm text-slate-600",children:["for ",R.costForHowMany," ",R.costForHowMany===1?"person":"people"]})]},R.id))})]})]})},S.id)})})]})})},C3=()=>{const{state:e,addMeal:t,updateMealData:n,deleteMealData:r}=At(),{meals:a}=e,[i,l]=ce.useState(""),[o,d]=ce.useState("all"),[u,p]=ce.useState(null),[f,N]=ce.useState({}),[h,b]=ce.useState(!1),[j,C]=ce.useState({type:"breakfast",place:"",cost:0}),x=a.filter(S=>{const L=S.place.toLowerCase().includes(i.toLowerCase()),R=o==="all"||S.type===o;return L&&R}),g=async()=>{const S={...j,id:Date.now().toString()};await t(S),C({type:"breakfast",place:"",cost:0}),b(!1)},y=S=>{p(S.id),N(S)},A=async()=>{u&&f.id&&(await n(f),p(null),N({}))},P=async S=>{confirm("Are you sure you want to delete this meal option?")&&await r(S)},_=S=>{switch(S){case"breakfast":return"🌅";case"lunch":return"☀️";case"dinner":return"🌙";default:return"🍽️"}},T=S=>{switch(S){case"breakfast":return"bg-yellow-100 text-yellow-800";case"lunch":return"bg-orange-100 text-orange-800";case"dinner":return"bg-purple-100 text-purple-800";default:return"bg-slate-100 text-slate-800"}};return s.jsx(sn,{title:"Meal Management",subtitle:"Manage meal options and restaurant partnerships",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Meal Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search by restaurant/place...",value:i,onChange:S=>l(S.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("select",{value:o,onChange:S=>d(S.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Meals"}),s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})]}),s.jsxs("button",{onClick:()=>b(!h),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Meal Option"]})]})}),h&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Meal Type"}),s.jsxs("select",{value:j.type,onChange:S=>C({...j,type:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Restaurant/Place"}),s.jsx("input",{type:"text",value:j.place,onChange:S=>C({...j,place:S.target.value}),placeholder:"e.g., Warung Bali, Hotel Restaurant",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost per Person ($)"}),s.jsx("input",{type:"number",value:j.cost,onChange:S=>C({...j,cost:parseFloat(S.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:g,disabled:!j.place,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Add Meal Option"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Meal Options"})}),x.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Gt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i||o!=="all"?"No meal options found":"No meal options yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i||o!=="all"?"Try adjusting your search or filter criteria":"Add your first meal option to get started."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Meal Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Restaurant/Place"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Cost/Person"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:x.map(S=>s.jsx("tr",{className:"hover:bg-slate-50",children:u===S.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:f.type,onChange:L=>N({...f,type:L.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:f.place||"",onChange:L=>N({...f,place:L.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"number",value:f.cost||0,onChange:L=>N({...f,cost:parseFloat(L.target.value)||0}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:A,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:s.jsx(Ts,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{p(null),N({})},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(zt,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:_(S.type)}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${T(S.type)}`,children:S.type})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Gt,{className:"h-4 w-4 text-blue-600"})}),s.jsx("span",{className:"font-medium text-slate-900",children:S.place})]})}),s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900",children:["$",S.cost]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(S),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>P(S.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]})},S.id))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Meals"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Gt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Breakfast Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(S=>S.type==="breakfast").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"🌅"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Lunch Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(S=>S.type==="lunch").length})]}),s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"☀️"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Dinner Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(S=>S.type==="dinner").length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"🌙"})})]})})]})]})})},A3=()=>{const{state:e,dispatch:t}=Yt(),{registeredAgents:n}=e,[r,a]=ce.useState(null);Za.useEffect(()=>{const u=localStorage.getItem("registeredAgents");if(u)try{const p=JSON.parse(u);t({type:"SET_REGISTERED_AGENTS",payload:p})}catch(p){console.error("Error loading agents:",p)}},[t]),Za.useEffect(()=>{const u=()=>{if(!document.hidden){const p=localStorage.getItem("registeredAgents");if(p)try{const f=JSON.parse(p);t({type:"SET_REGISTERED_AGENTS",payload:f})}catch(f){console.error("Error loading agents:",f)}}};return document.addEventListener("visibilitychange",u),()=>document.removeEventListener("visibilitychange",u)},[t]);const i=(u,p)=>{t({type:"UPDATE_AGENT_STATUS",payload:{id:u,status:p}})},l=(u,p)=>{if(confirm(`Are you sure you want to permanently delete agent "${p}"? This action cannot be undone.`)){t({type:"DELETE_AGENT",payload:u});const f=n.filter(N=>N.id!==u);localStorage.setItem("registeredAgents",JSON.stringify(f))}},o=u=>{switch(u){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=u=>{switch(u){case"active":return s.jsx(Xt,{className:"h-4 w-4"});case"pending":return s.jsx(mt,{className:"h-4 w-4"});case"suspended":return s.jsx(Lu,{className:"h-4 w-4"});default:return s.jsx(mt,{className:"h-4 w-4"})}};return s.jsx(sn,{title:"Agent Management",subtitle:"Manage registered travel agents and their accounts",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Agents"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(vo,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Agents"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.filter(u=>u.status==="active").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Pending Approval"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.filter(u=>u.status==="pending").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:s.jsx(mt,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Suspended"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.filter(u=>u.status==="suspended").length})]}),s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Lu,{className:"h-6 w-6 text-red-600"})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Registered Agents"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Manage agent accounts and permissions"})]}),n.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(_t,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No agents registered yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Agent registrations will appear here when submitted."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Agent Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contact Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Registration Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:n.map(u=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-teal-100 p-2 rounded-lg",children:s.jsx(_t,{className:"h-5 w-5 text-teal-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:u.companyName}),s.jsxs("div",{className:"text-sm text-slate-500",children:["@",u.username]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(zi,{className:"h-4 w-4 mr-2"}),u.email]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),u.phoneNo]}),s.jsxs("div",{className:"flex items-start text-sm text-slate-600",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"line-clamp-2",children:u.address})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(u.status)}`,children:[d(u.status),s.jsx("span",{className:"ml-1 capitalize",children:u.status})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(u.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>a(r===u.id?null:u.id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View Details",children:s.jsx(ni,{className:"h-4 w-4"})}),u.status==="pending"&&s.jsx("button",{onClick:()=>i(u.id,"active"),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Approve Agent",children:s.jsx(Yc,{className:"h-4 w-4"})}),u.status==="active"&&s.jsx("button",{onClick:()=>i(u.id,"suspended"),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Suspend Agent",children:s.jsx(ob,{className:"h-4 w-4"})}),u.status==="suspended"&&s.jsx("button",{onClick:()=>i(u.id,"active"),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Reactivate Agent",children:s.jsx(Yc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>l(u.id,u.companyName),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Agent",children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]},u.id))})]})})]}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Agent Details"}),s.jsx("button",{onClick:()=>a(null),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(Lu,{className:"h-5 w-5"})})]})}),(()=>{const u=n.find(p=>p.id===r);return u?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Company Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Company Name"}),s.jsx("p",{className:"text-slate-900",children:u.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Address"}),s.jsx("p",{className:"text-slate-900",children:u.address})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Contact Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Email"}),s.jsx("p",{className:"text-slate-900",children:u.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Phone"}),s.jsx("p",{className:"text-slate-900",children:u.phoneNo})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Account Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Username"}),s.jsxs("p",{className:"text-slate-900",children:["@",u.username]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Registration Date"}),s.jsx("p",{className:"text-slate-900",children:new Date(u.createdAt).toLocaleDateString()})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Account Status"}),s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(u.status)}`,children:[d(u.status),s.jsx("span",{className:"ml-1 capitalize",children:u.status})]})})]})]})]}):null})()]})})]})})},T3=(e,t)=>{const n=new Date(t),r=n.getMonth()+1,a=n.getDate();return r===12&&a>=20||r===1&&a<=5?e.peakSeasonPrice:r===7||r===8?e.seasonPrice:e.offSeasonPrice},P3=(e,t)=>e.vehicleCosts?t<=6?e.vehicleCosts.avanza:t<=12?e.vehicleCosts.hiace:t<=27?e.vehicleCosts.miniBus:t<=32?e.vehicleCosts.bus32:e.vehicleCosts.bus39:0,Gi=(e,t,n,r,a,i,l,o)=>{let d=0;const u=e.numberOfPax.adults+e.numberOfPax.children,p=o.find(f=>f.vehicleName===e.transportationMode);return p&&p.type!=="cab"&&(d+=p.costPerDay*e.numberOfDays),t.forEach(f=>{if(f.hotel){const h=n.find(b=>b.id===f.hotel.hotelId);if(h){const b=h.roomTypes.find(j=>j.id===f.hotel.roomTypeId);if(b){const j=T3(b,e.travelDates.startDate);d+=j}}}const N=e.transportationMode.toLowerCase();N.includes("cab")||N==="private cab service"?f.sightseeing.forEach(h=>{const b=r.find(j=>j.id===h);b&&b.transportationMode==="cab"&&(d+=P3(b,u))}):f.sightseeing.forEach(h=>{const b=r.find(j=>j.id===h);b&&(b.transportationMode==="self-drive-car"?d+=15:b.transportationMode==="self-drive-scooter"&&(d+=8))}),f.activities.forEach(h=>{const b=a.find(j=>j.id===h.activityId);if(b){const j=b.options.find(C=>C.id===h.optionId);if(j)if(j.costForHowMany>=u)d+=j.cost;else{const C=Math.ceil(u/j.costForHowMany);d+=j.cost*C}}}),f.entryTickets.forEach(h=>{const b=i.find(j=>j.id===h);b&&(d+=b.cost*u)}),f.meals.forEach(h=>{const b=l.find(j=>j.id===h);b&&(d+=b.cost*u)})}),d},Jn=(e,t=83)=>e*t,Vt=(e,t="USD")=>t==="INR"?`₹${e.toLocaleString("en-IN",{maximumFractionDigits:0})}`:`$${e.toFixed(2)}`;function Et(e){"@babel/helpers - typeof";return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(e)}var en=Uint8Array,Dn=Uint16Array,Vp=Int32Array,Rh=new en([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$h=new en([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j0=new en([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yb=function(e,t){for(var n=new Dn(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var a=new Vp(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return{b:n,r:a}},wb=yb(Rh,2),Nb=wb.b,S0=wb.r;Nb[28]=258,S0[258]=28;var jb=yb($h,0),L3=jb.b,Zg=jb.r,k0=new Dn(32768);for(var qt=0;qt<32768;++qt){var Da=(qt&43690)>>1|(qt&21845)<<1;Da=(Da&52428)>>2|(Da&13107)<<2,Da=(Da&61680)>>4|(Da&3855)<<4,k0[qt]=((Da&65280)>>8|(Da&255)<<8)>>1}var Ur=function(e,t,n){for(var r=e.length,a=0,i=new Dn(t);a<r;++a)e[a]&&++i[e[a]-1];var l=new Dn(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var o;if(n){o=new Dn(1<<t);var d=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],p=t-e[a],f=l[e[a]-1]++<<p,N=f|(1<<p)-1;f<=N;++f)o[k0[f]>>d]=u}else for(o=new Dn(r),a=0;a<r;++a)e[a]&&(o[a]=k0[l[e[a]-1]++]>>15-e[a]);return o},ri=new en(288);for(var qt=0;qt<144;++qt)ri[qt]=8;for(var qt=144;qt<256;++qt)ri[qt]=9;for(var qt=256;qt<280;++qt)ri[qt]=7;for(var qt=280;qt<288;++qt)ri[qt]=8;var Kc=new en(32);for(var qt=0;qt<32;++qt)Kc[qt]=5;var E3=Ur(ri,9,0),D3=Ur(ri,9,1),I3=Ur(Kc,5,0),O3=Ur(Kc,5,1),uf=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ur=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},hf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Wp=function(e){return(e+7)/8|0},Sb=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new en(e.subarray(t,n))},F3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pr=function(e,t,n){var r=new Error(t||F3[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,pr),!n)throw r;return r},M3=function(e,t,n,r){var a=e.length,i=0;if(!a||t.f&&!t.l)return n||new en(0);var l=!n,o=l||t.i!=2,d=t.i;l&&(n=new en(a*3));var u=function(Me){var ue=n.length;if(Me>ue){var ge=new en(Math.max(ue*2,Me));ge.set(n),n=ge}},p=t.f||0,f=t.p||0,N=t.b||0,h=t.l,b=t.d,j=t.m,C=t.n,x=a*8;do{if(!h){p=ur(e,f,1);var g=ur(e,f+1,3);if(f+=3,g)if(g==1)h=D3,b=O3,j=9,C=5;else if(g==2){var _=ur(e,f,31)+257,T=ur(e,f+10,15)+4,S=_+ur(e,f+5,31)+1;f+=14;for(var L=new en(S),R=new en(19),E=0;E<T;++E)R[j0[E]]=ur(e,f+E*3,7);f+=T*3;for(var I=uf(R),Y=(1<<I)-1,K=Ur(R,I,1),E=0;E<S;){var te=K[ur(e,f,Y)];f+=te&15;var y=te>>4;if(y<16)L[E++]=y;else{var G=0,M=0;for(y==16?(M=3+ur(e,f,3),f+=2,G=L[E-1]):y==17?(M=3+ur(e,f,7),f+=3):y==18&&(M=11+ur(e,f,127),f+=7);M--;)L[E++]=G}}var H=L.subarray(0,_),Z=L.subarray(_);j=uf(H),C=uf(Z),h=Ur(H,j,1),b=Ur(Z,C,1)}else pr(1);else{var y=Wp(f)+4,A=e[y-4]|e[y-3]<<8,P=y+A;if(P>a){d&&pr(0);break}o&&u(N+A),n.set(e.subarray(y,P),N),t.b=N+=A,t.p=f=P*8,t.f=p;continue}if(f>x){d&&pr(0);break}}o&&u(N+131072);for(var V=(1<<j)-1,ie=(1<<C)-1,D=f;;D=f){var G=h[hf(e,f)&V],q=G>>4;if(f+=G&15,f>x){d&&pr(0);break}if(G||pr(2),q<256)n[N++]=q;else if(q==256){D=f,h=null;break}else{var J=q-254;if(q>264){var E=q-257,ee=Rh[E];J=ur(e,f,(1<<ee)-1)+Nb[E],f+=ee}var ae=b[hf(e,f)&ie],de=ae>>4;ae||pr(3),f+=ae&15;var Z=L3[de];if(de>3){var ee=$h[de];Z+=hf(e,f)&(1<<ee)-1,f+=ee}if(f>x){d&&pr(0);break}o&&u(N+131072);var xe=N+J;if(N<Z){var ve=i-Z,Oe=Math.min(Z,xe);for(ve+N<0&&pr(3);N<Oe;++N)n[N]=r[ve+N]}for(;N<xe;++N)n[N]=n[N-Z]}}t.l=h,t.p=D,t.b=N,t.f=p,h&&(p=1,t.m=j,t.d=b,t.n=C)}while(!p);return N!=n.length&&l?Sb(n,0,N):n.subarray(0,N)},na=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},dc=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},mf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return{t:_b,l:0};if(a==1){var l=new en(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(P,_){return P.f-_.f}),n.push({s:-1,f:25001});var o=n[0],d=n[1],u=0,p=1,f=2;for(n[0]={s:-1,f:o.f+d.f,l:o,r:d};p!=a-1;)o=n[n[u].f<n[f].f?u++:f++],d=n[u!=p&&n[u].f<n[f].f?u++:f++],n[p++]={s:-1,f:o.f+d.f,l:o,r:d};for(var N=i[0].s,r=1;r<a;++r)i[r].s>N&&(N=i[r].s);var h=new Dn(N+1),b=_0(n[p-1],h,0);if(b>t){var r=0,j=0,C=b-t,x=1<<C;for(i.sort(function(_,T){return h[T.s]-h[_.s]||_.f-T.f});r<a;++r){var g=i[r].s;if(h[g]>t)j+=x-(1<<b-h[g]),h[g]=t;else break}for(j>>=C;j>0;){var y=i[r].s;h[y]<t?j-=1<<t-h[y]++-1:++r}for(;r>=0&&j;--r){var A=i[r].s;h[A]==t&&(--h[A],++j)}b=t}return{t:new en(h),l:b}},_0=function(e,t,n){return e.s==-1?Math.max(_0(e.l,t,n+1),_0(e.r,t,n+1)):t[e.s]=n},e1=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Dn(++t),r=0,a=e[0],i=1,l=function(d){n[r++]=d},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[o]}return{c:n.subarray(0,r),n:t}},uc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},kb=function(e,t,n){var r=n.length,a=Wp(t+2);e[a]=r&255,e[a+1]=r>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<r;++i)e[a+i+4]=n[i];return(a+4+r)*8},t1=function(e,t,n,r,a,i,l,o,d,u,p){na(t,p++,n),++a[256];for(var f=mf(a,15),N=f.t,h=f.l,b=mf(i,15),j=b.t,C=b.l,x=e1(N),g=x.c,y=x.n,A=e1(j),P=A.c,_=A.n,T=new Dn(19),S=0;S<g.length;++S)++T[g[S]&31];for(var S=0;S<P.length;++S)++T[P[S]&31];for(var L=mf(T,7),R=L.t,E=L.l,I=19;I>4&&!R[j0[I-1]];--I);var Y=u+5<<3,K=uc(a,ri)+uc(i,Kc)+l,te=uc(a,N)+uc(i,j)+l+14+3*I+uc(T,R)+2*T[16]+3*T[17]+7*T[18];if(d>=0&&Y<=K&&Y<=te)return kb(t,p,e.subarray(d,d+u));var G,M,H,Z;if(na(t,p,1+(te<K)),p+=2,te<K){G=Ur(N,h,0),M=N,H=Ur(j,C,0),Z=j;var V=Ur(R,E,0);na(t,p,y-257),na(t,p+5,_-1),na(t,p+10,I-4),p+=14;for(var S=0;S<I;++S)na(t,p+3*S,R[j0[S]]);p+=3*I;for(var ie=[g,P],D=0;D<2;++D)for(var q=ie[D],S=0;S<q.length;++S){var J=q[S]&31;na(t,p,V[J]),p+=R[J],J>15&&(na(t,p,q[S]>>5&127),p+=q[S]>>12)}}else G=E3,M=ri,H=I3,Z=Kc;for(var S=0;S<o;++S){var ee=r[S];if(ee>255){var J=ee>>18&31;dc(t,p,G[J+257]),p+=M[J+257],J>7&&(na(t,p,ee>>23&31),p+=Rh[J]);var ae=ee&31;dc(t,p,H[ae]),p+=Z[ae],ae>3&&(dc(t,p,ee>>5&8191),p+=$h[ae])}else dc(t,p,G[ee]),p+=M[ee]}return dc(t,p,G[256]),p+M[256]},R3=new Vp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_b=new en(0),$3=function(e,t,n,r,a,i){var l=i.z||e.length,o=new en(r+l+5*(1+Math.ceil(l/7e3))+a),d=o.subarray(r,o.length-a),u=i.l,p=(i.r||0)&7;if(t){p&&(d[0]=i.r>>3);for(var f=R3[t-1],N=f>>13,h=f&8191,b=(1<<n)-1,j=i.p||new Dn(32768),C=i.h||new Dn(b+1),x=Math.ceil(n/3),g=2*x,y=function(Pe){return(e[Pe]^e[Pe+1]<<x^e[Pe+2]<<g)&b},A=new Vp(25e3),P=new Dn(288),_=new Dn(32),T=0,S=0,L=i.i||0,R=0,E=i.w||0,I=0;L+2<l;++L){var Y=y(L),K=L&32767,te=C[Y];if(j[K]=te,C[Y]=K,E<=L){var G=l-L;if((T>7e3||R>24576)&&(G>423||!u)){p=t1(e,d,0,A,P,_,S,R,I,L-I,p),R=T=S=0,I=L;for(var M=0;M<286;++M)P[M]=0;for(var M=0;M<30;++M)_[M]=0}var H=2,Z=0,V=h,ie=K-te&32767;if(G>2&&Y==y(L-ie))for(var D=Math.min(N,G)-1,q=Math.min(32767,L),J=Math.min(258,G);ie<=q&&--V&&K!=te;){if(e[L+H]==e[L+H-ie]){for(var ee=0;ee<J&&e[L+ee]==e[L+ee-ie];++ee);if(ee>H){if(H=ee,Z=ie,ee>D)break;for(var ae=Math.min(ie,ee-2),de=0,M=0;M<ae;++M){var xe=L-ie+M&32767,ve=j[xe],Oe=xe-ve&32767;Oe>de&&(de=Oe,te=xe)}}}K=te,te=j[K],ie+=K-te&32767}if(Z){A[R++]=268435456|S0[H]<<18|Zg[Z];var Me=S0[H]&31,ue=Zg[Z]&31;S+=Rh[Me]+$h[ue],++P[257+Me],++_[ue],E=L+H,++T}else A[R++]=e[L],++P[e[L]]}}for(L=Math.max(L,E);L<l;++L)A[R++]=e[L],++P[e[L]];p=t1(e,d,u,A,P,_,S,R,I,L-I,p),u||(i.r=p&7|d[p/8|0]<<3,p-=7,i.h=C,i.p=j,i.i=L,i.w=E)}else{for(var L=i.w||0;L<l+u;L+=65535){var ge=L+65535;ge>=l&&(d[p/8|0]=u,ge=l),p=kb(d,p+1,e.subarray(L,ge))}i.i=l}return Sb(o,0,r+Wp(p)+a)},Cb=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)a+=r+=n[l];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}e=r,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},B3=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new en(i.length+e.length);l.set(i),l.set(e,i.length),e=l,a.w=i.length}return $3(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,a)},Ab=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},U3=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Cb();a.p(t.dictionary),Ab(e,2,a.d())}},z3=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&pr(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&pr(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function C0(e,t){t||(t={});var n=Cb();n.p(e);var r=B3(e,t,t.dictionary?6:2,4);return U3(r,t),Ab(r,r.length-4,n.d()),r}function q3(e,t){return M3(e.subarray(z3(e,t),-4),{i:2},t,t)}var H3=typeof TextDecoder<"u"&&new TextDecoder,V3=0;try{H3.decode(_b,{stream:!0}),V3=1}catch{}var et=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ff(){et.console&&typeof et.console.log=="function"&&et.console.log.apply(et.console,arguments)}var Ft={log:ff,warn:function(e){et.console&&(typeof et.console.warn=="function"?et.console.warn.apply(et.console,arguments):ff.call(null,arguments))},error:function(e){et.console&&(typeof et.console.error=="function"?et.console.error.apply(et.console,arguments):ff(e))}};function pf(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Ci(r.response,t,n)},r.onerror=function(){Ft.error("could not download file")},r.send()}function s1(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function pu(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Tc,A0,Ci=et.saveAs||((typeof window>"u"?"undefined":Et(window))!=="object"||window!==et?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=et.URL||et.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?s1(a.href)?pf(e,t,n):pu(a,a.target="_blank"):pu(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){pu(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(s1(e))pf(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){pu(r)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Et(i)!=="object"&&(Ft.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return pf(e,t,n);var a=e.type==="application/octet-stream",i=/constructor/i.test(et.HTMLElement)||et.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&i)&&(typeof FileReader>"u"?"undefined":Et(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var p=o.result;p=l?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},o.readAsDataURL(e)}else{var d=et.URL||et.webkitURL,u=d.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tb(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,i=n[r].process,l=a.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+o+d+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xf(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];n=Ys(n,r,a,i,t[0],7,-680876936),i=Ys(i,n,r,a,t[1],12,-389564586),a=Ys(a,i,n,r,t[2],17,606105819),r=Ys(r,a,i,n,t[3],22,-1044525330),n=Ys(n,r,a,i,t[4],7,-176418897),i=Ys(i,n,r,a,t[5],12,1200080426),a=Ys(a,i,n,r,t[6],17,-1473231341),r=Ys(r,a,i,n,t[7],22,-45705983),n=Ys(n,r,a,i,t[8],7,1770035416),i=Ys(i,n,r,a,t[9],12,-1958414417),a=Ys(a,i,n,r,t[10],17,-42063),r=Ys(r,a,i,n,t[11],22,-1990404162),n=Ys(n,r,a,i,t[12],7,1804603682),i=Ys(i,n,r,a,t[13],12,-40341101),a=Ys(a,i,n,r,t[14],17,-1502002290),n=Js(n,r=Ys(r,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Js(i,n,r,a,t[6],9,-1069501632),a=Js(a,i,n,r,t[11],14,643717713),r=Js(r,a,i,n,t[0],20,-373897302),n=Js(n,r,a,i,t[5],5,-701558691),i=Js(i,n,r,a,t[10],9,38016083),a=Js(a,i,n,r,t[15],14,-660478335),r=Js(r,a,i,n,t[4],20,-405537848),n=Js(n,r,a,i,t[9],5,568446438),i=Js(i,n,r,a,t[14],9,-1019803690),a=Js(a,i,n,r,t[3],14,-187363961),r=Js(r,a,i,n,t[8],20,1163531501),n=Js(n,r,a,i,t[13],5,-1444681467),i=Js(i,n,r,a,t[2],9,-51403784),a=Js(a,i,n,r,t[7],14,1735328473),n=Ks(n,r=Js(r,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ks(i,n,r,a,t[8],11,-2022574463),a=Ks(a,i,n,r,t[11],16,1839030562),r=Ks(r,a,i,n,t[14],23,-35309556),n=Ks(n,r,a,i,t[1],4,-1530992060),i=Ks(i,n,r,a,t[4],11,1272893353),a=Ks(a,i,n,r,t[7],16,-155497632),r=Ks(r,a,i,n,t[10],23,-1094730640),n=Ks(n,r,a,i,t[13],4,681279174),i=Ks(i,n,r,a,t[0],11,-358537222),a=Ks(a,i,n,r,t[3],16,-722521979),r=Ks(r,a,i,n,t[6],23,76029189),n=Ks(n,r,a,i,t[9],4,-640364487),i=Ks(i,n,r,a,t[12],11,-421815835),a=Ks(a,i,n,r,t[15],16,530742520),n=Xs(n,r=Ks(r,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Xs(i,n,r,a,t[7],10,1126891415),a=Xs(a,i,n,r,t[14],15,-1416354905),r=Xs(r,a,i,n,t[5],21,-57434055),n=Xs(n,r,a,i,t[12],6,1700485571),i=Xs(i,n,r,a,t[3],10,-1894986606),a=Xs(a,i,n,r,t[10],15,-1051523),r=Xs(r,a,i,n,t[1],21,-2054922799),n=Xs(n,r,a,i,t[8],6,1873313359),i=Xs(i,n,r,a,t[15],10,-30611744),a=Xs(a,i,n,r,t[6],15,-1560198380),r=Xs(r,a,i,n,t[13],21,1309151649),n=Xs(n,r,a,i,t[4],6,-145523070),i=Xs(i,n,r,a,t[11],10,-1120210379),a=Xs(a,i,n,r,t[2],15,718787259),r=Xs(r,a,i,n,t[9],21,-343485551),e[0]=qa(n,e[0]),e[1]=qa(r,e[1]),e[2]=qa(a,e[2]),e[3]=qa(i,e[3])}function Bh(e,t,n,r,a,i){return t=qa(qa(t,e),qa(r,i)),qa(t<<a|t>>>32-a,n)}function Ys(e,t,n,r,a,i,l){return Bh(t&n|~t&r,e,t,a,i,l)}function Js(e,t,n,r,a,i,l){return Bh(t&r|n&~r,e,t,a,i,l)}function Ks(e,t,n,r,a,i,l){return Bh(t^n^r,e,t,a,i,l)}function Xs(e,t,n,r,a,i,l){return Bh(n^(t|~r),e,t,a,i,l)}function Pb(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)xf(r,W3(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(xf(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,xf(r,a),r}function W3(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Tc=et.atob.bind(et),A0=et.btoa.bind(et);var n1="0123456789abcdef".split("");function G3(e){for(var t="",n=0;n<4;n++)t+=n1[e>>8*n+4&15]+n1[e>>8*n&15];return t}function Y3(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function T0(e){return Pb(e).map(Y3).join("")}var J3=function(e){for(var t=0;t<e.length;t++)e[t]=G3(e[t]);return e.join("")}(Pb("hello"))!="5d41402abc4b2a76b9719d911017c592";function qa(e,t){if(J3){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P0(e,t){var n,r,a,i;if(e!==n){for(var l=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),o=[],d=0;d<256;d++)o[d]=d;var u=0;for(d=0;d<256;d++){var p=o[d];u=(u+p+l.charCodeAt(d))%256,o[d]=o[u],o[u]=p}n=e,r=o}else o=r;var f=t.length,N=0,h=0,b="";for(d=0;d<f;d++)h=(h+(p=o[N=(N+1)%256]))%256,o[N]=o[h],o[h]=p,l=o[(o[N]+o[h])%256],b+=String.fromCharCode(t.charCodeAt(d)^l);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var r1={print:4,modify:8,copy:16,"annot-forms":32};function Ol(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(r1.perm!==void 0)throw new Error("Invalid permission: "+o);a+=r1[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^a)),this.encryptionKey=T0(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=P0(this.encryptionKey,this.padding)}function Fl(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[r]}return t}function a1(e){if(Et(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!a],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var l=t[n][i];try{l[0].apply(e,r)}catch(o){et.console&&Ft.error("jsPDF PubSub Error",o.message,o)}l[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function hh(e){if(!(this instanceof hh))return new hh(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Lb(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ti(e,t,n,r,a){if(!(this instanceof Ti))return new Ti(e,t,n,r,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Lb.call(this,r,a)}function Jl(e,t,n,r,a){if(!(this instanceof Jl))return new Jl(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Lb.call(this,r,a)}function Qe(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],l=[],o=1,d=16,u="S",p=null;Et(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,a=e.format||a,i=e.compress||e.compressPdf||i,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),u=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,N={},h={internal:{},__private__:{}};h.__private__.PubSub=a1;var b="1.3",j=h.__private__.getPdfVersion=function(){return b};h.__private__.setPdfVersion=function(v){b=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return C};var x=h.__private__.getPageFormat=function(v){return C[v]};a=a||"a4";var g={COMPAT:"compat",ADVANCED:"advanced"},y=g.COMPAT;function A(){this.saveGraphicsState(),X(new Ze(Ae,0,0,-Ae,0,ba()*Ae).toString()+" cm"),this.setFontSize(this.getFontSize()/Ae),u="n",y=g.ADVANCED}function P(){this.restoreGraphicsState(),u="S",y=g.COMPAT}var _=h.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};h.advancedAPI=function(v){var F=y===g.COMPAT;return F&&A.call(this),typeof v!="function"||(v(this),F&&P.call(this)),this},h.compatAPI=function(v){var F=y===g.ADVANCED;return F&&P.call(this),typeof v!="function"||(v(this),F&&A.call(this)),this},h.isAdvancedAPI=function(){return y===g.ADVANCED};var T,S=function(v){if(y!==g.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=h.roundToPrecision=h.__private__.roundToPrecision=function(v,F){var Q=t||F;if(isNaN(v)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Q).replace(/0+$/,"")};T=h.hpf=h.__private__.hpf=typeof d=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,d)}:d==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,16)};var R=h.f2=h.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return L(v,2)},E=h.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return L(v,3)},I=h.scale=h.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return y===g.COMPAT?v*Ae:y===g.ADVANCED?v:void 0},Y=function(v){return y===g.COMPAT?ba()-v:y===g.ADVANCED?v:void 0},K=function(v){return I(Y(v))};h.__private__.setPrecision=h.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(t=parseInt(v,10))};var te,G="00000000000000000000000000000000",M=h.__private__.getFileId=function(){return G},H=h.__private__.setFileId=function(v){return G=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Hs=new Ol(p.userPermissions,p.userPassword,p.ownerPassword,G)),G};h.setFileId=function(v){return H(v),this},h.getFileId=function(){return M()};var Z=h.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),Q=F<0?"+":"-",se=Math.floor(Math.abs(F/60)),he=Math.abs(F%60),Ne=[Q,J(se),"'",J(he),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),Ne].join("")},V=h.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),Q=parseInt(v.substr(6,2),10)-1,se=parseInt(v.substr(8,2),10),he=parseInt(v.substr(10,2),10),Ne=parseInt(v.substr(12,2),10),Ie=parseInt(v.substr(14,2),10);return new Date(F,Q,se,he,Ne,Ie,0)},ie=h.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=Z(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return te=F},D=h.__private__.getCreationDate=function(v){var F=te;return v==="jsDate"&&(F=V(te)),F};h.setCreationDate=function(v){return ie(v),this},h.getCreationDate=function(v){return D(v)};var q,J=h.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ee=h.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ae=0,de=[],xe=[],ve=0,Oe=[],Me=[],ue=!1,ge=xe,Pe=function(){ae=0,ve=0,xe=[],de=[],Oe=[],Gr=xs(),sr=xs()};h.__private__.setCustomOutputDestination=function(v){ue=!0,ge=v};var me=function(v){ue||(ge=v)};h.__private__.resetCustomOutputDestination=function(){ue=!1,ge=xe};var X=h.__private__.out=function(v){return v=v.toString(),ve+=v.length+1,ge.push(v),ge},we=h.__private__.write=function(v){return X(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Be=h.__private__.getArrayBuffer=function(v){for(var F=v.length,Q=new ArrayBuffer(F),se=new Uint8Array(Q);F--;)se[F]=v.charCodeAt(F);return Q},_e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return _e};var De=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(v){return De=y===g.ADVANCED?v/Ae:v,this};var $e,Ue=h.__private__.getFontSize=h.getFontSize=function(){return y===g.COMPAT?De:De*Ae},Ye=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(v){return Ye=v,this},h.__private__.getR2L=h.getR2L=function(){return Ye};var tt,lt=h.__private__.setZoomMode=function(v){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))$e=v;else if(isNaN(v)){if(F.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');$e=v}else $e=parseInt(v,10)};h.__private__.getZoomMode=function(){return $e};var ft,vt=h.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');tt=v};h.__private__.getPageMode=function(){return tt};var be=h.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ft=v};h.__private__.getLayoutMode=function(){return ft},h.__private__.setDisplayMode=h.setDisplayMode=function(v,F,Q){return lt(v),be(F),vt(Q),this};var je={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(v){if(Object.keys(je).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return je[v]},h.__private__.getDocumentProperties=function(){return je},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(v){for(var F in je)je.hasOwnProperty(F)&&v[F]&&(je[F]=v[F]);return this},h.__private__.setDocumentProperty=function(v,F){if(Object.keys(je).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return je[v]=F};var Le,Ae,ot,Te,Tt,nt={},ct={},Ms=[],St={},Vr={},es={},er={},Wr=null,ts=0,rt=[],Ct=new a1(h),di=e.hotfixes||[],Rs={},Sr={},kr=[],Ze=function v(F,Q,se,he,Ne,Ie){if(!(this instanceof v))return new v(F,Q,se,he,Ne,Ie);isNaN(F)&&(F=1),isNaN(Q)&&(Q=0),isNaN(se)&&(se=0),isNaN(he)&&(he=1),isNaN(Ne)&&(Ne=0),isNaN(Ie)&&(Ie=0),this._matrix=[F,Q,se,he,Ne,Ie]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},Ze.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,Q=v.sx*this.shy+v.shy*this.sy,se=v.shx*this.sx+v.sy*this.shx,he=v.shx*this.shy+v.sy*this.sy,Ne=v.tx*this.sx+v.ty*this.shx+this.tx,Ie=v.tx*this.shy+v.ty*this.sy+this.ty;return new Ze(F,Q,se,he,Ne,Ie)},Ze.prototype.decompose=function(){var v=this.sx,F=this.shy,Q=this.shx,se=this.sy,he=this.tx,Ne=this.ty,Ie=Math.sqrt(v*v+F*F),He=(v/=Ie)*Q+(F/=Ie)*se;Q-=v*He,se-=F*He;var Je=Math.sqrt(Q*Q+se*se);return He/=Je,v*(se/=Je)<F*(Q/=Je)&&(v=-v,F=-F,He=-He,Ie=-Ie),{scale:new Ze(Ie,0,0,Je,0,0),translate:new Ze(1,0,0,1,he,Ne),rotate:new Ze(v,F,-F,v,0,0),skew:new Ze(1,0,He,1,0,0)}},Ze.prototype.toString=function(v){return this.join(" ")},Ze.prototype.inversed=function(){var v=this.sx,F=this.shy,Q=this.shx,se=this.sy,he=this.tx,Ne=this.ty,Ie=1/(v*se-F*Q),He=se*Ie,Je=-F*Ie,dt=-Q*Ie,at=v*Ie;return new Ze(He,Je,dt,at,-He*he-dt*Ne,-Je*he-at*Ne)},Ze.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,Q=v.x*this.shy+v.y*this.sy+this.ty;return new ol(F,Q)},Ze.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),Q=this.applyToPoint(new ol(v.x+v.w,v.y+v.h));return new Oo(F.x,F.y,Q.x-F.x,Q.y-F.y)},Ze.prototype.clone=function(){var v=this.sx,F=this.shy,Q=this.shx,se=this.sy,he=this.tx,Ne=this.ty;return new Ze(v,F,Q,se,he,Ne)},h.Matrix=Ze;var tr=h.matrixMult=function(v,F){return F.multiply(v)},_r=new Ze(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=_r;var hn=function(v,F){if(!Vr[v]){var Q=(F instanceof Ti?"Sh":"P")+(Object.keys(St).length+1).toString(10);F.id=Q,Vr[v]=Q,St[Q]=F,Ct.publish("addPattern",F)}};h.ShadingPattern=Ti,h.TilingPattern=Jl,h.addShadingPattern=function(v,F){return S("addShadingPattern()"),hn(v,F),this},h.beginTilingPattern=function(v){S("beginTilingPattern()"),Nd(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},h.endTilingPattern=function(v,F){S("endTilingPattern()"),F.stream=Me[q].join(`
`),hn(v,F),Ct.publish("endTilingPattern",F),kr.pop().restore()};var Ns=h.__private__.newObject=function(){var v=xs();return _n(v,!0),v},xs=h.__private__.newObjectDeferred=function(){return ae++,de[ae]=function(){return ve},ae},_n=function(v,F){return F=typeof F=="boolean"&&F,de[v]=ve,F&&X(v+" 0 obj"),v},Ji=h.__private__.newAdditionalObject=function(){var v={objId:xs(),content:""};return Oe.push(v),v},Gr=xs(),sr=xs(),nr=h.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var Q=parseFloat(F[0]);F=[Q,Q,Q,"r"]}for(var se="#",he=0;he<3;he++)se+=("0"+Math.floor(255*parseFloat(F[he])).toString(16)).slice(-2);return se},rr=h.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var Q=v.ch1,se=v.ch2,he=v.ch3,Ne=v.ch4,Ie=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var He=new Tb(Q);if(He.ok)Q=He.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var Je=parseInt(Q.substr(1),16);Q=Je>>16&255,se=Je>>8&255,he=255&Je}if(se===void 0||Ne===void 0&&Q===se&&se===he)if(typeof Q=="string")F=Q+" "+Ie[0];else switch(v.precision){case 2:F=R(Q/255)+" "+Ie[0];break;case 3:default:F=E(Q/255)+" "+Ie[0]}else if(Ne===void 0||Et(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return F=["1.","1.","1.",Ie[1]].join(" ");if(typeof Q=="string")F=[Q,se,he,Ie[1]].join(" ");else switch(v.precision){case 2:F=[R(Q/255),R(se/255),R(he/255),Ie[1]].join(" ");break;default:case 3:F=[E(Q/255),E(se/255),E(he/255),Ie[1]].join(" ")}}else if(typeof Q=="string")F=[Q,se,he,Ne,Ie[2]].join(" ");else switch(v.precision){case 2:F=[R(Q),R(se),R(he),R(Ne),Ie[2]].join(" ");break;case 3:default:F=[E(Q),E(se),E(he),E(Ne),Ie[2]].join(" ")}return F},Cr=h.__private__.getFilters=function(){return l},Rn=h.__private__.putStream=function(v){var F=(v=v||{}).data||"",Q=v.filters||Cr(),se=v.alreadyAppliedFilters||[],he=v.addLength1||!1,Ne=F.length,Ie=v.objectId,He=function(Vs){return Vs};if(p!==null&&Ie===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(He=Hs.encryptor(Ie,0));var Je={};Q===!0&&(Q=["FlateEncode"]);var dt=v.additionalKeyValues||[],at=(Je=Qe.API.processDataByFilters!==void 0?Qe.API.processDataByFilters(F,Q):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(Je.data.length!==0&&(dt.push({key:"Length",value:Je.data.length}),he===!0&&dt.push({key:"Length1",value:Ne})),at.length!=0)if(at.split("/").length-1==1)dt.push({key:"Filter",value:at});else{dt.push({key:"Filter",value:"["+at+"]"});for(var wt=0;wt<dt.length;wt+=1)if(dt[wt].key==="DecodeParms"){for(var Jt=[],ss=0;ss<Je.reverseChain.split("/").length-1;ss+=1)Jt.push("null");Jt.push(dt[wt].value),dt[wt].value="["+Jt.join(" ")+"]"}}X("<<");for(var gs=0;gs<dt.length;gs++)X("/"+dt[gs].key+" "+dt[gs].value);X(">>"),Je.data.length!==0&&(X("stream"),X(He(Je.data)),X("endstream"))},Ar=h.__private__.putPage=function(v){var F=v.number,Q=v.data,se=v.objId,he=v.contentsObjId;_n(se,!0),X("<</Type /Page"),X("/Parent "+v.rootDictionaryObjId+" 0 R"),X("/Resources "+v.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&X("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&X("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&X("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&X("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&X("/UserUnit "+v.userUnit),Ct.publish("putPage",{objId:se,pageContext:rt[F],pageNumber:F,page:Q}),X("/Contents "+he+" 0 R"),X(">>"),X("endobj");var Ne=Q.join(`
`);return y===g.ADVANCED&&(Ne+=`
Q`),_n(he,!0),Rn({data:Ne,filters:Cr(),objectId:he}),X("endobj"),se},ui=h.__private__.putPages=function(){var v,F,Q=[];for(v=1;v<=ts;v++)rt[v].objId=xs(),rt[v].contentsObjId=xs();for(v=1;v<=ts;v++)Q.push(Ar({number:v,data:Me[v],objId:rt[v].objId,contentsObjId:rt[v].contentsObjId,mediaBox:rt[v].mediaBox,cropBox:rt[v].cropBox,bleedBox:rt[v].bleedBox,trimBox:rt[v].trimBox,artBox:rt[v].artBox,userUnit:rt[v].userUnit,rootDictionaryObjId:Gr,resourceDictionaryObjId:sr}));_n(Gr,!0),X("<</Type /Pages");var se="/Kids [";for(F=0;F<ts;F++)se+=Q[F]+" 0 R ";X(se+"]"),X("/Count "+ts),X(">>"),X("endobj"),Ct.publish("postPutPages")},Ki=function(v){Ct.publish("putFont",{font:v,out:X,newObject:Ns,putStream:Rn}),v.isAlreadyPutted!==!0&&(v.objectNumber=Ns(),X("<<"),X("/Type /Font"),X("/BaseFont /"+Fl(v.postScriptName)),X("/Subtype /Type1"),typeof v.encoding=="string"&&X("/Encoding /"+v.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Xi=function(){for(var v in nt)nt.hasOwnProperty(v)&&(f===!1||f===!0&&N.hasOwnProperty(v))&&Ki(nt[v])},Qi=function(v){v.objectNumber=Ns();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Q=v.pages[1].join(`
`);Rn({data:Q,additionalKeyValues:F,objectId:v.objectNumber}),X("endobj")},Zi=function(){for(var v in Rs)Rs.hasOwnProperty(v)&&Qi(Rs[v])},rd=function(v,F){var Q,se=[],he=1/(F-1);for(Q=0;Q<1;Q+=he)se.push(Q);if(se.push(1),v[0].offset!=0){var Ne={offset:0,color:v[0].color};v.unshift(Ne)}if(v[v.length-1].offset!=1){var Ie={offset:1,color:v[v.length-1].color};v.push(Ie)}for(var He="",Je=0,dt=0;dt<se.length;dt++){for(Q=se[dt];Q>v[Je+1].offset;)Je++;var at=v[Je].offset,wt=(Q-at)/(v[Je+1].offset-at),Jt=v[Je].color,ss=v[Je+1].color;He+=ee(Math.round((1-wt)*Jt[0]+wt*ss[0]).toString(16))+ee(Math.round((1-wt)*Jt[1]+wt*ss[1]).toString(16))+ee(Math.round((1-wt)*Jt[2]+wt*ss[2]).toString(16))}return He.trim()},zh=function(v,F){F||(F=21);var Q=Ns(),se=rd(v.colors,F),he=[];he.push({key:"FunctionType",value:"0"}),he.push({key:"Domain",value:"[0.0 1.0]"}),he.push({key:"Size",value:"["+F+"]"}),he.push({key:"BitsPerSample",value:"8"}),he.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rn({data:se,additionalKeyValues:he,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),X("endobj"),v.objectNumber=Ns(),X("<< /ShadingType "+v.type),X("/ColorSpace /DeviceRGB");var Ne="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?Ne+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):Ne+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),X(Ne+="]"),v.matrix&&X("/Matrix ["+v.matrix.toString()+"]"),X("/Function "+Q+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},qh=function(v,F){var Q=xs(),se=Ns();F.push({resourcesOid:Q,objectOid:se}),v.objectNumber=se;var he=[];he.push({key:"Type",value:"/Pattern"}),he.push({key:"PatternType",value:"1"}),he.push({key:"PaintType",value:"1"}),he.push({key:"TilingType",value:"1"}),he.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),he.push({key:"XStep",value:T(v.xStep)}),he.push({key:"YStep",value:T(v.yStep)}),he.push({key:"Resources",value:Q+" 0 R"}),v.matrix&&he.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Rn({data:v.stream,additionalKeyValues:he,objectId:v.objectNumber}),X("endobj")},el=function(v){var F;for(F in St)St.hasOwnProperty(F)&&(St[F]instanceof Ti?zh(St[F]):St[F]instanceof Jl&&qh(St[F],v))},ad=function(v){for(var F in v.objectNumber=Ns(),X("<<"),v)switch(F){case"opacity":X("/ca "+R(v[F]));break;case"stroke-opacity":X("/CA "+R(v[F]))}X(">>"),X("endobj")},Hh=function(){var v;for(v in es)es.hasOwnProperty(v)&&ad(es[v])},ko=function(){for(var v in X("/XObject <<"),Rs)Rs.hasOwnProperty(v)&&Rs[v].objectNumber>=0&&X("/"+v+" "+Rs[v].objectNumber+" 0 R");Ct.publish("putXobjectDict"),X(">>")},Vh=function(){Hs.oid=Ns(),X("<<"),X("/Filter /Standard"),X("/V "+Hs.v),X("/R "+Hs.r),X("/U <"+Hs.toHexString(Hs.U)+">"),X("/O <"+Hs.toHexString(Hs.O)+">"),X("/P "+Hs.P),X(">>"),X("endobj")},id=function(){for(var v in X("/Font <<"),nt)nt.hasOwnProperty(v)&&(f===!1||f===!0&&N.hasOwnProperty(v))&&X("/"+v+" "+nt[v].objectNumber+" 0 R");X(">>")},Wh=function(){if(Object.keys(St).length>0){for(var v in X("/Shading <<"),St)St.hasOwnProperty(v)&&St[v]instanceof Ti&&St[v].objectNumber>=0&&X("/"+v+" "+St[v].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),X(">>")}},tl=function(v){if(Object.keys(St).length>0){for(var F in X("/Pattern <<"),St)St.hasOwnProperty(F)&&St[F]instanceof h.TilingPattern&&St[F].objectNumber>=0&&St[F].objectNumber<v&&X("/"+F+" "+St[F].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),X(">>")}},Gh=function(){if(Object.keys(es).length>0){var v;for(v in X("/ExtGState <<"),es)es.hasOwnProperty(v)&&es[v].objectNumber>=0&&X("/"+v+" "+es[v].objectNumber+" 0 R");Ct.publish("putGStateDict"),X(">>")}},ls=function(v){_n(v.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),id(),Wh(),tl(v.objectOid),Gh(),ko(),X(">>"),X("endobj")},ld=function(){var v=[];Xi(),Hh(),Zi(),el(v),Ct.publish("putResources"),v.forEach(ls),ls({resourcesOid:sr,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources")},od=function(){Ct.publish("putAdditionalObjects");for(var v=0;v<Oe.length;v++){var F=Oe[v];_n(F.objId,!0),X(F.content),X("endobj")}Ct.publish("postPutAdditionalObjects")},cd=function(v){ct[v.fontName]=ct[v.fontName]||{},ct[v.fontName][v.fontStyle]=v.id},_o=function(v,F,Q,se,he){var Ne={id:"F"+(Object.keys(nt).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:Q,encoding:se,isStandardFont:he||!1,metadata:{}};return Ct.publish("addFont",{font:Ne,instance:this}),nt[Ne.id]=Ne,cd(Ne),Ne.id},Yh=function(v){for(var F=0,Q=_e.length;F<Q;F++){var se=_o.call(this,v[F][0],v[F][1],v[F][2],_e[F][3],!0);f===!1&&(N[se]=!0);var he=v[F][0].split("-");cd({id:se,fontName:he[0],fontStyle:he[1]||""})}Ct.publish("addFonts",{fonts:nt,dictionary:ct})},ar=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(se){var F=se.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var Q="Error in function "+F.split(`
`)[0].split("<")[0]+": "+se.message;if(!et.console)throw new Error(Q);et.console.error(Q,se),et.alert&&alert(Q)}},v.foo.bar=v,v.foo},sl=function(v,F){var Q,se,he,Ne,Ie,He,Je,dt,at;if(he=(F=F||{}).sourceEncoding||"Unicode",Ie=F.outputEncoding,(F.autoencode||Ie)&&nt[Le].metadata&&nt[Le].metadata[he]&&nt[Le].metadata[he].encoding&&(Ne=nt[Le].metadata[he].encoding,!Ie&&nt[Le].encoding&&(Ie=nt[Le].encoding),!Ie&&Ne.codePages&&(Ie=Ne.codePages[0]),typeof Ie=="string"&&(Ie=Ne[Ie]),Ie)){for(Je=!1,He=[],Q=0,se=v.length;Q<se;Q++)(dt=Ie[v.charCodeAt(Q)])?He.push(String.fromCharCode(dt)):He.push(v[Q]),He[Q].charCodeAt(0)>>8&&(Je=!0);v=He.join("")}for(Q=v.length;Je===void 0&&Q!==0;)v.charCodeAt(Q-1)>>8&&(Je=!0),Q--;if(!Je)return v;for(He=F.noBOM?[]:[254,255],Q=0,se=v.length;Q<se;Q++){if((at=(dt=v.charCodeAt(Q))>>8)>>8)throw new Error("Character at position "+Q+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");He.push(at),He.push(dt-(at<<8))}return String.fromCharCode.apply(void 0,He)},mn=h.__private__.pdfEscape=h.pdfEscape=function(v,F){return sl(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Co=h.__private__.beginPage=function(v){Me[++ts]=[],rt[ts]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},ud(ts),me(Me[q])},dd=function(v,F){var Q,se,he;switch(n=F||n,typeof v=="string"&&(Q=x(v.toLowerCase()),Array.isArray(Q)&&(se=Q[0],he=Q[1])),Array.isArray(v)&&(se=v[0]*Ae,he=v[1]*Ae),isNaN(se)&&(se=a[0],he=a[1]),(se>14400||he>14400)&&(Ft.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),he=Math.min(14400,he)),a=[se,he],n.substr(0,1)){case"l":he>se&&(a=[he,se]);break;case"p":se>he&&(a=[he,se])}Co(a),gd(Lo),X(ir),Do!==0&&X(Do+" J"),Io!==0&&X(Io+" j"),Ct.publish("addPage",{pageNumber:ts})},Jh=function(v){v>0&&v<=ts&&(Me.splice(v,1),rt.splice(v,1),ts--,q>ts&&(q=ts),this.setPage(q))},ud=function(v){v>0&&v<=ts&&(q=v)},Kh=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Me.length-1},hd=function(v,F,Q){var se,he=void 0;return Q=Q||{},v=v!==void 0?v:nt[Le].fontName,F=F!==void 0?F:nt[Le].fontStyle,se=v.toLowerCase(),ct[se]!==void 0&&ct[se][F]!==void 0?he=ct[se][F]:ct[v]!==void 0&&ct[v][F]!==void 0?he=ct[v][F]:Q.disableWarning===!1&&Ft.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),he||Q.noFallback||(he=ct.times[F])==null&&(he=ct.times.normal),he},Xh=h.__private__.putInfo=function(){var v=Ns(),F=function(se){return se};for(var Q in p!==null&&(F=Hs.encryptor(v,0)),X("<<"),X("/Producer ("+mn(F("jsPDF "+Qe.version))+")"),je)je.hasOwnProperty(Q)&&je[Q]&&X("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+mn(F(je[Q]))+")");X("/CreationDate ("+mn(F(te))+")"),X(">>"),X("endobj")},Ao=h.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Gr;switch(Ns(),X("<<"),X("/Type /Catalog"),X("/Pages "+F+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+$e;Q.substr(Q.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&X("/OpenAction [3 0 R /XYZ null null "+R($e)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}tt&&X("/PageMode /"+tt),Ct.publish("putCatalog"),X(">>"),X("endobj")},Qh=h.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(ae+1)),X("/Root "+ae+" 0 R"),X("/Info "+(ae-1)+" 0 R"),p!==null&&X("/Encrypt "+Hs.oid+" 0 R"),X("/ID [ <"+G+"> <"+G+"> ]"),X(">>")},Zh=h.__private__.putHeader=function(){X("%PDF-"+b),X("%ºß¬à")},em=h.__private__.putXRef=function(){var v="0000000000";X("xref"),X("0 "+(ae+1)),X("0000000000 65535 f ");for(var F=1;F<=ae;F++)typeof de[F]=="function"?X((v+de[F]()).slice(-10)+" 00000 n "):de[F]!==void 0?X((v+de[F]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},Yr=h.__private__.buildDocument=function(){Pe(),me(xe),Ct.publish("buildDocument"),Zh(),ui(),od(),ld(),p!==null&&Vh(),Xh(),Ao();var v=ve;return em(),Qh(),X("startxref"),X(""+v),X("%%EOF"),me(Me[q]),xe.join(`
`)},nl=h.__private__.getBlob=function(v){return new Blob([Be(v)],{type:"application/pdf"})},rl=h.output=h.__private__.output=ar(function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return Yr();case"save":h.save(F.filename);break;case"arraybuffer":return Be(Yr());case"blob":return nl(Yr());case"bloburi":case"bloburl":if(et.URL!==void 0&&typeof et.URL.createObjectURL=="function")return et.URL&&et.URL.createObjectURL(nl(Yr()))||void 0;Ft.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",se=Yr();try{Q=A0(se)}catch{Q=A0(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+F.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(et)==="[object Window]"){var he="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(he=F.pdfObjectUrl,Ne="");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+he+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",He=et.open();return He!==null&&He.document.write(Ie),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(et)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',dt=et.open();if(dt!==null){dt.document.write(Je);var at=this;dt.document.documentElement.querySelector("#pdfViewer").onload=function(){dt.document.title=F.filename,dt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(at.output("bloburl"))}}return dt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(et)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Jt=et.open();if(Jt!==null&&(Jt.document.write(wt),Jt.document.title=F.filename),Jt||typeof safari>"u")return Jt;break;case"datauri":case"dataurl":return et.document.location.href=this.output("datauristring",F);default:return null}}),md=function(v){return Array.isArray(di)===!0&&di.indexOf(v)>-1};switch(r){case"pt":Ae=1;break;case"mm":Ae=72/25.4;break;case"cm":Ae=72/2.54;break;case"in":Ae=72;break;case"px":Ae=md("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ae=12;break;case"ex":Ae=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ae=r}var Hs=null;ie(),H();var tm=function(v){return p!==null?Hs.encryptor(v,0):function(F){return F}},fd=h.__private__.getPageInfo=h.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rt[v].objId,pageNumber:v,pageContext:rt[v]}},st=h.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in rt)if(rt[F].objId===v)break;return fd(F)},sm=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:rt[q].objId,pageNumber:q,pageContext:rt[q]}};h.addPage=function(){return dd.apply(this,arguments),this},h.setPage=function(){return ud.apply(this,arguments),me.call(this,Me[q]),this},h.insertPage=function(v){return this.addPage(),this.movePage(q,v),this},h.movePage=function(v,F){var Q,se;if(v>F){Q=Me[v],se=rt[v];for(var he=v;he>F;he--)Me[he]=Me[he-1],rt[he]=rt[he-1];Me[F]=Q,rt[F]=se,this.setPage(F)}else if(v<F){Q=Me[v],se=rt[v];for(var Ne=v;Ne<F;Ne++)Me[Ne]=Me[Ne+1],rt[Ne]=rt[Ne+1];Me[F]=Q,rt[F]=se,this.setPage(F)}return this},h.deletePage=function(){return Jh.apply(this,arguments),this},h.__private__.text=h.text=function(v,F,Q,se,he){var Ne,Ie,He,Je,dt,at,wt,Jt,ss,gs=(se=se||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof Q=="string"||Array.isArray(Q))){var Vs=Q;Q=F,F=v,v=Vs}if(arguments[3]instanceof Ze?(S("The transform parameter of text() with a Matrix value"),ss=he):(He=arguments[4],Je=arguments[5],Et(wt=arguments[3])==="object"&&wt!==null||(typeof He=="string"&&(Je=He,He=null),typeof wt=="string"&&(Je=wt,wt=null),typeof wt=="number"&&(He=wt,wt=null),se={flags:wt,angle:He,align:Je})),isNaN(F)||isNaN(Q)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return gs;var Ps="",lr=!1,Cn=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:mi,Lr=gs.internal.scaleFactor;function jd(Mt){return Mt=Mt.split("	").join(Array(se.TabLen||9).join(" ")),mn(Mt,wt)}function $o(Mt){for(var Rt,cs=Mt.concat(),js=[],Zr=cs.length;Zr--;)typeof(Rt=cs.shift())=="string"?js.push(Rt):Array.isArray(Mt)&&(Rt.length===1||Rt[1]===void 0&&Rt[2]===void 0)?js.push(Rt[0]):js.push([Rt[0],Rt[1],Rt[2]]);return js}function Bo(Mt,Rt){var cs;if(typeof Mt=="string")cs=Rt(Mt)[0];else if(Array.isArray(Mt)){for(var js,Zr,Yo=Mt.concat(),bl=[],Ad=Yo.length;Ad--;)typeof(js=Yo.shift())=="string"?bl.push(Rt(js)[0]):Array.isArray(js)&&typeof js[0]=="string"&&(Zr=Rt(js[0],js[1],js[2]),bl.push([Zr[0],Zr[1],Zr[2]]));cs=bl}return cs}var dl=!1,Uo=!0;if(typeof v=="string")dl=!0;else if(Array.isArray(v)){var zo=v.concat();Ie=[];for(var ul,$s=zo.length;$s--;)(typeof(ul=zo.shift())!="string"||Array.isArray(ul)&&typeof ul[0]!="string")&&(Uo=!1);dl=Uo}if(dl===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var hl=De/gs.internal.scaleFactor,ml=hl*(Cn-1);switch(se.baseline){case"bottom":Q-=ml;break;case"top":Q+=hl-ml;break;case"hanging":Q+=hl-2*ml;break;case"middle":Q+=hl/2-ml}if((at=se.maxWidth||0)>0&&(typeof v=="string"?v=gs.splitTextToSize(v,at):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Mt,Rt){return Mt.concat(gs.splitTextToSize(Rt,at))},[]))),Ne={text:v,x:F,y:Q,options:se,mutex:{pdfEscape:mn,activeFontKey:Le,fonts:nt,activeFontSize:De}},Ct.publish("preProcessText",Ne),v=Ne.text,He=(se=Ne.options).angle,!(ss instanceof Ze)&&He&&typeof He=="number"){He*=Math.PI/180,se.rotationDirection===0&&(He=-He),y===g.ADVANCED&&(He=-He);var fl=Math.cos(He),qo=Math.sin(He);ss=new Ze(fl,qo,-qo,fl,0,0)}else He&&He instanceof Ze&&(ss=He);y!==g.ADVANCED||ss||(ss=_r),(dt=se.charSpace||ll)!==void 0&&(Ps+=T(I(dt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Jt=se.horizontalScale)!==void 0&&(Ps+=T(100*Jt)+` Tz
`),se.lang;var fn=-1,hm=se.renderingMode!==void 0?se.renderingMode:se.stroke,Ho=gs.internal.getCurrentPageInfo().pageContext;switch(hm){case 0:case!1:case"fill":fn=0;break;case 1:case!0:case"stroke":fn=1;break;case 2:case"fillThenStroke":fn=2;break;case 3:case"invisible":fn=3;break;case 4:case"fillAndAddForClipping":fn=4;break;case 5:case"strokeAndAddPathForClipping":fn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fn=6;break;case 7:case"addToPathForClipping":fn=7}var Sd=Ho.usedRenderingMode!==void 0?Ho.usedRenderingMode:-1;fn!==-1?Ps+=fn+` Tr
`:Sd!==-1&&(Ps+=`0 Tr
`),fn!==-1&&(Ho.usedRenderingMode=fn),Je=se.align||"left";var $n,pl=De*Cn,kd=gs.internal.pageSize.getWidth(),_d=nt[Le];dt=se.charSpace||ll,at=se.maxWidth||0,wt=Object.assign({autoencode:!0,noBOM:!0},se.flags);var ya=[],xi=function(Mt){return gs.getStringUnitWidth(Mt,{font:_d,charSpace:dt,fontSize:De,doKerning:!1})*De/Lr};if(Object.prototype.toString.call(v)==="[object Array]"){var pn;Ie=$o(v),Je!=="left"&&($n=Ie.map(xi));var nn,wa=0;if(Je==="right"){F-=$n[0],v=[],$s=Ie.length;for(var Kr=0;Kr<$s;Kr++)Kr===0?(nn=Pr(F),pn=Jr(Q)):(nn=I(wa-$n[Kr]),pn=-pl),v.push([Ie[Kr],nn,pn]),wa=$n[Kr]}else if(Je==="center"){F-=$n[0]/2,v=[],$s=Ie.length;for(var Xr=0;Xr<$s;Xr++)Xr===0?(nn=Pr(F),pn=Jr(Q)):(nn=I((wa-$n[Xr])/2),pn=-pl),v.push([Ie[Xr],nn,pn]),wa=$n[Xr]}else if(Je==="left"){v=[],$s=Ie.length;for(var xl=0;xl<$s;xl++)v.push(Ie[xl])}else if(Je==="justify"&&_d.encoding==="Identity-H"){v=[],$s=Ie.length,at=at!==0?at:kd;for(var Qr=0,os=0;os<$s;os++)if(pn=os===0?Jr(Q):-pl,nn=os===0?Pr(F):Qr,os<$s-1){var Vo=I((at-$n[os])/(Ie[os].split(" ").length-1)),rn=Ie[os].split(" ");v.push([rn[0]+" ",nn,pn]),Qr=0;for(var Bn=1;Bn<rn.length;Bn++){var gl=(xi(rn[Bn-1]+" "+rn[Bn])-xi(rn[Bn]))*Lr+Vo;Bn==rn.length-1?v.push([rn[Bn],gl,0]):v.push([rn[Bn]+" ",gl,0]),Qr-=gl}}else v.push([Ie[os],nn,pn]);v.push(["",Qr,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],$s=Ie.length,at=at!==0?at:kd,os=0;os<$s;os++)pn=os===0?Jr(Q):-pl,nn=os===0?Pr(F):0,os<$s-1?ya.push(T(I((at-$n[os])/(Ie[os].split(" ").length-1)))):ya.push(0),v.push([Ie[os],nn,pn])}}var Cd=typeof se.R2L=="boolean"?se.R2L:Ye;Cd===!0&&(v=Bo(v,function(Mt,Rt,cs){return[Mt.split("").reverse().join(""),Rt,cs]})),Ne={text:v,x:F,y:Q,options:se,mutex:{pdfEscape:mn,activeFontKey:Le,fonts:nt,activeFontSize:De}},Ct.publish("postProcessText",Ne),v=Ne.text,lr=Ne.mutex.isHex||!1;var Wo=nt[Le].encoding;Wo!=="WinAnsiEncoding"&&Wo!=="StandardEncoding"||(v=Bo(v,function(Mt,Rt,cs){return[jd(Mt),Rt,cs]})),Ie=$o(v),v=[];for(var gi,vi,Na,bi=0,vl=1,yi=Array.isArray(Ie[0])?vl:bi,ja="",Go=function(Mt,Rt,cs){var js="";return cs instanceof Ze?(cs=typeof se.angle=="number"?tr(cs,new Ze(1,0,0,1,Mt,Rt)):tr(new Ze(1,0,0,1,Mt,Rt),cs),y===g.ADVANCED&&(cs=tr(new Ze(1,0,0,-1,0,0),cs)),js=cs.join(" ")+` Tm
`):js=T(Mt)+" "+T(Rt)+` Td
`,js},Un=0;Un<Ie.length;Un++){switch(ja="",yi){case vl:Na=(lr?"<":"(")+Ie[Un][0]+(lr?">":")"),gi=parseFloat(Ie[Un][1]),vi=parseFloat(Ie[Un][2]);break;case bi:Na=(lr?"<":"(")+Ie[Un]+(lr?">":")"),gi=Pr(F),vi=Jr(Q)}ya!==void 0&&ya[Un]!==void 0&&(ja=ya[Un]+` Tw
`),Un===0?v.push(ja+Go(gi,vi,ss)+Na):yi===bi?v.push(ja+Na):yi===vl&&v.push(ja+Go(gi,vi,ss)+Na)}v=yi===bi?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var zn=`BT
/`;return zn+=Le+" "+De+` Tf
`,zn+=T(De*Cn)+` TL
`,zn+=fi+`
`,zn+=Ps,zn+=v,X(zn+="ET"),N[Le]=!0,gs};var nm=h.__private__.clip=h.clip=function(v){return X(v==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return nm("evenodd")},h.__private__.discardPath=h.discardPath=function(){return X("n"),this};var Tr=h.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(v){return Tr(v)&&(u=v),this};var pd=h.__private__.getStyle=h.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},xd=h.close=function(){return X("h"),this};h.stroke=function(){return X("S"),this},h.fill=function(v){return al("f",v),this},h.fillEvenOdd=function(v){return al("f*",v),this},h.fillStroke=function(v){return al("B",v),this},h.fillStrokeEvenOdd=function(v){return al("B*",v),this};var al=function(v,F){Et(F)==="object"?am(F,v):X(v)},To=function(v){v===null||y===g.ADVANCED&&v===void 0||(v=pd(v),X(v))};function rm(v,F,Q,se,he){var Ne=new Jl(F||this.boundingBox,Q||this.xStep,se||this.yStep,this.gState,he||this.matrix);Ne.stream=this.stream;var Ie=v+"$$"+this.cloneIndex+++"$$";return hn(Ie,Ne),Ne}var am=function(v,F){var Q=Vr[v.key],se=St[Q];if(se instanceof Ti)X("q"),X(im(F)),se.gState&&h.setGState(se.gState),X(v.matrix.toString()+" cm"),X("/"+Q+" sh"),X("Q");else if(se instanceof Jl){var he=new Ze(1,0,0,-1,0,ba());v.matrix&&(he=he.multiply(v.matrix||_r),Q=rm.call(se,v.key,v.boundingBox,v.xStep,v.yStep,he).id),X("q"),X("/Pattern cs"),X("/"+Q+" scn"),se.gState&&h.setGState(se.gState),X(F),X("Q")}},im=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Po=h.moveTo=function(v,F){return X(T(I(v))+" "+T(K(F))+" m"),this},hi=h.lineTo=function(v,F){return X(T(I(v))+" "+T(K(F))+" l"),this},ga=h.curveTo=function(v,F,Q,se,he,Ne){return X([T(I(v)),T(K(F)),T(I(Q)),T(K(se)),T(I(he)),T(K(Ne)),"c"].join(" ")),this};h.__private__.line=h.line=function(v,F,Q,se,he){if(isNaN(v)||isNaN(F)||isNaN(Q)||isNaN(se)||!Tr(he))throw new Error("Invalid arguments passed to jsPDF.line");return y===g.COMPAT?this.lines([[Q-v,se-F]],v,F,[1,1],he||"S"):this.lines([[Q-v,se-F]],v,F,[1,1]).stroke()},h.__private__.lines=h.lines=function(v,F,Q,se,he,Ne){var Ie,He,Je,dt,at,wt,Jt,ss,gs,Vs,Ps,lr;if(typeof v=="number"&&(lr=Q,Q=F,F=v,v=lr),se=se||[1,1],Ne=Ne||!1,isNaN(F)||isNaN(Q)||!Array.isArray(v)||!Array.isArray(se)||!Tr(he)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Po(F,Q),Ie=se[0],He=se[1],dt=v.length,Vs=F,Ps=Q,Je=0;Je<dt;Je++)(at=v[Je]).length===2?(Vs=at[0]*Ie+Vs,Ps=at[1]*He+Ps,hi(Vs,Ps)):(wt=at[0]*Ie+Vs,Jt=at[1]*He+Ps,ss=at[2]*Ie+Vs,gs=at[3]*He+Ps,Vs=at[4]*Ie+Vs,Ps=at[5]*He+Ps,ga(wt,Jt,ss,gs,Vs,Ps));return Ne&&xd(),To(he),this},h.path=function(v){for(var F=0;F<v.length;F++){var Q=v[F],se=Q.c;switch(Q.op){case"m":Po(se[0],se[1]);break;case"l":hi(se[0],se[1]);break;case"c":ga.apply(this,se);break;case"h":xd()}}return this},h.__private__.rect=h.rect=function(v,F,Q,se,he){if(isNaN(v)||isNaN(F)||isNaN(Q)||isNaN(se)||!Tr(he))throw new Error("Invalid arguments passed to jsPDF.rect");return y===g.COMPAT&&(se=-se),X([T(I(v)),T(K(F)),T(I(Q)),T(I(se)),"re"].join(" ")),To(he),this},h.__private__.triangle=h.triangle=function(v,F,Q,se,he,Ne,Ie){if(isNaN(v)||isNaN(F)||isNaN(Q)||isNaN(se)||isNaN(he)||isNaN(Ne)||!Tr(Ie))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-v,se-F],[he-Q,Ne-se],[v-he,F-Ne]],v,F,[1,1],Ie,!0),this},h.__private__.roundedRect=h.roundedRect=function(v,F,Q,se,he,Ne,Ie){if(isNaN(v)||isNaN(F)||isNaN(Q)||isNaN(se)||isNaN(he)||isNaN(Ne)||!Tr(Ie))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return he=Math.min(he,.5*Q),Ne=Math.min(Ne,.5*se),this.lines([[Q-2*he,0],[he*He,0,he,Ne-Ne*He,he,Ne],[0,se-2*Ne],[0,Ne*He,-he*He,Ne,-he,Ne],[2*he-Q,0],[-he*He,0,-he,-Ne*He,-he,-Ne],[0,2*Ne-se],[0,-Ne*He,he*He,-Ne,he,-Ne]],v+he,F,[1,1],Ie,!0),this},h.__private__.ellipse=h.ellipse=function(v,F,Q,se,he){if(isNaN(v)||isNaN(F)||isNaN(Q)||isNaN(se)||!Tr(he))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*Q,Ie=4/3*(Math.SQRT2-1)*se;return Po(v+Q,F),ga(v+Q,F-Ie,v+Ne,F-se,v,F-se),ga(v-Ne,F-se,v-Q,F-Ie,v-Q,F),ga(v-Q,F+Ie,v-Ne,F+se,v,F+se),ga(v+Ne,F+se,v+Q,F+Ie,v+Q,F),To(he),this},h.__private__.circle=h.circle=function(v,F,Q,se){if(isNaN(v)||isNaN(F)||isNaN(Q)||!Tr(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,Q,Q,se)},h.setFont=function(v,F,Q){return Q&&(F=_(F,Q)),Le=hd(v,F,{disableWarning:!1}),this};var lm=h.__private__.getFont=h.getFont=function(){return nt[hd.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var v,F,Q={};for(v in ct)if(ct.hasOwnProperty(v))for(F in Q[v]=[],ct[v])ct[v].hasOwnProperty(F)&&Q[v].push(F);return Q},h.addFont=function(v,F,Q,se,he){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?he=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(Q=_(Q,se)),he=he||"Identity-H",_o.call(this,v,F,Q,he)};var mi,Lo=e.lineWidth||.200025,il=h.__private__.getLineWidth=h.getLineWidth=function(){return Lo},gd=h.__private__.setLineWidth=h.setLineWidth=function(v){return Lo=v,X(T(I(v))+" w"),this};h.__private__.setLineDash=Qe.API.setLineDash=Qe.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Q){return T(I(Q))}).join(" "),F=T(I(F)),X("["+v+"] "+F+" d"),this};var vd=h.__private__.getLineHeight=h.getLineHeight=function(){return De*mi};h.__private__.getLineHeight=h.getLineHeight=function(){return De*mi};var bd=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(mi=v),this},yd=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return mi};bd(e.lineHeight);var Pr=h.__private__.getHorizontalCoordinate=function(v){return I(v)},Jr=h.__private__.getVerticalCoordinate=function(v){return y===g.ADVANCED?v:rt[q].mediaBox.topRightY-rt[q].mediaBox.bottomLeftY-I(v)},om=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(v){return T(Pr(v))},va=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(v){return T(Jr(v))},ir=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return nr(ir)},h.__private__.setStrokeColor=h.setDrawColor=function(v,F,Q,se){return ir=rr({ch1:v,ch2:F,ch3:Q,ch4:se,pdfColorType:"draw",precision:2}),X(ir),this};var Eo=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return nr(Eo)},h.__private__.setFillColor=h.setFillColor=function(v,F,Q,se){return Eo=rr({ch1:v,ch2:F,ch3:Q,ch4:se,pdfColorType:"fill",precision:2}),X(Eo),this};var fi=e.textColor||"0 g",cm=h.__private__.getTextColor=h.getTextColor=function(){return nr(fi)};h.__private__.setTextColor=h.setTextColor=function(v,F,Q,se){return fi=rr({ch1:v,ch2:F,ch3:Q,ch4:se,pdfColorType:"text",precision:3}),this};var ll=e.charSpace,dm=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(ll||0)};h.__private__.setCharSpace=h.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ll=v,this};var Do=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(v){var F=h.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Do=F,X(F+" J"),this};var Io=0;h.__private__.setLineJoin=h.setLineJoin=function(v){var F=h.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=F,X(F+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(T(I(v))+" M"),this},h.GState=hh,h.setGState=function(v){(v=typeof v=="string"?es[er[v]]:wd(null,v)).equals(Wr)||(X("/"+v.id+" gs"),Wr=v)};var wd=function(v,F){if(!v||!er[v]){var Q=!1;for(var se in es)if(es.hasOwnProperty(se)&&es[se].equals(F)){Q=!0;break}if(Q)F=es[se];else{var he="GS"+(Object.keys(es).length+1).toString(10);es[he]=F,F.id=he}return v&&(er[v]=F.id),Ct.publish("addGState",F),F}};h.addGState=function(v,F){return wd(v,F),this},h.saveGraphicsState=function(){return X("q"),Ms.push({key:Le,size:De,color:fi}),this},h.restoreGraphicsState=function(){X("Q");var v=Ms.pop();return Le=v.key,De=v.size,fi=v.color,Wr=null,this},h.setCurrentTransformationMatrix=function(v){return X(v.toString()+" cm"),this},h.comment=function(v){return X("#"+v),this};var ol=function(v,F){var Q=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(Ne){isNaN(Ne)||(Q=parseFloat(Ne))}});var se=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(Ne){isNaN(Ne)||(se=parseFloat(Ne))}});var he="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return he},set:function(Ne){he=Ne.toString()}}),this},Oo=function(v,F,Q,se){ol.call(this,v,F),this.type="rect";var he=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return he},set:function(Ie){isNaN(Ie)||(he=parseFloat(Ie))}});var Ne=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Ie){isNaN(Ie)||(Ne=parseFloat(Ie))}}),this},Fo=function(){this.page=ts,this.currentPage=q,this.pages=Me.slice(0),this.pagesContext=rt.slice(0),this.x=ot,this.y=Te,this.matrix=Tt,this.width=pi(q),this.height=ba(q),this.outputDestination=ge,this.id="",this.objectNumber=-1};Fo.prototype.restore=function(){ts=this.page,q=this.currentPage,rt=this.pagesContext,Me=this.pages,ot=this.x,Te=this.y,Tt=this.matrix,Mo(q,this.width),Ro(q,this.height),ge=this.outputDestination};var Nd=function(v,F,Q,se,he){kr.push(new Fo),ts=q=0,Me=[],ot=v,Te=F,Tt=he,Co([Q,se])},um=function(v){if(Sr[v])kr.pop().restore();else{var F=new Fo,Q="Xo"+(Object.keys(Rs).length+1).toString(10);F.id=Q,Sr[v]=Q,Rs[Q]=F,Ct.publish("addFormObject",F),kr.pop().restore()}};for(var cl in h.beginFormObject=function(v,F,Q,se,he){return Nd(v,F,Q,se,he),this},h.endFormObject=function(v){return um(v),this},h.doFormObject=function(v,F){var Q=Rs[Sr[v]];return X("q"),X(F.toString()+" cm"),X("/"+Q.id+" Do"),X("Q"),this},h.getFormObject=function(v){var F=Rs[Sr[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},h.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Ci(nl(Yr()),v),typeof Ci.unload=="function"&&et.setTimeout&&setTimeout(Ci.unload,911),this):new Promise(function(Q,se){try{var he=Ci(nl(Yr()),v);typeof Ci.unload=="function"&&et.setTimeout&&setTimeout(Ci.unload,911),Q(he)}catch(Ne){se(Ne.message)}})},Qe.API)Qe.API.hasOwnProperty(cl)&&(cl==="events"&&Qe.API.events.length?function(v,F){var Q,se,he;for(he=F.length-1;he!==-1;he--)Q=F[he][0],se=F[he][1],v.subscribe.apply(v,[Q].concat(typeof se=="function"?[se]:se))}(Ct,Qe.API.events):h[cl]=Qe.API[cl]);var pi=h.getPageWidth=function(v){return(rt[v=v||q].mediaBox.topRightX-rt[v].mediaBox.bottomLeftX)/Ae},Mo=h.setPageWidth=function(v,F){rt[v].mediaBox.topRightX=F*Ae+rt[v].mediaBox.bottomLeftX},ba=h.getPageHeight=function(v){return(rt[v=v||q].mediaBox.topRightY-rt[v].mediaBox.bottomLeftY)/Ae},Ro=h.setPageHeight=function(v,F){rt[v].mediaBox.topRightY=F*Ae+rt[v].mediaBox.bottomLeftY};return h.internal={pdfEscape:mn,getStyle:pd,getFont:lm,getFontSize:Ue,getCharSpace:dm,getTextColor:cm,getLineHeight:vd,getLineHeightFactor:yd,getLineWidth:il,write:we,getHorizontalCoordinate:Pr,getVerticalCoordinate:Jr,getCoordinateString:om,getVerticalCoordinateString:va,collections:{},newObject:Ns,newAdditionalObject:Ji,newObjectDeferred:xs,newObjectDeferredBegin:_n,getFilters:Cr,putStream:Rn,events:Ct,scaleFactor:Ae,pageSize:{getWidth:function(){return pi(q)},setWidth:function(v){Mo(q,v)},getHeight:function(){return ba(q)},setHeight:function(v){Ro(q,v)}},encryptionOptions:p,encryption:Hs,getEncryptor:tm,output:rl,getNumberOfPages:Kh,pages:Me,out:X,f2:R,f3:E,getPageInfo:fd,getPageInfoByObjId:st,getCurrentPageInfo:sm,getPDFVersion:j,Point:ol,Rectangle:Oo,Matrix:Ze,hasHotfix:md},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return pi(q)},set:function(v){Mo(q,v)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ba(q)},set:function(v){Ro(q,v)},enumerable:!0,configurable:!0}),Yh.call(h,_e),Le="F1",dd(a,n),Ct.publish("initialized"),h}Ol.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Ol.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ol.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ol.prototype.processOwnerPassword=function(e,t){return P0(T0(t).substr(0,5),e)},Ol.prototype.encryptor=function(e,t){var n=T0(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return P0(n,r)}},hh.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Et(e)!==Et(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Qe.API={events:[]},Qe.version="3.0.1";var rs=Qe.API,Gp=1,Yi=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pl=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},it=function(e){return e.toFixed(2)},Ia=function(e){return e.toFixed(5)};rs.__acroform__={};var kn=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},i1=function(e){return e*Gp},Ir=function(e){var t=new Db,n=Ge.internal.getHeight(e)||0,r=Ge.internal.getWidth(e)||0;return t.BBox=[0,0,Number(it(r)),Number(it(n))],t},K3=rs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},X3=rs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Q3=rs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},us=rs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Q3(e,t-1)},hs=rs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return K3(e,t-1)},ms=rs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return X3(e,t-1)},Z3=rs.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],i=e[1],l=e[2],o=e[3],d={};return d.lowerLeft_X=n(a)||0,d.lowerLeft_Y=r(i+o)||0,d.upperRight_X=n(a+l)||0,d.upperRight_Y=r(i)||0,[Number(it(d.lowerLeft_X)),Number(it(d.lowerLeft_Y)),Number(it(d.upperRight_X)),Number(it(d.upperRight_Y))]},e6=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=L0(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+it(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ir(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},L0=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=n,l=Ge.internal.getHeight(e)||0;l=l<0?-l:l;var o=Ge.internal.getWidth(e)||0;o=o<0?-o:o;var d=function(E,I,Y){if(E+1<a.length){var K=I+" "+a[E+1][0];return xu(K,e,Y).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var u,p,f=xu("3",e,i).height,N=e.multiline?l-i:(l-f)/2,h=N+=2,b=0,j=0,C=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+xu(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",g=0,y=0;y<a.length;y++)if(a.hasOwnProperty(y)){var A=!1;if(a[y].length!==1&&C!==a[y].length-1){if((f+2)*(g+2)+2>l)continue e;x+=a[y][C],A=!0,j=y,y--}else{x=(x+=a[y][C]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var P=parseInt(y),_=d(P,x,i),T=y>=a.length-1;if(_&&!T){x+=" ",C=0;continue}if(_||T){if(T)j=P;else if(e.multiline&&(f+2)*(g+2)+2>l)continue e}else{if(!e.multiline||(f+2)*(g+2)+2>l)continue e;j=P}}for(var S="",L=b;L<=j;L++){var R=a[L];if(e.multiline){if(L===j){S+=R[C]+" ",C=(C+1)%R.length;continue}if(L===b){S+=R[R.length-1]+" ";continue}}S+=R[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,p=xu(S,e,i).width,e.textAlign){case"right":u=o-p-2;break;case"center":u=(o-p)/2;break;case"left":default:u=2}t+=it(u)+" "+it(h)+` Td
`,t+="("+Yi(S)+`) Tj
`,t+=-it(u)+` 0 Td
`,h=-(i+2),p=0,b=A?j:j+1,g++,x=""}break}return r.text=t,r.fontSize=i,r},xu=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},t6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},s6=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},n6=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),Et(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[r]}},r6=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Nr.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(t6)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gp=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Ib,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i.objId=void 0,i.hasAnnotation&&s6(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,a){var i=!r;for(var l in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(l)){var o=r[l],d=[],u=o.Rect;if(o.Rect&&(o.Rect=Z3(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ge.createDefaultAppearanceStream(o),Et(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(d=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var p=e6(o);d.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(o.appearanceStreamContent){var f="";for(var N in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(N)){var h=o.appearanceStreamContent[N];if(f+="/"+N+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var l in h)if(h.hasOwnProperty(l)){var b=h[l];typeof b=="function"&&(b=b.call(a,o)),f+="/"+l+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=h)=="function"&&(b=b.call(a,o)),f+="/"+l+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);f+=">>"}d.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:o.objId}),a.internal.out("endobj")}i&&n6(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Eb=rs.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(l){return l};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Et(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),a+="("+Yi(r(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gf=function(e,t,n){var r=function(a){return a};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Yi(r(e))+")"},Rr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Rr.prototype.toString=function(){return this.objId+" 0 R"},Rr.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Rr.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:Eb(a,this.objId,this.scope)}):a instanceof Rr?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:r,value:a}))}return e};var Db=function(){Rr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};kn(Db,Rr);var Ib=function(){Rr.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Yi(n(e))+")"}},set:function(n){e=n}})};kn(Ib,Rr);var Nr=function e(){Rr.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!us(t,3)},set:function(x){x?this.F=hs(t,3):this.F=ms(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mh)return;i="FieldObject"+e.FieldNum++}var x=function(g){return g};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Yi(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Gp:u},set:function(x){u=x}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){p=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof mh||this instanceof Oi))return gf(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Is?N:gf(N,this.objId,this.scope)},set:function(x){x=x.toString(),N=this instanceof Is?x:x.substr(0,1)==="("?Pl(x.substr(1,x.length-2)):Pl(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is?Pl(N.substr(1,N.length-1)):N},set:function(x){x=x.toString(),N=this instanceof Is?"/"+x:x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Is?h:gf(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof Is?x:x.substr(0,1)==="("?Pl(x.substr(1,x.length-2)):Pl(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is?Pl(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Is?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(x){x=!!x,j=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(x){b=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,1)},set:function(x){x?this.Ff=hs(this.Ff,1):this.Ff=ms(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,2)},set:function(x){x?this.Ff=hs(this.Ff,2):this.Ff=ms(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,3)},set:function(x){x?this.Ff=hs(this.Ff,3):this.Ff=ms(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');C=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(C){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:C=2;break;case"center":case 1:C=1;break;case"left":case 0:default:C=0}}})};kn(Nr,Rr);var no=function(){Nr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Eb(t,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(i,l,o){o||(o=1);for(var d,u=[];d=l.exec(i);)u.push(d[o]);return u}(r,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,18)},set:function(n){n?this.Ff=hs(this.Ff,18):this.Ff=ms(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=hs(this.Ff,19):this.Ff=ms(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,20)},set:function(n){n?(this.Ff=hs(this.Ff,20),t.sort()):this.Ff=ms(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,22)},set:function(n){n?this.Ff=hs(this.Ff,22):this.Ff=ms(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(n){n?this.Ff=hs(this.Ff,23):this.Ff=ms(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,27)},set:function(n){n?this.Ff=hs(this.Ff,27):this.Ff=ms(this.Ff,27)}}),this.hasAppearanceStream=!1};kn(no,Nr);var ro=function(){no.call(this),this.fontName="helvetica",this.combo=!1};kn(ro,no);var ao=function(){ro.call(this),this.combo=!0};kn(ao,ro);var Eu=function(){ao.call(this),this.edit=!0};kn(Eu,ao);var Is=function(){Nr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,15)},set:function(n){n?this.Ff=hs(this.Ff,15):this.Ff=ms(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,16)},set:function(n){n?this.Ff=hs(this.Ff,16):this.Ff=ms(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,17)},set:function(n){n?this.Ff=hs(this.Ff,17):this.Ff=ms(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(n){n?this.Ff=hs(this.Ff,26):this.Ff=ms(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,a=[];for(r in a.push("<<"),t)a.push("/"+r+" ("+Yi(n(t[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Et(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};kn(Is,Nr);var Du=function(){Is.call(this),this.pushButton=!0};kn(Du,Is);var io=function(){Is.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};kn(io,Is);var mh=function(){var e,t;Nr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),r)l.push("/"+i+" ("+Yi(a(r[i]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Et(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};kn(mh,Nr),io.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},io.prototype.createOption=function(e){var t=new mh;return t.Parent=this,t.optionName=e,this.Kids.push(t),a6.call(this.scope,t),t};var Iu=function(){Is.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};kn(Iu,Is);var Oi=function(){Nr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,13)},set:function(t){t?this.Ff=hs(this.Ff,13):this.Ff=ms(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,21)},set:function(t){t?this.Ff=hs(this.Ff,21):this.Ff=ms(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,23)},set:function(t){t?this.Ff=hs(this.Ff,23):this.Ff=ms(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,24)},set:function(t){t?this.Ff=hs(this.Ff,24):this.Ff=ms(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,25)},set:function(t){t?this.Ff=hs(this.Ff,25):this.Ff=ms(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,26)},set:function(t){t?this.Ff=hs(this.Ff,26):this.Ff=ms(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};kn(Oi,Nr);var Ou=function(){Oi.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!us(this.Ff,14)},set:function(e){e?this.Ff=hs(this.Ff,14):this.Ff=ms(this.Ff,14)}}),this.password=!0};kn(Ou,Oi);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=L0(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+it(Ge.internal.getWidth(e))+" "+it(Ge.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+it(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ir(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],i=Ge.internal.getHeight(e),l=Ge.internal.getWidth(e),o=L0(e,e.caption);return a.push("1 g"),a.push("0 0 "+it(l)+" "+it(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+it(l-1)+" "+it(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+it(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+it(Ge.internal.getWidth(e))+" "+it(Ge.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ge.RadioButton.Circle.YesNormal,t.D[e]=Ge.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ir(e);t.scope=e.scope;var n=[],r=Ge.internal.getWidth(e)<=Ge.internal.getHeight(e)?Ge.internal.getWidth(e)/4:Ge.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Ge.internal.Bezier_C,i=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ia(Ge.internal.getWidth(e)/2)+" "+Ia(Ge.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=[],r=Ge.internal.getWidth(e)<=Ge.internal.getHeight(e)?Ge.internal.getWidth(e)/4:Ge.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Ge.internal.Bezier_C).toFixed(5)),l=Number((r*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ia(Ge.internal.getWidth(e)/2)+" "+Ia(Ge.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ia(Ge.internal.getWidth(e)/2)+" "+Ia(Ge.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=[],r=Ge.internal.getWidth(e)<=Ge.internal.getHeight(e)?Ge.internal.getWidth(e)/4:Ge.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ia(Ge.internal.getWidth(e)/2)+" "+Ia(Ge.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ge.RadioButton.Cross.YesNormal,t.D[e]=Ge.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ir(e);t.scope=e.scope;var n=[],r=Ge.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+it(Ge.internal.getWidth(e)-2)+" "+it(Ge.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(it(r.x1.x)+" "+it(r.x1.y)+" m"),n.push(it(r.x2.x)+" "+it(r.x2.y)+" l"),n.push(it(r.x4.x)+" "+it(r.x4.y)+" m"),n.push(it(r.x3.x)+" "+it(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=Ge.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+it(Ge.internal.getWidth(e))+" "+it(Ge.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+it(Ge.internal.getWidth(e)-2)+" "+it(Ge.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(it(n.x1.x)+" "+it(n.x1.y)+" m"),r.push(it(n.x2.x)+" "+it(n.x2.y)+" l"),r.push(it(n.x4.x)+" "+it(n.x4.y)+" m"),r.push(it(n.x3.x)+" "+it(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ir(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+it(Ge.internal.getWidth(e))+" "+it(Ge.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ge.internal.getWidth(e),n=Ge.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Ge.internal.getWidth=function(e){var t=0;return Et(e)==="object"&&(t=i1(e.Rect[2])),t},Ge.internal.getHeight=function(e){var t=0;return Et(e)==="object"&&(t=i1(e.Rect[3])),t};var a6=rs.addField=function(e){if(r6(this,e),!(e instanceof Nr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};rs.AcroFormChoiceField=no,rs.AcroFormListBox=ro,rs.AcroFormComboBox=ao,rs.AcroFormEditBox=Eu,rs.AcroFormButton=Is,rs.AcroFormPushButton=Du,rs.AcroFormRadioButton=io,rs.AcroFormCheckBox=Iu,rs.AcroFormTextField=Oi,rs.AcroFormPasswordField=Ou,rs.AcroFormAppearance=Ge,rs.AcroForm={ChoiceField:no,ListBox:ro,ComboBox:ao,EditBox:Eu,Button:Is,PushButton:Du,RadioButton:io,CheckBox:Iu,TextField:Oi,PasswordField:Ou,Appearance:Ge},Qe.AcroForm={ChoiceField:no,ListBox:ro,ComboBox:ao,EditBox:Eu,Button:Is,PushButton:Du,RadioButton:io,CheckBox:Iu,TextField:Oi,PasswordField:Ou,Appearance:Ge};function Ob(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(E,I){var Y,K,te,G,M,H=t;if((I=I||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(_(E))for(M in n)for(te=n[M],Y=0;Y<te.length;Y+=1){for(G=!0,K=0;K<te[Y].length;K+=1)if(te[Y][K]!==void 0&&te[Y][K]!==E[K]){G=!1;break}if(G===!0){H=M;break}}else for(M in n)for(te=n[M],Y=0;Y<te.length;Y+=1){for(G=!0,K=0;K<te[Y].length;K+=1)if(te[Y][K]!==void 0&&te[Y][K]!==E.charCodeAt(K)){G=!1;break}if(G===!0){H=M;break}}return H===t&&I!==t&&(H=I),H},a=function E(I){for(var Y=this.internal.write,K=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:I.width}),G.push({key:"Height",value:I.height}),I.colorSpace===C.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===C.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var M="",H=0,Z=I.transparency.length;H<Z;H++)M+=I.transparency[H]+" "+I.transparency[H]+" ";G.push({key:"Mask",value:"["+M+"]"})}I.sMask!==void 0&&G.push({key:"SMask",value:I.objectId+1+" 0 R"});var V=I.filter!==void 0?["/"+I.filter]:void 0;if(K({data:I.data,additionalKeyValues:G,alreadyAppliedFilters:V,objectId:I.objectId}),Y("endobj"),"sMask"in I&&I.sMask!==void 0){var ie="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,D={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:ie,data:I.sMask};"filter"in I&&(D.filter=I.filter),E.call(this,D)}if(I.colorSpace===C.INDEXED){var q=this.internal.newObject();K({data:S(new Uint8Array(I.palette)),objectId:q}),Y("endobj")}},i=function(){var E=this.internal.collections.addImage_images;for(var I in E)a.call(this,E[I])},l=function(){var E,I=this.internal.collections.addImage_images,Y=this.internal.write;for(var K in I)Y("/I"+(E=I[K]).index,E.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var E=this.internal.collections.addImage_images;return o.call(this),E},u=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(E){return typeof e["process"+E.toUpperCase()]=="function"},f=function(E){return Et(E)==="object"&&E.nodeType===1},N=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var Y=""+E.getAttribute("src");if(Y.indexOf("data:image/")===0)return Tc(unescape(Y).split("base64,").pop());var K=e.loadFile(Y,!0);if(K!==void 0)return K}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var te;switch(I){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return Tc(E.toDataURL(te,1).split("base64,").pop())}},h=function(E){var I=this.internal.collections.addImage_images;if(I){for(var Y in I)if(E===I[Y].alias)return I[Y]}},b=function(E,I,Y){return E||I||(E=-96,I=-96),E<0&&(E=-1*Y.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*Y.height*72/I/this.internal.scaleFactor),E===0&&(E=I*Y.width/Y.height),I===0&&(I=E*Y.height/Y.width),[E,I]},j=function(E,I,Y,K,te,G){var M=b.call(this,Y,K,te),H=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,V=d.call(this);if(Y=M[0],K=M[1],V[te.index]=te,G){G*=Math.PI/180;var ie=Math.cos(G),D=Math.sin(G),q=function(ee){return ee.toFixed(4)},J=[q(ie),q(D),q(-1*D),q(ie),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,H(E),Z(I+K),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([H(Y),"0","0",H(K),"0","0","cm"].join(" "))):this.internal.write([H(Y),"0","0",H(K),H(E),Z(I+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},C=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},g=e.__addimage__.sHashCode=function(E){var I,Y,K=0;if(typeof E=="string")for(Y=E.length,I=0;I<Y;I++)K=(K<<5)-K+E.charCodeAt(I),K|=0;else if(_(E))for(Y=E.byteLength/2,I=0;I<Y;I++)K=(K<<5)-K+E[I],K|=0;return K},y=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},A=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var I=E.indexOf(",");return I<0?null:E.substring(0,I).trim().endsWith("base64")?E.substring(I+1):null},P=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(E){return P()&&E instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(E){return P()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},T=e.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,Y=new Uint8Array(I),K=0;K<I;K++)Y[K]=E.charCodeAt(K);return Y},S=e.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",Y=_(E)?E:new Uint8Array(E),K=0;K<Y.length;K+=8192)I+=String.fromCharCode.apply(null,Y.subarray(K,K+8192));return I};e.addImage=function(){var E,I,Y,K,te,G,M,H,Z;if(typeof arguments[1]=="number"?(I=t,Y=arguments[1],K=arguments[2],te=arguments[3],G=arguments[4],M=arguments[5],H=arguments[6],Z=arguments[7]):(I=arguments[1],Y=arguments[2],K=arguments[3],te=arguments[4],G=arguments[5],M=arguments[6],H=arguments[7],Z=arguments[8]),Et(E=arguments[0])==="object"&&!f(E)&&"imageData"in E){var V=E;E=V.imageData,I=V.format||I||t,Y=V.x||Y||0,K=V.y||K||0,te=V.w||V.width||te,G=V.h||V.height||G,M=V.alias||M,H=V.compression||H,Z=V.rotation||V.angle||Z}var ie=this.internal.getFilters();if(H===void 0&&ie.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(Y)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var D=L.call(this,E,I,M,H);return j.call(this,Y,K,te,G,D,Z),this};var L=function(E,I,Y,K){var te,G,M;if(typeof E=="string"&&r(E)===t){E=unescape(E);var H=R(E,!1);(H!==""||(H=e.loadFile(E,!0))!==void 0)&&(E=H)}if(f(E)&&(E=N(E,I)),I=r(E,I),!p(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((M=Y)==null||M.length===0)&&(Y=function(Z){return typeof Z=="string"||_(Z)?g(Z):_(Z.data)?g(Z.data):null}(E)),(te=h.call(this,Y))||(P()&&(E instanceof Uint8Array||I==="RGBA"||(G=E,E=T(E))),te=this["process"+I.toUpperCase()](E,u.call(this),Y,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in e.image_compression?Z:x.NONE}(K),G)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},R=e.__addimage__.convertBase64ToBinaryString=function(E,I){I=typeof I!="boolean"||I;var Y,K="";if(typeof E=="string"){var te;Y=(te=A(E))!==null&&te!==void 0?te:E;try{K=Tc(Y)}catch(G){if(I)throw y(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(E){var I,Y,K="";if(f(E)&&(E=N(E)),typeof E=="string"&&r(E)===t&&((K=R(E,!1))===""&&(K=e.loadFile(E)||""),E=K),Y=r(E),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!P()||E instanceof Uint8Array||(E=T(E)),!(I=this["process"+Y.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=Y,I}})(Qe.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Qe.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,a,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,p=!1,f=0;f<u.length&&!p;f++)switch((r=u[f]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var N=0;N<u.length;N++){r=u[N];var h=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(j.objId),g=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+h(x(r.contents))+")",i+=" /Popup "+C.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+h(x(g))+") >>",j.content=i;var y=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+l(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+y,r.open&&(i+=" /Open true"),i+=" >>",C.content=i,this.internal.write(j.objId,"0 R",C.objId,"0 R");break;case"freetext":a="/Rect ["+l(r.bounds.x)+" "+o(r.bounds.y)+" "+l(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var A=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(b(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var P=this.annotations._nameMap[r.options.name];r.options.pageNumber=P.page,r.options.top=P.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var _=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+_+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,a,i,l){var o=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:d(n),y:u(r),w:d(n+a),h:u(r+i)},options:l,type:"link"})},e.textWithLink=function(n,r,a,i){var l,o,d=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var p=this.splitTextToSize(n,o).length;l=Math.ceil(u*p)}else o=d,l=u;return this.text(n,r,a,i),a+=.2*u,i.align==="center"&&(r-=d/2),i.align==="right"&&(r-=d),this.link(r,a-u,o,l,i),d},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Qe.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},o=e.__arabicParser__.isArabicEndLetter=function(j){return l(j)&&i(j)&&t[j.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(j){return l(j)&&a.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return l(j)&&i(j)&&t[j.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return l(j)&&i(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return l(j)&&i(j)&&t[j.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return l(j)&&i(j)&&t[j.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(j){var C=0,x=n,g="",y=0;for(C=0;C<j.length;C+=1)x[j.charCodeAt(C)]!==void 0?(y++,typeof(x=x[j.charCodeAt(C)])=="number"&&(g+=String.fromCharCode(x),x=n,y=0),C===j.length-1&&(x=n,g+=j.charAt(C-(y-1)),C-=y-1,y=0)):(x=n,g+=j.charAt(C-y),C-=y,y=0);return g};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&r[j.charCodeAt(0)]!==void 0};var N=e.__arabicParser__.getCorrectForm=function(j,C,x){return l(j)?i(j)===!1?-1:!u(j)||!l(C)&&!l(x)||!l(x)&&o(C)||o(j)&&!l(C)||o(j)&&d(C)||o(j)&&o(C)?0:p(j)&&l(C)&&!o(C)&&l(x)&&u(x)?3:o(j)||!l(x)?1:2:-1},h=function(j){var C=0,x=0,g=0,y="",A="",P="",_=(j=j||"").split("\\s+"),T=[];for(C=0;C<_.length;C+=1){for(T.push(""),x=0;x<_[C].length;x+=1)y=_[C][x],A=_[C][x-1],P=_[C][x+1],l(y)?(g=N(y,A,P),T[C]+=g!==-1?String.fromCharCode(t[y.charCodeAt(0)][g]):y):T[C]+=y;T[C]=f(T[C])}return T.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var j,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(C)){var g=0;for(x=[],g=0;g<C.length;g+=1)Array.isArray(C[g])?x.push([h(C[g][0]),C[g][1],C[g][2]]):x.push([h(C[g])]);j=x}else j=h(C);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",b])}(Qe.API),Qe.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Qe.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(j){N=j}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(j){b=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return r.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,u){r.call(this);var p=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),N=u.scaleFactor||this.internal.scaleFactor,h=0,b=0,j=0,C=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var x=u.maxWidth;x>0?typeof d=="string"?d=this.splitTextToSize(d,x):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(y,A){return y.concat(C.splitTextToSize(A,x))},[])):d=Array.isArray(d)?d:[d];for(var g=0;g<d.length;g++)h<(j=this.getStringUnitWidth(d[g],{font:f})*p)&&(h=j);return h!==0&&(b=d.length),{w:h/=N,h:Math.max((b*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/N,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,N=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=f.top,h&&N&&(this.printHeaderRow(d.lineNumber,!0),d.y+=N[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,n===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-p,d.y+p,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+p,{align:"center",baseline:"top",maxWidth:d.width-p-p}):this.text(d.text,d.x+p,d.y+p,{align:"left",baseline:"top",maxWidth:d.width-p-p})),this.internal.__cell__.lastCell=d,this};e.table=function(d,u,p,f,N){if(r.call(this),!p)throw new Error("No data for PDF table.");var h,b,j,C,x=[],g=[],y=[],A={},P={},_=[],T=[],S=(N=N||{}).autoSize||!1,L=N.printHeaders!==!1,R=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,E=N.margins||Object.assign({width:this.getPageWidth()},t),I=typeof N.padding=="number"?N.padding:3,Y=N.headerBackgroundColor||"#c8c8c8",K=N.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=K,this.setFontSize(R),f==null)g=x=Object.keys(p[0]),y=x.map(function(){return"left"});else if(Array.isArray(f)&&Et(f[0])==="object")for(x=f.map(function(V){return V.name}),g=f.map(function(V){return V.prompt||V.name||""}),y=f.map(function(V){return V.align||"left"}),h=0;h<f.length;h+=1)P[f[h].name]=f[h].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(g=x=f,y=x.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<x.length;h+=1){for(A[C=x[h]]=p.map(function(V){return V[C]}),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=A[C],this.setFont(void 0,"normal"),j=0;j<b.length;j+=1)_.push(this.getTextDimensions(b[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[C]=Math.max.apply(null,_)+I+I,_=[]}if(L){var te={};for(h=0;h<x.length;h+=1)te[x[h]]={},te[x[h]].text=g[h],te[x[h]].align=y[h];var G=o.call(this,te,P);T=x.map(function(V){return new i(d,u,P[V],G,te[V].text,void 0,te[V].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var M=f.reduce(function(V,ie){return V[ie.name]=ie.align,V},{});for(h=0;h<p.length;h+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:h,data:p[h]},this);var H=o.call(this,p[h],P);for(j=0;j<x.length;j+=1){var Z=p[h][x[j]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:h,col:j,data:Z},this),l.call(this,new i(d,u,P[x[j]],H,Z,h+2,M[x[j]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var o=function(d,u){var p=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(d).map(function(h){var b=d[h];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[h]-p-p)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/N+p+p},this).reduce(function(h,b){return Math.max(h,b)},0)};e.setTableHeaderRow=function(d){r.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){p=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(p.y=this.internal.__cell__.margins.top||0,N.push(p)),p.lineNumber=d;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,p),this.setTextColor(b)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),n=!1}}(Qe.API);var Fb={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Mb=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],E0=Ob(Mb),Rb=[100,200,300,400,500,600,700,800,900],i6=Ob(Rb);function D0(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return Fb[i=i||"normal"]?i:"normal"}(e.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof E0[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function l1(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var l6={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},o1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function c1(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function o6(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},l6,n.genericFontFamilies||{}),i=null,l=null,o=0;o<t.length;++o)if(a[(i=D0(t[o])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){l=e[i.family];break}if(!(l=l||e[r]))throw new Error("Could not find a font-family for the rule '"+c1(i)+"' and default family '"+r+"'.");if(l=function(d,u){if(u[d])return u[d];var p=E0[d],f=p<=E0.normal?-1:1,N=l1(u,Mb,p,f);if(!N)throw new Error("Could not find a matching font-stretch value for "+d);return N}(i.stretch,l),l=function(d,u){if(u[d])return u[d];for(var p=Fb[d],f=0;f<p.length;++f)if(u[p[f]])return u[p[f]];throw new Error("Could not find a matching font-style for "+d)}(i.style,l),!(l=function(d,u){if(u[d])return u[d];if(d===400&&u[500])return u[500];if(d===500&&u[400])return u[400];var p=i6[d],f=l1(u,Rb,p,d<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+d);return f}(i.weight,l)))throw new Error("Failed to resolve a font for the rule '"+c1(i)+"'.");return l}function d1(e){return e.trimLeft()}function c6(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function d6(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gu,u1,h1,vf=["times"];(function(e){var t,n,r,a,i,l,o,d,u,p=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new d,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new l,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new l,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,d=this.internal.Matrix,u=new p}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=D;Object.defineProperty(this,"pdf",{get:function(){return q}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(me){J=!!me}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(me){ee=!!me}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(me){isNaN(me)||(ae=me)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(me){isNaN(me)||(de=me)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(me){var X;typeof me=="number"?X=[me,me,me,me]:((X=new Array(4))[0]=me[0],X[1]=me.length>=2?me[1]:X[0],X[2]=me.length>=3?me[2]:X[0],X[3]=me.length>=4?me[3]:X[1]),u.margin=X}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(me){xe=me}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(me){ve=me}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(me){Oe=me}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(me){me instanceof p&&(u=me)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(me){u.path=me}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(me){Me=me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(me){var X;X=N(me),this.ctx.fillStyle=X.style,this.ctx.isFillTransparent=X.a===0,this.ctx.fillOpacity=X.a,this.pdf.setFillColor(X.r,X.g,X.b,{a:X.a}),this.pdf.setTextColor(X.r,X.g,X.b,{a:X.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(me){var X=N(me);this.ctx.strokeStyle=X.style,this.ctx.isStrokeTransparent=X.a===0,this.ctx.strokeOpacity=X.a,X.a===0?this.pdf.setDrawColor(255,255,255):(X.a,this.pdf.setDrawColor(X.r,X.g,X.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(me){["butt","round","square"].indexOf(me)!==-1&&(this.ctx.lineCap=me,this.pdf.setLineCap(me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(me){isNaN(me)||(this.ctx.lineWidth=me,this.pdf.setLineWidth(me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(me){["bevel","round","miter"].indexOf(me)!==-1&&(this.ctx.lineJoin=me,this.pdf.setLineJoin(me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(me){isNaN(me)||(this.ctx.miterLimit=me,this.pdf.setMiterLimit(me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(me){this.ctx.textBaseline=me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(me){["right","end","center","left","start"].indexOf(me)!==-1&&(this.ctx.textAlign=me)}});var ue=null;function ge(me,X){if(ue===null){var we=function(Be){var _e=[];return Object.keys(Be).forEach(function(De){Be[De].forEach(function($e){var Ue=null;switch($e){case"bold":Ue={family:De,weight:"bold"};break;case"italic":Ue={family:De,style:"italic"};break;case"bolditalic":Ue={family:De,weight:"bold",style:"italic"};break;case"":case"normal":Ue={family:De}}Ue!==null&&(Ue.ref={name:De,style:$e},_e.push(Ue))})}),_e}(me.getFontList());ue=function(Be){for(var _e={},De=0;De<Be.length;++De){var $e=D0(Be[De]),Ue=$e.family,Ye=$e.stretch,tt=$e.style,lt=$e.weight;_e[Ue]=_e[Ue]||{},_e[Ue][Ye]=_e[Ue][Ye]||{},_e[Ue][Ye][tt]=_e[Ue][Ye][tt]||{},_e[Ue][Ye][tt][lt]=$e}return _e}(we.concat(X))}return ue}var Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(me){ue=null,Pe=me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(me){var X;if(this.ctx.font=me,(X=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(me))!==null){var we=X[1];X[2];var Be=X[3],_e=X[4];X[5];var De=X[6],$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(_e)[2];_e=Math.floor($e==="px"?parseFloat(_e)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(_e)*this.pdf.getFontSize():parseFloat(_e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(_e);var Ue=function(je){var Le,Ae,ot=[],Te=je.trim();if(Te==="")return vf;if(Te in o1)return[o1[Te]];for(;Te!=="";){switch(Ae=null,Le=(Te=d1(Te)).charAt(0)){case'"':case"'":Ae=c6(Te.substring(1),Le);break;default:Ae=d6(Te)}if(Ae===null||(ot.push(Ae[0]),(Te=d1(Ae[1]))!==""&&Te.charAt(0)!==","))return vf;Te=Te.replace(/^,/,"")}return ot}(De);if(this.fontFaces){var Ye=o6(ge(this.pdf,this.fontFaces),Ue.map(function(je){return{family:je,stretch:"normal",weight:Be,style:we}}));this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var tt="";(Be==="bold"||parseInt(Be,10)>=700||we==="bold")&&(tt="bold"),we==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var lt="",ft={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<Ue.length;vt++){if(this.pdf.internal.getFont(Ue[vt],tt,{noFallback:!0,disableWarning:!0})!==void 0){lt=Ue[vt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(Ue[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lt=Ue[vt],tt="bold";else if(this.pdf.internal.getFont(Ue[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lt=Ue[vt],tt="normal";break}}if(lt===""){for(var be=0;be<Ue.length;be++)if(ft[Ue[be]]){lt=ft[Ue[be]];break}}lt=lt===""?"Times":lt,this.pdf.setFont(lt,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(me){this.ctx.globalCompositeOperation=me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(me){this.ctx.globalAlpha=me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(me){this.ctx.lineDashOffset=me,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(me){this.ctx.lineDash=me,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(me){this.ctx.ignoreClearRect=!!me}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){A.call(this,"fill",!1)},f.prototype.stroke=function(){A.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,q){if(isNaN(D)||isNaN(q))throw Ft.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new l(D,q));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new l(D,q)},f.prototype.closePath=function(){var D=new l(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Et(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){D=new l(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(D.x,D.y)},f.prototype.lineTo=function(D,q){if(isNaN(D)||isNaN(q))throw Ft.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new l(D,q));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new l(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,q,J,ee){if(isNaN(J)||isNaN(ee)||isNaN(D)||isNaN(q))throw Ft.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new l(J,ee)),de=this.ctx.transform.applyToPoint(new l(D,q));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new l(ae.x,ae.y)},f.prototype.bezierCurveTo=function(D,q,J,ee,ae,de){if(isNaN(ae)||isNaN(de)||isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee))throw Ft.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new l(ae,de)),ve=this.ctx.transform.applyToPoint(new l(D,q)),Oe=this.ctx.transform.applyToPoint(new l(J,ee));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:Oe.x,y2:Oe.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},f.prototype.arc=function(D,q,J,ee,ae,de){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee)||isNaN(ae))throw Ft.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new l(D,q));D=xe.x,q=xe.y;var ve=this.ctx.transform.applyToPoint(new l(0,J)),Oe=this.ctx.transform.applyToPoint(new l(0,0));J=Math.sqrt(Math.pow(ve.x-Oe.x,2)+Math.pow(ve.y-Oe.y,2))}Math.abs(ae-ee)>=2*Math.PI&&(ee=0,ae=2*Math.PI),this.path.push({type:"arc",x:D,y:q,radius:J,startAngle:ee,endAngle:ae,counterclockwise:de})},f.prototype.arcTo=function(D,q,J,ee,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,q,J,ee){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee))throw Ft.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,q),this.lineTo(D+J,q),this.lineTo(D+J,q+ee),this.lineTo(D,q+ee),this.lineTo(D,q),this.lineTo(D+J,q),this.lineTo(D,q)},f.prototype.fillRect=function(D,q,J,ee){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee))throw Ft.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,q,J,ee),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(D,q,J,ee){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee))throw Ft.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(D,q,J,ee),this.stroke())},f.prototype.clearRect=function(D,q,J,ee){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee))throw Ft.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,q,J,ee))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(q),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(D){var q,J,ee,ae;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))q=0,J=0,ee=0,ae=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(de!==null)q=parseInt(de[1]),J=parseInt(de[2]),ee=parseInt(de[3]),ae=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)q=parseInt(de[1]),J=parseInt(de[2]),ee=parseInt(de[3]),ae=parseFloat(de[4]);else{if(ae=1,typeof D=="string"&&D.charAt(0)!=="#"){var xe=new Tb(D);D=xe.ok?xe.toHex():"#000000"}D.length===4?(q=D.substring(1,2),q+=q,J=D.substring(2,3),J+=J,ee=D.substring(3,4),ee+=ee):(q=D.substring(1,3),J=D.substring(3,5),ee=D.substring(5,7)),q=parseInt(q,16),J=parseInt(J,16),ee=parseInt(ee,16)}}return{r:q,g:J,b:ee,a:ae,style:D}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,q,J,ee){if(isNaN(q)||isNaN(J)||typeof D!="string")throw Ft.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!h.call(this)){var ae=H(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:D,x:q,y:J,scale:de,angle:ae,align:this.textAlign,maxWidth:ee})}},f.prototype.strokeText=function(D,q,J,ee){if(isNaN(q)||isNaN(J)||typeof D!="string")throw Ft.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){ee=isNaN(ee)?void 0:ee;var ae=H(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;I.call(this,{text:D,x:q,y:J,scale:de,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:ee})}},f.prototype.measureText=function(D){if(typeof D!="string")throw Ft.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,J=this.pdf.internal.scaleFactor,ee=q.internal.getFontSize(),ae=q.getStringUnitWidth(D)*ee/q.internal.scaleFactor,de=function(xe){var ve=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this};return new de({width:ae*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(D,q){if(isNaN(D)||isNaN(q))throw Ft.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new d(D,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(D){if(isNaN(D))throw Ft.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new d(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(D,q){if(isNaN(D)||isNaN(q))throw Ft.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new d(1,0,0,1,D,q);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(D,q,J,ee,ae,de){if(isNaN(D)||isNaN(q)||isNaN(J)||isNaN(ee)||isNaN(ae)||isNaN(de))throw Ft.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new d(D,q,J,ee,ae,de);this.ctx.transform=this.ctx.transform.multiply(xe)},f.prototype.setTransform=function(D,q,J,ee,ae,de){D=isNaN(D)?1:D,q=isNaN(q)?0:q,J=isNaN(J)?0:J,ee=isNaN(ee)?1:ee,ae=isNaN(ae)?0:ae,de=isNaN(de)?0:de,this.ctx.transform=new d(D,q,J,ee,ae,de)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,q,J,ee,ae,de,xe,ve,Oe){var Me=this.pdf.getImageProperties(D),ue=1,ge=1,Pe=1,me=1;ee!==void 0&&ve!==void 0&&(Pe=ve/ee,me=Oe/ae,ue=Me.width/ee*ve/ee,ge=Me.height/ae*Oe/ae),de===void 0&&(de=q,xe=J,q=0,J=0),ee!==void 0&&ve===void 0&&(ve=ee,Oe=ae),ee===void 0&&ve===void 0&&(ve=Me.width,Oe=Me.height);for(var X,we=this.ctx.transform.decompose(),Be=H(we.rotate.shx),_e=new d,De=(_e=(_e=(_e=_e.multiply(we.translate)).multiply(we.skew)).multiply(we.scale)).applyToRectangle(new o(de-q*Pe,xe-J*me,ee*ue,ae*ge)),$e=C.call(this,De),Ue=[],Ye=0;Ye<$e.length;Ye+=1)Ue.indexOf($e[Ye])===-1&&Ue.push($e[Ye]);if(y(Ue),this.autoPaging)for(var tt=Ue[0],lt=Ue[Ue.length-1],ft=tt;ft<lt+1;ft++){this.pdf.setPage(ft);var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],be=ft===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ae=ft===1?0:je+(ft-2)*Le;if(this.ctx.clip_path.length!==0){var ot=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(X,this.posX+this.margin[3],-Ae+be+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=ot}var Te=JSON.parse(JSON.stringify(De));Te=g([Te],this.posX+this.margin[3],-Ae+be+this.ctx.prevPageLastElemOffset)[0];var Tt=(ft>tt||ft<lt)&&j.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Le,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,Be),Tt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",De.x,De.y,De.w,De.h,null,null,Be)};var C=function(D,q,J){var ee=[];q=q||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ee.push(Math.floor((D.y+ae)/J)+1);break;case"arc":ee.push(Math.floor((D.y+ae-D.radius)/J)+1),ee.push(Math.floor((D.y+ae+D.radius)/J)+1);break;case"qct":var de=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ee.push(Math.floor((de.y+ae)/J)+1),ee.push(Math.floor((de.y+de.h+ae)/J)+1);break;case"bct":var xe=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ee.push(Math.floor((xe.y+ae)/J)+1),ee.push(Math.floor((xe.y+xe.h+ae)/J)+1);break;case"rect":ee.push(Math.floor((D.y+ae)/J)+1),ee.push(Math.floor((D.y+D.h+ae)/J)+1)}for(var ve=0;ve<ee.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ve];)x.call(this);return ee},x=function(){var D=this.fillStyle,q=this.strokeStyle,J=this.font,ee=this.lineCap,ae=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=q,this.font=J,this.lineCap=ee,this.lineWidth=ae,this.lineJoin=de},g=function(D,q,J){for(var ee=0;ee<D.length;ee++)switch(D[ee].type){case"bct":D[ee].x2+=q,D[ee].y2+=J;case"qct":D[ee].x1+=q,D[ee].y1+=J;case"mt":case"lt":case"arc":default:D[ee].x+=q,D[ee].y+=J}return D},y=function(D){return D.sort(function(q,J){return q-J})},A=function(D,q){for(var J,ee,ae=this.fillStyle,de=this.strokeStyle,xe=this.lineCap,ve=this.lineWidth,Oe=Math.abs(ve*this.ctx.transform.scaleX),Me=this.lineJoin,ue=JSON.parse(JSON.stringify(this.path)),ge=JSON.parse(JSON.stringify(this.path)),Pe=[],me=0;me<ge.length;me++)if(ge[me].x!==void 0)for(var X=C.call(this,ge[me]),we=0;we<X.length;we+=1)Pe.indexOf(X[we])===-1&&Pe.push(X[we]);for(var Be=0;Be<Pe.length;Be++)for(;this.pdf.internal.getNumberOfPages()<Pe[Be];)x.call(this);if(y(Pe),this.autoPaging)for(var _e=Pe[0],De=Pe[Pe.length-1],$e=_e;$e<De+1;$e++){this.pdf.setPage($e),this.fillStyle=ae,this.strokeStyle=de,this.lineCap=xe,this.lineWidth=Oe,this.lineJoin=Me;var Ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=$e===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=$e===1?0:tt+($e-2)*lt;if(this.ctx.clip_path.length!==0){var vt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(J,this.posX+this.margin[3],-ft+Ye+this.ctx.prevPageLastElemOffset),P.call(this,D,!0),this.path=vt}if(ee=JSON.parse(JSON.stringify(ue)),this.path=g(ee,this.posX+this.margin[3],-ft+Ye+this.ctx.prevPageLastElemOffset),q===!1||$e===0){var be=($e>_e||$e<De)&&j.call(this);be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,lt,null).clip().discardPath()),P.call(this,D,q),be&&this.pdf.restoreGraphicsState()}this.lineWidth=ve}else this.lineWidth=Oe,P.call(this,D,q),this.lineWidth=ve;this.path=ue},P=function(D,q){if((D!=="stroke"||q||!b.call(this))&&(D==="stroke"||q||!h.call(this))){for(var J,ee,ae=[],de=this.path,xe=0;xe<de.length;xe++){var ve=de[xe];switch(ve.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ve,deltas:[],abs:[]});break;case"lt":var Oe=ae.length;if(de[xe-1]&&!isNaN(de[xe-1].x)&&(J=[ve.x-de[xe-1].x,ve.y-de[xe-1].y],Oe>0)){for(;Oe>=0;Oe--)if(ae[Oe-1].close!==!0&&ae[Oe-1].begin!==!0){ae[Oe-1].deltas.push(J),ae[Oe-1].abs.push(ve);break}}break;case"bct":J=[ve.x1-de[xe-1].x,ve.y1-de[xe-1].y,ve.x2-de[xe-1].x,ve.y2-de[xe-1].y,ve.x-de[xe-1].x,ve.y-de[xe-1].y],ae[ae.length-1].deltas.push(J);break;case"qct":var Me=de[xe-1].x+2/3*(ve.x1-de[xe-1].x),ue=de[xe-1].y+2/3*(ve.y1-de[xe-1].y),ge=ve.x+2/3*(ve.x1-ve.x),Pe=ve.y+2/3*(ve.y1-ve.y),me=ve.x,X=ve.y;J=[Me-de[xe-1].x,ue-de[xe-1].y,ge-de[xe-1].x,Pe-de[xe-1].y,me-de[xe-1].x,X-de[xe-1].y],ae[ae.length-1].deltas.push(J);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ve)}}ee=q?null:D==="stroke"?"stroke":"fill";for(var we=!1,Be=0;Be<ae.length;Be++)if(ae[Be].arc)for(var _e=ae[Be].abs,De=0;De<_e.length;De++){var $e=_e[De];$e.type==="arc"?S.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,q,!we):Y.call(this,$e.x,$e.y),we=!0}else if(ae[Be].close===!0)this.pdf.internal.out("h"),we=!1;else if(ae[Be].begin!==!0){var Ue=ae[Be].start.x,Ye=ae[Be].start.y;K.call(this,ae[Be].deltas,Ue,Ye),we=!0}ee&&L.call(this,ee),q&&R.call(this)}},_=function(D){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-J;case"top":return D+q-J;case"hanging":return D+q-2*J;case"middle":return D+q/2-J;case"ideographic":return D;case"alphabetic":default:return D}},T=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(q,J){this.colorStops.push([q,J])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(D,q,J,ee,ae,de,xe,ve,Oe){for(var Me=G.call(this,J,ee,ae,de),ue=0;ue<Me.length;ue++){var ge=Me[ue];ue===0&&(Oe?E.call(this,ge.x1+D,ge.y1+q):Y.call(this,ge.x1+D,ge.y1+q)),te.call(this,D,q,ge.x2,ge.y2,ge.x3,ge.y3,ge.x4,ge.y4)}ve?R.call(this):L.call(this,xe)},L=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(D,q){this.pdf.internal.out(n(D)+" "+r(q)+" m")},I=function(D){var q;switch(D.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var J=this.pdf.getTextDimensions(D.text),ee=_.call(this,D.y),ae=T.call(this,ee)-J.h,de=this.ctx.transform.applyToPoint(new l(D.x,ee)),xe=this.ctx.transform.decompose(),ve=new d;ve=(ve=(ve=ve.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Oe,Me,ue,ge=this.ctx.transform.applyToRectangle(new o(D.x,ee,J.w,J.h)),Pe=ve.applyToRectangle(new o(D.x,ae,J.w,J.h)),me=C.call(this,Pe),X=[],we=0;we<me.length;we+=1)X.indexOf(me[we])===-1&&X.push(me[we]);if(y(X),this.autoPaging)for(var Be=X[0],_e=X[X.length-1],De=Be;De<_e+1;De++){this.pdf.setPage(De);var $e=De===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[2],tt=Ye-this.margin[0],lt=this.pdf.internal.pageSize.width-this.margin[1],ft=lt-this.margin[3],vt=De===1?0:Ue+(De-2)*tt;if(this.ctx.clip_path.length!==0){var be=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(Oe,this.posX+this.margin[3],-1*vt+$e),P.call(this,"fill",!0),this.path=be}var je=g([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-vt+$e+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),ue=this.lineWidth,this.lineWidth=ue*D.scale);var Le=this.autoPaging!=="text";if(Le||je.y+je.h<=Ye){if(Le||je.y>=$e&&je.x<=lt){var Ae=Le?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||lt-je.x)[0],ot=g([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-vt+$e+this.ctx.prevPageLastElemOffset)[0],Te=Le&&(De>Be||De<_e)&&j.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,tt,null).clip().discardPath()),this.pdf.text(Ae,ot.x,ot.y,{angle:D.angle,align:q,renderingMode:D.renderingMode}),Te&&this.pdf.restoreGraphicsState()}}else je.y<Ye&&(this.ctx.prevPageLastElemOffset+=Ye-je.y);D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=ue)}else D.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*D.scale),ue=this.lineWidth,this.lineWidth=ue*D.scale),this.pdf.text(D.text,de.x+this.posX,de.y+this.posY,{angle:D.angle,align:q,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=ue)},Y=function(D,q,J,ee){J=J||0,ee=ee||0,this.pdf.internal.out(n(D+J)+" "+r(q+ee)+" l")},K=function(D,q,J){return this.pdf.lines(D,q,J,null,null)},te=function(D,q,J,ee,ae,de,xe,ve){this.pdf.internal.out([t(a(J+D)),t(i(ee+q)),t(a(ae+D)),t(i(de+q)),t(a(xe+D)),t(i(ve+q)),"c"].join(" "))},G=function(D,q,J,ee){for(var ae=2*Math.PI,de=Math.PI/2;q>J;)q-=ae;var xe=Math.abs(J-q);xe<ae&&ee&&(xe=ae-xe);for(var ve=[],Oe=ee?-1:1,Me=q;xe>1e-5;){var ue=Me+Oe*Math.min(xe,de);ve.push(M.call(this,D,Me,ue)),xe-=Math.abs(ue-Me),Me=ue}return ve},M=function(D,q,J){var ee=(J-q)/2,ae=D*Math.cos(ee),de=D*Math.sin(ee),xe=ae,ve=-de,Oe=xe*xe+ve*ve,Me=Oe+xe*ae+ve*de,ue=4/3*(Math.sqrt(2*Oe*Me)-Me)/(xe*de-ve*ae),ge=xe-ue*ve,Pe=ve+ue*xe,me=ge,X=-Pe,we=ee+q,Be=Math.cos(we),_e=Math.sin(we);return{x1:D*Math.cos(q),y1:D*Math.sin(q),x2:ge*Be-Pe*_e,y2:ge*_e+Pe*Be,x3:me*Be-X*_e,y3:me*_e+X*Be,x4:D*Math.cos(J),y4:D*Math.sin(J)}},H=function(D){return 180*D/Math.PI},Z=function(D,q,J,ee,ae,de){var xe=D+.5*(J-D),ve=q+.5*(ee-q),Oe=ae+.5*(J-ae),Me=de+.5*(ee-de),ue=Math.min(D,ae,xe,Oe),ge=Math.max(D,ae,xe,Oe),Pe=Math.min(q,de,ve,Me),me=Math.max(q,de,ve,Me);return new o(ue,Pe,ge-ue,me-Pe)},V=function(D,q,J,ee,ae,de,xe,ve){var Oe,Me,ue,ge,Pe,me,X,we,Be,_e,De,$e,Ue,Ye,tt=J-D,lt=ee-q,ft=ae-J,vt=de-ee,be=xe-ae,je=ve-de;for(Me=0;Me<41;Me++)Be=(X=(ue=D+(Oe=Me/40)*tt)+Oe*((Pe=J+Oe*ft)-ue))+Oe*(Pe+Oe*(ae+Oe*be-Pe)-X),_e=(we=(ge=q+Oe*lt)+Oe*((me=ee+Oe*vt)-ge))+Oe*(me+Oe*(de+Oe*je-me)-we),Me==0?(De=Be,$e=_e,Ue=Be,Ye=_e):(De=Math.min(De,Be),$e=Math.min($e,_e),Ue=Math.max(Ue,Be),Ye=Math.max(Ye,_e));return new o(Math.round(De),Math.round($e),Math.round(Ue-De),Math.round(Ye-$e))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,q,J=(D=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:q}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Qe.API),function(e){var t=function(i){var l,o,d,u,p,f,N,h,b,j;for(o=[],d=0,u=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;u>d;d+=4)(p=(i.charCodeAt(d)<<24)+(i.charCodeAt(d+1)<<16)+(i.charCodeAt(d+2)<<8)+i.charCodeAt(d+3))!==0?(f=(p=((p=((p=((p=(p-(j=p%85))/85)-(b=p%85))/85)-(h=p%85))/85)-(N=p%85))/85)%85,o.push(f+33,N+33,h+33,b+33,j+33)):o.push(122);return function(C,x){for(var g=x;g>0;g--)C.pop()}(o,l.length),String.fromCharCode.apply(String,o)+"~>"},n=function(i){var l,o,d,u,p,f=String,N="length",h=255,b="charCodeAt",j="slice",C="replace";for(i[j](-2),i=i[j](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),d=[],u=0,p=(i+=l="uuuuu"[j](i[N]%5||5))[N];p>u;u+=5)o=52200625*(i[b](u)-33)+614125*(i[b](u+1)-33)+7225*(i[b](u+2)-33)+85*(i[b](u+3)-33)+(i[b](u+4)-33),d.push(h&o>>24,h&o>>16,h&o>>8,h&o);return function(x,g){for(var y=g;y>0;y--)x.pop()}(d,l[N]),f.fromCharCode.apply(f,d)},r=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var o="",d=0;d<i.length;d+=2)o+=String.fromCharCode("0x"+(i[d]+i[d+1]));return o},a=function(i){for(var l=new Uint8Array(i.length),o=i.length;o--;)l[o]=i.charCodeAt(o);return i=(l=C0(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,l){var o=0,d=i||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),o=0;o<l.length;o+=1)switch(l[o]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=r(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[o]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(Qe.API),function(e){e.loadFile=function(t,n,r){return function(a,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=function(d,u,p){var f=new XMLHttpRequest,N=0,h=function(b){var j=b.length,C=[],x=String.fromCharCode;for(N=0;N<j;N+=1)C.push(x(255&b.charCodeAt(N)));return C.join("")};if(f.open("GET",d,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?p(h(this.responseText)):p(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,i,l)}catch{}return o}(t,n,r)},e.loadImageFile=e.loadFile}(Qe.API),function(e){function t(){return(et.html2canvas?Promise.resolve(et.html2canvas):si(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(et.DOMPurify?Promise.resolve(et.DOMPurify):si(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var r=function(l){var o=Et(l);return o==="undefined"?"undefined":o==="string"||l instanceof String?"string":o==="number"||l instanceof Number?"number":o==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(l,o){var d=document.createElement(l);for(var u in o.className&&(d.className=o.className),o.innerHTML&&o.dompurify&&(d.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)d.style[u]=o.style[u];return d},i=function l(o){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return u=(u=u.setProgress(1,l,1,[l])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,o){return l.__proto__=o||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,o){return this.then(function(){switch(o=o||function(d){switch(r(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(n).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function d(u,p){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),N=u.firstChild;N;N=N.nextSibling)p!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||f.appendChild(d(N,p));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(o){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,o(this.prop.container,d)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(o){var d=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var N=0;N<u.length;++N){var h=u[N],b=h.src.find(function(j){return j.format==="truetype"});b&&d.addFont(b.url,h.ref.name,h.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,d.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,o,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,o):this.outputPdf(l,o)},i.prototype.outputPdf=function(l,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,o)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(r(l)!=="object")return this;var o=Object.keys(l||{}).map(function(d){if(d in i.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(l,o){return this.then(function(){var d=l in i.template.prop?this.prop[l]:this.opt[l];return o?o(d):d})},i.prototype.setMargin=function(l){return this.then(function(){switch(r(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function o(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||Qe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:o(l.inner.width,l.k),height:o(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,o,d,u){return l!=null&&(this.progress.val=l),o!=null&&(this.progress.state=o),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,o,d,u){return this.setProgress(l?this.progress.val+l:null,o||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(l,o){var d=this;return this.thenCore(l,o,function(u,p){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return d.updateProgress(null,u),f}).then(u,p).then(function(f){return d.updateProgress(1),f})})},i.prototype.thenCore=function(l,o,d){d=d||Promise.prototype.then,l&&(l=l.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),p=d.call(u,l,o);return i.convert(p,this.__proto__)},i.prototype.thenExternal=function(l,o){return Promise.prototype.then.call(this,l,o)},i.prototype.thenList=function(l){var o=this;return l.forEach(function(d){o=o.thenCore(d)}),o},i.prototype.catch=function(l){l&&(l=l.bind(this));var o=Promise.prototype.catch.call(this,l);return i.convert(o,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Qe.getPageSize=function(l,o,d){if(Et(l)==="object"){var u=l;l=u.orientation,o=u.unit||o,d=u.format||d}o=o||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var p,f=(""+d).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+o}var h,b=0,j=0;if(N.hasOwnProperty(f))b=N[f][1]/p,j=N[f][0]/p;else try{b=d[1],j=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",j>b&&(h=j,j=b,b=h);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>j&&(h=j,j=b,b=h)}return{width:j,height:b,unit:o,k:p,orientation:l}},e.html=function(l,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(D0):null;var d=new i(o);return o.worker?d:d.from(l).doCallback()}}(Qe.API),Qe.API.addJS=function(e){return h1=e,this.internal.events.subscribe("postPutResources",function(){gu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+h1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gu!==void 0&&u1!==void 0&&this.internal.out("/Names <</JavaScript "+gu+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),i=0;i<a.length;i++){var l=a[i],o=r.exec(l);if(o!=null){var d=o[1];n.internal.newObjectDeferredBegin(d,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,p=[];for(i=0;i<u;i++){var f=n.internal.newObject();p.push(f);var N=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<p.length;i++)n.internal.write("(page_"+(i+1)+")"+p[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,i){var l={title:a,options:i,children:[]};return r==null&&(r=this.root),r.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var l=r.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var d=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var i=0;i<a.children.length;i++)r.count++,this.count_r(r,a.children[i]);return r.count}}])}(Qe.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,a,i,l,o){var d,u=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(d=function(f){for(var N,h=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,j={width:0,height:0,numcomponents:1},C=4;C<b;C+=2){if(C+=h,t.indexOf(f.charCodeAt(C+1))!==-1){N=256*f.charCodeAt(C+5)+f.charCodeAt(C+6),j={width:256*f.charCodeAt(C+7)+f.charCodeAt(C+8),height:N,numcomponents:f.charCodeAt(C+9)};break}h=256*f.charCodeAt(C+2)+f.charCodeAt(C+3)}return j}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}p={data:n,width:d.width,height:d.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:a}}return p}}(Qe.API);var Ll,vu,m1,f1,p1,u6=function(){var e,t,n;function r(i){var l,o,d,u,p,f,N,h,b,j,C,x,g,y;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(l=this.readUInt32(),b=(function(){var A,P;for(P=[],A=0;A<4;++A)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*p/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,l-=4),i=(f!=null?f.data:void 0)||this.imgData,x=0;0<=l?x<l:x>l;0<=l?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((j=d-this.transparency.indexed.length)>0)for(g=0;0<=j?g<j:g>j;0<=j?++g:--g)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":N=(C=this.read(l)).indexOf(0),h=String.fromCharCode.apply(String,C.slice(0,N)),this.text[h]=String.fromCharCode.apply(String,C.slice(N+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(y=this.colorType)===4||y===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var l,o;for(o=[],l=0;0<=i?l<i:l>i;0<=i?++l:--l)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var l=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*l),d=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function p(f,N,h,b){var j,C,x,g,y,A,P,_,T,S,L,R,E,I,Y,K,te,G,M,H,Z,V=Math.ceil((u.width-f)/h),ie=Math.ceil((u.height-N)/b),D=u.width==V&&u.height==ie;for(I=l*V,R=D?o:new Uint8Array(I*ie),A=i.length,E=0,C=0;E<ie&&d<A;){switch(i[d++]){case 0:for(g=te=0;te<I;g=te+=1)R[C++]=i[d++];break;case 1:for(g=G=0;G<I;g=G+=1)j=i[d++],y=g<l?0:R[C-l],R[C++]=(j+y)%256;break;case 2:for(g=M=0;M<I;g=M+=1)j=i[d++],x=(g-g%l)/l,Y=E&&R[(E-1)*I+x*l+g%l],R[C++]=(Y+j)%256;break;case 3:for(g=H=0;H<I;g=H+=1)j=i[d++],x=(g-g%l)/l,y=g<l?0:R[C-l],Y=E&&R[(E-1)*I+x*l+g%l],R[C++]=(j+Math.floor((y+Y)/2))%256;break;case 4:for(g=Z=0;Z<I;g=Z+=1)j=i[d++],x=(g-g%l)/l,y=g<l?0:R[C-l],E===0?Y=K=0:(Y=R[(E-1)*I+x*l+g%l],K=x&&R[(E-1)*I+(x-1)*l+g%l]),P=y+Y-K,_=Math.abs(P-y),S=Math.abs(P-Y),L=Math.abs(P-K),T=_<=S&&_<=L?y:S<=L?Y:K,R[C++]=(j+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[d-1])}if(!D){var q=((N+E*b)*u.width+f)*l,J=E*I;for(g=0;g<V;g+=1){for(var ee=0;ee<l;ee+=1)o[q++]=R[J++];q+=(h-1)*l}}E++}}return i=q3(i),u.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),o},r.prototype.decodePalette=function(){var i,l,o,d,u,p,f,N,h;for(o=this.palette,p=this.transparency.indexed||[],u=new Uint8Array((p.length||0)+o.length),d=0,i=0,l=f=0,N=o.length;f<N;l=f+=3)u[d++]=o[l],u[d++]=o[l+1],u[d++]=o[l+2],u[d++]=(h=p[i++])!=null?h:255;return u},r.prototype.copyToImageData=function(i,l){var o,d,u,p,f,N,h,b,j,C,x;if(d=this.colors,j=null,o=this.hasAlphaChannel,this.palette.length&&(j=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),d=4,o=!0),b=(u=i.data||i).length,f=j||l,p=N=0,d===1)for(;p<b;)h=j?4*l[p/4]:N,C=f[h++],u[p++]=C,u[p++]=C,u[p++]=C,u[p++]=o?f[h++]:255,N=h;else for(;p<b;)h=j?4*l[p/4]:N,u[p++]=f[h++],u[p++]=f[h++],u[p++]=f[h++],u[p++]=o?f[h++]:255,N=h},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(et)==="[object Window]"){try{t=et.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var l;if(a()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(l=new Image).src=t.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var l,o,d,u,p,f,N,h;if(this.animation){for(h=[],o=p=0,f=(N=this.animation.frames).length;p<f;o=++p)l=N[o],d=i.createImageData(l.width,l.height),u=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(d,u),l.imageData=d,h.push(l.image=e(d));return h}},r.prototype.renderFrame=function(i,l){var o,d,u;return o=(d=this.animation.frames)[l],u=d[l-1],l===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(i){var l,o,d,u,p,f,N=this;return o=0,f=this.animation,u=f.numFrames,d=f.frames,p=f.numPlays,(l=function(){var h,b;if(h=o++%u,b=d[h],N.renderFrame(i,h),u>1&&o/u<p)return N.animation._timeout=setTimeout(l,b.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var l,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,l=i.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(o=l.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),l.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function h6(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,l=1<<(7&a)+1;e[t++],e[t++];var o=null,d=null;i&&(o=t,d=l,t+=3*l);var u=!0,p=[],f=0,N=null,h=0,b=null;for(this.width=n,this.height=r;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];f=e[t++]|e[t++]<<8,N=e[t++],!(1&j)&&(N=null),h=j>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var C=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,A=e[t++],P=A>>6&1,_=1<<(7&A)+1,T=o,S=d,L=!1;A>>7&&(L=!0,T=t,S=_,t+=3*_);var R=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}p.push({x:C,y:x,width:g,height:y,has_local_palette:L,palette_offset:T,palette_size:S,data_offset:R,data_length:t-R,transparent_index:N,interlaced:!!P,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return b},this.frameInfo=function(I){if(I<0||I>=p.length)throw new Error("Frame index out of range.");return p[I]},this.decodeAndBlitFrameBGRA=function(I,Y){var K=this.frameInfo(I),te=K.width*K.height,G=new Uint8Array(te);x1(e,K.data_offset,G,te);var M=K.palette_offset,H=K.transparent_index;H===null&&(H=256);var Z=K.width,V=n-Z,ie=Z,D=4*(K.y*n+K.x),q=4*((K.y+K.height)*n+K.x),J=D,ee=4*V;K.interlaced===!0&&(ee+=4*n*7);for(var ae=8,de=0,xe=G.length;de<xe;++de){var ve=G[de];if(ie===0&&(ie=Z,(J+=ee)>=q&&(ee=4*V+4*n*(ae-1),J=D+(Z+V)*(ae<<1),ae>>=1)),ve===H)J+=4;else{var Oe=e[M+3*ve],Me=e[M+3*ve+1],ue=e[M+3*ve+2];Y[J++]=ue,Y[J++]=Me,Y[J++]=Oe,Y[J++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(I,Y){var K=this.frameInfo(I),te=K.width*K.height,G=new Uint8Array(te);x1(e,K.data_offset,G,te);var M=K.palette_offset,H=K.transparent_index;H===null&&(H=256);var Z=K.width,V=n-Z,ie=Z,D=4*(K.y*n+K.x),q=4*((K.y+K.height)*n+K.x),J=D,ee=4*V;K.interlaced===!0&&(ee+=4*n*7);for(var ae=8,de=0,xe=G.length;de<xe;++de){var ve=G[de];if(ie===0&&(ie=Z,(J+=ee)>=q&&(ee=4*V+4*n*(ae-1),J=D+(Z+V)*(ae<<1),ae>>=1)),ve===H)J+=4;else{var Oe=e[M+3*ve],Me=e[M+3*ve+1],ue=e[M+3*ve+2];Y[J++]=Oe,Y[J++]=Me,Y[J++]=ue,Y[J++]=255}--ie}}}function x1(e,t,n,r){for(var a=e[t++],i=1<<a,l=i+1,o=l+1,d=a+1,u=(1<<d)-1,p=0,f=0,N=0,h=e[t++],b=new Int32Array(4096),j=null;;){for(;p<16&&h!==0;)f|=e[t++]<<p,p+=8,h===1?h=e[t++]:--h;if(p<d)break;var C=f&u;if(f>>=d,p-=d,C!==i){if(C===l)break;for(var x=C<o?C:j,g=0,y=x;y>i;)y=b[y]>>8,++g;var A=y;if(N+g+(x!==C?1:0)>r)return void Ft.log("Warning, gif stream longer than expected.");n[N++]=A;var P=N+=g;for(x!==C&&(n[N++]=A),y=x;g--;)y=b[y],n[--P]=255&y,y>>=8;j!==null&&o<4096&&(b[o++]=j<<8|A,o>=u+1&&d<12&&(++d,u=u<<1|1)),j=C}else o=l+1,u=(1<<(d=a+1))-1,j=null}return N!==r&&Ft.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bf(e){var t,n,r,a,i,l=Math.floor,o=new Array(64),d=new Array(64),u=new Array(64),p=new Array(64),f=new Array(65535),N=new Array(65535),h=new Array(64),b=new Array(64),j=[],C=0,x=7,g=new Array(64),y=new Array(64),A=new Array(64),P=new Array(256),_=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(D,q){for(var J=0,ee=0,ae=new Array,de=1;de<=16;de++){for(var xe=1;xe<=D[de];xe++)ae[q[ee]]=[],ae[q[ee]][0]=J,ae[q[ee]][1]=de,ee++,J++;J*=2}return ae}function M(D){for(var q=D[0],J=D[1]-1;J>=0;)q&1<<J&&(C|=1<<x),J--,--x<0&&(C==255?(H(255),H(0)):H(C),x=7,C=0)}function H(D){j.push(D)}function Z(D){H(D>>8&255),H(255&D)}function V(D,q,J,ee,ae){for(var de,xe=ae[0],ve=ae[240],Oe=function(_e,De){var $e,Ue,Ye,tt,lt,ft,vt,be,je,Le,Ae=0;for(je=0;je<8;++je){$e=_e[Ae],Ue=_e[Ae+1],Ye=_e[Ae+2],tt=_e[Ae+3],lt=_e[Ae+4],ft=_e[Ae+5],vt=_e[Ae+6];var ot=$e+(be=_e[Ae+7]),Te=$e-be,Tt=Ue+vt,nt=Ue-vt,ct=Ye+ft,Ms=Ye-ft,St=tt+lt,Vr=tt-lt,es=ot+St,er=ot-St,Wr=Tt+ct,ts=Tt-ct;_e[Ae]=es+Wr,_e[Ae+4]=es-Wr;var rt=.707106781*(ts+er);_e[Ae+2]=er+rt,_e[Ae+6]=er-rt;var Ct=.382683433*((es=Vr+Ms)-(ts=nt+Te)),di=.5411961*es+Ct,Rs=1.306562965*ts+Ct,Sr=.707106781*(Wr=Ms+nt),kr=Te+Sr,Ze=Te-Sr;_e[Ae+5]=Ze+di,_e[Ae+3]=Ze-di,_e[Ae+1]=kr+Rs,_e[Ae+7]=kr-Rs,Ae+=8}for(Ae=0,je=0;je<8;++je){$e=_e[Ae],Ue=_e[Ae+8],Ye=_e[Ae+16],tt=_e[Ae+24],lt=_e[Ae+32],ft=_e[Ae+40],vt=_e[Ae+48];var tr=$e+(be=_e[Ae+56]),_r=$e-be,hn=Ue+vt,Ns=Ue-vt,xs=Ye+ft,_n=Ye-ft,Ji=tt+lt,Gr=tt-lt,sr=tr+Ji,nr=tr-Ji,rr=hn+xs,Cr=hn-xs;_e[Ae]=sr+rr,_e[Ae+32]=sr-rr;var Rn=.707106781*(Cr+nr);_e[Ae+16]=nr+Rn,_e[Ae+48]=nr-Rn;var Ar=.382683433*((sr=Gr+_n)-(Cr=Ns+_r)),ui=.5411961*sr+Ar,Ki=1.306562965*Cr+Ar,Xi=.707106781*(rr=_n+Ns),Qi=_r+Xi,Zi=_r-Xi;_e[Ae+40]=Zi+ui,_e[Ae+24]=Zi-ui,_e[Ae+8]=Qi+Ki,_e[Ae+56]=Qi-Ki,Ae++}for(je=0;je<64;++je)Le=_e[je]*De[je],h[je]=Le>0?Le+.5|0:Le-.5|0;return h}(D,q),Me=0;Me<64;++Me)b[T[Me]]=Oe[Me];var ue=b[0]-J;J=b[0],ue==0?M(ee[0]):(M(ee[N[de=32767+ue]]),M(f[de]));for(var ge=63;ge>0&&b[ge]==0;)ge--;if(ge==0)return M(xe),J;for(var Pe,me=1;me<=ge;){for(var X=me;b[me]==0&&me<=ge;)++me;var we=me-X;if(we>=16){Pe=we>>4;for(var Be=1;Be<=Pe;++Be)M(ve);we&=15}de=32767+b[me],M(ae[(we<<4)+N[de]]),M(f[de]),me++}return ge!=63&&M(xe),J}function ie(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(q){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ae=l((J[ee]*q+50)/100);ae=Math.min(Math.max(ae,1),255),o[T[ee]]=ae}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var ve=l((de[xe]*q+50)/100);ve=Math.min(Math.max(ve,1),255),d[T[xe]]=ve}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,ue=0;ue<8;ue++)for(var ge=0;ge<8;ge++)u[Me]=1/(o[T[Me]]*Oe[ue]*Oe[ge]*8),p[Me]=1/(d[T[Me]]*Oe[ue]*Oe[ge]*8),Me++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,q){q&&ie(q),j=new Array,C=0,x=7,Z(65496),Z(65504),Z(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),Z(1),Z(1),H(0),H(0),function(){Z(65499),Z(132),H(0);for(var Ue=0;Ue<64;Ue++)H(o[Ue]);H(1);for(var Ye=0;Ye<64;Ye++)H(d[Ye])}(),function(Ue,Ye){Z(65472),Z(17),H(8),Z(Ye),Z(Ue),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(D.width,D.height),function(){Z(65476),Z(418),H(0);for(var Ue=0;Ue<16;Ue++)H(S[Ue+1]);for(var Ye=0;Ye<=11;Ye++)H(L[Ye]);H(16);for(var tt=0;tt<16;tt++)H(R[tt+1]);for(var lt=0;lt<=161;lt++)H(E[lt]);H(1);for(var ft=0;ft<16;ft++)H(I[ft+1]);for(var vt=0;vt<=11;vt++)H(Y[vt]);H(17);for(var be=0;be<16;be++)H(K[be+1]);for(var je=0;je<=161;je++)H(te[je])}(),Z(65498),Z(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var J=0,ee=0,ae=0;C=0,x=7,this.encode.displayName="_encode_";for(var de,xe,ve,Oe,Me,ue,ge,Pe,me,X=D.data,we=D.width,Be=D.height,_e=4*we,De=0;De<Be;){for(de=0;de<_e;){for(Me=_e*De+de,ge=-1,Pe=0,me=0;me<64;me++)ue=Me+(Pe=me>>3)*_e+(ge=4*(7&me)),De+Pe>=Be&&(ue-=_e*(De+1+Pe-Be)),de+ge>=_e&&(ue-=de+ge-_e+4),xe=X[ue++],ve=X[ue++],Oe=X[ue++],g[me]=(_[xe]+_[ve+256>>0]+_[Oe+512>>0]>>16)-128,y[me]=(_[xe+768>>0]+_[ve+1024>>0]+_[Oe+1280>>0]>>16)-128,A[me]=(_[xe+1280>>0]+_[ve+1536>>0]+_[Oe+1792>>0]>>16)-128;J=V(g,u,J,t,r),ee=V(y,p,ee,n,a),ae=V(A,p,ae,n,a),de+=32}De+=8}if(x>=0){var $e=[];$e[1]=x+1,$e[0]=(1<<x+1)-1,M($e)}return Z(65497),new Uint8Array(j)},e=e||50,function(){for(var D=String.fromCharCode,q=0;q<256;q++)P[q]=D(q)}(),t=G(S,L),n=G(I,Y),r=G(R,E),a=G(K,te),function(){for(var D=1,q=2,J=1;J<=15;J++){for(var ee=D;ee<q;ee++)N[32767+ee]=J,f[32767+ee]=[],f[32767+ee][1]=J,f[32767+ee][0]=ee;for(var ae=-(q-1);ae<=-D;ae++)N[32767+ae]=J,f[32767+ae]=[],f[32767+ae][1]=J,f[32767+ae][0]=q-1+ae;D<<=1,q<<=1}}(),function(){for(var D=0;D<256;D++)_[D]=19595*D,_[D+256>>0]=38470*D,_[D+512>>0]=7471*D+32768,_[D+768>>0]=-11059*D,_[D+1024>>0]=-21709*D,_[D+1280>>0]=32768*D+8421375,_[D+1536>>0]=-27439*D,_[D+1792>>0]=-5329*D}(),ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function g1(e){function t(S){if(!S)throw Error("assert :P")}function n(S,L,R){for(var E=0;4>E;E++)if(S[L+E]!=R.charCodeAt(E))return!0;return!1}function r(S,L,R,E,I){for(var Y=0;Y<I;Y++)S[L+Y]=R[E+Y]}function a(S,L,R,E){for(var I=0;I<E;I++)S[L+I]=R}function i(S){return new Int32Array(S)}function l(S,L){for(var R=[],E=0;E<S;E++)R.push(new L);return R}function o(S,L){var R=[];return function E(I,Y,K){for(var te=K[Y],G=0;G<te&&(I.push(K.length>Y+1?[]:new L),!(K.length<Y+1));G++)E(I[G],Y+1,K)}(R,0,S),R}var d=function(){var S=this;function L(c,m){for(var w=1<<m-1>>>0;c&w;)w>>>=1;return w?(c&w-1)+w:c}function R(c,m,w,k,O){t(!(k%w));do c[m+(k-=w)]=O;while(0<k)}function E(c,m,w,k,O){if(t(2328>=O),512>=O)var $=i(512);else if(($=i(O))==null)return 0;return function(B,U,z,W,ne,fe){var pe,oe,Ce=U,ye=1<<z,re=i(16),le=i(16);for(t(ne!=0),t(W!=null),t(B!=null),t(0<z),oe=0;oe<ne;++oe){if(15<W[oe])return 0;++re[W[oe]]}if(re[0]==ne)return 0;for(le[1]=0,pe=1;15>pe;++pe){if(re[pe]>1<<pe)return 0;le[pe+1]=le[pe]+re[pe]}for(oe=0;oe<ne;++oe)pe=W[oe],0<W[oe]&&(fe[le[pe]++]=oe);if(le[15]==1)return(W=new I).g=0,W.value=fe[0],R(B,Ce,1,ye,W),ye;var Se,Ee=-1,ke=ye-1,Ve=0,ze=1,Xe=1,qe=1<<z;for(oe=0,pe=1,ne=2;pe<=z;++pe,ne<<=1){if(ze+=Xe<<=1,0>(Xe-=re[pe]))return 0;for(;0<re[pe];--re[pe])(W=new I).g=pe,W.value=fe[oe++],R(B,Ce+Ve,ne,qe,W),Ve=L(Ve,pe)}for(pe=z+1,ne=2;15>=pe;++pe,ne<<=1){if(ze+=Xe<<=1,0>(Xe-=re[pe]))return 0;for(;0<re[pe];--re[pe]){if(W=new I,(Ve&ke)!=Ee){for(Ce+=qe,Se=1<<(Ee=pe)-z;15>Ee&&!(0>=(Se-=re[Ee]));)++Ee,Se<<=1;ye+=qe=1<<(Se=Ee-z),B[U+(Ee=Ve&ke)].g=Se+z,B[U+Ee].value=Ce-U-Ee}W.g=pe-z,W.value=fe[oe++],R(B,Ce+(Ve>>z),ne,qe,W),Ve=L(Ve,pe)}}return ze!=2*le[15]-1?0:ye}(c,m,w,k,O,$)}function I(){this.value=this.g=0}function Y(){this.value=this.g=0}function K(){this.G=l(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l($s,Y)}function te(c,m,w,k){t(c!=null),t(m!=null),t(2147483648>k),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=m,c.pa=w,c.Jd=m,c.Yc=w+k,c.Zc=4<=k?w+k-4+1:w,de(c)}function G(c,m){for(var w=0;0<m--;)w|=ve(c,128)<<m;return w}function M(c,m){var w=G(c,m);return xe(c)?-w:w}function H(c,m,w,k){var O,$=0;for(t(c!=null),t(m!=null),t(4294967288>k),c.Sb=k,c.Ra=0,c.u=0,c.h=0,4<k&&(k=4),O=0;O<k;++O)$+=m[w+O]<<8*O;c.Ra=$,c.bb=k,c.oa=m,c.pa=w}function Z(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<fl-8>>>0,++c.bb,c.u-=8;J(c)&&(c.h=1,c.u=0)}function V(c,m){if(t(0<=m),!c.h&&m<=ml){var w=q(c)&hl[m];return c.u+=m,Z(c),w}return c.h=1,c.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(c){return c.Ra>>>(c.u&fl-1)>>>0}function J(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>fl}function ee(c,m){c.u=m,c.h=J(c)}function ae(c){c.u>=qo&&(t(c.u>=qo),Z(c))}function de(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function xe(c){return G(c,1)}function ve(c,m){var w=c.Ca;0>c.b&&de(c);var k=c.b,O=w*m>>>8,$=(c.I>>>k>O)+0;for($?(w-=O,c.I-=O+1<<k>>>0):w=O+1,k=w,O=0;256<=k;)O+=8,k>>=8;return k=7^O+fn[k],c.b-=k,c.Ca=(w<<k)-1,$}function Oe(c,m,w){c[m+0]=w>>24&255,c[m+1]=w>>16&255,c[m+2]=w>>8&255,c[m+3]=w>>0&255}function Me(c,m){return c[m+0]<<0|c[m+1]<<8}function ue(c,m){return Me(c,m)|c[m+2]<<16}function ge(c,m){return Me(c,m)|Me(c,m+2)<<16}function Pe(c,m){var w=1<<m;return t(c!=null),t(0<m),c.X=i(w),c.X==null?0:(c.Mb=32-m,c.Xa=m,1)}function me(c,m){t(c!=null),t(m!=null),t(c.Xa==m.Xa),r(m.X,0,c.X,0,1<<m.Xa)}function X(){this.X=[],this.Xa=this.Mb=0}function we(c,m,w,k){t(w!=null),t(k!=null);var O=w[0],$=k[0];return O==0&&(O=(c*$+m/2)/m),$==0&&($=(m*O+c/2)/c),0>=O||0>=$?0:(w[0]=O,k[0]=$,1)}function Be(c,m){return c+(1<<m)-1>>>m}function _e(c,m){return((4278255360&c)+(4278255360&m)>>>0&4278255360)+((16711935&c)+(16711935&m)>>>0&16711935)>>>0}function De(c,m){S[m]=function(w,k,O,$,B,U,z){var W;for(W=0;W<B;++W){var ne=S[c](U[z+W-1],O,$+W);U[z+W]=_e(w[k+W],ne)}}}function $e(){this.ud=this.hd=this.jd=0}function Ue(c,m){return((4278124286&(c^m))>>>1)+(c&m)>>>0}function Ye(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function tt(c,m){return Ye(c+(c-m+.5>>1))}function lt(c,m,w){return Math.abs(m-w)-Math.abs(c-w)}function ft(c,m,w,k,O,$,B){for(k=$[B-1],w=0;w<O;++w)$[B+w]=k=_e(c[m+w],k)}function vt(c,m,w,k,O){var $;for($=0;$<w;++$){var B=c[m+$],U=B>>8&255,z=16711935&(z=(z=16711935&B)+((U<<16)+U));k[O+$]=(4278255360&B)+z>>>0}}function be(c,m){m.jd=c>>0&255,m.hd=c>>8&255,m.ud=c>>16&255}function je(c,m,w,k,O,$){var B;for(B=0;B<k;++B){var U=m[w+B],z=U>>>8,W=U,ne=255&(ne=(ne=U>>>16)+((c.jd<<24>>24)*(z<<24>>24)>>>5));W=255&(W=(W=W+((c.hd<<24>>24)*(z<<24>>24)>>>5))+((c.ud<<24>>24)*(ne<<24>>24)>>>5)),O[$+B]=(4278255360&U)+(ne<<16)+W}}function Le(c,m,w,k,O){S[m]=function($,B,U,z,W,ne,fe,pe,oe){for(z=fe;z<pe;++z)for(fe=0;fe<oe;++fe)W[ne++]=O(U[k($[B++])])},S[c]=function($,B,U,z,W,ne,fe){var pe=8>>$.b,oe=$.Ea,Ce=$.K[0],ye=$.w;if(8>pe)for($=(1<<$.b)-1,ye=(1<<pe)-1;B<U;++B){var re,le=0;for(re=0;re<oe;++re)re&$||(le=k(z[W++])),ne[fe++]=O(Ce[le&ye]),le>>=pe}else S["VP8LMapColor"+w](z,W,Ce,ye,ne,fe,B,U,oe)}}function Ae(c,m,w,k,O){for(w=m+w;m<w;){var $=c[m++];k[O++]=$>>16&255,k[O++]=$>>8&255,k[O++]=$>>0&255}}function ot(c,m,w,k,O){for(w=m+w;m<w;){var $=c[m++];k[O++]=$>>16&255,k[O++]=$>>8&255,k[O++]=$>>0&255,k[O++]=$>>24&255}}function Te(c,m,w,k,O){for(w=m+w;m<w;){var $=(B=c[m++])>>16&240|B>>12&15,B=B>>0&240|B>>28&15;k[O++]=$,k[O++]=B}}function Tt(c,m,w,k,O){for(w=m+w;m<w;){var $=(B=c[m++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;k[O++]=$,k[O++]=B}}function nt(c,m,w,k,O){for(w=m+w;m<w;){var $=c[m++];k[O++]=$>>0&255,k[O++]=$>>8&255,k[O++]=$>>16&255}}function ct(c,m,w,k,O,$){if($==0)for(w=m+w;m<w;)Oe(k,(($=c[m++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),O+=32;else r(k,O,c,m,w)}function Ms(c,m){S[m][0]=S[c+"0"],S[m][1]=S[c+"1"],S[m][2]=S[c+"2"],S[m][3]=S[c+"3"],S[m][4]=S[c+"4"],S[m][5]=S[c+"5"],S[m][6]=S[c+"6"],S[m][7]=S[c+"7"],S[m][8]=S[c+"8"],S[m][9]=S[c+"9"],S[m][10]=S[c+"10"],S[m][11]=S[c+"11"],S[m][12]=S[c+"12"],S[m][13]=S[c+"13"],S[m][14]=S[c+"0"],S[m][15]=S[c+"0"]}function St(c){return c==pm||c==xm||c==Id||c==gm}function Vr(){this.eb=[],this.size=this.A=this.fb=0}function es(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vr,this.f.kb=new es,this.sd=null}function Wr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ts(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rt(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Ct(c,m){var w=c.T,k=m.ba.f.RGBA,O=k.eb,$=k.fb+c.ka*k.A,B=Hn[m.ba.S],U=c.y,z=c.O,W=c.f,ne=c.N,fe=c.ea,pe=c.W,oe=m.cc,Ce=m.dc,ye=m.Mc,re=m.Nc,le=c.ka,Se=c.ka+c.T,Ee=c.U,ke=Ee+1>>1;for(le==0?B(U,z,null,null,W,ne,fe,pe,W,ne,fe,pe,O,$,null,null,Ee):(B(m.ec,m.fc,U,z,oe,Ce,ye,re,W,ne,fe,pe,O,$-k.A,O,$,Ee),++w);le+2<Se;le+=2)oe=W,Ce=ne,ye=fe,re=pe,ne+=c.Rc,pe+=c.Rc,$+=2*k.A,B(U,(z+=2*c.fa)-c.fa,U,z,oe,Ce,ye,re,W,ne,fe,pe,O,$-k.A,O,$,Ee);return z+=c.fa,c.j+Se<c.o?(r(m.ec,m.fc,U,z,Ee),r(m.cc,m.dc,W,ne,ke),r(m.Mc,m.Nc,fe,pe,ke),w--):1&Se||B(U,z,null,null,W,ne,fe,pe,W,ne,fe,pe,O,$+k.A,null,null,Ee),w}function di(c,m,w){var k=c.F,O=[c.J];if(k!=null){var $=c.U,B=m.ba.S,U=B==Dd||B==Id;m=m.ba.f.RGBA;var z=[0],W=c.ka;z[0]=c.T,c.Kb&&(W==0?--z[0]:(--W,O[0]-=c.width),c.j+c.ka+c.T==c.o&&(z[0]=c.o-c.j-W));var ne=m.eb;W=m.fb+W*m.A,c=Rt(k,O[0],c.width,$,z,ne,W+(U?0:3),m.A),t(w==z),c&&St(B)&&zn(ne,W,U,$,z,m.A)}return 0}function Rs(c){var m=c.ma,w=m.ba.S,k=11>w,O=w==Ld||w==Ed||w==Dd||w==fm||w==12||St(w);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Uo(m.Oa,c,O?11:12))return 0;if(O&&St(w)&&Ie(),c.da)alert("todo:use_scaling");else{if(k){if(m.Ib=rt,c.Kb){if(w=c.U+1>>1,m.memory=i(c.U+2*w),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+c.U,m.Mc=m.cc,m.Nc=m.dc+w,m.Ib=Ct,Ie()}}else alert("todo:EmitYUV");O&&(m.Jb=di,k&&he())}if(k&&!ix){for(c=0;256>c;++c)iy[c]=89858*(c-128)+Fd>>Od,cy[c]=-22014*(c-128)+Fd,oy[c]=-45773*(c-128),ly[c]=113618*(c-128)+Fd>>Od;for(c=Ko;c<ym;++c)m=76283*(c-16)+Fd>>Od,dy[c-Ko]=Cn(m,255),uy[c-Ko]=Cn(m+8>>4,15);ix=1}return 1}function Sr(c){var m=c.ma,w=c.U,k=c.T;return t(!(1&c.ka)),0>=w||0>=k?0:(w=m.Ib(c,m),m.Jb!=null&&m.Jb(c,m,w),m.Dc+=w,1)}function kr(c){c.ma.memory=null}function Ze(c,m,w,k){return V(c,8)!=47?0:(m[0]=V(c,14)+1,w[0]=V(c,14)+1,k[0]=V(c,1),V(c,3)!=0?0:!c.h)}function tr(c,m){if(4>c)return c+1;var w=c-2>>1;return(2+(1&c)<<w)+V(m,w)+1}function _r(c,m){return 120<m?m-120:1<=(w=((w=Wb[m-1])>>4)*c+(8-(15&w)))?w:1;var w}function hn(c,m,w){var k=q(w),O=c[m+=255&k].g-8;return 0<O&&(ee(w,w.u+8),k=q(w),m+=c[m].value,m+=k&(1<<O)-1),ee(w,w.u+c[m].g),c[m].value}function Ns(c,m,w){return w.g+=c.g,w.value+=c.value<<m>>>0,t(8>=w.g),c.g}function xs(c,m,w){var k=c.xc;return t((m=k==0?0:c.vc[c.md*(w>>k)+(m>>k)])<c.Wb),c.Ya[m]}function _n(c,m,w,k){var O=c.ab,$=c.c*m,B=c.C;m=B+m;var U=w,z=k;for(k=c.Ta,w=c.Ua;0<O--;){var W=c.gc[O],ne=B,fe=m,pe=U,oe=z,Ce=(z=k,U=w,W.Ea);switch(t(ne<fe),t(fe<=W.nc),W.hc){case 2:Sd(pe,oe,(fe-ne)*Ce,z,U);break;case 0:var ye=ne,re=fe,le=z,Se=U,Ee=(qe=W).Ea;ye==0&&(hm(pe,oe,null,null,1,le,Se),ft(pe,oe+1,0,0,Ee-1,le,Se+1),oe+=Ee,Se+=Ee,++ye);for(var ke=1<<qe.b,Ve=ke-1,ze=Be(Ee,qe.b),Xe=qe.K,qe=qe.w+(ye>>qe.b)*ze;ye<re;){var kt=Xe,Pt=qe,Nt=1;for(Ho(pe,oe,le,Se-Ee,1,le,Se);Nt<Ee;){var bt=(Nt&~Ve)+ke;bt>Ee&&(bt=Ee),(0,ya[kt[Pt++]>>8&15])(pe,oe+ +Nt,le,Se+Nt-Ee,bt-Nt,le,Se+Nt),Nt=bt}oe+=Ee,Se+=Ee,++ye&Ve||(qe+=ze)}fe!=W.nc&&r(z,U-Ce,z,U+(fe-ne-1)*Ce,Ce);break;case 1:for(Ce=pe,re=oe,Ee=(pe=W.Ea)-(Se=pe&~(le=(oe=1<<W.b)-1)),ye=Be(pe,W.b),ke=W.K,W=W.w+(ne>>W.b)*ye;ne<fe;){for(Ve=ke,ze=W,Xe=new $e,qe=re+Se,kt=re+pe;re<qe;)be(Ve[ze++],Xe),xi(Xe,Ce,re,oe,z,U),re+=oe,U+=oe;re<kt&&(be(Ve[ze++],Xe),xi(Xe,Ce,re,Ee,z,U),re+=Ee,U+=Ee),++ne&le||(W+=ye)}break;case 3:if(pe==z&&oe==U&&0<W.b){for(re=z,pe=Ce=U+(fe-ne)*Ce-(Se=(fe-ne)*Be(W.Ea,W.b)),oe=z,le=U,ye=[],Se=(Ee=Se)-1;0<=Se;--Se)ye[Se]=oe[le+Se];for(Se=Ee-1;0<=Se;--Se)re[pe+Se]=ye[Se];$n(W,ne,fe,z,Ce,z,U)}else $n(W,ne,fe,pe,oe,z,U)}U=k,z=w}z!=w&&r(k,w,U,z,$)}function Ji(c,m){var w=c.V,k=c.Ba+c.c*c.C,O=m-c.C;if(t(m<=c.l.o),t(16>=O),0<O){var $=c.l,B=c.Ta,U=c.Ua,z=$.width;if(_n(c,O,w,k),O=U=[U],t((w=c.C)<(k=m)),t($.v<$.va),k>$.o&&(k=$.o),w<$.j){var W=$.j-w;w=$.j,O[0]+=W*z}if(w>=k?w=0:(O[0]+=4*$.v,$.ka=w-$.j,$.U=$.va-$.v,$.T=k-w,w=1),w){if(U=U[0],11>(w=c.ca).S){var ne=w.f.RGBA,fe=(k=w.S,O=$.U,$=$.T,W=ne.eb,ne.A),pe=$;for(ne=ne.fb+c.Ma*ne.A;0<pe--;){var oe=B,Ce=U,ye=O,re=W,le=ne;switch(k){case Pd:pn(oe,Ce,ye,re,le);break;case Ld:nn(oe,Ce,ye,re,le);break;case pm:nn(oe,Ce,ye,re,le),zn(re,le,0,ye,1,0);break;case Kp:Xr(oe,Ce,ye,re,le);break;case Ed:ct(oe,Ce,ye,re,le,1);break;case xm:ct(oe,Ce,ye,re,le,1),zn(re,le,0,ye,1,0);break;case Dd:ct(oe,Ce,ye,re,le,0);break;case Id:ct(oe,Ce,ye,re,le,0),zn(re,le,1,ye,1,0);break;case fm:wa(oe,Ce,ye,re,le);break;case gm:wa(oe,Ce,ye,re,le),Mt(re,le,ye,1,0);break;case Xp:Kr(oe,Ce,ye,re,le);break;default:t(0)}U+=z,ne+=fe}c.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=w.height)}}c.C=m,t(c.C<=c.i)}function Gr(c){var m;if(0<c.ua)return 0;for(m=0;m<c.Wb;++m){var w=c.Ya[m].G,k=c.Ya[m].H;if(0<w[1][k[1]+0].g||0<w[2][k[2]+0].g||0<w[3][k[3]+0].g)return 0}return 1}function sr(c,m,w,k,O,$){if(c.Z!=0){var B=c.qd,U=c.rd;for(t(ka[c.Z]!=null);m<w;++m)ka[c.Z](B,U,k,O,k,O,$),B=k,U=O,O+=$;c.qd=B,c.rd=U}}function nr(c,m){var w=c.l.ma,k=w.Z==0||w.Z==1?c.l.j:c.C;if(k=c.C<k?k:c.C,t(m<=c.l.o),m>k){var O=c.l.width,$=w.ca,B=w.tb+O*k,U=c.V,z=c.Ba+c.c*k,W=c.gc;t(c.ab==1),t(W[0].hc==3),kd(W[0],k,m,U,z,$,B),sr(w,k,m,$,B,O)}c.C=c.Ma=m}function rr(c,m,w,k,O,$,B){var U=c.$/k,z=c.$%k,W=c.m,ne=c.s,fe=w+c.$,pe=fe;O=w+k*O;var oe=w+k*$,Ce=280+ne.ua,ye=c.Pb?U:16777216,re=0<ne.ua?ne.Wa:null,le=ne.wc,Se=fe<oe?xs(ne,z,U):null;t(c.C<$),t(oe<=O);var Ee=!1;e:for(;;){for(;Ee||fe<oe;){var ke=0;if(U>=ye){var Ve=fe-w;t((ye=c).Pb),ye.wd=ye.m,ye.xd=Ve,0<ye.s.ua&&me(ye.s.Wa,ye.s.vb),ye=U+Yb}if(z&le||(Se=xs(ne,z,U)),t(Se!=null),Se.Qb&&(m[fe]=Se.qb,Ee=!0),!Ee)if(ae(W),Se.jc){ke=W,Ve=m;var ze=fe,Xe=Se.pd[q(ke)&$s-1];t(Se.jc),256>Xe.g?(ee(ke,ke.u+Xe.g),Ve[ze]=Xe.value,ke=0):(ee(ke,ke.u+Xe.g-256),t(256<=Xe.value),ke=Xe.value),ke==0&&(Ee=!0)}else ke=hn(Se.G[0],Se.H[0],W);if(W.h)break;if(Ee||256>ke){if(!Ee)if(Se.nd)m[fe]=(Se.qb|ke<<8)>>>0;else{if(ae(W),Ee=hn(Se.G[1],Se.H[1],W),ae(W),Ve=hn(Se.G[2],Se.H[2],W),ze=hn(Se.G[3],Se.H[3],W),W.h)break;m[fe]=(ze<<24|Ee<<16|ke<<8|Ve)>>>0}if(Ee=!1,++fe,++z>=k&&(z=0,++U,B!=null&&U<=$&&!(U%16)&&B(c,U),re!=null))for(;pe<fe;)ke=m[pe++],re.X[(506832829*ke&4294967295)>>>re.Mb]=ke}else if(280>ke){if(ke=tr(ke-256,W),Ve=hn(Se.G[4],Se.H[4],W),ae(W),Ve=_r(k,Ve=tr(Ve,W)),W.h)break;if(fe-w<Ve||O-fe<ke)break e;for(ze=0;ze<ke;++ze)m[fe+ze]=m[fe+ze-Ve];for(fe+=ke,z+=ke;z>=k;)z-=k,++U,B!=null&&U<=$&&!(U%16)&&B(c,U);if(t(fe<=O),z&le&&(Se=xs(ne,z,U)),re!=null)for(;pe<fe;)ke=m[pe++],re.X[(506832829*ke&4294967295)>>>re.Mb]=ke}else{if(!(ke<Ce))break e;for(Ee=ke-280,t(re!=null);pe<fe;)ke=m[pe++],re.X[(506832829*ke&4294967295)>>>re.Mb]=ke;ke=fe,t(!(Ee>>>(Ve=re).Xa)),m[ke]=Ve.X[Ee],Ee=!0}Ee||t(W.h==J(W))}if(c.Pb&&W.h&&fe<O)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&me(c.s.vb,c.s.Wa);else{if(W.h)break e;B!=null&&B(c,U>$?$:U),c.a=0,c.$=fe-w}return 1}return c.a=3,0}function Cr(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var m=c.Wa;m!=null&&(m.X=null),c.vb=null,t(c!=null)}function Rn(){var c=new um;return c==null?null:(c.a=0,c.xb=ex,Ms("Predictor","VP8LPredictors"),Ms("Predictor","VP8LPredictors_C"),Ms("PredictorAdd","VP8LPredictorsAdd"),Ms("PredictorAdd","VP8LPredictorsAdd_C"),Sd=vt,xi=je,pn=Ae,nn=ot,wa=Te,Kr=Tt,Xr=nt,S.VP8LMapColor32b=pl,S.VP8LMapColor8b=_d,c)}function Ar(c,m,w,k,O){var $=1,B=[c],U=[m],z=k.m,W=k.s,ne=null,fe=0;e:for(;;){if(w)for(;$&&V(z,1);){var pe=B,oe=U,Ce=k,ye=1,re=Ce.m,le=Ce.gc[Ce.ab],Se=V(re,2);if(Ce.Oc&1<<Se)$=0;else{switch(Ce.Oc|=1<<Se,le.hc=Se,le.Ea=pe[0],le.nc=oe[0],le.K=[null],++Ce.ab,t(4>=Ce.ab),Se){case 0:case 1:le.b=V(re,3)+2,ye=Ar(Be(le.Ea,le.b),Be(le.nc,le.b),0,Ce,le.K),le.K=le.K[0];break;case 3:var Ee,ke=V(re,8)+1,Ve=16<ke?0:4<ke?1:2<ke?2:3;if(pe[0]=Be(le.Ea,Ve),le.b=Ve,Ee=ye=Ar(ke,1,0,Ce,le.K)){var ze,Xe=ke,qe=le,kt=1<<(8>>qe.b),Pt=i(kt);if(Pt==null)Ee=0;else{var Nt=qe.K[0],bt=qe.w;for(Pt[0]=qe.K[0][0],ze=1;ze<1*Xe;++ze)Pt[ze]=_e(Nt[bt+ze],Pt[ze-1]);for(;ze<4*kt;++ze)Pt[ze]=0;qe.K[0]=null,qe.K[0]=Pt,Ee=1}}ye=Ee;break;case 2:break;default:t(0)}$=ye}}if(B=B[0],U=U[0],$&&V(z,1)&&!($=1<=(fe=V(z,4))&&11>=fe)){k.a=3;break e}var Ot;if(Ot=$)t:{var It,ut,vs,xn=k,bs=B,gn=U,Lt=fe,Tn=w,Pn=xn.m,Ls=xn.s,Bs=[null],an=1,Vn=0,Er=Gb[Lt];s:for(;;){if(Tn&&V(Pn,1)){var Es=V(Pn,3)+2,ta=Be(bs,Es),wi=Be(gn,Es),yl=ta*wi;if(!Ar(ta,wi,0,xn,Bs))break s;for(Bs=Bs[0],Ls.xc=Es,It=0;It<yl;++It){var _a=Bs[It]>>8&65535;Bs[It]=_a,_a>=an&&(an=_a+1)}}if(Pn.h)break s;for(ut=0;5>ut;++ut){var ns=Qp[ut];!ut&&0<Lt&&(ns+=1<<Lt),Vn<ns&&(Vn=ns)}var wm=l(an*Er,I),cx=an,dx=l(cx,K);if(dx==null)var Rd=null;else t(65536>=cx),Rd=dx;var Xo=i(Vn);if(Rd==null||Xo==null||wm==null){xn.a=1;break s}var $d=wm;for(It=vs=0;It<an;++It){var cr=Rd[It],wl=cr.G,Nl=cr.H,ux=0,Bd=1,hx=0;for(ut=0;5>ut;++ut){ns=Qp[ut],wl[ut]=$d,Nl[ut]=vs,!ut&&0<Lt&&(ns+=1<<Lt);r:{var Ud,Nm=ns,zd=xn,Qo=Xo,fy=$d,py=vs,jm=0,Ca=zd.m,xy=V(Ca,1);if(a(Qo,0,0,Nm),xy){var gy=V(Ca,1)+1,vy=V(Ca,1),mx=V(Ca,vy==0?1:8);Qo[mx]=1,gy==2&&(Qo[mx=V(Ca,8)]=1);var qd=1}else{var fx=i(19),px=V(Ca,4)+4;if(19<px){zd.a=3;var Hd=0;break r}for(Ud=0;Ud<px;++Ud)fx[Vb[Ud]]=V(Ca,3);var Sm=void 0,Zo=void 0,xx=zd,by=fx,Vd=Nm,gx=Qo,km=0,Aa=xx.m,vx=8,bx=l(128,I);n:for(;E(bx,0,7,by,19);){if(V(Aa,1)){var yy=2+2*V(Aa,3);if((Sm=2+V(Aa,yy))>Vd)break n}else Sm=Vd;for(Zo=0;Zo<Vd&&Sm--;){ae(Aa);var yx=bx[0+(127&q(Aa))];ee(Aa,Aa.u+yx.g);var jl=yx.value;if(16>jl)gx[Zo++]=jl,jl!=0&&(vx=jl);else{var wy=jl==16,wx=jl-16,Ny=qb[wx],Nx=V(Aa,zb[wx])+Ny;if(Zo+Nx>Vd)break n;for(var jy=wy?vx:0;0<Nx--;)gx[Zo++]=jy}}km=1;break n}km||(xx.a=3),qd=km}(qd=qd&&!Ca.h)&&(jm=E(fy,py,8,Qo,Nm)),qd&&jm!=0?Hd=jm:(zd.a=3,Hd=0)}if(Hd==0)break s;if(Bd&&Hb[ut]==1&&(Bd=$d[vs].g==0),ux+=$d[vs].g,vs+=Hd,3>=ut){var ec,_m=Xo[0];for(ec=1;ec<ns;++ec)Xo[ec]>_m&&(_m=Xo[ec]);hx+=_m}}if(cr.nd=Bd,cr.Qb=0,Bd&&(cr.qb=(wl[3][Nl[3]+0].value<<24|wl[1][Nl[1]+0].value<<16|wl[2][Nl[2]+0].value)>>>0,ux==0&&256>wl[0][Nl[0]+0].value&&(cr.Qb=1,cr.qb+=wl[0][Nl[0]+0].value<<8)),cr.jc=!cr.Qb&&6>hx,cr.jc){var Wd,sa=cr;for(Wd=0;Wd<$s;++Wd){var Ta=Wd,Pa=sa.pd[Ta],Gd=sa.G[0][sa.H[0]+Ta];256<=Gd.value?(Pa.g=Gd.g+256,Pa.value=Gd.value):(Pa.g=0,Pa.value=0,Ta>>=Ns(Gd,8,Pa),Ta>>=Ns(sa.G[1][sa.H[1]+Ta],16,Pa),Ta>>=Ns(sa.G[2][sa.H[2]+Ta],0,Pa),Ns(sa.G[3][sa.H[3]+Ta],24,Pa))}}}Ls.vc=Bs,Ls.Wb=an,Ls.Ya=Rd,Ls.yc=wm,Ot=1;break t}Ot=0}if(!($=Ot)){k.a=3;break e}if(0<fe){if(W.ua=1<<fe,!Pe(W.Wa,fe)){k.a=1,$=0;break e}}else W.ua=0;var Cm=k,jx=B,Sy=U,Am=Cm.s,Tm=Am.xc;if(Cm.c=jx,Cm.i=Sy,Am.md=Be(jx,Tm),Am.wc=Tm==0?-1:(1<<Tm)-1,w){k.xb=ty;break e}if((ne=i(B*U))==null){k.a=1,$=0;break e}$=($=rr(k,ne,0,B,U,U,null))&&!z.h;break e}return $?(O!=null?O[0]=ne:(t(ne==null),t(w)),k.$=0,w||Cr(W)):Cr(W),$}function ui(c,m){var w=c.c*c.i,k=w+m+16*m;return t(c.c<=m),c.V=i(k),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+w+m,1)}function Ki(c,m){var w=c.C,k=m-w,O=c.V,$=c.Ba+c.c*w;for(t(m<=c.l.o);0<k;){var B=16<k?16:k,U=c.l.ma,z=c.l.width,W=z*B,ne=U.ca,fe=U.tb+z*w,pe=c.Ta,oe=c.Ua;_n(c,B,O,$),cs(pe,oe,ne,fe,W),sr(U,w,w+B,ne,fe,z),k-=B,O+=B*c.c,w+=B}t(w==m),c.C=c.Ma=m}function Xi(){this.ub=this.yd=this.td=this.Rb=0}function Qi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zi(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function rd(){this.Yb=function(){var c=[];return function m(w,k,O){for(var $=O[k],B=0;B<$&&(w.push(O.length>k+1?[]:0),!(O.length<k+1));B++)m(w[B],k+1,O)}(c,0,[3,11]),c}()}function zh(){this.jb=i(3),this.Wc=o([4,8],rd),this.Xc=o([4,17],rd)}function qh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function el(){this.ld=this.La=this.dd=this.tc=0}function ad(){this.Na=this.la=0}function Hh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ko(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vh(){this.uc=this.M=this.Nb=0,this.wa=Array(new el),this.Y=0,this.ya=Array(new ko),this.aa=0,this.l=new tl}function id(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Wh(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Xi,this.Kc=new Qi,this.ed=new qh,this.Qa=new Zi,this.Ic=this.$c=this.Aa=0,this.D=new Vh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ie),this.ia=0,this.pb=l(4,Hh),this.Pa=new zh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new id),this.Hd=0,this.rb=Array(new ad),this.sb=0,this.wa=Array(new el),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ko),this.L=this.aa=0,this.gd=o([4,2],el),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gh(){var c=new Wh;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Jo||(Jo=cd)),c}function ls(c,m,w){return c.a==0&&(c.a=m,c.sc=w,c.cb=0),0}function ld(c,m,w){return 3<=w&&c[m+0]==157&&c[m+1]==1&&c[m+2]==42}function od(c,m){if(c==null)return 0;if(c.a=0,c.sc="OK",m==null)return ls(c,2,"null VP8Io passed to VP8GetHeaders()");var w=m.data,k=m.w,O=m.ha;if(4>O)return ls(c,7,"Truncated header.");var $=w[k+0]|w[k+1]<<8|w[k+2]<<16,B=c.Od;if(B.Rb=!(1&$),B.td=$>>1&7,B.yd=$>>4&1,B.ub=$>>5,3<B.td)return ls(c,3,"Incorrect keyframe parameters.");if(!B.yd)return ls(c,4,"Frame not displayable.");k+=3,O-=3;var U=c.Kc;if(B.Rb){if(7>O)return ls(c,7,"cannot parse picture header");if(!ld(w,k,O))return ls(c,3,"Bad code word");U.c=16383&(w[k+4]<<8|w[k+3]),U.Td=w[k+4]>>6,U.i=16383&(w[k+6]<<8|w[k+5]),U.Ud=w[k+6]>>6,k+=7,O-=7,c.za=U.c+15>>4,c.Ub=U.i+15>>4,m.width=U.c,m.height=U.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,a(($=c.Pa).jb,0,255,$.jb.length),t(($=c.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,a($.Zb,0,0,$.Zb.length),a($.Lb,0,0,$.Lb)}if(B.ub>O)return ls(c,7,"bad partition length");te($=c.m,w,k,B.ub),k+=B.ub,O-=B.ub,B.Rb&&(U.Ld=xe($),U.Kd=xe($)),U=c.Qa;var z,W=c.Pa;if(t($!=null),t(U!=null),U.Cb=xe($),U.Cb){if(U.Bb=xe($),xe($)){for(U.Fb=xe($),z=0;4>z;++z)U.Zb[z]=xe($)?M($,7):0;for(z=0;4>z;++z)U.Lb[z]=xe($)?M($,6):0}if(U.Bb)for(z=0;3>z;++z)W.jb[z]=xe($)?G($,8):255}else U.Bb=0;if($.Ka)return ls(c,3,"cannot parse segment header");if((U=c.ed).zd=xe($),U.Tb=G($,6),U.wb=G($,3),U.Pc=xe($),U.Pc&&xe($)){for(W=0;4>W;++W)xe($)&&(U.vd[W]=M($,6));for(W=0;4>W;++W)xe($)&&(U.od[W]=M($,6))}if(c.L=U.Tb==0?0:U.zd?1:2,$.Ka)return ls(c,3,"cannot parse filter header");var ne=O;if(O=z=k,k=z+ne,U=ne,c.Xb=(1<<G(c.m,2))-1,ne<3*(W=c.Xb))w=7;else{for(z+=3*W,U-=3*W,ne=0;ne<W;++ne){var fe=w[O+0]|w[O+1]<<8|w[O+2]<<16;fe>U&&(fe=U),te(c.Jc[+ne],w,z,fe),z+=fe,U-=fe,O+=3}te(c.Jc[+W],w,z,U),w=z<k?0:5}if(w!=0)return ls(c,w,"cannot parse partitions");for(w=G(z=c.m,7),O=xe(z)?M(z,4):0,k=xe(z)?M(z,4):0,U=xe(z)?M(z,4):0,W=xe(z)?M(z,4):0,z=xe(z)?M(z,4):0,ne=c.Qa,fe=0;4>fe;++fe){if(ne.Cb){var pe=ne.Zb[fe];ne.Fb||(pe+=w)}else{if(0<fe){c.pb[fe]=c.pb[0];continue}pe=w}var oe=c.pb[fe];oe.Sc[0]=vm[Cn(pe+O,127)],oe.Sc[1]=bm[Cn(pe+0,127)],oe.Eb[0]=2*vm[Cn(pe+k,127)],oe.Eb[1]=101581*bm[Cn(pe+U,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=vm[Cn(pe+W,117)],oe.Qc[1]=bm[Cn(pe+z,127)],oe.lc=pe+z}if(!B.Rb)return ls(c,4,"Not a key frame.");for(xe($),B=c.Pa,w=0;4>w;++w){for(O=0;8>O;++O)for(k=0;3>k;++k)for(U=0;11>U;++U)W=ve($,Zb[w][O][k][U])?G($,8):Xb[w][O][k][U],B.Wc[w][O].Yb[k][U]=W;for(O=0;17>O;++O)B.Xc[w][O]=B.Wc[w][ey[O]]}return c.kc=xe($),c.kc&&(c.Bd=G($,8)),c.cb=1}function cd(c,m,w,k,O,$,B){var U=m[O].Yb[w];for(w=0;16>O;++O){if(!ve(c,U[w+0]))return O;for(;!ve(c,U[w+1]);)if(U=m[++O].Yb[0],w=0,O==16)return 16;var z=m[O+1].Yb;if(ve(c,U[w+2])){var W=c,ne=0;if(ve(W,(pe=U)[(fe=w)+3]))if(ve(W,pe[fe+6])){for(U=0,fe=2*(ne=ve(W,pe[fe+8]))+(pe=ve(W,pe[fe+9+ne])),ne=0,pe=Jb[fe];pe[U];++U)ne+=ne+ve(W,pe[U]);ne+=3+(8<<fe)}else ve(W,pe[fe+7])?(ne=7+2*ve(W,165),ne+=ve(W,145)):ne=5+ve(W,159);else ne=ve(W,pe[fe+4])?3+ve(W,pe[fe+5]):2;U=z[2]}else ne=1,U=z[1];z=B+Kb[O],0>(W=c).b&&de(W);var fe,pe=W.b,oe=(fe=W.Ca>>1)-(W.I>>pe)>>31;--W.b,W.Ca+=oe,W.Ca|=1,W.I-=(fe+1&oe)<<pe,$[z]=((ne^oe)-oe)*k[(0<O)+0]}return 16}function _o(c){var m=c.rb[c.sb-1];m.la=0,m.Na=0,a(c.zc,0,0,c.zc.length),c.ja=0}function Yh(c,m){if(c==null)return 0;if(m==null)return ls(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!od(c,m))return 0;if(t(c.cb),m.ac==null||m.ac(m)){m.ob&&(c.L=0);var w=Md[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=m.v-w>>4,c.zb=m.j-w>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=m.o+15+w>>4,c.Hb=m.va+15+w>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var k=c.ed;for(w=0;4>w;++w){var O;if(c.Qa.Cb){var $=c.Qa.Lb[w];c.Qa.Fb||($+=k.Tb)}else $=k.Tb;for(O=0;1>=O;++O){var B=c.gd[w][O],U=$;if(k.Pc&&(U+=k.vd[0],O&&(U+=k.od[0])),0<(U=0>U?0:63<U?63:U)){var z=U;0<k.wb&&(z=4<k.wb?z>>2:z>>1)>9-k.wb&&(z=9-k.wb),1>z&&(z=1),B.dd=z,B.tc=2*U+z,B.ld=40<=U?2:15<=U?1:0}else B.tc=0;B.La=O}}}w=0}else ls(c,6,"Frame setup failed"),w=c.a;if(w=w==0){if(w){c.$c=0,0<c.Aa||(c.Ic=my);e:{w=c.Ic,k=4*(z=c.za);var W=32*z,ne=z+1,fe=0<c.L?z*(0<c.Aa?2:1):0,pe=(c.Aa==2?2:1)*z;if((B=k+832+(O=3*(16*w+Md[c.L])/2*W)+($=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=B)w=0;else{if(B>c.Vb){if(c.Vb=0,c.Ec=i(B),c.Fc=0,c.Ec==null){w=ls(c,1,"no memory during frame initialization.");break e}c.Vb=B}B=c.Ec,U=c.Fc,c.Ac=B,c.Bc=U,U+=k,c.Gd=l(W,id),c.Hd=0,c.rb=l(ne+1,ad),c.sb=1,c.wa=fe?l(fe,el):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=z),t(!0),c.oc=B,c.pc=U,U+=832,c.ya=l(pe,ko),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=z),c.R=16*z,c.B=8*z,z=(W=Md[c.L])*c.R,W=W/2*c.B,c.sa=B,c.ta=U+z,c.qa=c.sa,c.ra=c.ta+16*w*c.R+W,c.Ha=c.qa,c.Ia=c.ra+8*w*c.B+W,c.$c=0,U+=O,c.mb=$?B:null,c.nb=$?U:null,t(U+$<=c.Fc+c.Vb),_o(c),a(c.Ac,c.Bc,0,k),w=1}}if(w){if(m.ka=0,m.y=c.sa,m.O=c.ta,m.f=c.qa,m.N=c.ra,m.ea=c.Ha,m.Vd=c.Ia,m.fa=c.R,m.Rc=c.B,m.F=null,m.J=0,!Ad){for(w=-255;255>=w;++w)js[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)Zr[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)Yo[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)bl[255+w]=0>w?0:255<w?255:w;Ad=1}xl=Xh,Qr=Jh,Vo=ud,rn=Kh,Bn=hd,os=dd,gl=Eo,Cd=fi,Wo=dm,gi=Do,vi=cm,Na=ll,bi=Io,vl=wd,yi=yd,ja=Pr,Go=Jr,Un=om,or[0]=Tr,or[1]=Qh,or[2]=sm,or[3]=nm,or[4]=pd,or[5]=al,or[6]=xd,or[7]=To,or[8]=am,or[9]=rm,Sa[0]=md,Sa[1]=em,Sa[2]=Yr,Sa[3]=nl,Sa[4]=Hs,Sa[5]=tm,Sa[6]=fd,ea[0]=ga,ea[1]=Zh,ea[2]=im,ea[3]=Po,ea[4]=mi,ea[5]=lm,ea[6]=Lo,w=1}else w=0}w&&(w=function(oe,Ce){for(oe.M=0;oe.M<oe.Va;++oe.M){var ye,re=oe.Jc[oe.M&oe.Xb],le=oe.m,Se=oe;for(ye=0;ye<Se.za;++ye){var Ee=le,ke=Se,Ve=ke.Ac,ze=ke.Bc+4*ye,Xe=ke.zc,qe=ke.ya[ke.aa+ye];if(ke.Qa.Bb?qe.$b=ve(Ee,ke.Pa.jb[0])?2+ve(Ee,ke.Pa.jb[2]):ve(Ee,ke.Pa.jb[1]):qe.$b=0,ke.kc&&(qe.Ad=ve(Ee,ke.Bd)),qe.Za=!ve(Ee,145)+0,qe.Za){var kt=qe.Ob,Pt=0;for(ke=0;4>ke;++ke){var Nt,bt=Xe[0+ke];for(Nt=0;4>Nt;++Nt){bt=Qb[Ve[ze+Nt]][bt];for(var Ot=Zp[ve(Ee,bt[0])];0<Ot;)Ot=Zp[2*Ot+ve(Ee,bt[Ot])];bt=-Ot,Ve[ze+Nt]=bt}r(kt,Pt,Ve,ze,4),Pt+=4,Xe[0+ke]=bt}}else bt=ve(Ee,156)?ve(Ee,128)?1:3:ve(Ee,163)?2:0,qe.Ob[0]=bt,a(Ve,ze,bt,4),a(Xe,0,bt,4);qe.Dd=ve(Ee,142)?ve(Ee,114)?ve(Ee,183)?1:3:2:0}if(Se.m.Ka)return ls(oe,7,"Premature end-of-partition0 encountered.");for(;oe.ja<oe.za;++oe.ja){if(Se=re,Ee=(le=oe).rb[le.sb-1],Ve=le.rb[le.sb+le.ja],ye=le.ya[le.aa+le.ja],ze=le.kc?ye.Ad:0)Ee.la=Ve.la=0,ye.Za||(Ee.Na=Ve.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var It,ut;if(Ee=Ve,Ve=Se,ze=le.Pa.Xc,Xe=le.ya[le.aa+le.ja],qe=le.pb[Xe.$b],ke=Xe.ad,kt=0,Pt=le.rb[le.sb-1],bt=Nt=0,a(ke,kt,0,384),Xe.Za)var vs=0,xn=ze[3];else{Ot=i(16);var bs=Ee.Na+Pt.Na;if(bs=Jo(Ve,ze[1],bs,qe.Eb,0,Ot,0),Ee.Na=Pt.Na=(0<bs)+0,1<bs)xl(Ot,0,ke,kt);else{var gn=Ot[0]+3>>3;for(Ot=0;256>Ot;Ot+=16)ke[kt+Ot]=gn}vs=1,xn=ze[0]}var Lt=15&Ee.la,Tn=15&Pt.la;for(Ot=0;4>Ot;++Ot){var Pn=1&Tn;for(gn=ut=0;4>gn;++gn)Lt=Lt>>1|(Pn=(bs=Jo(Ve,xn,bs=Pn+(1&Lt),qe.Sc,vs,ke,kt))>vs)<<7,ut=ut<<2|(3<bs?3:1<bs?2:ke[kt+0]!=0),kt+=16;Lt>>=4,Tn=Tn>>1|Pn<<7,Nt=(Nt<<8|ut)>>>0}for(xn=Lt,vs=Tn>>4,It=0;4>It;It+=2){for(ut=0,Lt=Ee.la>>4+It,Tn=Pt.la>>4+It,Ot=0;2>Ot;++Ot){for(Pn=1&Tn,gn=0;2>gn;++gn)bs=Pn+(1&Lt),Lt=Lt>>1|(Pn=0<(bs=Jo(Ve,ze[2],bs,qe.Qc,0,ke,kt)))<<3,ut=ut<<2|(3<bs?3:1<bs?2:ke[kt+0]!=0),kt+=16;Lt>>=2,Tn=Tn>>1|Pn<<5}bt|=ut<<4*It,xn|=Lt<<4<<It,vs|=(240&Tn)<<It}Ee.la=xn,Pt.la=vs,Xe.Hc=Nt,Xe.Gc=bt,Xe.ia=43690&bt?0:qe.ia,ze=!(Nt|bt)}if(0<le.L&&(le.wa[le.Y+le.ja]=le.gd[ye.$b][ye.Za],le.wa[le.Y+le.ja].La|=!ze),Se.Ka)return ls(oe,7,"Premature end-of-file encountered.")}if(_o(oe),le=Ce,Se=1,ye=(re=oe).D,Ee=0<re.L&&re.M>=re.zb&&re.M<=re.Va,re.Aa==0)e:{if(ye.M=re.M,ye.uc=Ee,Bo(re,ye),Se=1,ye=(ut=re.D).Nb,Ee=(bt=Md[re.L])*re.R,Ve=bt/2*re.B,Ot=16*ye*re.R,gn=8*ye*re.B,ze=re.sa,Xe=re.ta-Ee+Ot,qe=re.qa,ke=re.ra-Ve+gn,kt=re.Ha,Pt=re.Ia-Ve+gn,Tn=(Lt=ut.M)==0,Nt=Lt>=re.Va-1,re.Aa==2&&Bo(re,ut),ut.uc)for(Pn=(bs=re).D.M,t(bs.D.uc),ut=bs.yb;ut<bs.Hb;++ut){vs=ut,xn=Pn;var Ls=(Bs=(ns=bs).D).Nb;It=ns.R;var Bs=Bs.wa[Bs.Y+vs],an=ns.sa,Vn=ns.ta+16*Ls*It+16*vs,Er=Bs.dd,Es=Bs.tc;if(Es!=0)if(t(3<=Es),ns.L==1)0<vs&&ja(an,Vn,It,Es+4),Bs.La&&Un(an,Vn,It,Es),0<xn&&yi(an,Vn,It,Es+4),Bs.La&&Go(an,Vn,It,Es);else{var ta=ns.B,wi=ns.qa,yl=ns.ra+8*Ls*ta+8*vs,_a=ns.Ha,ns=ns.Ia+8*Ls*ta+8*vs;Ls=Bs.ld,0<vs&&(Cd(an,Vn,It,Es+4,Er,Ls),gi(wi,yl,_a,ns,ta,Es+4,Er,Ls)),Bs.La&&(Na(an,Vn,It,Es,Er,Ls),vl(wi,yl,_a,ns,ta,Es,Er,Ls)),0<xn&&(gl(an,Vn,It,Es+4,Er,Ls),Wo(wi,yl,_a,ns,ta,Es+4,Er,Ls)),Bs.La&&(vi(an,Vn,It,Es,Er,Ls),bi(wi,yl,_a,ns,ta,Es,Er,Ls))}}if(re.ia&&alert("todo:DitherRow"),le.put!=null){if(ut=16*Lt,Lt=16*(Lt+1),Tn?(le.y=re.sa,le.O=re.ta+Ot,le.f=re.qa,le.N=re.ra+gn,le.ea=re.Ha,le.W=re.Ia+gn):(ut-=bt,le.y=ze,le.O=Xe,le.f=qe,le.N=ke,le.ea=kt,le.W=Pt),Nt||(Lt-=bt),Lt>le.o&&(Lt=le.o),le.F=null,le.J=null,re.Fa!=null&&0<re.Fa.length&&ut<Lt&&(le.J=Ro(re,le,ut,Lt-ut),le.F=re.mb,le.F==null&&le.F.length==0)){Se=ls(re,3,"Could not decode alpha data.");break e}ut<le.j&&(bt=le.j-ut,ut=le.j,t(!(1&bt)),le.O+=re.R*bt,le.N+=re.B*(bt>>1),le.W+=re.B*(bt>>1),le.F!=null&&(le.J+=le.width*bt)),ut<Lt&&(le.O+=le.v,le.N+=le.v>>1,le.W+=le.v>>1,le.F!=null&&(le.J+=le.v),le.ka=ut-le.j,le.U=le.va-le.v,le.T=Lt-ut,Se=le.put(le))}ye+1!=re.Ic||Nt||(r(re.sa,re.ta-Ee,ze,Xe+16*re.R,Ee),r(re.qa,re.ra-Ve,qe,ke+8*re.B,Ve),r(re.Ha,re.Ia-Ve,kt,Pt+8*re.B,Ve))}if(!Se)return ls(oe,6,"Output aborted.")}return 1}(c,m)),m.bc!=null&&m.bc(m),w&=1}return w?(c.cb=0,w):0}function ar(c,m,w,k,O){O=c[m+w+32*k]+(O>>3),c[m+w+32*k]=-256&O?0>O?0:255:O}function sl(c,m,w,k,O,$){ar(c,m,0,w,k+O),ar(c,m,1,w,k+$),ar(c,m,2,w,k-$),ar(c,m,3,w,k-O)}function mn(c){return(20091*c>>16)+c}function Co(c,m,w,k){var O,$=0,B=i(16);for(O=0;4>O;++O){var U=c[m+0]+c[m+8],z=c[m+0]-c[m+8],W=(35468*c[m+4]>>16)-mn(c[m+12]),ne=mn(c[m+4])+(35468*c[m+12]>>16);B[$+0]=U+ne,B[$+1]=z+W,B[$+2]=z-W,B[$+3]=U-ne,$+=4,m++}for(O=$=0;4>O;++O)U=(c=B[$+0]+4)+B[$+8],z=c-B[$+8],W=(35468*B[$+4]>>16)-mn(B[$+12]),ar(w,k,0,0,U+(ne=mn(B[$+4])+(35468*B[$+12]>>16))),ar(w,k,1,0,z+W),ar(w,k,2,0,z-W),ar(w,k,3,0,U-ne),$++,k+=32}function dd(c,m,w,k){var O=c[m+0]+4,$=35468*c[m+4]>>16,B=mn(c[m+4]),U=35468*c[m+1]>>16;sl(w,k,0,O+B,c=mn(c[m+1]),U),sl(w,k,1,O+$,c,U),sl(w,k,2,O-$,c,U),sl(w,k,3,O-B,c,U)}function Jh(c,m,w,k,O){Co(c,m,w,k),O&&Co(c,m+16,w,k+4)}function ud(c,m,w,k){Qr(c,m+0,w,k,1),Qr(c,m+32,w,k+128,1)}function Kh(c,m,w,k){var O;for(c=c[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)ar(w,k,m,O,c)}function hd(c,m,w,k){c[m+0]&&rn(c,m+0,w,k),c[m+16]&&rn(c,m+16,w,k+4),c[m+32]&&rn(c,m+32,w,k+128),c[m+48]&&rn(c,m+48,w,k+128+4)}function Xh(c,m,w,k){var O,$=i(16);for(O=0;4>O;++O){var B=c[m+0+O]+c[m+12+O],U=c[m+4+O]+c[m+8+O],z=c[m+4+O]-c[m+8+O],W=c[m+0+O]-c[m+12+O];$[0+O]=B+U,$[8+O]=B-U,$[4+O]=W+z,$[12+O]=W-z}for(O=0;4>O;++O)B=(c=$[0+4*O]+3)+$[3+4*O],U=$[1+4*O]+$[2+4*O],z=$[1+4*O]-$[2+4*O],W=c-$[3+4*O],w[k+0]=B+U>>3,w[k+16]=W+z>>3,w[k+32]=B-U>>3,w[k+48]=W-z>>3,k+=64}function Ao(c,m,w){var k,O=m-32,$=An,B=255-c[O-1];for(k=0;k<w;++k){var U,z=$,W=B+c[m-1];for(U=0;U<w;++U)c[m+U]=z[W+c[O+U]];m+=32}}function Qh(c,m){Ao(c,m,4)}function Zh(c,m){Ao(c,m,8)}function em(c,m){Ao(c,m,16)}function Yr(c,m){var w;for(w=0;16>w;++w)r(c,m+32*w,c,m-32,16)}function nl(c,m){var w;for(w=16;0<w;--w)a(c,m,c[m-1],16),m+=32}function rl(c,m,w){var k;for(k=0;16>k;++k)a(m,w+32*k,c,16)}function md(c,m){var w,k=16;for(w=0;16>w;++w)k+=c[m-1+32*w]+c[m+w-32];rl(k>>5,c,m)}function Hs(c,m){var w,k=8;for(w=0;16>w;++w)k+=c[m-1+32*w];rl(k>>4,c,m)}function tm(c,m){var w,k=8;for(w=0;16>w;++w)k+=c[m+w-32];rl(k>>4,c,m)}function fd(c,m){rl(128,c,m)}function st(c,m,w){return c+2*m+w+2>>2}function sm(c,m){var w,k=m-32;for(k=new Uint8Array([st(c[k-1],c[k+0],c[k+1]),st(c[k+0],c[k+1],c[k+2]),st(c[k+1],c[k+2],c[k+3]),st(c[k+2],c[k+3],c[k+4])]),w=0;4>w;++w)r(c,m+32*w,k,0,k.length)}function nm(c,m){var w=c[m-1],k=c[m-1+32],O=c[m-1+64],$=c[m-1+96];Oe(c,m+0,16843009*st(c[m-1-32],w,k)),Oe(c,m+32,16843009*st(w,k,O)),Oe(c,m+64,16843009*st(k,O,$)),Oe(c,m+96,16843009*st(O,$,$))}function Tr(c,m){var w,k=4;for(w=0;4>w;++w)k+=c[m+w-32]+c[m-1+32*w];for(k>>=3,w=0;4>w;++w)a(c,m+32*w,k,4)}function pd(c,m){var w=c[m-1+0],k=c[m-1+32],O=c[m-1+64],$=c[m-1-32],B=c[m+0-32],U=c[m+1-32],z=c[m+2-32],W=c[m+3-32];c[m+0+96]=st(k,O,c[m-1+96]),c[m+1+96]=c[m+0+64]=st(w,k,O),c[m+2+96]=c[m+1+64]=c[m+0+32]=st($,w,k),c[m+3+96]=c[m+2+64]=c[m+1+32]=c[m+0+0]=st(B,$,w),c[m+3+64]=c[m+2+32]=c[m+1+0]=st(U,B,$),c[m+3+32]=c[m+2+0]=st(z,U,B),c[m+3+0]=st(W,z,U)}function xd(c,m){var w=c[m+1-32],k=c[m+2-32],O=c[m+3-32],$=c[m+4-32],B=c[m+5-32],U=c[m+6-32],z=c[m+7-32];c[m+0+0]=st(c[m+0-32],w,k),c[m+1+0]=c[m+0+32]=st(w,k,O),c[m+2+0]=c[m+1+32]=c[m+0+64]=st(k,O,$),c[m+3+0]=c[m+2+32]=c[m+1+64]=c[m+0+96]=st(O,$,B),c[m+3+32]=c[m+2+64]=c[m+1+96]=st($,B,U),c[m+3+64]=c[m+2+96]=st(B,U,z),c[m+3+96]=st(U,z,z)}function al(c,m){var w=c[m-1+0],k=c[m-1+32],O=c[m-1+64],$=c[m-1-32],B=c[m+0-32],U=c[m+1-32],z=c[m+2-32],W=c[m+3-32];c[m+0+0]=c[m+1+64]=$+B+1>>1,c[m+1+0]=c[m+2+64]=B+U+1>>1,c[m+2+0]=c[m+3+64]=U+z+1>>1,c[m+3+0]=z+W+1>>1,c[m+0+96]=st(O,k,w),c[m+0+64]=st(k,w,$),c[m+0+32]=c[m+1+96]=st(w,$,B),c[m+1+32]=c[m+2+96]=st($,B,U),c[m+2+32]=c[m+3+96]=st(B,U,z),c[m+3+32]=st(U,z,W)}function To(c,m){var w=c[m+0-32],k=c[m+1-32],O=c[m+2-32],$=c[m+3-32],B=c[m+4-32],U=c[m+5-32],z=c[m+6-32],W=c[m+7-32];c[m+0+0]=w+k+1>>1,c[m+1+0]=c[m+0+64]=k+O+1>>1,c[m+2+0]=c[m+1+64]=O+$+1>>1,c[m+3+0]=c[m+2+64]=$+B+1>>1,c[m+0+32]=st(w,k,O),c[m+1+32]=c[m+0+96]=st(k,O,$),c[m+2+32]=c[m+1+96]=st(O,$,B),c[m+3+32]=c[m+2+96]=st($,B,U),c[m+3+64]=st(B,U,z),c[m+3+96]=st(U,z,W)}function rm(c,m){var w=c[m-1+0],k=c[m-1+32],O=c[m-1+64],$=c[m-1+96];c[m+0+0]=w+k+1>>1,c[m+2+0]=c[m+0+32]=k+O+1>>1,c[m+2+32]=c[m+0+64]=O+$+1>>1,c[m+1+0]=st(w,k,O),c[m+3+0]=c[m+1+32]=st(k,O,$),c[m+3+32]=c[m+1+64]=st(O,$,$),c[m+3+64]=c[m+2+64]=c[m+0+96]=c[m+1+96]=c[m+2+96]=c[m+3+96]=$}function am(c,m){var w=c[m-1+0],k=c[m-1+32],O=c[m-1+64],$=c[m-1+96],B=c[m-1-32],U=c[m+0-32],z=c[m+1-32],W=c[m+2-32];c[m+0+0]=c[m+2+32]=w+B+1>>1,c[m+0+32]=c[m+2+64]=k+w+1>>1,c[m+0+64]=c[m+2+96]=O+k+1>>1,c[m+0+96]=$+O+1>>1,c[m+3+0]=st(U,z,W),c[m+2+0]=st(B,U,z),c[m+1+0]=c[m+3+32]=st(w,B,U),c[m+1+32]=c[m+3+64]=st(k,w,B),c[m+1+64]=c[m+3+96]=st(O,k,w),c[m+1+96]=st($,O,k)}function im(c,m){var w;for(w=0;8>w;++w)r(c,m+32*w,c,m-32,8)}function Po(c,m){var w;for(w=0;8>w;++w)a(c,m,c[m-1],8),m+=32}function hi(c,m,w){var k;for(k=0;8>k;++k)a(m,w+32*k,c,8)}function ga(c,m){var w,k=8;for(w=0;8>w;++w)k+=c[m+w-32]+c[m-1+32*w];hi(k>>4,c,m)}function lm(c,m){var w,k=4;for(w=0;8>w;++w)k+=c[m+w-32];hi(k>>3,c,m)}function mi(c,m){var w,k=4;for(w=0;8>w;++w)k+=c[m-1+32*w];hi(k>>3,c,m)}function Lo(c,m){hi(128,c,m)}function il(c,m,w){var k=c[m-w],O=c[m+0],$=3*(O-k)+mm[1020+c[m-2*w]-c[m+w]],B=Td[112+($+4>>3)];c[m-w]=An[255+k+Td[112+($+3>>3)]],c[m+0]=An[255+O-B]}function gd(c,m,w,k){var O=c[m+0],$=c[m+w];return qn[255+c[m-2*w]-c[m-w]]>k||qn[255+$-O]>k}function vd(c,m,w,k){return 4*qn[255+c[m-w]-c[m+0]]+qn[255+c[m-2*w]-c[m+w]]<=k}function bd(c,m,w,k,O){var $=c[m-3*w],B=c[m-2*w],U=c[m-w],z=c[m+0],W=c[m+w],ne=c[m+2*w],fe=c[m+3*w];return 4*qn[255+U-z]+qn[255+B-W]>k?0:qn[255+c[m-4*w]-$]<=O&&qn[255+$-B]<=O&&qn[255+B-U]<=O&&qn[255+fe-ne]<=O&&qn[255+ne-W]<=O&&qn[255+W-z]<=O}function yd(c,m,w,k){var O=2*k+1;for(k=0;16>k;++k)vd(c,m+k,w,O)&&il(c,m+k,w)}function Pr(c,m,w,k){var O=2*k+1;for(k=0;16>k;++k)vd(c,m+k*w,1,O)&&il(c,m+k*w,1)}function Jr(c,m,w,k){var O;for(O=3;0<O;--O)yd(c,m+=4*w,w,k)}function om(c,m,w,k){var O;for(O=3;0<O;--O)Pr(c,m+=4,w,k)}function va(c,m,w,k,O,$,B,U){for($=2*$+1;0<O--;){if(bd(c,m,w,$,B))if(gd(c,m,w,U))il(c,m,w);else{var z=c,W=m,ne=w,fe=z[W-2*ne],pe=z[W-ne],oe=z[W+0],Ce=z[W+ne],ye=z[W+2*ne],re=27*(Se=mm[1020+3*(oe-pe)+mm[1020+fe-Ce]])+63>>7,le=18*Se+63>>7,Se=9*Se+63>>7;z[W-3*ne]=An[255+z[W-3*ne]+Se],z[W-2*ne]=An[255+fe+le],z[W-ne]=An[255+pe+re],z[W+0]=An[255+oe-re],z[W+ne]=An[255+Ce-le],z[W+2*ne]=An[255+ye-Se]}m+=k}}function ir(c,m,w,k,O,$,B,U){for($=2*$+1;0<O--;){if(bd(c,m,w,$,B))if(gd(c,m,w,U))il(c,m,w);else{var z=c,W=m,ne=w,fe=z[W-ne],pe=z[W+0],oe=z[W+ne],Ce=Td[112+((ye=3*(pe-fe))+4>>3)],ye=Td[112+(ye+3>>3)],re=Ce+1>>1;z[W-2*ne]=An[255+z[W-2*ne]+re],z[W-ne]=An[255+fe+ye],z[W+0]=An[255+pe-Ce],z[W+ne]=An[255+oe-re]}m+=k}}function Eo(c,m,w,k,O,$){va(c,m,w,1,16,k,O,$)}function fi(c,m,w,k,O,$){va(c,m,1,w,16,k,O,$)}function cm(c,m,w,k,O,$){var B;for(B=3;0<B;--B)ir(c,m+=4*w,w,1,16,k,O,$)}function ll(c,m,w,k,O,$){var B;for(B=3;0<B;--B)ir(c,m+=4,1,w,16,k,O,$)}function dm(c,m,w,k,O,$,B,U){va(c,m,O,1,8,$,B,U),va(w,k,O,1,8,$,B,U)}function Do(c,m,w,k,O,$,B,U){va(c,m,1,O,8,$,B,U),va(w,k,1,O,8,$,B,U)}function Io(c,m,w,k,O,$,B,U){ir(c,m+4*O,O,1,8,$,B,U),ir(w,k+4*O,O,1,8,$,B,U)}function wd(c,m,w,k,O,$,B,U){ir(c,m+4,1,O,8,$,B,U),ir(w,k+4,1,O,8,$,B,U)}function ol(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ts,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Oo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nd(){this.ua=0,this.Wa=new X,this.vb=new X,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new I}function um(){this.xb=this.a=0,this.l=new tl,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nd,this.ab=0,this.gc=l(4,Fo),this.Oc=0}function cl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pi(c,m,w,k,O,$,B){for(c=c==null?0:c[m+0],m=0;m<B;++m)O[$+m]=c+w[k+m]&255,c=O[$+m]}function Mo(c,m,w,k,O,$,B){var U;if(c==null)pi(null,null,w,k,O,$,B);else for(U=0;U<B;++U)O[$+U]=c[m+U]+w[k+U]&255}function ba(c,m,w,k,O,$,B){if(c==null)pi(null,null,w,k,O,$,B);else{var U,z=c[m+0],W=z,ne=z;for(U=0;U<B;++U)W=ne+(z=c[m+U])-W,ne=w[k+U]+(-256&W?0>W?0:255:W)&255,W=z,O[$+U]=ne}}function Ro(c,m,w,k){var O=m.width,$=m.o;if(t(c!=null&&m!=null),0>w||0>=k||w+k>$)return null;if(!c.Cc){if(c.ga==null){var B;if(c.ga=new cl,(B=c.ga==null)||(B=m.width*m.o,t(c.Gb.length==0),c.Gb=i(B),c.Uc=0,c.Gb==null?B=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,B=1),B=!B),!B){B=c.ga;var U=c.Fa,z=c.P,W=c.qc,ne=c.mb,fe=c.nb,pe=z+1,oe=W-1,Ce=B.l;if(t(U!=null&&ne!=null&&m!=null),ka[0]=null,ka[1]=pi,ka[2]=Mo,ka[3]=ba,B.ca=ne,B.tb=fe,B.c=m.width,B.i=m.height,t(0<B.c&&0<B.i),1>=W)m=0;else if(B.$a=U[z+0]>>0&3,B.Z=U[z+0]>>2&3,B.Lc=U[z+0]>>4&3,z=U[z+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||z)m=0;else if(Ce.put=Sr,Ce.ac=Rs,Ce.bc=kr,Ce.ma=B,Ce.width=m.width,Ce.height=m.height,Ce.Da=m.Da,Ce.v=m.v,Ce.va=m.va,Ce.j=m.j,Ce.o=m.o,B.$a)e:{t(B.$a==1),m=Rn();t:for(;;){if(m==null){m=0;break e}if(t(B!=null),B.mc=m,m.c=B.c,m.i=B.i,m.l=B.l,m.l.ma=B,m.l.width=B.c,m.l.height=B.i,m.a=0,H(m.m,U,pe,oe),!Ar(B.c,B.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Gr(m.s)?(B.ic=1,U=m.c*m.i,m.Ta=null,m.Ua=0,m.V=i(U),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(B.ic=0,m=ui(m,B.c)),!m))break t;m=1;break e}B.mc=null,m=0}else m=oe>=B.c*B.i;B=!m}if(B)return null;c.ga.Lc!=1?c.Ga=0:k=$-w}t(c.ga!=null),t(w+k<=$);e:{if(m=(U=c.ga).c,$=U.l.o,U.$a==0){if(pe=c.rc,oe=c.Vc,Ce=c.Fa,z=c.P+1+w*m,W=c.mb,ne=c.nb+w*m,t(z<=c.P+c.qc),U.Z!=0)for(t(ka[U.Z]!=null),B=0;B<k;++B)ka[U.Z](pe,oe,Ce,z,W,ne,m),pe=W,oe=ne,ne+=m,z+=m;else for(B=0;B<k;++B)r(W,ne,Ce,z,m),pe=W,oe=ne,ne+=m,z+=m;c.rc=pe,c.Vc=oe}else{if(t(U.mc!=null),m=w+k,t((B=U.mc)!=null),t(m<=B.i),B.C>=m)m=1;else if(U.ic||he(),U.ic){U=B.V,pe=B.Ba,oe=B.c;var ye=B.i,re=(Ce=1,z=B.$/oe,W=B.$%oe,ne=B.m,fe=B.s,B.$),le=oe*ye,Se=oe*m,Ee=fe.wc,ke=re<Se?xs(fe,W,z):null;t(re<=le),t(m<=ye),t(Gr(fe));t:for(;;){for(;!ne.h&&re<Se;){if(W&Ee||(ke=xs(fe,W,z)),t(ke!=null),ae(ne),256>(ye=hn(ke.G[0],ke.H[0],ne)))U[pe+re]=ye,++re,++W>=oe&&(W=0,++z<=m&&!(z%16)&&nr(B,z));else{if(!(280>ye)){Ce=0;break t}ye=tr(ye-256,ne);var Ve,ze=hn(ke.G[4],ke.H[4],ne);if(ae(ne),!(re>=(ze=_r(oe,ze=tr(ze,ne)))&&le-re>=ye)){Ce=0;break t}for(Ve=0;Ve<ye;++Ve)U[pe+re+Ve]=U[pe+re+Ve-ze];for(re+=ye,W+=ye;W>=oe;)W-=oe,++z<=m&&!(z%16)&&nr(B,z);re<Se&&W&Ee&&(ke=xs(fe,W,z))}t(ne.h==J(ne))}nr(B,z>m?m:z);break t}!Ce||ne.h&&re<le?(Ce=0,B.a=ne.h?5:3):B.$=re,m=Ce}else m=rr(B,B.V,B.Ba,B.c,B.i,m,Ki);if(!m){k=0;break e}}w+k>=$&&(c.Cc=1),k=1}if(!k)return null;if(c.Cc&&((k=c.ga)!=null&&(k.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+w*O}function v(c,m,w,k,O,$){for(;0<O--;){var B,U=c,z=m+(w?1:0),W=c,ne=m+(w?0:3);for(B=0;B<k;++B){var fe=W[ne+4*B];fe!=255&&(fe*=32897,U[z+4*B+0]=U[z+4*B+0]*fe>>23,U[z+4*B+1]=U[z+4*B+1]*fe>>23,U[z+4*B+2]=U[z+4*B+2]*fe>>23)}m+=$}}function F(c,m,w,k,O){for(;0<k--;){var $;for($=0;$<w;++$){var B=c[m+2*$+0],U=15&(W=c[m+2*$+1]),z=4369*U,W=(240&W|W>>4)*z>>16;c[m+2*$+0]=(240&B|B>>4)*z>>16&240|(15&B|B<<4)*z>>16>>4&15,c[m+2*$+1]=240&W|U}m+=O}}function Q(c,m,w,k,O,$,B,U){var z,W,ne=255;for(W=0;W<O;++W){for(z=0;z<k;++z){var fe=c[m+z];$[B+4*z]=fe,ne&=fe}m+=w,B+=U}return ne!=255}function se(c,m,w,k,O){var $;for($=0;$<O;++$)w[k+$]=c[m+$]>>8}function he(){zn=v,Mt=F,Rt=Q,cs=se}function Ne(c,m,w){S[c]=function(k,O,$,B,U,z,W,ne,fe,pe,oe,Ce,ye,re,le,Se,Ee){var ke,Ve=Ee-1>>1,ze=U[z+0]|W[ne+0]<<16,Xe=fe[pe+0]|oe[Ce+0]<<16;t(k!=null);var qe=3*ze+Xe+131074>>2;for(m(k[O+0],255&qe,qe>>16,ye,re),$!=null&&(qe=3*Xe+ze+131074>>2,m($[B+0],255&qe,qe>>16,le,Se)),ke=1;ke<=Ve;++ke){var kt=U[z+ke]|W[ne+ke]<<16,Pt=fe[pe+ke]|oe[Ce+ke]<<16,Nt=ze+kt+Xe+Pt+524296,bt=Nt+2*(kt+Xe)>>3;qe=bt+ze>>1,ze=(Nt=Nt+2*(ze+Pt)>>3)+kt>>1,m(k[O+2*ke-1],255&qe,qe>>16,ye,re+(2*ke-1)*w),m(k[O+2*ke-0],255&ze,ze>>16,ye,re+(2*ke-0)*w),$!=null&&(qe=Nt+Xe>>1,ze=bt+Pt>>1,m($[B+2*ke-1],255&qe,qe>>16,le,Se+(2*ke-1)*w),m($[B+2*ke+0],255&ze,ze>>16,le,Se+(2*ke+0)*w)),ze=kt,Xe=Pt}1&Ee||(qe=3*ze+Xe+131074>>2,m(k[O+Ee-1],255&qe,qe>>16,ye,re+(Ee-1)*w),$!=null&&(qe=3*Xe+ze+131074>>2,m($[B+Ee-1],255&qe,qe>>16,le,Se+(Ee-1)*w)))}}function Ie(){Hn[Pd]=sy,Hn[Ld]=tx,Hn[Kp]=ny,Hn[Ed]=sx,Hn[Dd]=nx,Hn[fm]=rx,Hn[Xp]=ry,Hn[pm]=tx,Hn[xm]=sx,Hn[Id]=nx,Hn[gm]=rx}function He(c){return c&~ay?0>c?0:255:c>>ax}function Je(c,m){return He((19077*c>>8)+(26149*m>>8)-14234)}function dt(c,m,w){return He((19077*c>>8)-(6419*m>>8)-(13320*w>>8)+8708)}function at(c,m){return He((19077*c>>8)+(33050*m>>8)-17685)}function wt(c,m,w,k,O){k[O+0]=Je(c,w),k[O+1]=dt(c,m,w),k[O+2]=at(c,m)}function Jt(c,m,w,k,O){k[O+0]=at(c,m),k[O+1]=dt(c,m,w),k[O+2]=Je(c,w)}function ss(c,m,w,k,O){var $=dt(c,m,w);m=$<<3&224|at(c,m)>>3,k[O+0]=248&Je(c,w)|$>>5,k[O+1]=m}function gs(c,m,w,k,O){var $=240&at(c,m)|15;k[O+0]=240&Je(c,w)|dt(c,m,w)>>4,k[O+1]=$}function Vs(c,m,w,k,O){k[O+0]=255,wt(c,m,w,k,O+1)}function Ps(c,m,w,k,O){Jt(c,m,w,k,O),k[O+3]=255}function lr(c,m,w,k,O){wt(c,m,w,k,O),k[O+3]=255}function Cn(c,m){return 0>c?0:c>m?m:c}function Lr(c,m,w){S[c]=function(k,O,$,B,U,z,W,ne,fe){for(var pe=ne+(-2&fe)*w;ne!=pe;)m(k[O+0],$[B+0],U[z+0],W,ne),m(k[O+1],$[B+0],U[z+0],W,ne+w),O+=2,++B,++z,ne+=2*w;1&fe&&m(k[O+0],$[B+0],U[z+0],W,ne)}}function jd(c,m,w){return w==0?c==0?m==0?6:5:m==0?4:0:w}function $o(c,m,w,k,O){switch(c>>>30){case 3:Qr(m,w,k,O,0);break;case 2:os(m,w,k,O);break;case 1:rn(m,w,k,O)}}function Bo(c,m){var w,k,O=m.M,$=m.Nb,B=c.oc,U=c.pc+40,z=c.oc,W=c.pc+584,ne=c.oc,fe=c.pc+600;for(w=0;16>w;++w)B[U+32*w-1]=129;for(w=0;8>w;++w)z[W+32*w-1]=129,ne[fe+32*w-1]=129;for(0<O?B[U-1-32]=z[W-1-32]=ne[fe-1-32]=129:(a(B,U-32-1,127,21),a(z,W-32-1,127,9),a(ne,fe-32-1,127,9)),k=0;k<c.za;++k){var pe=m.ya[m.aa+k];if(0<k){for(w=-1;16>w;++w)r(B,U+32*w-4,B,U+32*w+12,4);for(w=-1;8>w;++w)r(z,W+32*w-4,z,W+32*w+4,4),r(ne,fe+32*w-4,ne,fe+32*w+4,4)}var oe=c.Gd,Ce=c.Hd+k,ye=pe.ad,re=pe.Hc;if(0<O&&(r(B,U-32,oe[Ce].y,0,16),r(z,W-32,oe[Ce].f,0,8),r(ne,fe-32,oe[Ce].ea,0,8)),pe.Za){var le=B,Se=U-32+16;for(0<O&&(k>=c.za-1?a(le,Se,oe[Ce].y[15],4):r(le,Se,oe[Ce+1].y,0,4)),w=0;4>w;w++)le[Se+128+w]=le[Se+256+w]=le[Se+384+w]=le[Se+0+w];for(w=0;16>w;++w,re<<=2)le=B,Se=U+lx[w],or[pe.Ob[w]](le,Se),$o(re,ye,16*+w,le,Se)}else if(le=jd(k,O,pe.Ob[0]),Sa[le](B,U),re!=0)for(w=0;16>w;++w,re<<=2)$o(re,ye,16*+w,B,U+lx[w]);for(w=pe.Gc,le=jd(k,O,pe.Dd),ea[le](z,W),ea[le](ne,fe),re=ye,le=z,Se=W,255&(pe=w>>0)&&(170&pe?Vo(re,256,le,Se):Bn(re,256,le,Se)),pe=ne,re=fe,255&(w>>=8)&&(170&w?Vo(ye,320,pe,re):Bn(ye,320,pe,re)),O<c.Ub-1&&(r(oe[Ce].y,0,B,U+480,16),r(oe[Ce].f,0,z,W+224,8),r(oe[Ce].ea,0,ne,fe+224,8)),w=8*$*c.B,oe=c.sa,Ce=c.ta+16*k+16*$*c.R,ye=c.qa,pe=c.ra+8*k+w,re=c.Ha,le=c.Ia+8*k+w,w=0;16>w;++w)r(oe,Ce+w*c.R,B,U+32*w,16);for(w=0;8>w;++w)r(ye,pe+w*c.B,z,W+32*w,8),r(re,le+w*c.B,ne,fe+32*w,8)}}function dl(c,m,w,k,O,$,B,U,z){var W=[0],ne=[0],fe=0,pe=z!=null?z.kd:0,oe=z??new Oo;if(c==null||12>w)return 7;oe.data=c,oe.w=m,oe.ha=w,m=[m],w=[w],oe.gb=[oe.gb];e:{var Ce=m,ye=w,re=oe.gb;if(t(c!=null),t(ye!=null),t(re!=null),re[0]=0,12<=ye[0]&&!n(c,Ce[0],"RIFF")){if(n(c,Ce[0]+8,"WEBP")){re=3;break e}var le=ge(c,Ce[0]+4);if(12>le||4294967286<le){re=3;break e}if(pe&&le>ye[0]-8){re=7;break e}re[0]=le,Ce[0]+=12,ye[0]-=12}re=0}if(re!=0)return re;for(le=0<oe.gb[0],w=w[0];;){e:{var Se=c;ye=m,re=w;var Ee=W,ke=ne,Ve=Ce=[0];if((qe=fe=[fe])[0]=0,8>re[0])re=7;else{if(!n(Se,ye[0],"VP8X")){if(ge(Se,ye[0]+4)!=10){re=3;break e}if(18>re[0]){re=7;break e}var ze=ge(Se,ye[0]+8),Xe=1+ue(Se,ye[0]+12);if(2147483648<=Xe*(Se=1+ue(Se,ye[0]+15))){re=3;break e}Ve!=null&&(Ve[0]=ze),Ee!=null&&(Ee[0]=Xe),ke!=null&&(ke[0]=Se),ye[0]+=18,re[0]-=18,qe[0]=1}re=0}}if(fe=fe[0],Ce=Ce[0],re!=0)return re;if(ye=!!(2&Ce),!le&&fe)return 3;if($!=null&&($[0]=!!(16&Ce)),B!=null&&(B[0]=ye),U!=null&&(U[0]=0),B=W[0],Ce=ne[0],fe&&ye&&z==null){re=0;break}if(4>w){re=7;break}if(le&&fe||!le&&!fe&&!n(c,m[0],"ALPH")){w=[w],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{ze=c,re=m,le=w;var qe=oe.gb;Ee=oe.na,ke=oe.P,Ve=oe.Sa,Xe=22,t(ze!=null),t(le!=null),Se=re[0];var kt=le[0];for(t(Ee!=null),t(Ve!=null),Ee[0]=null,ke[0]=null,Ve[0]=0;;){if(re[0]=Se,le[0]=kt,8>kt){re=7;break e}var Pt=ge(ze,Se+4);if(4294967286<Pt){re=3;break e}var Nt=8+Pt+1&-2;if(Xe+=Nt,0<qe&&Xe>qe){re=3;break e}if(!n(ze,Se,"VP8 ")||!n(ze,Se,"VP8L")){re=0;break e}if(kt[0]<Nt){re=7;break e}n(ze,Se,"ALPH")||(Ee[0]=ze,ke[0]=Se+8,Ve[0]=Pt),Se+=Nt,kt-=Nt}}if(w=w[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],re!=0)break}w=[w],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(qe=c,re=m,le=w,Ee=oe.gb[0],ke=oe.Ja,Ve=oe.xa,ze=re[0],Se=!n(qe,ze,"VP8 "),Xe=!n(qe,ze,"VP8L"),t(qe!=null),t(le!=null),t(ke!=null),t(Ve!=null),8>le[0])re=7;else{if(Se||Xe){if(qe=ge(qe,ze+4),12<=Ee&&qe>Ee-12){re=3;break e}if(pe&&qe>le[0]-8){re=7;break e}ke[0]=qe,re[0]+=8,le[0]-=8,Ve[0]=Xe}else Ve[0]=5<=le[0]&&qe[ze+0]==47&&!(qe[ze+4]>>5),ke[0]=le[0];re=0}if(w=w[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],m=m[0],re!=0)break;if(4294967286<oe.Ja)return 3;if(U==null||ye||(U[0]=oe.xa?2:1),B=[B],Ce=[Ce],oe.xa){if(5>w){re=7;break}U=B,pe=Ce,ye=$,c==null||5>w?c=0:5<=w&&c[m+0]==47&&!(c[m+4]>>5)?(le=[0],qe=[0],Ee=[0],H(ke=new D,c,m,w),Ze(ke,le,qe,Ee)?(U!=null&&(U[0]=le[0]),pe!=null&&(pe[0]=qe[0]),ye!=null&&(ye[0]=Ee[0]),c=1):c=0):c=0}else{if(10>w){re=7;break}U=Ce,c==null||10>w||!ld(c,m+3,w-3)?c=0:(pe=c[m+0]|c[m+1]<<8|c[m+2]<<16,ye=16383&(c[m+7]<<8|c[m+6]),c=16383&(c[m+9]<<8|c[m+8]),1&pe||3<(pe>>1&7)||!(pe>>4&1)||pe>>5>=oe.Ja||!ye||!c?c=0:(B&&(B[0]=ye),U&&(U[0]=c),c=1))}if(!c||(B=B[0],Ce=Ce[0],fe&&(W[0]!=B||ne[0]!=Ce)))return 3;z!=null&&(z[0]=oe,z.offset=m-z.w,t(4294967286>m-z.w),t(z.offset==z.ha-w));break}return re==0||re==7&&fe&&z==null?($!=null&&($[0]|=oe.na!=null&&0<oe.na.length),k!=null&&(k[0]=B),O!=null&&(O[0]=Ce),0):re}function Uo(c,m,w){var k=m.width,O=m.height,$=0,B=0,U=k,z=O;if(m.Da=c!=null&&0<c.Da,m.Da&&(U=c.cd,z=c.bd,$=c.v,B=c.j,11>w||($&=-2,B&=-2),0>$||0>B||0>=U||0>=z||$+U>k||B+z>O))return 0;if(m.v=$,m.j=B,m.va=$+U,m.o=B+z,m.U=U,m.T=z,m.da=c!=null&&0<c.da,m.da){if(!we(U,z,w=[c.ib],$=[c.hb]))return 0;m.ib=w[0],m.hb=$[0]}return m.ob=c!=null&&c.ob,m.Kb=c==null||!c.Sd,m.da&&(m.ob=m.ib<3*k/4&&m.hb<3*O/4,m.Kb=0),1}function zo(c){if(c==null)return 2;if(11>c.S){var m=c.f.RGBA;m.fb+=(c.height-1)*m.A,m.A=-m.A}else m=c.f.kb,c=c.height,m.O+=(c-1)*m.fa,m.fa=-m.fa,m.N+=(c-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(c-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(c-1)*m.lb,m.lb=-m.lb);return 0}function ul(c,m,w,k){if(k==null||0>=c||0>=m)return 2;if(w!=null){if(w.Da){var O=w.cd,$=w.bd,B=-2&w.v,U=-2&w.j;if(0>B||0>U||0>=O||0>=$||B+O>c||U+$>m)return 2;c=O,m=$}if(w.da){if(!we(c,m,O=[w.ib],$=[w.hb]))return 2;c=O[0],m=$[0]}}k.width=c,k.height=m;e:{var z=k.width,W=k.height;if(c=k.S,0>=z||0>=W||!(c>=Pd&&13>c))c=2;else{if(0>=k.Rd&&k.sd==null){B=$=O=m=0;var ne=(U=z*ox[c])*W;if(11>c||($=(W+1)/2*(m=(z+1)/2),c==12&&(B=(O=z)*W)),(W=i(ne+2*$+B))==null){c=1;break e}k.sd=W,11>c?((z=k.f.RGBA).eb=W,z.fb=0,z.A=U,z.size=ne):((z=k.f.kb).y=W,z.O=0,z.fa=U,z.Fd=ne,z.f=W,z.N=0+ne,z.Ab=m,z.Cd=$,z.ea=W,z.W=0+ne+$,z.Db=m,z.Ed=$,c==12&&(z.F=W,z.J=0+ne+2*$),z.Tc=B,z.lb=O)}if(m=1,O=k.S,$=k.width,B=k.height,O>=Pd&&13>O)if(11>O)c=k.f.RGBA,m&=(U=Math.abs(c.A))*(B-1)+$<=c.size,m&=U>=$*ox[O],m&=c.eb!=null;else{c=k.f.kb,U=($+1)/2,ne=(B+1)/2,z=Math.abs(c.fa),W=Math.abs(c.Ab);var fe=Math.abs(c.Db),pe=Math.abs(c.lb),oe=pe*(B-1)+$;m&=z*(B-1)+$<=c.Fd,m&=W*(ne-1)+U<=c.Cd,m=(m&=fe*(ne-1)+U<=c.Ed)&z>=$&W>=U&fe>=U,m&=c.y!=null,m&=c.f!=null,m&=c.ea!=null,O==12&&(m&=pe>=$,m&=oe<=c.Tc,m&=c.F!=null)}else m=0;c=m?0:2}}return c!=0||w!=null&&w.fd&&(c=zo(k)),c}var $s=64,hl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ml=24,fl=32,qo=8,fn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];De("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(c){return c},S.Predictor2=function(c,m,w){return m[w+0]},S.Predictor3=function(c,m,w){return m[w+1]},S.Predictor4=function(c,m,w){return m[w-1]},S.Predictor5=function(c,m,w){return Ue(Ue(c,m[w+1]),m[w+0])},S.Predictor6=function(c,m,w){return Ue(c,m[w-1])},S.Predictor7=function(c,m,w){return Ue(c,m[w+0])},S.Predictor8=function(c,m,w){return Ue(m[w-1],m[w+0])},S.Predictor9=function(c,m,w){return Ue(m[w+0],m[w+1])},S.Predictor10=function(c,m,w){return Ue(Ue(c,m[w-1]),Ue(m[w+0],m[w+1]))},S.Predictor11=function(c,m,w){var k=m[w+0];return 0>=lt(k>>24&255,c>>24&255,(m=m[w-1])>>24&255)+lt(k>>16&255,c>>16&255,m>>16&255)+lt(k>>8&255,c>>8&255,m>>8&255)+lt(255&k,255&c,255&m)?k:c},S.Predictor12=function(c,m,w){var k=m[w+0];return(Ye((c>>24&255)+(k>>24&255)-((m=m[w-1])>>24&255))<<24|Ye((c>>16&255)+(k>>16&255)-(m>>16&255))<<16|Ye((c>>8&255)+(k>>8&255)-(m>>8&255))<<8|Ye((255&c)+(255&k)-(255&m)))>>>0},S.Predictor13=function(c,m,w){var k=m[w-1];return(tt((c=Ue(c,m[w+0]))>>24&255,k>>24&255)<<24|tt(c>>16&255,k>>16&255)<<16|tt(c>>8&255,k>>8&255)<<8|tt(c>>0&255,k>>0&255))>>>0};var hm=S.PredictorAdd0;S.PredictorAdd1=ft,De("Predictor2","PredictorAdd2"),De("Predictor3","PredictorAdd3"),De("Predictor4","PredictorAdd4"),De("Predictor5","PredictorAdd5"),De("Predictor6","PredictorAdd6"),De("Predictor7","PredictorAdd7"),De("Predictor8","PredictorAdd8"),De("Predictor9","PredictorAdd9"),De("Predictor10","PredictorAdd10"),De("Predictor11","PredictorAdd11"),De("Predictor12","PredictorAdd12"),De("Predictor13","PredictorAdd13");var Ho=S.PredictorAdd2;Le("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),Le("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var Sd,$n=S.ColorIndexInverseTransform,pl=S.MapARGB,kd=S.VP8LColorIndexInverseTransformAlpha,_d=S.MapAlpha,ya=S.VP8LPredictorsAdd=[];ya.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var xi,pn,nn,wa,Kr,Xr,xl,Qr,os,Vo,rn,Bn,gl,Cd,Wo,gi,vi,Na,bi,vl,yi,ja,Go,Un,zn,Mt,Rt,cs,js=i(511),Zr=i(2041),Yo=i(225),bl=i(767),Ad=0,mm=Zr,Td=Yo,An=bl,qn=js,Pd=0,Ld=1,Kp=2,Ed=3,Dd=4,fm=5,Xp=6,pm=7,xm=8,Id=9,gm=10,zb=[2,3,7],qb=[3,3,11],Qp=[280,256,256,256,40],Hb=[0,1,1,1,0],Vb=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Wb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gb=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yb=8,vm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Jo=null,Jb=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Kb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xb=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qb=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zb=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ey=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sa=[],or=[],ea=[],ty=1,ex=2,ka=[],Hn=[];Ne("UpsampleRgbLinePair",wt,3),Ne("UpsampleBgrLinePair",Jt,3),Ne("UpsampleRgbaLinePair",lr,4),Ne("UpsampleBgraLinePair",Ps,4),Ne("UpsampleArgbLinePair",Vs,4),Ne("UpsampleRgba4444LinePair",gs,2),Ne("UpsampleRgb565LinePair",ss,2);var sy=S.UpsampleRgbLinePair,ny=S.UpsampleBgrLinePair,tx=S.UpsampleRgbaLinePair,sx=S.UpsampleBgraLinePair,nx=S.UpsampleArgbLinePair,rx=S.UpsampleRgba4444LinePair,ry=S.UpsampleRgb565LinePair,Od=16,Fd=1<<Od-1,Ko=-227,ym=482,ax=6,ay=(256<<ax)-1,ix=0,iy=i(256),ly=i(256),oy=i(256),cy=i(256),dy=i(ym-Ko),uy=i(ym-Ko);Lr("YuvToRgbRow",wt,3),Lr("YuvToBgrRow",Jt,3),Lr("YuvToRgbaRow",lr,4),Lr("YuvToBgraRow",Ps,4),Lr("YuvToArgbRow",Vs,4),Lr("YuvToRgba4444Row",gs,2),Lr("YuvToRgb565Row",ss,2);var lx=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Md=[0,2,8],hy=[8,7,6,4,4,2,2,2,1,1,1,1],my=1;this.WebPDecodeRGBA=function(c,m,w,k,O){var $=Ld,B=new ol,U=new er;B.ba=U,U.S=$,U.width=[U.width],U.height=[U.height];var z=U.width,W=U.height,ne=new Wr;if(ne==null||c==null)var fe=2;else t(ne!=null),fe=dl(c,m,w,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(fe!=0?z=0:(z!=null&&(z[0]=ne.width[0]),W!=null&&(W[0]=ne.height[0]),z=1),z){U.width=U.width[0],U.height=U.height[0],k!=null&&(k[0]=U.width),O!=null&&(O[0]=U.height);e:{if(k=new tl,(O=new Oo).data=c,O.w=m,O.ha=w,O.kd=1,m=[0],t(O!=null),((c=dl(O.data,O.w,O.ha,null,null,null,m,null,O))==0||c==7)&&m[0]&&(c=4),(m=c)==0){if(t(B!=null),k.data=O.data,k.w=O.w+O.offset,k.ha=O.ha-O.offset,k.put=Sr,k.ac=Rs,k.bc=kr,k.ma=B,O.xa){if((c=Rn())==null){B=1;break e}if(function(pe,oe){var Ce=[0],ye=[0],re=[0];t:for(;;){if(pe==null)return 0;if(oe==null)return pe.a=2,0;if(pe.l=oe,pe.a=0,H(pe.m,oe.data,oe.w,oe.ha),!Ze(pe.m,Ce,ye,re)){pe.a=3;break t}if(pe.xb=ex,oe.width=Ce[0],oe.height=ye[0],!Ar(Ce[0],ye[0],1,pe,null))break t;return 1}return t(pe.a!=0),0}(c,k)){if(k=(m=ul(k.width,k.height,B.Oa,B.ba))==0){t:{k=c;s:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((w=k.l)!=null),t((O=w.ma)!=null),k.xb!=0){if(k.ca=O.ba,k.tb=O.tb,t(k.ca!=null),!Uo(O.Oa,w,Ed)){k.a=2;break s}if(!ui(k,w.width)||w.da)break s;if((w.da||St(k.ca.S))&&he(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&he()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Pe(k.s.vb,k.s.Wa.Xa)){k.a=1;break s}k.xb=0}if(!rr(k,k.V,k.Ba,k.c,k.i,w.o,Ji))break s;O.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(m=c.a)}else m=c.a}else{if((c=new Gh)==null){B=1;break e}if(c.Fa=O.na,c.P=O.P,c.qc=O.Sa,od(c,k)){if((m=ul(k.width,k.height,B.Oa,B.ba))==0){if(c.Aa=0,w=B.Oa,t((O=c)!=null),w!=null){if(0<(z=0>(z=w.Md)?0:100<z?255:255*z/100)){for(W=ne=0;4>W;++W)12>(fe=O.pb[W]).lc&&(fe.ia=z*hy[0>fe.lc?0:fe.lc]>>3),ne|=fe.ia;ne&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=w.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}Yh(c,k)||(m=c.a)}}else m=c.a}m==0&&B.Oa!=null&&B.Oa.fd&&(m=zo(B.ba))}B=m}$=B!=0?null:11>$?U.f.RGBA.eb:U.f.kb.y}else $=null;return $};var ox=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,L){for(var R="",E=0;E<4;E++)R+=String.fromCharCode(S[L++]);return R}function p(S,L){return(S[L+0]<<0|S[L+1]<<8|S[L+2]<<16)>>>0}function f(S,L){return(S[L+0]<<0|S[L+1]<<8|S[L+2]<<16|S[L+3]<<24)>>>0}new d;var N=[0],h=[0],b=[],j=new d,C=e,x=function(S,L){var R={},E=0,I=!1,Y=0,K=0;if(R.frames=[],!function(q,J,ee,ae){for(var de=0;de<ae;de++)if(q[J+de]!=ee.charCodeAt(de))return!0;return!1}(S,L,"RIFF",4)){for(f(S,L+=4),L+=8;L<S.length;){var te=u(S,L),G=f(S,L+=4);L+=4;var M=G+(1&G);switch(te){case"VP8 ":case"VP8L":R.frames[E]===void 0&&(R.frames[E]={}),(V=R.frames[E]).src_off=I?K:L-8,V.src_size=Y+G+8,E++,I&&(I=!1,Y=0,K=0);break;case"VP8X":(V=R.header={}).feature_flags=S[L];var H=L+4;V.canvas_width=1+p(S,H),H+=3,V.canvas_height=1+p(S,H),H+=3;break;case"ALPH":I=!0,Y=M+8,K=L-8;break;case"ANIM":(V=R.header).bgcolor=f(S,L),H=L+4,V.loop_count=(ie=S)[(D=H)+0]<<0|ie[D+1]<<8,H+=2;break;case"ANMF":var Z,V;(V=R.frames[E]={}).offset_x=2*p(S,L),L+=3,V.offset_y=2*p(S,L),L+=3,V.width=1+p(S,L),L+=3,V.height=1+p(S,L),L+=3,V.duration=p(S,L),L+=3,Z=S[L++],V.dispose=1&Z,V.blend=Z>>1&1}te!="ANMF"&&(L+=M)}var ie,D;return R}}(C,0);x.response=C,x.rgbaoutput=!0,x.dataurl=!1;var g=x.header?x.header:null,y=x.frames?x.frames:null;if(g){g.loop_counter=g.loop_count,N=[g.canvas_height],h=[g.canvas_width];for(var A=0;A<y.length&&y[A].blend!=0;A++);}var P=y[0],_=j.WebPDecodeRGBA(C,P.src_off,P.src_size,h,N);P.rgba=_,P.imgwidth=h[0],P.imgheight=N[0];for(var T=0;T<h[0]*N[0]*4;T++)b[T]=_[T];return this.width=h,this.height=N,this.data=b,this}(function(e){var t=function(){return typeof C0=="function"},n=function(N,h,b,j){var C=4,x=l;switch(j){case e.image_compression.FAST:C=1,x=i;break;case e.image_compression.MEDIUM:C=6,x=o;break;case e.image_compression.SLOW:C=9,x=d}N=r(N,h,b,x);var g=C0(N,{level:C});return e.__addimage__.arrayBufferToBinaryString(g)},r=function(N,h,b,j){for(var C,x,g,y=N.length/h,A=new Uint8Array(N.length+y),P=p(),_=0;_<y;_+=1){if(g=_*h,C=N.subarray(g,g+h),j)A.set(j(C,b,x),g+_);else{for(var T,S=P.length,L=[];T<S;T+=1)L[T]=P[T](C,b,x);var R=f(L.concat());A.set(L[R],g+_)}x=C}return A},a=function(N){var h=Array.apply([],N);return h.unshift(0),h},i=function(N,h){var b,j=[],C=N.length;j[0]=1;for(var x=0;x<C;x+=1)b=N[x-h]||0,j[x+1]=N[x]-b+256&255;return j},l=function(N,h,b){var j,C=[],x=N.length;C[0]=2;for(var g=0;g<x;g+=1)j=b&&b[g]||0,C[g+1]=N[g]-j+256&255;return C},o=function(N,h,b){var j,C,x=[],g=N.length;x[0]=3;for(var y=0;y<g;y+=1)j=N[y-h]||0,C=b&&b[y]||0,x[y+1]=N[y]+256-(j+C>>>1)&255;return x},d=function(N,h,b){var j,C,x,g,y=[],A=N.length;y[0]=4;for(var P=0;P<A;P+=1)j=N[P-h]||0,C=b&&b[P]||0,x=b&&b[P-h]||0,g=u(j,C,x),y[P+1]=N[P]-g+256&255;return y},u=function(N,h,b){if(N===h&&h===b)return N;var j=Math.abs(h-b),C=Math.abs(N-b),x=Math.abs(N+h-b-b);return j<=C&&j<=x?N:C<=x?h:b},p=function(){return[a,i,l,o,d]},f=function(N){var h=N.map(function(b){return b.reduce(function(j,C){return j+Math.abs(C)},0)});return h.indexOf(Math.min.apply(null,h))};e.processPNG=function(N,h,b,j){var C,x,g,y,A,P,_,T,S,L,R,E,I,Y,K,te=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(g=new u6(N)).imgData,x=g.bits,C=g.colorSpace,A=g.colors,[4,6].indexOf(g.colorType)!==-1){if(g.bits===8){S=(T=g.pixelBitlength==32?new Uint32Array(g.decodePixels().buffer):g.pixelBitlength==16?new Uint16Array(g.decodePixels().buffer):new Uint8Array(g.decodePixels().buffer)).length,R=new Uint8Array(S*g.colors),L=new Uint8Array(S);var M,H=g.pixelBitlength-g.bits;for(Y=0,K=0;Y<S;Y++){for(I=T[Y],M=0;M<H;)R[K++]=I>>>M&255,M+=g.bits;L[Y]=I>>>M&255}}if(g.bits===16){S=(T=new Uint32Array(g.decodePixels().buffer)).length,R=new Uint8Array(S*(32/g.pixelBitlength)*g.colors),L=new Uint8Array(S*(32/g.pixelBitlength)),E=g.colors>1,Y=0,K=0;for(var Z=0;Y<S;)I=T[Y++],R[K++]=I>>>0&255,E&&(R[K++]=I>>>16&255,I=T[Y++],R[K++]=I>>>0&255),L[Z++]=I>>>16&255;x=8}j!==e.image_compression.NONE&&t()?(N=n(R,g.width*g.colors,g.colors,j),_=n(L,g.width,1,j)):(N=R,_=L,te=void 0)}if(g.colorType===3&&(C=this.color_spaces.INDEXED,P=g.palette,g.transparency.indexed)){var V=g.transparency.indexed,ie=0;for(Y=0,S=V.length;Y<S;++Y)ie+=V[Y];if((ie/=255)===S-1&&V.indexOf(0)!==-1)y=[V.indexOf(0)];else if(ie!==S){for(T=g.decodePixels(),L=new Uint8Array(T.length),Y=0,S=T.length;Y<S;Y++)L[Y]=V[T[Y]];_=n(L,g.width,1)}}var D=function(q){var J;switch(q){case e.image_compression.FAST:J=11;break;case e.image_compression.MEDIUM:J=13;break;case e.image_compression.SLOW:J=14;break;default:J=12}return J}(j);return te===this.decode.FLATE_DECODE&&(G="/Predictor "+D+" "),G+="/Colors "+A+" /BitsPerComponent "+x+" /Columns "+g.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(_&&this.__addimage__.isArrayBuffer(_)||this.__addimage__.isArrayBufferView(_))&&(_=this.__addimage__.arrayBufferToBinaryString(_)),{alias:b,data:N,index:h,filter:te,decodeParameters:G,transparency:y,palette:P,sMask:_,predictor:D,width:g.width,height:g.height,bitsPerComponent:x,colorSpace:C}}}})(Qe.API),function(e){e.processGIF89A=function(t,n,r,a){var i=new h6(t),l=i.width,o=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:l,height:o},p=new bf(100).encode(u,100);return e.processJPEG.call(this,p,n,r,a)},e.processGIF87A=e.processGIF89A}(Qe.API),hr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ft.log("bit decode error:"+n)}},hr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var d=this.palette[i>>7-o&1];this.data[l+4*o]=d.blue,this.data[l+4*o+1]=d.green,this.data[l+4*o+2]=d.red,this.data[l+4*o+3]=255}n!==0&&(this.pos+=4-n)}},hr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+2*a*4,o=i>>4,d=15&i,u=this.palette[o];if(this.data[l]=u.blue,this.data[l+1]=u.green,this.data[l+2]=u.red,this.data[l+3]=255,2*a+1>=this.width)break;u=this.palette[d],this.data[l+4]=u.blue,this.data[l+4+1]=u.green,this.data[l+4+2]=u.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},hr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(a<this.palette.length){var l=this.palette[a];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},hr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,p=r*this.width*4+4*a;this.data[p]=d,this.data[p+1]=o,this.data[p+2]=l,this.data[p+3]=u}this.pos+=e}},hr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,d=(l>>5&n)/n*255|0,u=(l>>11)/t*255|0,p=a*this.width*4+4*i;this.data[p]=u,this.data[p+1]=d,this.data[p+2]=o,this.data[p+3]=255}this.pos+=e}},hr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=r,this.data[l+3]=255}this.pos+=this.width%4}},hr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=l}},hr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var i=new hr(t,!1),l=i.width,o=i.height,d={data:i.getData(),width:l,height:o},u=new bf(100).encode(d,100);return e.processJPEG.call(this,u,n,r,a)}}(Qe.API),g1.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var i=new g1(t),l=i.width,o=i.height,d={data:i.getData(),width:l,height:o},u=new bf(100).encode(d,100);return e.processJPEG.call(this,u,n,r,a)}}(Qe.API),Qe.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,i=new Uint8Array(a/4*3),l=new Uint8Array(a/4),o=0,d=0,u=0;u<a;u+=4){var p=r[u],f=r[u+1],N=r[u+2],h=r[u+3];i[o++]=p,i[o++]=f,i[o++]=N,l[d++]=h}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:b,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Qe.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ll=Qe.API,vu=Ll.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,d=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=u.fof?u.fof:1,f=t.doKerning!==!1,N=0,h=e.length,b=0,j=o[0]||d,C=[];for(n=0;n<h;n++)r=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?C.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+l*(1e3/i)||0)/1e3):(N=f&&Et(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/p:0,C.push((o[r]||j)/d+N)),b=r;return C},m1=Ll.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Ll.processArabic&&(e=Ll.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,a)/n:vu.apply(this,arguments).reduce(function(i,l){return i+l},0)},f1=function(e,t,n,r){for(var a=[],i=0,l=e.length,o=0;i!==l&&o+t[i]<n;)o+=t[i],i++;a.push(e.slice(0,i));var d=i;for(o=0;i!==l;)o+t[i]>r&&(a.push(e.slice(d,i)),o=0,d=i),o+=t[i],i++;return d!==i&&a.push(e.slice(d,i)),a},p1=function(e,t,n){n||(n={});var r,a,i,l,o,d,u,p=[],f=[p],N=n.textIndent||0,h=0,b=0,j=e.split(" "),C=vu.apply(this,[" ",n])[0];if(d=n.lineIndent===-1?j[0].length+2:n.lineIndent||0){var x=Array(d).join(" "),g=[];j.map(function(A){(A=A.split(/\s*\n/)).length>1?g=g.concat(A.map(function(P,_){return(_&&P.length?`
`:"")+P})):g.push(A[0])}),j=g,d=m1.apply(this,[x,n])}for(i=0,l=j.length;i<l;i++){var y=0;if(r=j[i],d&&r[0]==`
`&&(r=r.substr(1),y=1),N+h+(b=(a=vu.apply(this,[r,n])).reduce(function(A,P){return A+P},0))>t||y){if(b>t){for(o=f1.apply(this,[r,a,t-(N+h),t]),p.push(o.shift()),p=[o.pop()];o.length;)f.push([o.shift()]);b=a.slice(r.length-(p[0]?p[0].length:0)).reduce(function(A,P){return A+P},0)}else p=[r];f.push(p),N=b+d,h=C}else p.push(r),N+=h+b,h=C}return u=d?function(A,P){return(P?x:"")+A.join(" ")}:function(A){return A.join(" ")},f.map(u)},Ll.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var f=this.internal.getFont(p.fontName,p.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var o,d,u=[];for(o=0,d=r.length;o<d;o++)u=u.concat(p1.apply(this,[r[o],l,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<t.length;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},l=e.__fontmetrics__.compress=function(f){var N,h,b,j,C=["{"];for(var x in f){if(N=f[x],isNaN(parseInt(x,10))?h="'"+x+"'":(x=parseInt(x,10),h=(h=i(x).slice(2)).slice(0,-1)+r[h.slice(-1)]),typeof N=="number")N<0?(b=i(N).slice(3),j="-"):(b=i(N).slice(2),j=""),b=j+b.slice(0,-1)+r[b.slice(-1)];else{if(Et(N)!=="object")throw new Error("Don't know what to do with value type "+Et(N)+".");b=l(N)}C.push(h+b)}return C.push("}"),C.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,h,b,j,C={},x=1,g=C,y=[],A="",P="",_=f.length-1,T=1;T<_;T+=1)(j=f[T])=="'"?N?(b=N.join(""),N=void 0):N=[]:N?N.push(j):j=="{"?(y.push([g,b]),g={},b=void 0):j=="}"?((h=y.pop())[0][h[1]]=g,b=void 0,g=h[0]):j=="-"?x=-1:b===void 0?n.hasOwnProperty(j)?(A+=n[j],b=parseInt(A,16)*x,x=1,A=""):A+=j:n.hasOwnProperty(j)?(P+=n[j],g[b]=parseInt(P,16)*x,x=1,b=void 0,P=""):P+=j;return C},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var N=f.font,h=p.Unicode[N.postScriptName];h&&(N.metadata.Unicode={},N.metadata.Unicode.widths=h.widths,N.metadata.Unicode.kerning=h.kerning);var b=u.Unicode[N.postScriptName];b&&(N.metadata.Unicode.encoding=b,N.encoding=b.codePages[0])}])}(Qe.API),function(e){var t=function(n){for(var r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);return a};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Tc(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,r)}}])}(Qe),function(e){function t(){return(et.canvg?Promise.resolve(et.canvg):si(()=>import("./index.es-B1GYj05r.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Qe.API.addSvgAsImage=function(n,r,a,i,l,o,d,u){if(isNaN(r)||isNaN(a))throw Ft.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(l))throw Ft.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=i,p.height=l;var f=p.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,p.width,p.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return t().then(function(b){return b.fromString(f,n,N)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(N)}).then(function(){h.addImage(p.toDataURL("image/jpeg",1),r,a,i,l,d,u)})}}(),Qe.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},Qe.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),d=[],u=0,p=0,f=0;function N(b,j){var C,x=!1;for(C=0;C<b.length;C+=1)b[C]===j&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(Et(e)==="object"){for(a in e)if(i=e[a],N(o,a)&&i!==void 0){if(n[a].type==="boolean"&&typeof i=="boolean")n[a].value=i;else if(n[a].type==="name"&&N(n[a].valueSet,i))n[a].value=i;else if(n[a].type==="integer"&&Number.isInteger(i))n[a].value=i;else if(n[a].type==="array"){for(u=0;u<i.length;u+=1)if(r=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(p=0;p<i[u].length;p+=1)typeof i[u][p]!="number"&&(r=!1);r===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}n[a].value="["+d.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,j=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?j.push("/"+b+" /"+n[b].value):j.push("/"+b+" "+n[b].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+l.length+o.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+l+o+d),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Qe.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,l){for(var o,d=l.metadata.Unicode.widths,u=["","0","00","000","0000"],p=[""],f=0,N=i.length;f<N;++f){if(o=l.metadata.characterToGlyph(i.charCodeAt(f)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(f),d.indexOf(o)==-1&&(d.push(o),d.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return p.join("");o=o.toString(16),p.push(u[4-o.length],o)}return p.join("")},r=function(i){var l,o,d,u,p,f,N;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],f=0,N=(o=Object.keys(i).sort(function(h,b){return h-b})).length;f<N;f++)l=o[f],d.length>=100&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(u=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),d.push("<"+l+"><"+u+">"));return d.length&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var o=l.font,d=l.out,u=l.newObject,p=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,N=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",b=0;b<N.length;b++)h+=String.fromCharCode(N[b]);var j=u();p({data:h,addLength1:!0,objectId:j}),d("endobj");var C=u();p({data:r(o.metadata.toUnicode),addLength1:!0,objectId:C}),d("endobj");var x=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Fl(o.fontName)),d("/FontFile2 "+j+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),d("/Flags "+o.metadata.flags),d("/StemV "+o.metadata.stemV),d("/ItalicAngle "+o.metadata.italicAngle),d("/Ascent "+o.metadata.ascender),d("/Descent "+o.metadata.decender),d("/CapHeight "+o.metadata.capHeight),d(">>"),d("endobj");var g=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+Fl(o.fontName)),d("/FontDescriptor "+x+" 0 R"),d("/W "+e.API.PDFObject.convert(f)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+o.encoding+")"),d(">>"),d(">>"),d("endobj"),o.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+C+" 0 R"),d("/BaseFont /"+Fl(o.fontName)),d("/Encoding /"+o.encoding),d("/DescendantFonts ["+g+" 0 R]"),d(">>"),d("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var o=l.font,d=l.out,u=l.newObject,p=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,N="",h=0;h<f.length;h++)N+=String.fromCharCode(f[h]);var b=u();p({data:N,addLength1:!0,objectId:b}),d("endobj");var j=u();p({data:r(o.metadata.toUnicode),addLength1:!0,objectId:j}),d("endobj");var C=u();d("<<"),d("/Descent "+o.metadata.decender),d("/CapHeight "+o.metadata.capHeight),d("/StemV "+o.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+b+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),d("/FontName /"+Fl(o.fontName)),d("/ItalicAngle "+o.metadata.italicAngle),d("/Ascent "+o.metadata.ascender),d(">>"),d("endobj"),o.objectNumber=u();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+Fl(o.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),d("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var l,o=i.text||"",d=i.x,u=i.y,p=i.options||{},f=i.mutex||{},N=f.pdfEscape,h=f.activeFontKey,b=f.fonts,j=h,C="",x=0,g="",y=b[j].encoding;if(b[j].encoding!=="Identity-H")return{text:o,x:d,y:u,options:p,mutex:f};for(g=o,j=h,Array.isArray(o)&&(g=o[0]),x=0;x<g.length;x+=1)b[j].metadata.hasOwnProperty("cmap")&&(l=b[j].metadata.cmap.unicode.codeMap[g[x].charCodeAt(0)]),l||g[x].charCodeAt(0)<256&&b[j].metadata.hasOwnProperty("Unicode")?C+=g[x]:C+="";var A="";return parseInt(j.slice(1))<14||y==="WinAnsiEncoding"?A=N(C,j).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):y==="Identity-H"&&(A=n(C,b[j])),f.isHex=!0,{text:A,x:d,y:u,options:p,mutex:f}};t.events.push(["postProcessText",function(i){var l=i.text||"",o=[],d={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var u=0;for(u=0;u<l.length;u+=1)Array.isArray(l[u])&&l[u].length===3?o.push([a(Object.assign({},d,{text:l[u][0]})).text,l[u][1],l[u][2]]):o.push(a(Object.assign({},d,{text:l[u]})).text);i.text=o}else i.text=a(Object.assign({},d,{text:l})).text}])}(Qe),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Qe.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var a,i,l,o,d,u,p,f=t,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var A=function(E){var I=E.charCodeAt(),Y=I>>8,K=j[Y];return K!==void 0?f[256*K+(255&I)]:Y===252||Y===253?"AL":x.test(Y)?"L":Y===8?"R":"N"},P=function(E){for(var I,Y=0;Y<E.length;Y++){if((I=A(E.charAt(Y)))==="L")return!1;if(I==="R")return!0}return!1},_=function(E,I,Y,K){var te,G,M,H,Z=I[K];switch(Z){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(Z="AN");break;case"AL":g=!0,Z="R";break;case"WS":Z="N";break;case"CS":K<1||K+1>=I.length||(te=Y[K-1])!=="EN"&&te!=="AN"||(G=I[K+1])!=="EN"&&G!=="AN"?Z="N":g&&(G="AN"),Z=G===te?G:"N";break;case"ES":Z=(te=K>0?Y[K-1]:"B")==="EN"&&K+1<I.length&&I[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&Y[K-1]==="EN"){Z="EN";break}if(g){Z="N";break}for(M=K+1,H=I.length;M<H&&I[M]==="ET";)M++;Z=M<H&&I[M]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(H=I.length,M=K+1;M<H&&I[M]==="NSM";)M++;if(M<H){var V=E[K],ie=V>=1425&&V<=2303||V===64286;if(te=I[M],ie&&(te==="R"||te==="AL")){Z="R";break}}}Z=K<1||(te=I[K-1])==="B"?"N":Y[K-1];break;case"B":g=!1,a=!0,Z=y;break;case"S":i=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":Z="N"}return Z},T=function(E,I,Y){var K=E.split("");return Y&&S(K,Y,{hiLevel:y}),K.reverse(),I&&I.reverse(),K.join("")},S=function(E,I,Y){var K,te,G,M,H,Z=-1,V=E.length,ie=0,D=[],q=y?h:N,J=[];for(g=!1,a=!1,i=!1,te=0;te<V;te++)J[te]=A(E[te]);for(G=0;G<V;G++){if(H=ie,D[G]=_(E,J,D,G),K=240&(ie=q[H][b[D[G]]]),ie&=15,I[G]=M=q[ie][5],K>0)if(K===16){for(te=Z;te<G;te++)I[te]=1;Z=-1}else Z=-1;if(q[ie][6])Z===-1&&(Z=G);else if(Z>-1){for(te=Z;te<G;te++)I[te]=M;Z=-1}J[G]==="B"&&(I[G]=0),Y.hiLevel|=M}i&&function(ee,ae,de){for(var xe=0;xe<de;xe++)if(ee[xe]==="S"){ae[xe]=y;for(var ve=xe-1;ve>=0&&ee[ve]==="WS";ve--)ae[ve]=y}}(J,I,V)},L=function(E,I,Y,K,te){if(!(te.hiLevel<E)){if(E===1&&y===1&&!a)return I.reverse(),void(Y&&Y.reverse());for(var G,M,H,Z,V=I.length,ie=0;ie<V;){if(K[ie]>=E){for(H=ie+1;H<V&&K[H]>=E;)H++;for(Z=ie,M=H-1;Z<M;Z++,M--)G=I[Z],I[Z]=I[M],I[M]=G,Y&&(G=Y[Z],Y[Z]=Y[M],Y[M]=G);ie=H}ie++}}},R=function(E,I,Y){var K=E.split(""),te={hiLevel:y};return Y||(Y=[]),S(K,Y,te),function(G,M,H){if(H.hiLevel!==0&&p)for(var Z,V=0;V<G.length;V++)M[V]===1&&(Z=C.indexOf(G[V]))>=0&&(G[V]=C[Z+1])}(K,Y,te),L(2,K,I,Y,te),L(1,K,I,Y,te),K.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,Y){if(function(te,G){if(G)for(var M=0;M<te.length;M++)G[M]=M;o===void 0&&(o=P(te)),u===void 0&&(u=P(te))}(E,I),l||!d||u)if(l&&d&&o^u)y=o?1:0,E=T(E,I,Y);else if(!l&&d&&u)y=o?1:0,E=R(E,I,Y),E=T(E,I);else if(!l||o||d||u){if(l&&!d&&o^u)E=T(E,I),o?(y=0,E=R(E,I,Y)):(y=1,E=R(E,I,Y),E=T(E,I));else if(l&&o&&!d&&u)y=1,E=R(E,I,Y),E=T(E,I);else if(!l&&!d&&o^u){var K=p;o?(y=1,E=R(E,I,Y),y=0,p=!1,E=R(E,I,Y),p=K):(y=0,E=R(E,I,Y),E=T(E,I),y=1,p=!1,E=R(E,I,Y),p=K,E=T(E,I))}}else y=0,E=R(E,I,Y);else y=o?1:0,E=R(E,I,Y);return E},this.__bidiEngine__.setOptions=function(E){E&&(l=E.isInputVisual,d=E.isOutputVisual,o=E.isInputRtl,u=E.isOutputRtl,p=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(l=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?l.push([n.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):l.push([n.doBidiReorder(a[o])]);r.text=l}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(Qe),Qe.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new ai(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new C6(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new m6(this.contents),this.head=new p6(this),this.name=new y6(this),this.cmap=new $b(this),this.toUnicode={},this.hhea=new x6(this),this.maxp=new w6(this),this.hmtx=new N6(this),this.post=new v6(this),this.os2=new g6(this),this.loca=new _6(this),this.glyf=new j6(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,d,u;for(u=[],l=0,o=(d=this.bbox).length;l<o;l++)t=d[l],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var a,i,l,o;for(l=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return l*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var jr,ai=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,a;for(a=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,a,i,l,o,d;return t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^d)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*a+16777216*i+65536*l+256*o+d},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,a,i;for(i=[],r=0,a=t.length;r<a;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),m6=function(){var e;function t(n){var r,a,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,a,i,l,o,d,u,p,f,N,h,b,j;for(j in h=Object.keys(n).length,d=Math.log(2),f=16*Math.floor(Math.log(h)/d),l=Math.floor(f/d),p=16*h-f,(a=new ai).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(l),a.writeShort(p),i=16*h,u=a.pos+i,o=null,b=[],n)for(N=n[j],a.writeString(j),a.writeInt(e(N)),a.writeInt(u),a.writeInt(N.length),b=b.concat(N),j==="head"&&(o=u),u+=N.length;u%4;)b.push(0),u++;return a.write(b),r=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(r),a.data},e=function(n){var r,a,i,l;for(n=Bb.call(n);n.length%4;)n.push(0);for(i=new ai(n),a=0,r=0,l=n.length;r<l;r=r+=4)a+=i.readUInt32();return 4294967295&a},t}(),f6={}.hasOwnProperty,Hr=function(e,t){for(var n in t)f6.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};jr=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var p6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new ai).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),v1=function(){function e(t,n){var r,a,i,l,o,d,u,p,f,N,h,b,j,C,x,g,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(h=t.readUInt16(),N=h/2,t.pos+=6,i=function(){var A,P;for(P=[],d=A=0;0<=N?A<N:A>N;d=0<=N?++A:--A)P.push(t.readUInt16());return P}(),t.pos+=2,j=function(){var A,P;for(P=[],d=A=0;0<=N?A<N:A>N;d=0<=N?++A:--A)P.push(t.readUInt16());return P}(),u=function(){var A,P;for(P=[],d=A=0;0<=N?A<N:A>N;d=0<=N?++A:--A)P.push(t.readUInt16());return P}(),p=function(){var A,P;for(P=[],d=A=0;0<=N?A<N:A>N;d=0<=N?++A:--A)P.push(t.readUInt16());return P}(),a=(this.length-t.pos+this.offset)/2,o=function(){var A,P;for(P=[],d=A=0;0<=a?A<a:A>a;d=0<=a?++A:--A)P.push(t.readUInt16());return P}(),d=x=0,y=i.length;x<y;d=++x)for(C=i[d],r=g=b=j[d];b<=C?g<=C:g>=C;r=b<=C?++g:--g)p[d]===0?l=r+u[d]:(l=o[p[d]/2+(r-b)-(N-d)]||0)!==0&&(l+=u[d]),this.codeMap[r]=65535&l}t.pos=f}return e.encode=function(t,n){var r,a,i,l,o,d,u,p,f,N,h,b,j,C,x,g,y,A,P,_,T,S,L,R,E,I,Y,K,te,G,M,H,Z,V,ie,D,q,J,ee,ae,de,xe,ve,Oe,Me,ue;switch(K=new ai,l=Object.keys(t).sort(function(ge,Pe){return ge-Pe}),n){case"macroman":for(j=0,C=function(){var ge=[];for(b=0;b<256;++b)ge.push(0);return ge}(),g={0:0},i={},te=0,Z=l.length;te<Z;te++)g[ve=t[a=l[te]]]==null&&(g[ve]=++j),i[a]={old:t[a],new:g[t[a]]},C[a]=g[t[a]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(C),{charMap:i,subtable:K.data,maxGlyphID:j+1};case"unicode":for(I=[],f=[],y=0,g={},r={},x=u=null,G=0,V=l.length;G<V;G++)g[P=t[a=l[G]]]==null&&(g[P]=++y),r[a]={old:P,new:g[P]},o=g[P]-a,x!=null&&o===u||(x&&f.push(x),I.push(a),u=o),x=a;for(x&&f.push(x),f.push(65535),I.push(65535),R=2*(L=I.length),S=2*Math.pow(Math.log(L)/Math.LN2,2),N=Math.log(S/2)/Math.LN2,T=2*L-S,d=[],_=[],h=[],b=M=0,ie=I.length;M<ie;b=++M){if(E=I[b],p=f[b],E===65535){d.push(0),_.push(0);break}if(E-(Y=r[E].new)>=32768)for(d.push(0),_.push(2*(h.length+L-b)),a=H=E;E<=p?H<=p:H>=p;a=E<=p?++H:--H)h.push(r[a].new);else d.push(Y-E),_.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*L+2*h.length),K.writeUInt16(0),K.writeUInt16(R),K.writeUInt16(S),K.writeUInt16(N),K.writeUInt16(T),de=0,D=f.length;de<D;de++)a=f[de],K.writeUInt16(a);for(K.writeUInt16(0),xe=0,q=I.length;xe<q;xe++)a=I[xe],K.writeUInt16(a);for(Oe=0,J=d.length;Oe<J;Oe++)o=d[Oe],K.writeUInt16(o);for(Me=0,ee=_.length;Me<ee;Me++)A=_[Me],K.writeUInt16(A);for(ue=0,ae=h.length;ue<ae;ue++)j=h[ue],K.writeUInt16(j);return{charMap:r,subtable:K.data,maxGlyphID:y+1}}},e}(),$b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,a,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r=new v1(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var a,i;return r==null&&(r="macroman"),a=v1.encode(n,r),(i=new ai).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),x6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),g6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(n.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(n.readInt());return a}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(n.readInt());return a}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),v6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="post",t.prototype.parse=function(n){var r,a,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(a=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var o,d,u;for(u=[],l=o=0,d=this.file.maxp.numGlyphs;0<=d?o<d:o>d;l=0<=d?++o:--o)u.push(n.readUInt32());return u}).call(this)}},t}(),b6=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},y6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="name",t.prototype.parse=function(n){var r,a,i,l,o,d,u,p,f,N,h;for(n.pos=this.offset,n.readShort(),r=n.readShort(),d=n.readShort(),a=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+d+n.readShort()});for(u={},l=f=0,N=a.length;f<N;l=++f)i=a[l],n.pos=i.offset,p=n.readString(i.length),o=new b6(p,i),u[h=i.nameID]==null&&(u[h]=[]),u[i.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),w6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),N6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,a,i,l,o,d,u;for(n.pos=this.offset,this.metrics=[],r=0,d=this.file.hhea.numberOfMetrics;0<=d?r<d:r>d;r=0<=d?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,f;for(f=[],r=p=0;0<=i?p<i:p>i;r=0<=i?++p:--p)f.push(n.readInt16());return f}(),this.widths=(function(){var p,f,N,h;for(h=[],p=0,f=(N=this.metrics).length;p<f;p++)l=N[p],h.push(l.advance);return h}).call(this),a=this.widths[this.widths.length-1],u=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),Bb=[].slice,j6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,a,i,l,o,d,u,p,f,N;return n in this.cache?this.cache[n]:(l=this.file.loca,r=this.file.contents,a=l.indexOf(n),(i=l.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+a,o=(d=new ai(r.read(i))).readShort(),p=d.readShort(),N=d.readShort(),u=d.readShort(),f=d.readShort(),this.cache[n]=o===-1?new k6(d,p,N,u,f):new S6(d,o,p,N,u,f),this.cache[n]))},t.prototype.encode=function(n,r,a){var i,l,o,d,u;for(o=[],l=[],d=0,u=r.length;d<u;d++)i=n[r[d]],l.push(o.length),i&&(o=o.concat(i.encode(a)));return l.push(o.length),{table:o,offsets:l}},t}(),S6=function(){function e(t,n,r,a,i,l){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),k6=function(){function e(t,n,r,a,i){var l,o;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new ai(Bb.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),_6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Hr(t,jr),t.prototype.tag="loca",t.prototype.parse=function(n){var r,a;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,l;for(l=[],a=0,i=this.length;a<i;a+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var i,l;for(l=[],a=0,i=this.length;a<i;a+=4)l.push(n.readUInt32());return l}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var a=new Uint32Array(this.offsets.length),i=0,l=0,o=0;o<a.length;++o)if(a[o]=i,l<r.length&&r[l]==o){++l,a[o]=i;var d=this.offsets[o],u=this.offsets[o+1]-d;u>0&&(i+=u)}for(var p=new Array(4*a.length),f=0;f<a.length;++f)p[4*f+3]=255&a[f],p[4*f+2]=(65280&a[f])>>8,p[4*f+1]=(16711680&a[f])>>16,p[4*f]=(4278190080&a[f])>>24;return p},t}(),C6=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,a,i;for(n in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=a[r];return t},e.prototype.glyphsFor=function(t){var n,r,a,i,l,o,d;for(a={},l=0,o=t.length;l<o;l++)a[i=t[l]]=this.font.glyf.glyphFor(i);for(i in n=[],a)(r=a[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in d=this.glyphsFor(n))r=d[i],a[i]=r;return a},e.prototype.encode=function(t,n){var r,a,i,l,o,d,u,p,f,N,h,b,j,C,x;for(a in r=$b.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),h={0:0},x=r.charMap)h[(d=x[a]).old]=d.new;for(b in N=r.maxGlyphID,l)b in h||(h[b]=N++);return p=function(g){var y,A;for(y in A={},g)A[g[y]]=y;return A}(h),f=Object.keys(p).sort(function(g,y){return g-y}),j=function(){var g,y,A;for(A=[],g=0,y=f.length;g<y;g++)o=f[g],A.push(p[o]);return A}(),i=this.font.glyf.encode(l,j,h),u=this.font.loca.encode(i.offsets,j),C={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},e}();Qe.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,a,i,l;if(Array.isArray(n))return"["+function(){var o,d,u;for(u=[],o=0,d=n.length;o<d;o++)r=n[o],u.push(t.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in i=["<<"],n)l=n[a],i.push("/"+a+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+n},t}();const Ub=({client:e,onClose:t})=>{const{state:n,getLatestItinerary:r}=At(),{hotels:a,sightseeings:i,activities:l,entryTickets:o,meals:d,transportations:u}=n,[p,f]=ce.useState(!1),[N,h]=ce.useState(!1);ce.useState(!1);const b=r(e.id),j=Za.useMemo(()=>b?Gi(b.client,b.dayPlans,a,i,l,o,d,u):0,[b,a,i,l,o,d,u]),C=j+((b==null?void 0:b.profitMargin)||0);ce.useEffect(()=>{const _=setInterval(()=>{const T=r(e.id);T&&T.version!==(b==null?void 0:b.version)&&(window.location.reload=window.location.reload)},5e3);return()=>clearInterval(_)},[e.id,b==null?void 0:b.version,r]);const x=_=>{const T=i.filter(I=>_.sightseeing.includes(I.id)),S=_.activities.map(I=>{const Y=l.find(te=>te.id===I.activityId),K=Y==null?void 0:Y.options.find(te=>te.id===I.optionId);return{activity:Y,option:K}}).filter(I=>I.activity&&I.option),L=o.filter(I=>_.entryTickets.includes(I.id)),R=d.filter(I=>_.meals.includes(I.id));let E=null;if(_.hotel){const I=a.find(K=>K.id===_.hotel.hotelId),Y=I==null?void 0:I.roomTypes.find(K=>K.id===_.hotel.roomTypeId);I&&Y&&(E={hotel:I,roomType:Y})}return{sightseeing:T,activities:S,tickets:L,meals:R,hotel:E}},g=()=>{if(!b)return"";const _=e.numberOfPax.adults+e.numberOfPax.children;let T=`🌴 TRAVEL ITINERARY 🌴

`;T+=`📋 CLIENT DETAILS:
`,T+=`• Client: ${e.name}
`,T+=`• Contact: ${e.countryCode} ${e.whatsapp}
`,T+=`• Duration: ${e.numberOfDays} days
`,T+=`• Passengers: ${_} pax (${e.numberOfPax.adults} adults, ${e.numberOfPax.children} children)
`,T+=`• Transportation: ${e.transportationMode}

`,T+=`📅 DAY-BY-DAY ITINERARY:

`,b.dayPlans.forEach(L=>{const R=x(L);T+=`🗓️ DAY ${L.day}:
`,R.sightseeing.length>0&&(T+=`📍 SIGHTSEEING:
`,R.sightseeing.forEach(E=>{T+=`   • ${E.name}
`})),R.hotel&&(T+=`🏨 ACCOMMODATION:
`,T+=`   • ${R.hotel.hotel.name} - ${R.hotel.roomType.name}
`,T+=`   • Location: ${R.hotel.hotel.place}
`),R.activities.length>0&&(T+=`🎯 ACTIVITIES:
`,R.activities.forEach(E=>{var I,Y;T+=`   • ${(I=E.activity)==null?void 0:I.name} - ${(Y=E.option)==null?void 0:Y.name}
`})),R.tickets.length>0&&(T+=`🎫 ENTRY TICKETS:
`,R.tickets.forEach(E=>{T+=`   • ${E.name}
`})),R.meals.length>0&&(T+=`🍽️ MEALS:
`,R.meals.forEach(E=>{T+=`   • ${E.type.charAt(0).toUpperCase()+E.type.slice(1)} at ${E.place}
`})),T+=`
`}),T+=`💰 PRICING:
`,T+=`• Total Package Price: $${C.toFixed(2)}
`,T+=`• Total Package Price (INR): ₹${(C*((b==null?void 0:b.exchangeRate)||83)).toLocaleString("en-IN")}
`,T+=`• Exchange Rate: 1 USD = ₹${(b==null?void 0:b.exchangeRate)||83}

`;const S=new Map;return b.dayPlans.forEach(L=>{if(L.hotel){const R=a.find(I=>I.id===L.hotel.hotelId),E=R==null?void 0:R.roomTypes.find(I=>I.id===L.hotel.roomTypeId);if(R&&E){const I=`${R.id}-${E.id}`;S.has(I)?S.get(I).nights+=1:S.set(I,{hotel:R,roomType:E,nights:1})}}}),T+=`✅ INCLUSIONS:
`,T+=`• ${e.numberOfDays} days ${e.transportationMode} transportation
`,S.size>0&&S.forEach(({hotel:L,roomType:R,nights:E})=>{T+=`• ${E} night${E>1?"s":""} stay ${L.name} in ${R.name}
`}),b.dayPlans.some(L=>L.sightseeing.length>0)&&(T+=`• Sightseeing tours as mentioned
`),b.dayPlans.some(L=>L.activities.length>0)&&(T+=`• Activities and experiences as listed
`),b.dayPlans.some(L=>L.entryTickets.length>0)&&(T+=`• Entry tickets to attractions
`),b.dayPlans.some(L=>L.meals.length>0)&&(T+=`• Meals as specified in itinerary
`),T+=`• Professional travel planning service
`,T+=`• 24/7 customer support during travel

`,T+=`❌ EXCLUSIONS:
`,T+=`• International/domestic flights
`,T+=`• Travel insurance
`,T+=`• Personal expenses and shopping
`,T+=`• Tips and gratuities
`,T+=`• Any meals not mentioned in inclusions
`,T+=`• Additional activities not listed
`,T+=`• Visa fees and documentation
`,T+=`• Emergency medical expenses

`,T+=`📞 CONTACT:
`,T+=`Nomadller Solutions - Travel Agency Management
`,T+=`Professional Travel Planning Services

`,T+=`Generated on: ${new Date().toLocaleDateString()}
`,T+=`Package ID: ${e.id}
`,T},y=()=>{const _=g();navigator.clipboard.writeText(_).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)}).catch(()=>{alert("❌ Failed to copy itinerary. Please try again.")})},A=()=>{const _=g(),T=encodeURIComponent(_),S=`https://wa.me/${e.countryCode.replace("+","")}${e.whatsapp}?text=${T}`;window.open(S,"_blank"),h(!0),setTimeout(()=>h(!1),2e3)},P=()=>{if(!b)return;const _=new Qe,T=_.internal.pageSize.width,S=20;let L=S;_.setFontSize(20),_.setFont("helvetica","bold"),_.text("Travel Itinerary",T/2,L,{align:"center"}),L+=15,_.setFontSize(12),_.setFont("helvetica","normal"),_.text(`Client: ${e.name}`,S,L),L+=8,_.text(`Contact: ${e.countryCode} ${e.whatsapp}`,S,L),L+=8,_.text(`Duration: ${e.numberOfDays} days`,S,L),L+=8,_.text(`Passengers: ${e.numberOfPax.adults+e.numberOfPax.children} pax`,S,L),L+=15,_.setFont("helvetica","bold"),_.text("Day-by-Day Itinerary:",S,L),L+=10,b.dayPlans.forEach(R=>{if(L>250&&(_.addPage(),L=S),_.setFont("helvetica","bold"),_.text(`Day ${R.day}:`,S,L),L+=8,_.setFont("helvetica","normal"),R.sightseeing.length>0){const E=R.sightseeing.map(I=>{const Y=i.find(K=>K.id===I);return Y?Y.name:"Unknown"}).join(", ");_.text(`• Sightseeing: ${E}`,S+5,L),L+=6}if(R.hotel){const E=a.find(Y=>Y.id===R.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===R.hotel.roomTypeId);E&&I&&(_.text(`• Hotel: ${E.name} - ${I.name}`,S+5,L),L+=6)}L+=5}),L>220&&(_.addPage(),L=S),_.setFont("helvetica","bold"),_.text("Pricing Summary:",S,L),L+=10,_.setFont("helvetica","normal"),_.text(`Total Price: $${b.finalPrice.toFixed(2)}`,S,L),L+=8,_.text(`Total Price (INR): ₹${(b.finalPrice*b.exchangeRate).toLocaleString("en-IN")}`,S,L),_.save(`${e.name}-itinerary.pdf`)};return b?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Latest Itinerary - ",e.name]}),s.jsxs("p",{className:"text-slate-500 text-sm",children:["Created on ",new Date(e.createdAt).toLocaleDateString()]})]}),s.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("button",{onClick:y,className:`inline-flex items-center px-4 py-2 rounded-lg transition-all ${p?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:p?s.jsxs(s.Fragment,{children:[s.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Copy Itinerary"]})}),s.jsx("button",{onClick:A,className:`inline-flex items-center px-4 py-2 rounded-lg transition-all ${N?"bg-green-600 text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:N?s.jsxs(s.Fragment,{children:[s.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Sent!"]}):s.jsxs(s.Fragment,{children:[s.jsx(_4,{className:"h-4 w-4 mr-2"}),"Send to WhatsApp"]})}),s.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(Fh,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qr,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Contact:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.countryCode," ",e.whatsapp]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Package Pricing"]}),j!==(b==null?void 0:b.totalBaseCost)&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(k4,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-sm text-yellow-800 font-medium",children:"Pricing updated based on latest itinerary changes"})]})}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Total Package Price"}),s.jsxs("div",{className:"text-3xl font-bold mb-2",children:["$",C.toFixed(2)]}),s.jsxs("div",{className:"text-xl font-bold text-green-100",children:["₹",(C*((b==null?void 0:b.exchangeRate)||83)).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-xs text-green-100 mt-2",children:["Exchange Rate: 1 USD = ₹",(b==null?void 0:b.exchangeRate)||83]}),j!==(b==null?void 0:b.totalBaseCost)&&s.jsx("div",{className:"mt-3 pt-3 border-t border-green-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs text-green-100 space-y-1",children:[s.jsxs("div",{children:["Updated Base Cost: $",j.toFixed(2)]}),s.jsxs("div",{children:["Profit Margin: $",((b==null?void 0:b.profitMargin)||0).toFixed(2)]})]})})]})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:b.dayPlans.map(_=>{const T=x(_);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-6",children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",_.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[T.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.sightseeing.map(S=>s.jsxs("li",{children:["• ",S.name]},S.id))})]}),T.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.activities.map((S,L)=>{var R,E;return s.jsxs("li",{children:["• ",(R=S.activity)==null?void 0:R.name," - ",(E=S.option)==null?void 0:E.name]},L)})})]}),T.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.tickets.map(S=>s.jsxs("li",{children:["• ",S.name]},S.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[T.hotel&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",T.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[T.hotel.roomType.name," - ",T.hotel.hotel.place]})]})]}),T.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.meals.map(S=>s.jsxs("li",{className:"capitalize",children:["• ",S.type," at ",S.place]},S.id))})]})]})]})]},_.day)})})]})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:[s.jsx("div",{className:"bg-slate-100 p-4 rounded-lg mb-4 inline-block",children:s.jsx(ws,{className:"h-8 w-8 text-slate-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Itinerary Found"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["No itinerary has been created for ",e.name," yet."]}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})},A6=()=>{var G;Yt();const{state:e}=At(),{clients:t}=e,[n,r]=ce.useState([]),[a,i]=ce.useState(null),[l,o]=ce.useState("overview"),[d,u]=ce.useState(!1),[p,f]=ce.useState(!1),[N,h]=ce.useState(null),[b,j]=ce.useState(!1),[C,x]=ce.useState(null),[g,y]=ce.useState({fullName:"",email:"",password:"",companyName:""}),A=new Date().toISOString().split("T")[0];ce.useEffect(()=>{const M=()=>{const Z=localStorage.getItem("salesTeam");if(Z)try{const ie=JSON.parse(Z).map(D=>{const q=t.filter(de=>de.createdBy===D.id),J=q.filter(de=>new Date(de.createdAt).toISOString().split("T")[0]===A),ee=q.filter(de=>de.nextFollowUpDate===A),ae=q.filter(de=>{var xe;return((xe=de.followUpStatus)==null?void 0:xe.status)==="advance-paid-confirmed"});return{...D,todayLeads:J.length,todayFollowups:ee.length,confirmedLeads:ae.length,totalLeads:q.length}});r(ie)}catch(V){console.error("Error loading sales team:",V)}};M();const H=setInterval(()=>{M();const Z=localStorage.getItem("appData");if(Z)try{const V=JSON.parse(Z);if(V.clients||V.itineraries){const ie=new CustomEvent("refreshData",{detail:V});window.dispatchEvent(ie)}}catch(V){console.error("Error loading sales management data:",V)}},2e3);return()=>clearInterval(H)},[t,A]);const P=M=>{h(M),f(!0)},_=async()=>{if(!g.fullName||!g.email||!g.password){x({type:"error",text:"Please fill in all required fields"});return}const M=localStorage.getItem("salesCredentials")||"[]";try{if(JSON.parse(M).some(V=>V.email===g.email)){x({type:"error",text:"Email already exists. Please use a different email."});return}}catch(H){console.error("Error checking existing credentials:",H)}j(!0),x(null);try{const H={id:`sales-${Date.now()}`,email:g.email,full_name:g.fullName,role:"sales",company_name:g.companyName||null,company_logo:null,phone_number:null,address:null,createdAt:new Date().toISOString(),isActive:!0,todayLeads:0,todayFollowups:0,confirmedLeads:0,totalLeads:0},Z=[...n,H];r(Z),localStorage.setItem("salesTeam",JSON.stringify(Z));const V=localStorage.getItem("salesCredentials")||"[]",ie=JSON.parse(V);ie.push({email:g.email,password:g.password,profile:H}),localStorage.setItem("salesCredentials",JSON.stringify(ie)),x({type:"success",text:`Sales person created successfully!

Login Credentials:
Email: ${g.email}
Password: ${g.password}

They can now login to the sales portal. All their data will be isolated from other users.`}),y({fullName:"",email:"",password:"",companyName:""}),u(!1),setTimeout(()=>x(null),3e3)}catch{x({type:"error",text:"Failed to create sales person. Please try again."})}finally{j(!1)}},T=M=>{const H=n.find(Z=>Z.id===M);if(H&&confirm(`Are you sure you want to ${H.isActive?"suspend":"activate"} ${H.full_name}?`)){const Z=n.map(V=>V.id===M?{...V,isActive:!V.isActive}:V);r(Z),localStorage.setItem("salesTeam",JSON.stringify(Z))}},S=(M,H)=>{if(confirm(`Are you sure you want to permanently delete sales person "${H}"? This action cannot be undone.`)){const Z=n.filter(q=>q.id!==M);r(Z),localStorage.setItem("salesTeam",JSON.stringify(Z));const V=localStorage.getItem("salesCredentials")||"[]",D=JSON.parse(V).filter(q=>q.profile.id!==M);localStorage.setItem("salesCredentials",JSON.stringify(D))}},L=M=>t.filter(H=>H.createdBy===M),R=M=>t.filter(H=>H.createdBy===M&&H.nextFollowUpDate===A),E=M=>t.filter(H=>{var Z;return H.createdBy===M&&((Z=H.followUpStatus)==null?void 0:Z.status)==="advance-paid-confirmed"}),I=M=>{const H=t.filter(ie=>ie.createdBy===M),Z=H.filter(ie=>new Date(ie.createdAt).toISOString().split("T")[0]===A),V=H.filter(ie=>{var D;return(D=ie.followUpHistory)==null?void 0:D.some(q=>new Date(q.updatedAt).toISOString().split("T")[0]===A)});return{newLeads:Z,updatedFollowups:V,totalActivity:Z.length+V.length}},Y=M=>{switch(M){case"advance-paid-confirmed":return"bg-green-100 text-green-800";case"dead":return"bg-red-100 text-red-800";case"itinerary-sent":return"bg-blue-100 text-blue-800";case"itinerary-edited":return"bg-purple-100 text-purple-800";default:return"bg-yellow-100 text-yellow-800"}},K=M=>{switch(M){case"itinerary-created":return"Itinerary Created";case"itinerary-sent":return"Itinerary Sent";case"1st-follow-up":return"1st Follow Up";case"2nd-follow-up":return"2nd Follow Up";case"3rd-follow-up":return"3rd Follow Up";case"4th-follow-up":return"4th Follow Up";case"itinerary-edited":return"Itinerary Edited";case"updated-itinerary-sent":return"Updated Itinerary Sent";case"advance-paid-confirmed":return"Advance Paid & Confirmed";case"dead":return"Dead";default:return"New Lead"}},te=()=>{if(!a)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(yt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"Select a Sales Person"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Choose a sales person from the list to view their details and performance."})]});const M=n.find(D=>D.id===a);if(!M)return null;const H=L(a),Z=R(a),V=E(a),ie=I(a);switch(l){case"overview":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Sales Person Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900 mb-3",children:"Personal Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Name:"}),s.jsx("p",{className:"text-slate-900",children:M.full_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Email:"}),s.jsx("p",{className:"text-slate-900",children:M.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Company:"}),s.jsx("p",{className:"text-slate-900",children:M.company_name||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Status:"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.isActive?"Active":"Suspended"})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900 mb-3",children:"Performance Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:M.totalLeads}),s.jsx("div",{className:"text-sm text-slate-600",children:"Total Leads"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.confirmedLeads}),s.jsx("div",{className:"text-sm text-slate-600",children:"Confirmed"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:M.todayFollowups}),s.jsx("div",{className:"text-sm text-slate-600",children:"Today's Follow-ups"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[M.totalLeads>0?(M.confirmedLeads/M.totalLeads*100).toFixed(1):0,"%"]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Conversion Rate"})]})]})]})]})]})});case"performance":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Today's Performance - ",M.full_name]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:ie.newLeads.length}),s.jsx("div",{className:"text-sm text-slate-600",children:"New Leads Today"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:ie.updatedFollowups.length}),s.jsx("div",{className:"text-sm text-slate-600",children:"Follow-ups Updated"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:ie.totalActivity}),s.jsx("div",{className:"text-sm text-slate-600",children:"Total Activity"})]})]})]}),ie.newLeads.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h5",{className:"font-semibold text-slate-900",children:"New Leads Added Today"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:ie.newLeads.map(D=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:D.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[D.numberOfDays," days • ",D.numberOfPax.adults+D.numberOfPax.children," pax"]})]}),s.jsx("div",{className:"text-sm text-slate-500",children:new Date(D.createdAt).toLocaleTimeString()})]},D.id))})})]}),ie.updatedFollowups.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h5",{className:"font-semibold text-slate-900",children:"Follow-ups Updated Today"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:ie.updatedFollowups.map(D=>{var q,J,ee;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:D.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:["Latest: ",K((q=D.followUpStatus)==null?void 0:q.status)]})]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y((J=D.followUpStatus)==null?void 0:J.status)}`,children:K((ee=D.followUpStatus)==null?void 0:ee.status)})]},D.id)})})})]})]});case"clients":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["All Clients - ",M.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Complete client list with latest itinerary and follow-up status"})]}),H.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(yt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No clients yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"This sales person hasn't created any client leads yet."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Contact Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Travel Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Follow-up Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Latest Itinerary"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:H.map(D=>{var q,J;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:D.name}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Created: ",new Date(D.createdAt).toLocaleDateString()]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(qr,{className:"h-4 w-4 mr-1"}),D.countryCode," ",D.whatsapp]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[D.numberOfDays," days • ",D.numberOfPax.adults+D.numberOfPax.children," pax"]}),s.jsx("div",{className:"text-slate-500",children:D.transportationMode})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y((q=D.followUpStatus)==null?void 0:q.status)}`,children:K((J=D.followUpStatus)==null?void 0:J.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("button",{onClick:()=>P(D),className:"inline-flex items-center px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm",children:[s.jsx(ws,{className:"h-4 w-4 mr-1"}),"View Itinerary"]})})]},D.id)})})]})})]});case"followups":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["Today's Follow-ups - ",M.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Clients scheduled for follow-up today"})]}),Z.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(zr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No follow-ups scheduled for today"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"This sales person has no follow-ups scheduled for today."})]}):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:Z.map(D=>{var q,J;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:D.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[D.numberOfDays," days • ",D.numberOfPax.adults+D.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Follow-up time: ",D.nextFollowUpTime||"Not specified"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y((q=D.followUpStatus)==null?void 0:q.status)}`,children:K((J=D.followUpStatus)==null?void 0:J.status)}),s.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[D.countryCode," ",D.whatsapp]})]})]},D.id)})})})]});case"confirmed":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["Confirmed Leads - ",M.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Successfully converted clients with confirmed bookings"})]}),V.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Xt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No confirmed leads yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Confirmed bookings will appear here when clients pay advance."})]}):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:V.map(D=>{var q;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:D.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[D.numberOfDays," days • ",D.numberOfPax.adults+D.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Confirmed: ",(q=D.followUpStatus)!=null&&q.updatedAt?new Date(D.followUpStatus.updatedAt).toLocaleDateString():"Unknown"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Confirmed"]}),s.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[D.countryCode," ",D.whatsapp]})]})]},D.id)})})})]});default:return null}};return s.jsxs(sn,{title:"Sales Management",subtitle:"Manage sales team, performance, and client relationships",hideHeader:!0,children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sales Team Management"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Create and manage sales team members"})]}),s.jsxs("button",{onClick:()=>u(!d),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Create Sales Person"]})]})}),d&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-purple-50",children:[C&&s.jsxs("div",{className:`mb-4 p-4 rounded-lg flex items-center space-x-3 ${C.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[C.type==="success"?s.jsx(Xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(So,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${C.type==="success"?"text-green-700":"text-red-700"}`,children:C.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(vo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:g.fullName,onChange:M=>y({...g,fullName:M.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter full name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(zi,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:g.email,onChange:M=>y({...g,email:M.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter email address"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(xo,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"password",value:g.password,onChange:M=>y({...g,password:M.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Create password"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(_t,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:g.companyName,onChange:M=>y({...g,companyName:M.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter company name (optional)"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:_,disabled:b,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[b?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(Ts,{className:"h-4 w-4 mr-2"}),b?"Creating...":"Create Sales Person"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Sales Team"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Sales People"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.filter(M=>M.isActive).length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Leads"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.reduce((M,H)=>M+H.totalLeads,0)})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Confirmed Sales"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:n.reduce((M,H)=>M+H.confirmedLeads,0)})]}),s.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-emerald-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sales Team"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Select a sales person to view details"})]}),n.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Fs,{className:"h-8 w-8 text-slate-400 mx-auto mb-3"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No sales team members yet"}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Create your first sales person to get started."})]}):s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-2",children:n.map(M=>s.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${a===M.id?"border-purple-300 bg-purple-50":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>i(M.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:M.full_name}),s.jsx("div",{className:"text-sm text-slate-500",children:M.email}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("span",{className:"text-xs text-slate-600",children:[M.totalLeads," leads"]}),s.jsxs("span",{className:"text-xs text-slate-600",children:[M.confirmedLeads," confirmed"]})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${M.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:M.isActive?"Active":"Suspended"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:H=>{H.stopPropagation(),T(M.id)},className:`p-1 rounded transition-colors ${M.isActive?"text-red-600 hover:bg-red-100":"text-green-600 hover:bg-green-100"}`,title:M.isActive?"Suspend":"Activate",children:M.isActive?s.jsx(ob,{className:"h-4 w-4"}):s.jsx(Yc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:H=>{H.stopPropagation(),S(M.id,M.full_name||"Unknown")},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]})]})},M.id))})})]}),s.jsxs("div",{className:"lg:col-span-2",children:[a&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[(G=n.find(M=>M.id===a))==null?void 0:G.full_name," - Details"]}),s.jsxs("div",{className:"flex items-center space-x-1 bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>o("overview"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l==="overview"?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Overview"}),s.jsx("button",{onClick:()=>o("performance"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l==="performance"?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Today's Performance"}),s.jsx("button",{onClick:()=>o("clients"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l==="clients"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"All Clients"}),s.jsx("button",{onClick:()=>o("followups"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l==="followups"?"bg-white text-orange-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Today's Follow-ups"}),s.jsx("button",{onClick:()=>o("confirmed"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${l==="confirmed"?"bg-white text-green-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Confirmed Leads"})]})]})}),s.jsx("div",{className:"p-6",children:te()})]}),!a&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(Fs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"Select a Sales Person"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Choose a sales team member from the list to view their performance and client details."})]})]})]})]}),p&&N&&s.jsx(Ub,{client:N,onClose:()=>f(!1)})]})},b1=({onNext:e,onClose:t})=>{const{state:n}=At(),{state:r}=Yt(),{transportations:a}=n,[i,l]=ce.useState({name:"",numberOfDays:5,transportationMode:""}),[o,d]=ce.useState({}),u=()=>{const f={};return i.name.trim()||(f.name="Template name is required"),(i.numberOfDays<1||i.numberOfDays>30)&&(f.numberOfDays="Number of days must be between 1 and 30"),i.transportationMode||(f.transportationMode="Transportation mode is required"),d(f),Object.keys(f).length===0},p=f=>{var h;if(f.preventDefault(),!u())return;const N={id:`template-${Date.now()}`,name:i.name,whatsapp:"",countryCode:"",travelDates:{startDate:"",endDate:"",isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:2,children:0},numberOfDays:i.numberOfDays,transportationMode:i.transportationMode,createdAt:new Date().toISOString(),createdBy:(h=r.user)==null?void 0:h.id};e(N)};return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ws,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Information"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 1 of 4 - Define your itinerary template"})]})]})}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ws,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:f=>{l({...i,name:f.target.value}),o.name&&d({...o,name:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${o.name?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"e.g., Bali Highlights - 5 Days, Cultural Experience Package"}),o.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.name}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"This will be the display name for your fixed itinerary template"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(pt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Days *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",max:"30",value:i.numberOfDays,onChange:f=>{l({...i,numberOfDays:parseInt(f.target.value)||1}),o.numberOfDays&&d({...o,numberOfDays:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${o.numberOfDays?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`}),s.jsx(zr,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),o.numberOfDays&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.numberOfDays})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:i.transportationMode,onChange:f=>{l({...i,transportationMode:f.target.value}),o.transportationMode&&d({...o,transportationMode:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${o.transportationMode?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,children:[s.jsx("option",{value:"",children:"Select transportation"}),a.map(f=>s.jsxs("option",{value:f.vehicleName,children:[f.vehicleName," (",f.type.replace("-"," "),")"]},f.id))]}),o.transportationMode&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.transportationMode})]})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ws,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-900",children:"Creating Template"}),s.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"You're creating a reusable itinerary template. In the next steps, you'll plan the day-by-day activities, set inclusions/exclusions, and define the base cost. This template can be used for similar client requests."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(zt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Next: Plan Days",s.jsx(pt,{className:"ml-2 h-5 w-5"})]})]})]})]})},Uh=({client:e,onNext:t,onBack:n,isAgent:r=!1,isFixedItinerary:a=!1})=>{const{state:i}=At(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p}=i,[f,N]=ce.useState([]),[h,b]=ce.useState(1),[j,C]=ce.useState("sightseeing"),[x,g]=ce.useState([]),[y,A]=ce.useState({sightseeing:"",hotel:"",activities:"",tickets:"",meals:""});ce.useEffect(()=>{const ue=Array.from({length:e.numberOfDays},(ge,Pe)=>({day:Pe+1,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:[]}));N(ue)},[e.numberOfDays]);const P=o.filter(ue=>{const ge=e.transportationMode.toLowerCase();return ge.includes("cab")?ue.transportationMode==="cab":ge.includes("car")?ue.transportationMode==="self-drive-car":ge.includes("scooter")?ue.transportationMode==="self-drive-scooter":!0}),_=(ue,ge)=>{A(Pe=>({...Pe,[ue]:ge}))},T=ue=>{A(ge=>({...ge,[ue]:""}))},S=ue=>{const ge=f.slice(0,ue),Pe=new Set;ge.forEach(we=>{we.sightseeing.forEach(Be=>Pe.add(Be))});const me=new Set;ge.forEach(we=>{we.activities.forEach(Be=>me.add(Be.activityId))});const X=new Set;return ge.forEach(we=>{we.entryTickets.forEach(Be=>X.add(Be))}),{availableSightseeing:P.filter(we=>!Pe.has(we.id)),selectedActivityIds:me,selectedTicketIds:X}},L=ue=>{const{availableSightseeing:ge}=S(ue),Pe=y.sightseeing.toLowerCase();return ge.filter(me=>me.name.toLowerCase().includes(Pe)||me.description.toLowerCase().includes(Pe))},R=ue=>{const{selectedActivityIds:ge}=S(ue),Pe=y.activities.toLowerCase();return d.filter(me=>!ge.has(me.id)&&(me.name.toLowerCase().includes(Pe)||me.location.toLowerCase().includes(Pe)))},E=(ue,ge)=>{const{selectedTicketIds:Pe}=S(ue),me=y.tickets.toLowerCase();return u.filter(X=>ge.includes(X.sightseeingId)&&!Pe.has(X.id)&&X.name.toLowerCase().includes(me))},I=ue=>{const ge=y.meals.toLowerCase();return p.filter(Pe=>Pe.type===ue&&Pe.place.toLowerCase().includes(ge))},Y=ue=>{const ge=y.hotel.toLowerCase();return G(ue).filter(Pe=>Pe.name.toLowerCase().includes(ge))},K=[...new Set(l.map(ue=>ue.place))],te=(ue,ge,Pe)=>{const me=[...f];me[ue]={...me[ue],[ge]:Pe},N(me)},G=ue=>l.filter(ge=>ge.place===ue),M=ue=>{const ge=l.find(Pe=>Pe.id===ue);return ge?ge.roomTypes:[]},H=(ue,ge)=>{const Pe=f[ue].activities;if(Pe.find(X=>X.activityId===ge)){const X=Pe.filter(we=>we.activityId!==ge);te(ue,"activities",X)}else{const X=d.find(we=>we.id===ge);if(X&&X.options.length>0){const we=[...Pe,{activityId:ge,optionId:X.options[0].id}];te(ue,"activities",we)}}},Z=(ue,ge,Pe)=>{const me=[...f[ue].activities],X=me.findIndex(we=>we.activityId===ge);X!==-1&&(me[X].optionId=Pe,te(ue,"activities",me))},V=ue=>{switch(ue){case"sightseeing":return s.jsx(pt,{className:"h-5 w-5"});case"hotel":return s.jsx(_t,{className:"h-5 w-5"});case"activities":return s.jsx(is,{className:"h-5 w-5"});case"tickets":return s.jsx(ps,{className:"h-5 w-5"});case"meals":return s.jsx(Gt,{className:"h-5 w-5"})}},ie=ue=>{switch(ue){case"sightseeing":return"Select Sightseeing Spots";case"hotel":return"Choose Hotel Accommodation";case"activities":return"Add Activities & Experiences";case"tickets":return"Select Entry Tickets";case"meals":return"Choose Meals"}},D=ue=>{switch(ue){case"sightseeing":return"blue";case"hotel":return"purple";case"activities":return"green";case"tickets":return"orange";case"meals":return"red"}},q=(ue,ge)=>{const Pe=f[ue];if(!Pe)return!1;switch(ge){case"sightseeing":return Pe.sightseeing.length>0;case"hotel":return Pe.hotel!==null;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},J=(ue,ge)=>{var Pe;switch(ge){case"sightseeing":return((Pe=f[ue])==null?void 0:Pe.sightseeing.length)>0;case"hotel":return!0;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},ee=ue=>{const ge=["sightseeing","hotel","activities","tickets","meals"],Pe=ge.indexOf(ue);return Pe<ge.length-1?ge[Pe+1]:null},ae=ue=>{const ge=["sightseeing","hotel","activities","tickets","meals"],Pe=ge.indexOf(ue);return Pe>0?ge[Pe-1]:null},de=()=>{const ue=ee(j);ue?C(ue):(g(ge=>[...ge,h]),h<e.numberOfDays&&(b(h+1),C("sightseeing")))},xe=()=>{const ue=ae(j);ue?C(ue):h>1&&(b(h-1),C("meals"))},ve=()=>{h<e.numberOfDays&&(g(ue=>[...ue,h]),b(h+1),C("sightseeing"))},Oe=()=>{if(!f.every(ge=>ge.sightseeing.length>0)){alert("Please select at least one sightseeing spot for each day before proceeding to review.");return}t(f)},Me=()=>{var Pe,me,X;const ue=f[h-1],ge=h-1;if(!ue)return null;switch(j){case"sightseeing":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Select Sightseeing Spots"}),s.jsxs("p",{className:"text-blue-700 text-sm",children:["Choose the places you want to visit on Day ",h,". You can select multiple locations."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search sightseeing spots...",value:y.sightseeing,onChange:we=>_("sightseeing",we.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),y.sightseeing&&s.jsx("button",{onClick:()=>T("sightseeing"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:L(ge).map(we=>s.jsxs("label",{className:"flex items-start space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:ue.sightseeing.includes(we.id),onChange:Be=>{const _e=ue.sightseeing,De=Be.target.checked?[..._e,we.id]:_e.filter($e=>$e!==we.id);te(ge,"sightseeing",De)},className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:we.name}),s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:we.description}),s.jsxs("div",{className:"text-xs text-blue-600 mt-2 capitalize",children:["Transportation: ",we.transportationMode.replace("-"," ")]})]})]},we.id))}),L(ge).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(pt,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:y.sightseeing?"No sightseeing spots match your search.":"All available sightseeing spots for this transportation mode have been selected in previous days."})]})]});case"hotel":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Choose Hotel Accommodation"}),s.jsxs("p",{className:"text-purple-700 text-sm",children:["Select where you want to stay on Day ",h,". You can skip this if no accommodation is needed."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Place/Location"}),s.jsxs("select",{value:((Pe=ue.hotel)==null?void 0:Pe.place)||"",onChange:we=>{const Be=we.target.value;Be?te(ge,"hotel",{place:Be,hotelId:"",roomTypeId:""}):te(ge,"hotel",null)},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"No hotel needed"}),K.map(we=>s.jsx("option",{value:we,children:we},we))]})]}),((me=ue.hotel)==null?void 0:me.place)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Hotel Name"}),ue.hotel.place&&s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Zs,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search hotels...",value:y.hotel,onChange:we=>_("hotel",we.target.value),className:"w-full pl-9 pr-9 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),y.hotel&&s.jsx("button",{onClick:()=>T("hotel"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-4 w-4"})})]}),s.jsxs("select",{value:ue.hotel.hotelId,onChange:we=>{te(ge,"hotel",{...ue.hotel,hotelId:we.target.value,roomTypeId:""})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select hotel"}),Y(ue.hotel.place).map(we=>s.jsx("option",{value:we.id,children:we.name},we.id))]})]}),((X=ue.hotel)==null?void 0:X.hotelId)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Room Type"}),s.jsxs("select",{value:ue.hotel.roomTypeId,onChange:we=>{te(ge,"hotel",{...ue.hotel,roomTypeId:we.target.value})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select room type"}),M(ue.hotel.hotelId).map(we=>s.jsx("option",{value:we.id,children:we.name},we.id))]})]})]})]});case"activities":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Add Activities & Experiences"}),s.jsxs("p",{className:"text-green-700 text-sm",children:["Select activities for Day ",h,". These are optional but add value to the experience."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search activities...",value:y.activities,onChange:we=>_("activities",we.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),y.activities&&s.jsx("button",{onClick:()=>T("activities"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:R(ge).map(we=>{const Be=ue.activities.some(De=>De.activityId===we.id),_e=ue.activities.find(De=>De.activityId===we.id);return s.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-4 hover:border-green-300 transition-all",children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Be,onChange:()=>H(ge,we.id),className:"h-5 w-5 text-green-600 focus:ring-green-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:we.name}),s.jsx("div",{className:"text-sm text-slate-600",children:we.location})]})]}),Be&&s.jsxs("div",{className:"mt-3 ml-8",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Choose Option:"}),s.jsx("select",{value:(_e==null?void 0:_e.optionId)||"",onChange:De=>Z(ge,we.id,De.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:we.options.map(De=>s.jsx("option",{value:De.id,children:r||a?`${De.name} (for ${De.costForHowMany} ${De.costForHowMany===1?"person":"people"})`:`${De.name} - $${De.cost} (for ${De.costForHowMany} ${De.costForHowMany===1?"person":"people"})`},De.id))})]})]},we.id)})}),R(ge).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(is,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:y.activities?"No activities match your search.":"All available activities have been used in previous days."})]})]});case"tickets":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Select Entry Tickets"}),s.jsxs("p",{className:"text-orange-700 text-sm",children:["Choose entry tickets for the sightseeing spots selected for Day ",h,"."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search entry tickets...",value:y.tickets,onChange:we=>_("tickets",we.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),y.tickets&&s.jsx("button",{onClick:()=>T("tickets"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:E(ge,ue.sightseeing).map(we=>s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-orange-50 hover:border-orange-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:ue.entryTickets.includes(we.id),onChange:Be=>{const _e=ue.entryTickets,De=Be.target.checked?[..._e,we.id]:_e.filter($e=>$e!==we.id);te(ge,"entryTickets",De)},className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:we.name}),!r&&!a&&s.jsxs("div",{className:"text-sm text-slate-600",children:["$",we.cost," per person"]})]})]},we.id))}),E(ge,ue.sightseeing).length===0&&ue.sightseeing.length>0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ps,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:y.tickets?"No entry tickets match your search.":"All available entry tickets for selected sightseeing spots have been used in previous days."})]}),ue.sightseeing.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ps,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"Select sightseeing spots first to see available entry tickets"})]})]});case"meals":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Choose Meals"}),s.jsxs("p",{className:"text-red-700 text-sm",children:["Select meal options for Day ",h,". You can choose multiple meals for different times of the day."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search restaurants/places...",value:y.meals,onChange:we=>_("meals",we.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),y.meals&&s.jsx("button",{onClick:()=>T("meals"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[["breakfast","lunch","dinner"].map(we=>{const Be=I(we);return s.jsxs("div",{children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-3 capitalize flex items-center",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-red-600"}),we]}),s.jsx("div",{className:"space-y-2",children:Be.map(_e=>s.jsxs("label",{className:"flex items-start space-x-3 p-3 border-2 border-slate-200 rounded-lg hover:bg-red-50 hover:border-red-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:ue.meals.includes(_e.id),onChange:De=>{const $e=ue.meals,Ue=De.target.checked?[...$e,_e.id]:$e.filter(Ye=>Ye!==_e.id);te(ge,"meals",Ue)},className:"mt-1 h-5 w-5 text-red-600 focus:ring-red-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:_e.place}),!r&&!a&&s.jsxs("div",{className:"text-sm text-slate-600",children:["$",_e.cost," per person"]})]})]},_e.id))})]},we)}),y.meals&&["breakfast","lunch","dinner"].every(we=>I(we).length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Gt,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"No restaurants match your search."})]})]})]});default:return null}};return s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(mt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Day-by-Day Planning"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 3 of 5 - Build Your Itinerary"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Day ",h," of ",e.numberOfDays," for ",e.name]}),s.jsxs("p",{className:"text-slate-600 mt-1",children:["Current Step: ",ie(j)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-slate-600",children:"Progress"}),s.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:[x.length," / ",e.numberOfDays," days completed"]})]})]})}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:Array.from({length:e.numberOfDays},(ue,ge)=>{const Pe=ge+1,me=x.includes(Pe),X=Pe===h,we=Pe<=h||me;return s.jsx("button",{onClick:()=>we&&b(Pe),disabled:!we,className:`
                      flex items-center justify-center w-12 h-12 rounded-full font-semibold text-sm transition-all
                      ${X?"bg-blue-600 text-white ring-2 ring-blue-200":me?"bg-green-500 text-white":we?"bg-slate-200 text-slate-700 hover:bg-slate-300":"bg-slate-100 text-slate-400 cursor-not-allowed"}
                    `,children:me?"✓":Pe},Pe)})})}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3",children:["Day ",h," Planning Steps"]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:["sightseeing","hotel","activities","tickets","meals"].map((ue,ge)=>{const Pe=ue===j,me=q(h-1,ue),X=D(ue);return s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`
                        flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm transition-all
                        ${Pe?`bg-${X}-600 text-white ring-2 ring-${X}-200`:me?"bg-green-500 text-white":"bg-slate-200 text-slate-500"}
                      `,children:me?s.jsx(Yc,{className:"h-5 w-5"}):V(ue)}),s.jsx("div",{className:"ml-2 min-w-0",children:s.jsx("div",{className:`text-xs font-medium ${Pe?"text-slate-900":"text-slate-500"}`,children:ue.charAt(0).toUpperCase()+ue.slice(1)})}),ge<4&&s.jsx(so,{className:"h-4 w-4 text-slate-400 mx-2"})]},ue)})})]})}),s.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden mb-6",children:[s.jsx("div",{className:`bg-gradient-to-r from-${D(j)}-50 to-${D(j)}-100 px-6 py-4`,children:s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[V(j),s.jsx("span",{className:"ml-2",children:ie(j)})]})}),s.jsx("div",{className:"p-6 bg-white",children:Me()})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:n,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),(j!=="sightseeing"||h>1)&&s.jsxs("button",{onClick:xe,className:"px-6 py-3 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:[s.jsx(cb,{className:"h-4 w-4 mr-2 inline"}),"Previous"]})]}),s.jsx("div",{className:"flex gap-3",children:j!=="meals"?s.jsxs("button",{onClick:de,disabled:!J(h-1,j),className:`inline-flex items-center px-6 py-3 font-semibold rounded-lg transition-all duration-200 ${J(h-1,j)?`bg-gradient-to-r from-${D(j)}-600 to-${D(j)}-700 text-white hover:from-${D(j)}-700 hover:to-${D(j)}-800 transform hover:scale-105`:"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:["Next",s.jsx(so,{className:"ml-2 h-4 w-4"})]}):s.jsx(s.Fragment,{children:h<e.numberOfDays?s.jsxs("button",{onClick:ve,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Day ",h+1,s.jsx(so,{className:"ml-2 h-4 w-4"})]}):s.jsxs("button",{onClick:Oe,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Review Itinerary",s.jsx(mt,{className:"ml-2 h-5 w-5"})]})})})]})]})]})})},T6=({client:e,dayPlans:t,onNext:n,onBack:r})=>{const{state:a}=At(),{hotels:i,sightseeings:l,activities:o,entryTickets:d,meals:u,transportations:p}=a,[f,N]=ce.useState(`• ${e.numberOfDays} days ${e.transportationMode} transportation
• Accommodation in selected hotels
• Sightseeing tours as mentioned
• Activities and experiences as listed
• Entry tickets to attractions
• Professional travel planning service
• 24/7 customer support during travel`),[h,b]=ce.useState(`• International/domestic flights
• Travel insurance
• Personal expenses and shopping
• Tips and gratuities
• Any meals not mentioned in inclusions
• Additional activities not listed
• Visa fees and documentation
• Emergency medical expenses`),[j,C]=ce.useState({}),x=Gi(e,t,i,l,o,d,u,p),g=()=>{const P={};return f.trim()||(P.inclusions="Inclusions are required"),h.trim()||(P.exclusions="Exclusions are required"),C(P),Object.keys(P).length===0},y=()=>{g()&&n({baseCost:x,inclusions:f,exclusions:h})},A=P=>{const _=l.filter(E=>P.sightseeing.includes(E.id)),T=P.activities.map(E=>{const I=o.find(K=>K.id===E.activityId),Y=I==null?void 0:I.options.find(K=>K.id===E.optionId);return{activity:I,option:Y}}).filter(E=>E.activity&&E.option),S=d.filter(E=>P.entryTickets.includes(E.id)),L=u.filter(E=>P.meals.includes(E.id));let R=null;if(P.hotel){const E=i.find(Y=>Y.id===P.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===P.hotel.roomTypeId);E&&I&&(R={hotel:E,roomType:I})}return{sightseeing:_,activities:T,tickets:S,meals:L,hotel:R}};return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Review & Details"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 3 of 4 - Define inclusions, exclusions, and pricing"})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(ws,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Template Name:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transportation:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.transportationMode})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Base Cost:"}),s.jsxs("div",{className:"text-base text-green-600 font-semibold",children:["$",x.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Detailed Itinerary Preview"}),s.jsx("div",{className:"space-y-4",children:t.map(P=>{const _=A(P);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",P.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[_.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:_.sightseeing.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]}),_.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:_.activities.map((T,S)=>{var L,R;return s.jsxs("li",{children:["• ",(L=T.activity)==null?void 0:L.name," - ",(R=T.option)==null?void 0:R.name]},S)})})]}),_.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:_.tickets.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[_.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",_.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[_.hotel.roomType.name," - ",_.hotel.hotel.place]})]})]}),_.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:_.meals.map(T=>s.jsxs("li",{className:"capitalize",children:["• ",T.type," at ",T.place]},T.id))})]})]})]})]},P.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx(Xt,{className:"h-4 w-4 mr-2 text-green-600"}),"Inclusions *"]}),s.jsx("textarea",{value:f,onChange:P=>{N(P.target.value),j.inclusions&&C({...j,inclusions:""})},rows:10,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 transition-colors resize-none ${j.inclusions?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-green-500"}`,placeholder:`• Transportation as mentioned
• Accommodation in selected hotels
• Entry tickets to attractions
• Professional guide service`}),j.inclusions&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:j.inclusions}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"List what's included in this package template"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx(Lu,{className:"h-4 w-4 mr-2 text-red-600"}),"Exclusions *"]}),s.jsx("textarea",{value:h,onChange:P=>{b(P.target.value),j.exclusions&&C({...j,exclusions:""})},rows:10,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-red-500 transition-colors resize-none ${j.exclusions?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-red-500"}`,placeholder:`• International/domestic flights
• Travel insurance
• Personal expenses
• Tips and gratuities`}),j.exclusions&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:j.exclusions}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"List what's not included in this package template"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border border-green-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Calculated Template Cost"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Base Template Cost"}),s.jsxs("div",{className:"text-3xl font-bold mb-2",children:["$",x.toFixed(2)]}),s.jsx("div",{className:"text-green-100 text-sm",children:"Calculated from selected services for 2 adults (default)"})]})}),s.jsx("p",{className:"text-slate-600 text-sm mt-4 text-center",children:"This cost will be used as the base price for this template. Individual client quotes may vary based on passenger count and seasonal pricing."})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:y,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Review Template",s.jsx(ws,{className:"ml-2 h-5 w-5"})]})]})]})]})},P6=({client:e,dayPlans:t,templateData:n,onSave:r,onBack:a})=>{const{state:i}=At(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p}=i,[f,N]=ce.useState(!1),[h,b]=ce.useState(!1),j=async()=>{N(!0),setTimeout(()=>{r(),b(!0),N(!1),setTimeout(()=>{b(!1)},1500)},1e3)},C=g=>{const y=o.filter(S=>g.sightseeing.includes(S.id)),A=g.activities.map(S=>{const L=d.find(E=>E.id===S.activityId),R=L==null?void 0:L.options.find(E=>E.id===S.optionId);return{activity:L,option:R}}).filter(S=>S.activity&&S.option),P=u.filter(S=>g.entryTickets.includes(S.id)),_=p.filter(S=>g.meals.includes(S.id));let T=null;if(g.hotel){const S=l.find(R=>R.id===g.hotel.hotelId),L=S==null?void 0:S.roomTypes.find(R=>R.id===g.hotel.roomTypeId);S&&L&&(T={hotel:S,roomType:L})}return{sightseeing:y,activities:A,tickets:P,meals:_,hotel:T}},x=()=>{const g=`${e.name}

Duration: ${e.numberOfDays} days
Transportation: ${e.transportationMode}
Base Cost: $${n.baseCost}

Inclusions:
${n.inclusions}

Exclusions:
${n.exclusions}`;navigator.clipboard.writeText(g).then(()=>{alert("✅ Template details copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy details. Please try again.")})};return h?s.jsx("div",{className:"max-w-3xl mx-auto text-center py-12",children:s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-8",children:[s.jsx("div",{className:"bg-green-100 p-4 rounded-full inline-block mb-4",children:s.jsx(Xt,{className:"h-12 w-12 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Template Saved Successfully!"}),s.jsxs("p",{className:"text-green-700 mb-4",children:['Your fixed itinerary template "',e.name,'" has been created and is now available for use.']}),s.jsx("div",{className:"text-sm text-green-600",children:"Closing in a moment..."})]})}):s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Ready to Save"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 4 of 4 - Final review and save your template"})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(ws,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Overview"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.name}),s.jsx("div",{className:"text-sm text-slate-600",children:"Template Name"})]}),s.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-teal-600",children:e.numberOfDays}),s.jsx("div",{className:"text-sm text-slate-600",children:"Days"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.transportationMode}),s.jsx("div",{className:"text-sm text-slate-600",children:"Transportation"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",n.baseCost.toFixed(0)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Base Cost"})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Complete Template Itinerary"}),s.jsx("div",{className:"space-y-4",children:t.map(g=>{const y=C(g);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",g.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[y.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:y.sightseeing.map(A=>s.jsxs("li",{children:["• ",A.name]},A.id))})]}),y.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:y.activities.map((A,P)=>{var _,T;return s.jsxs("li",{children:["• ",(_=A.activity)==null?void 0:_.name," - ",(T=A.option)==null?void 0:T.name]},P)})})]}),y.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:y.tickets.map(A=>s.jsxs("li",{children:["• ",A.name]},A.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[y.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",y.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[y.hotel.roomType.name," - ",y.hotel.hotel.place]})]})]}),y.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:y.meals.map(A=>s.jsxs("li",{className:"capitalize",children:["• ",A.type," at ",A.place]},A.id))})]})]})]})]},g.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:"✅ Template Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:n.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:"❌ Template Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:n.exclusions})})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:a,className:"inline-flex items-center px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(Wi,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ui,{className:"mr-2 h-5 w-5"}),"Copy Template"]})]}),s.jsx("button",{onClick:j,disabled:f,className:"inline-flex items-center px-8 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving Template..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ts,{className:"mr-2 h-5 w-5"}),"Save Fixed Itinerary"]})})]})]})]})},L6=({onSave:e,onClose:t})=>{const{state:n}=Yt(),[r,a]=ce.useState(1),[i,l]=ce.useState(null),[o,d]=ce.useState([]),[u,p]=ce.useState(null),f=x=>{l(x),a(2)},N=x=>{d(x),a(3)},h=x=>{p(x),a(4)},b=()=>{var g;if(!i||!u)return;const x={id:Date.now().toString(),name:i.name,numberOfDays:i.numberOfDays,transportationMode:i.transportationMode,baseCost:u.baseCost,inclusions:u.inclusions,exclusions:u.exclusions,dayPlans:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:((g=n.user)==null?void 0:g.id)||"admin"};e(x)},j=()=>{a(r-1)},C=()=>{switch(r){case 1:return s.jsx(b1,{onNext:f,onClose:t});case 2:return i?s.jsx(Uh,{client:i,onNext:N,onBack:j,isAgent:!1,isFixedItinerary:!0}):null;case 3:return i?s.jsx(T6,{client:i,dayPlans:o,onNext:h,onBack:j}):null;case 4:return i&&u?s.jsx(P6,{client:i,dayPlans:o,templateData:u,onSave:b,onBack:j}):null;default:return s.jsx(b1,{onNext:f,onClose:t})}};return s.jsxs("div",{className:"bg-white",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(x=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm
                ${x<=r?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}
              `,children:x}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsxs("div",{className:`text-sm font-medium ${x<=r?"text-slate-900":"text-slate-500"}`,children:[x===1&&"Template Details",x===2&&"Day Planning",x===3&&"Inclusions & Pricing",x===4&&"Final Review"]})}),x<4&&s.jsx("div",{className:`h-px flex-1 mx-4 ${x<r?"bg-blue-600":"bg-slate-200"}`})]},x))})}),s.jsx("div",{className:"p-6",children:C()})]})},E6=()=>{const{state:e,addFixedItinerary:t,updateFixedItineraryData:n,deleteFixedItineraryData:r}=At();Yt();const{fixedItineraries:a}=e,[i,l]=ce.useState(""),[o,d]=ce.useState(!1),[u,p]=ce.useState(null),[f,N]=ce.useState({}),[h,b]=ce.useState(!1),[j,C]=ce.useState(null),x=a.filter(L=>L.name.toLowerCase().includes(i.toLowerCase())||L.transportationMode.toLowerCase().includes(i.toLowerCase())),g=async L=>{await t(L),d(!1)},y=L=>{p(L.id),N(L)},A=async()=>{if(u&&f.id){const L={...f,updatedAt:new Date().toISOString()};await n(L),p(null),N({})}},P=async(L,R)=>{confirm(`Are you sure you want to delete the fixed itinerary "${R}"?`)&&await r(L)},_=L=>{C(L),b(!0)},T=L=>{const R=`${L.name}

Duration: ${L.numberOfDays} days
Transportation: ${L.transportationMode}
Base Cost: $${L.baseCost}

Inclusions:
${L.inclusions}

Exclusions:
${L.exclusions}`;navigator.clipboard.writeText(R).then(()=>{alert("✅ Itinerary details copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy details. Please try again.")})},S=L=>{let R=`🌴 ${L.name.toUpperCase()} 🌴

`;R+=`📋 TEMPLATE DETAILS:
`,R+=`• Template Name: ${L.name}
`,R+=`• Duration: ${L.numberOfDays} days
`,R+=`• Transportation: ${L.transportationMode}
`,R+=`• Base Cost: $${L.baseCost}

`,L.dayPlans&&L.dayPlans.length>0&&(R+=`📅 DAY-BY-DAY ITINERARY:

`,L.dayPlans.forEach(E=>{const I=e.sightseeings.filter(M=>E.sightseeing.includes(M.id)),Y=E.activities.map(M=>{const H=e.activities.find(V=>V.id===M.activityId),Z=H==null?void 0:H.options.find(V=>V.id===M.optionId);return{activity:H,option:Z}}).filter(M=>M.activity&&M.option),K=e.entryTickets.filter(M=>E.entryTickets.includes(M.id)),te=e.meals.filter(M=>E.meals.includes(M.id));let G=null;if(E.hotel){const M=e.hotels.find(Z=>Z.id===E.hotel.hotelId),H=M==null?void 0:M.roomTypes.find(Z=>Z.id===E.hotel.roomTypeId);M&&H&&(G={hotel:M,roomType:H})}R+=`🗓️ DAY ${E.day}:
`,I.length>0&&(R+=`📍 SIGHTSEEING:
`,I.forEach(M=>{R+=`   • ${M.name}
`,M.description&&(R+=`     ${M.description}
`)})),G&&(R+=`🏨 ACCOMMODATION:
`,R+=`   • ${G.hotel.name} - ${G.roomType.name}
`,R+=`   • Location: ${G.hotel.place}
`,R+=`   • Category: ${G.hotel.starCategory}
`),Y.length>0&&(R+=`🎯 ACTIVITIES:
`,Y.forEach(M=>{var H,Z,V;R+=`   • ${(H=M.activity)==null?void 0:H.name} - ${(Z=M.option)==null?void 0:Z.name}
`,R+=`     Location: ${(V=M.activity)==null?void 0:V.location}
`})),K.length>0&&(R+=`🎫 ENTRY TICKETS:
`,K.forEach(M=>{R+=`   • ${M.name} - $${M.cost} per person
`})),te.length>0&&(R+=`🍽️ MEALS:
`,te.forEach(M=>{R+=`   • ${M.type.charAt(0).toUpperCase()+M.type.slice(1)} at ${M.place} - $${M.cost} per person
`})),R+=`
`})),R+=`💰 PRICING:
`,R+=`• Base Template Cost: $${L.baseCost}
`,R+=`• Transportation: ${L.transportationMode}

`,R+=`✅ INCLUSIONS:
`,R+=`${L.inclusions}

`,R+=`❌ EXCLUSIONS:
`,R+=`${L.exclusions}

`,R+=`📞 CONTACT:
`,R+=`Nomadller Solutions - Travel Agency Management
`,R+=`Professional Travel Planning Services

`,R+=`Template created on: ${new Date(L.createdAt).toLocaleDateString()}
`,R+=`Template ID: ${L.id}
`,navigator.clipboard.writeText(R).then(()=>{alert("✅ Complete itinerary template copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy itinerary. Please try again.")})};return s.jsxs(sn,{title:"Fixed Itinerary Management",subtitle:"Manage pre-defined itinerary templates",hideHeader:!0,children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Fixed Itinerary Templates"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search itineraries...",value:i,onChange:L=>l(L.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[s.jsx(As,{className:"h-5 w-5 mr-2"}),"Add New Itinerary"]})]})})}),s.jsx("div",{className:"space-y-4",children:x.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(ws,{className:"h-16 w-16 text-slate-400 mx-auto mb-6"}),s.jsx("h4",{className:"text-xl font-semibold text-slate-900 mb-2",children:i?"No fixed itineraries found":"No fixed itineraries yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-md mx-auto",children:i?"Try adjusting your search terms to find the itinerary you're looking for.":"Create your first fixed itinerary template using our powerful itinerary builder. Templates can be reused for similar client requests."}),!i&&s.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(As,{className:"h-5 w-5 mr-2"}),"Create Your First Template"]})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:x.map(L=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-lg transition-all duration-200",children:u===L.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Itinerary Name"}),s.jsx("input",{type:"text",value:f.name||"",onChange:R=>N({...f,name:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Days"}),s.jsx("input",{type:"number",min:"1",max:"30",value:f.numberOfDays||1,onChange:R=>N({...f,numberOfDays:parseInt(R.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost ($)"}),s.jsx("input",{type:"number",min:"0",step:"10",value:f.baseCost||0,onChange:R=>N({...f,baseCost:parseFloat(R.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation"}),s.jsx("input",{type:"text",value:f.transportationMode||"",onChange:R=>N({...f,transportationMode:R.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{p(null),N({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-teal-100 p-3 rounded-lg",children:s.jsx(ws,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 line-clamp-1",children:L.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[s.jsx(mt,{className:"h-3 w-3 mr-1"}),L.numberOfDays," days"]}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:[s.jsx(fs,{className:"h-3 w-3 mr-1"}),"$",L.baseCost]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>_(L),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View Details",children:s.jsx(ni,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(L),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Copy Details",children:s.jsx(Ui,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>y(L),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"Edit",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>P(L.id,L.name),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete",children:s.jsx(Sn,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(pt,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"line-clamp-1",children:L.transportationMode})]}),L.dayPlans&&L.dayPlans.length>0&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Day Plans Included"}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(_t,{className:"h-3 w-3 mr-1"}),"Hotels"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(is,{className:"h-3 w-3 mr-1"}),"Activities"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Meals"]})]})]}),s.jsx("div",{className:"pt-3 border-t border-slate-200",children:s.jsxs("div",{className:"text-xs text-slate-500",children:["Created ",new Date(L.createdAt).toLocaleDateString()]})})]})]})})},L.id))})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Templates"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ws,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Duration"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[a.length>0?Math.round(a.reduce((L,R)=>L+R.numberOfDays,0)/a.length):0," days"]})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(mt,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Base Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",a.length>0?Math.round(a.reduce((L,R)=>L+R.baseCost,0)/a.length):0]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Most Popular"}),s.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.length>0?`${a[0].numberOfDays} Days`:"N/A"})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-purple-600"})})]})})]})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-blue-600 to-teal-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:s.jsx(As,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Create Fixed Itinerary Template"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Build a reusable itinerary template"})]})]}),s.jsx("button",{onClick:()=>d(!1),className:"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:s.jsx(zt,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-80px)]",children:s.jsx(L6,{onSave:g,onClose:()=>d(!1)})})]})}),h&&j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Fixed Itinerary Details"}),s.jsx("button",{onClick:()=>b(!1),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:j.name}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[j.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transportation:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:j.transportationMode})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fs,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Base Cost:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:["$",j.baseCost]})]})]})]})]}),j.dayPlans&&j.dayPlans.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Complete Day-by-Day Itinerary"]}),s.jsx("div",{className:"space-y-4",children:j.dayPlans.map(L=>{const R=e.sightseeings.filter(te=>L.sightseeing.includes(te.id)),E=L.activities.map(te=>{const G=e.activities.find(H=>H.id===te.activityId),M=G==null?void 0:G.options.find(H=>H.id===te.optionId);return{activity:G,option:M}}).filter(te=>te.activity&&te.option),I=e.entryTickets.filter(te=>L.entryTickets.includes(te.id)),Y=e.meals.filter(te=>L.meals.includes(te.id));let K=null;if(L.hotel){const te=e.hotels.find(M=>M.id===L.hotel.hotelId),G=te==null?void 0:te.roomTypes.find(M=>M.id===L.hotel.roomTypeId);te&&G&&(K={hotel:te,roomType:G})}return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-teal-600"}),"Day ",L.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[R.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:R.map(te=>s.jsxs("li",{children:["• ",te.name]},te.id))})]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:E.map((te,G)=>{var M,H;return s.jsxs("li",{children:["• ",(M=te.activity)==null?void 0:M.name," - ",(H=te.option)==null?void 0:H.name]},G)})})]}),I.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:I.map(te=>s.jsxs("li",{children:["• ",te.name]},te.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[K&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",K.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[K.roomType.name," - ",K.hotel.place]})]})]}),Y.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:Y.map(te=>s.jsxs("li",{className:"capitalize",children:["• ",te.type," at ",te.place]},te.id))})]})]})]})]},L.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:"✅ Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:j.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:"❌ Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:j.exclusions})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>S(j),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Copy Complete Itinerary"]}),s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Close"})]})]})]})})]})},fh=({onNext:e})=>{const{state:t,dispatch:n}=At(),{state:r}=Yt(),{transportations:a}=t,[i,l]=ce.useState({name:"",whatsapp:"",countryCode:"+1",startDate:"",endDate:"",isFlexible:!1,flexibleMonth:"",adults:2,children:0,numberOfDays:7,transportationMode:""}),o=[{code:"+1",country:"US/CA"},{code:"+44",country:"UK"},{code:"+91",country:"IN"},{code:"+61",country:"AU"},{code:"+49",country:"DE"},{code:"+33",country:"FR"},{code:"+81",country:"JP"},{code:"+86",country:"CN"},{code:"+65",country:"SG"},{code:"+60",country:"MY"},{code:"+62",country:"ID"}],d=["January","February","March","April","May","June","July","August","September","October","November","December"],u=(h,b)=>{if(h&&b){const j=new Date(h),C=new Date(b),x=Math.abs(C.getTime()-j.getTime());return Math.ceil(x/(1e3*60*60*24))+1}return 7},p=(h,b)=>{const j={...i,[h]:b};j.startDate&&j.endDate&&(j.numberOfDays=u(j.startDate,j.endDate)),l(j)},f=()=>{const h=i.name&&i.whatsapp&&i.transportationMode,b=i.isFlexible?i.flexibleMonth:i.startDate&&i.endDate;return h&&b},N=h=>{var j;if(h.preventDefault(),!f())return;const b={id:Date.now().toString(),name:i.name,whatsapp:i.whatsapp,countryCode:i.countryCode,travelDates:{startDate:i.startDate,endDate:i.endDate,isFlexible:i.isFlexible,flexibleMonth:i.flexibleMonth},numberOfPax:{adults:i.adults,children:i.children},numberOfDays:i.numberOfDays,transportationMode:i.transportationMode,createdAt:new Date().toISOString(),createdBy:(j=r.user)==null?void 0:j.id};n({type:"ADD_CLIENT",payload:b}),e(b)};return s.jsx("div",{className:"max-w-2xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Client Details"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Step 1 of 4 - Basic Information"})]})]})}),s.jsxs("form",{onSubmit:N,className:"p-4 md:p-8 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Personal Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Client Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:h=>l({...i,name:h.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter client's full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"WhatsApp Number *"}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[s.jsx("select",{value:i.countryCode,onChange:h=>l({...i,countryCode:h.target.value}),className:"w-full sm:w-auto p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",children:o.map(({code:h,country:b})=>s.jsxs("option",{value:h,children:[h," (",b,")"]},h))}),s.jsx("input",{type:"tel",value:i.whatsapp,onChange:h=>l({...i,whatsapp:h.target.value}),className:"flex-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter WhatsApp number",required:!0})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Dates"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"flexible",checked:i.isFlexible,onChange:h=>l({...i,isFlexible:h.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"flexible",className:"text-sm md:text-base font-medium text-slate-700",children:"Flexible dates (month only)"})]}),i.isFlexible?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Preferred Month"}),s.jsxs("select",{value:i.flexibleMonth,onChange:h=>l({...i,flexibleMonth:h.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:i.isFlexible,children:[s.jsx("option",{value:"",children:"Select a month"}),d.map(h=>s.jsx("option",{value:h,children:h},h))]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",value:i.startDate,onChange:h=>p("startDate",h.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!i.isFlexible})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"End Date *"}),s.jsx("input",{type:"date",value:i.endDate,onChange:h=>p("endDate",h.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!i.isFlexible})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Number of Passengers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Adults"}),s.jsx("input",{type:"number",min:"1",value:i.adults,onChange:h=>l({...i,adults:parseInt(h.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Children"}),s.jsx("input",{type:"number",min:"0",value:i.children,onChange:h=>l({...i,children:parseInt(h.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(pt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",value:i.numberOfDays,onChange:h=>l({...i,numberOfDays:parseInt(h.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",disabled:!i.isFlexible&&i.startDate&&i.endDate}),s.jsx(zr,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),!i.isFlexible&&i.startDate&&i.endDate&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-calculated from dates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:i.transportationMode,onChange:h=>l({...i,transportationMode:h.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!0,children:[s.jsx("option",{value:"",children:"Select transportation"}),a.map(h=>s.jsxs("option",{value:h.vehicleName,children:[h.vehicleName," (",h.type.replace("-"," "),")"]},h.id))]})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 md:pt-6 border-t border-slate-200",children:s.jsx("button",{type:"submit",disabled:!f(),className:"inline-flex items-center px-4 md:px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:"Next Step"})})]})]})})},Yp=({client:e,onNext:t,onBack:n,userType:r})=>{const{state:a}=At(),{fixedItineraries:i}=a,[l,o]=ce.useState(null),[d,u]=ce.useState(null),p=i.filter(j=>j.numberOfDays===e.numberOfDays),f=()=>{l==="new"?t("new"):l==="fixed"&&d&&t("fixed",d)},N=()=>{switch(r){case"admin":return"from-blue-600 to-teal-600";case"agent":return"from-teal-600 to-green-600";case"sales":return"from-purple-600 to-pink-600";default:return"from-blue-600 to-teal-600"}},b=(()=>{switch(r){case"admin":return"blue";case"agent":return"teal";case"sales":return"purple";default:return"blue"}})();return s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:`bg-gradient-to-r ${N()} px-4 md:px-8 py-4 md:py-6`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(ws,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Choose Itinerary Type"}),s.jsxs("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:["Step 2 of ","5"," - Select how to create your itinerary"]})]})]})}),s.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Choose Your Approach"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all ${l==="new"?`border-${b}-500 bg-${b}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>{o("new"),u(null)},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-${b}-100 p-4 rounded-lg inline-block mb-4`,children:s.jsx(As,{className:`h-8 w-8 text-${b}-600`})}),s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Create New Itinerary"}),s.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Build a completely custom itinerary from scratch with full control over every detail."}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(mt,{className:"h-4 w-4"}),s.jsx("span",{children:"Day-by-day planning"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(pt,{className:"h-4 w-4"}),s.jsx("span",{children:"Custom sightseeing selection"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(_t,{className:"h-4 w-4"}),s.jsx("span",{children:"Hotel & activity choices"})]})]})]})}),s.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all ${l==="fixed"?`border-${b}-500 bg-${b}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>{o("fixed"),u(null)},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-green-100 p-4 rounded-lg inline-block mb-4",children:s.jsx(ws,{className:"h-8 w-8 text-green-600"})}),s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Select Fixed Itinerary"}),s.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Choose from pre-designed itinerary templates that match your trip duration."}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Xt,{className:"h-4 w-4"}),s.jsx("span",{children:"Pre-planned activities"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(fs,{className:"h-4 w-4"}),s.jsx("span",{children:"Quick pricing setup"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(ws,{className:"h-4 w-4"}),s.jsxs("span",{children:[p.length," templates available"]})]})]})]})})]}),l==="fixed"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900",children:["Available ",e.numberOfDays,"-Day Itineraries"]}),p.length===0?s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[s.jsx(ws,{className:"h-8 w-8 text-yellow-600 mx-auto mb-3"}),s.jsx("h5",{className:"text-yellow-900 font-medium mb-2",children:"No Fixed Itineraries Available"}),s.jsxs("p",{className:"text-yellow-700 text-sm mb-4",children:["No pre-designed itineraries are available for ",e.numberOfDays," days."]}),s.jsxs("button",{onClick:()=>o("new"),className:`inline-flex items-center px-4 py-2 bg-${b}-600 text-white rounded-lg hover:bg-${b}-700 transition-colors`,children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Create New Instead"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(j=>s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${(d==null?void 0:d.id)===j.id?`border-${b}-500 bg-${b}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>u(j),children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`bg-${b}-100 p-2 rounded-lg`,children:s.jsx(ws,{className:`h-5 w-5 text-${b}-600`})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900",children:j.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[s.jsx(mt,{className:"h-3 w-3 mr-1"}),j.numberOfDays," days"]}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:[s.jsx(fs,{className:"h-3 w-3 mr-1"}),"$",j.baseCost]})]})]})]})}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{className:"h-4 w-4"}),s.jsx("span",{children:j.transportationMode})]}),j.dayPlans&&j.dayPlans.length>0&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 mt-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Includes:"}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(_t,{className:"h-3 w-3 mr-1"}),"Hotels"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(is,{className:"h-3 w-3 mr-1"}),"Activities"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Meals"]})]})]})]})]},j.id))})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:n,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:f,disabled:!l||l==="fixed"&&!d,className:`inline-flex items-center px-6 py-3 bg-gradient-to-r ${N()} text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105`,children:["Continue",s.jsx(b4,{className:"ml-2 h-5 w-5"})]})]})]})]})})},Jp=({client:e,fixedItinerary:t,onNext:n,onBack:r,userType:a})=>{const{state:i}=At(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p}=i,[f,N]=ce.useState(0),[h,b]=ce.useState(83),C=a==="admin"?t.baseCost:a==="agent"?t.baseCost+35:t.baseCost+50,x=C+f,g=()=>{switch(a){case"admin":return"from-blue-600 to-teal-600";case"agent":return"from-teal-600 to-green-600";case"sales":return"from-purple-600 to-pink-600";default:return"from-blue-600 to-teal-600"}},y=()=>{switch(a){case"admin":return"Profit Margin";case"agent":return"Agent Profit";case"sales":return"Sales Commission";default:return"Profit Margin"}},A=()=>{const _={id:`itinerary-${e.id}-${Date.now()}`,client:e,dayPlans:t.dayPlans,totalBaseCost:C,profitMargin:f,finalPrice:x,exchangeRate:h,version:1,lastUpdated:new Date().toISOString(),updatedBy:a,changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:`Itinerary created from fixed template: ${t.name}`,timestamp:new Date().toISOString(),updatedBy:a}]};n(_)},P=_=>{const T=o.filter(I=>_.sightseeing.includes(I.id)),S=_.activities.map(I=>{const Y=d.find(te=>te.id===I.activityId),K=Y==null?void 0:Y.options.find(te=>te.id===I.optionId);return{activity:Y,option:K}}).filter(I=>I.activity&&I.option),L=u.filter(I=>_.entryTickets.includes(I.id)),R=p.filter(I=>_.meals.includes(I.id));let E=null;if(_.hotel){const I=l.find(K=>K.id===_.hotel.hotelId),Y=I==null?void 0:I.roomTypes.find(K=>K.id===_.hotel.roomTypeId);I&&Y&&(E={hotel:I,roomType:Y})}return{sightseeing:T,activities:S,tickets:L,meals:R,hotel:E}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:`bg-gradient-to-r ${g()} px-4 md:px-8 py-4 md:py-6`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review Fixed Itinerary"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Step 3 of 5 - Review template and set pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(ws,{className:"h-5 w-5 mr-2 text-green-600"}),"Selected Template: ",t.name]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.numberOfDays}),s.jsx("div",{className:"text-sm text-slate-600",children:"Days"})]}),s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600",children:t.transportationMode}),s.jsx("div",{className:"text-sm text-slate-600",children:"Transportation"})]}),s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",t.baseCost]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Base Template Cost"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Complete Itinerary Preview"]}),s.jsx("div",{className:"space-y-4",children:t.dayPlans.map(_=>{const T=P(_);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",_.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[T.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.sightseeing.map(S=>s.jsxs("li",{children:["• ",S.name]},S.id))})]}),T.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.activities.map((S,L)=>{var R,E;return s.jsxs("li",{children:["• ",(R=S.activity)==null?void 0:R.name," - ",(E=S.option)==null?void 0:E.name]},L)})})]}),T.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.tickets.map(S=>s.jsxs("li",{children:["• ",S.name]},S.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[T.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",T.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[T.hotel.roomType.name," - ",T.hotel.hotel.place]})]})]}),T.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.meals.map(S=>s.jsxs("li",{className:"capitalize",children:["• ",S.type," at ",S.place]},S.id))})]})]})]})]},_.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:"✅ Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:t.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:"❌ Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:t.exclusions})})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-6 flex items-center",children:[s.jsx(Fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:h,onChange:_=>b(parseFloat(_.target.value)||83),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter current exchange rate"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Current rate: 1 USD = ₹",h]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:a==="admin"?"Template Base Cost":"Package Cost"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["$",C.toFixed(2)]}),s.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:["₹",(C*h).toLocaleString("en-IN")]})]}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:a==="admin"?"Original template cost":"Includes template cost with markup"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:["Add ",y()," (USD)"]}),s.jsx("input",{type:"number",min:"0",step:a==="admin"?"50":a==="agent"?"10":"25",value:f,onChange:_=>N(parseFloat(_.target.value)||0),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Enter your ${y().toLowerCase()} in USD`}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Your ",y().toLowerCase()," on this package"]})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:`bg-gradient-to-r ${g().replace("from-","from-").replace("to-","to-").replace("-600","-500").replace("-600","-500")} text-white rounded-xl p-6 w-full text-center`,children:[s.jsx("h4",{className:"text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("div",{className:"text-3xl font-bold",children:["$",x.toFixed(2)]}),s.jsxs("div",{className:"text-2xl font-bold text-opacity-80",children:["₹",(x*h).toLocaleString("en-IN")]})]}),s.jsxs("p",{className:"text-opacity-80 text-sm",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-30",children:s.jsxs("div",{className:"text-sm space-y-1 text-opacity-80",children:[s.jsxs("div",{children:["Base Cost: $",C.toFixed(2)," / ₹",(C*h).toLocaleString("en-IN")]}),s.jsxs("div",{children:["Your ",y(),": $",f.toFixed(2)," / ₹",(f*h).toLocaleString("en-IN")]})]})})]})})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:A,className:`inline-flex items-center px-6 py-3 bg-gradient-to-r ${g()} text-white font-semibold rounded-lg hover:opacity-90 transition-all duration-200 transform hover:scale-105`,children:["Generate Summary",s.jsx(fs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},D6=({client:e,dayPlans:t,onNext:n,onBack:r})=>{const{state:a}=At(),{hotels:i,sightseeings:l,activities:o,entryTickets:d,meals:u,transportations:p}=a,[f,N]=ce.useState(0),[h,b]=ce.useState(83),j=Gi(e,t,i,l,o,d,u,p),C=j+f,x=()=>{const y={id:`itinerary-${e.id}-${Date.now()}`,client:e,dayPlans:t,totalBaseCost:j,profitMargin:f,finalPrice:C,exchangeRate:h,version:1,lastUpdated:new Date().toISOString(),updatedBy:"admin",changeLog:[]};n(y)},g=y=>{const A=l.filter(L=>y.sightseeing.includes(L.id)),P=y.activities.map(L=>{const R=o.find(I=>I.id===L.activityId),E=R==null?void 0:R.options.find(I=>I.id===L.optionId);return{activity:R,option:E}}).filter(L=>L.activity&&L.option),_=d.filter(L=>y.entryTickets.includes(L.id)),T=u.filter(L=>y.meals.includes(L.id));let S=null;if(y.hotel){const L=i.find(E=>E.id===y.hotel.hotelId),R=L==null?void 0:L.roomTypes.find(E=>E.id===y.hotel.roomTypeId);L&&R&&(S={hotel:L,roomType:R})}return{sightseeing:A,activities:P,tickets:_,meals:T,hotel:S}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Costing"}),s.jsx("p",{className:"text-green-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(y=>{const A=g(y);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",y.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[A.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:A.sightseeing.map(P=>s.jsxs("li",{children:["• ",P.name]},P.id))})]}),A.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:A.activities.map((P,_)=>{var T,S;return s.jsxs("li",{children:["• ",(T=P.activity)==null?void 0:T.name," - ",(S=P.option)==null?void 0:S.name]},_)})})]}),A.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:A.tickets.map(P=>s.jsxs("li",{children:["• ",P.name]},P.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[A.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",A.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[A.hotel.roomType.name," - ",A.hotel.hotel.place]})]})]}),A.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:A.meals.map(P=>s.jsxs("li",{className:"capitalize",children:["• ",P.type," at ",P.place]},P.id))})]})]})]})]},y.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(Fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown & Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:h,onChange:y=>b(parseFloat(y.target.value)||83),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm md:text-base",placeholder:"Enter current exchange rate"}),s.jsxs("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:["Current rate: 1 USD = ₹",h]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Total Base Cost"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Vt(j,"USD")}),s.jsx("div",{className:"text-base md:text-lg font-semibold text-blue-600",children:Vt(Jn(j,h),"INR")})]}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Profit Margin (USD)"}),s.jsx("input",{type:"number",min:"0",step:"50",value:f,onChange:y=>N(parseFloat(y.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm md:text-base",placeholder:"Enter profit in USD"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your profit margin or commission amount"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Vt(C,"USD")}),s.jsx("div",{className:"text-xl md:text-2xl font-bold text-green-100",children:Vt(Jn(C,h),"INR")})]}),s.jsxs("p",{className:"text-green-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-green-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Base Cost: ",Vt(j,"USD")," / ",Vt(Jn(j,h),"INR")]}),s.jsxs("div",{children:["Your Profit: ",Vt(f,"USD")," / ",Vt(Jn(f,h),"INR")]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:r,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:x,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(fs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},I6=({itinerary:e,onBack:t,onStartNew:n})=>{var x;const{state:r,dispatch:a}=At(),{state:i}=Yt(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p,transportations:f}=r;Za.useEffect(()=>{var A;if(!r.clients.find(P=>P.id===e.client.id)){const P={...e.client,followUpStatus:{status:"itinerary-created",updatedAt:new Date().toISOString(),remarks:"Initial itinerary created by admin",nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00"},followUpHistory:[{id:Date.now().toString(),status:"itinerary-created",remarks:"Initial itinerary created by admin",updatedAt:new Date().toISOString(),nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00",updatedBy:((A=i.user)==null?void 0:A.id)||"admin"}],nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00"};a({type:"ADD_CLIENT",payload:P})}const y={...e,id:`itinerary-${e.client.id}-${Date.now()}`,version:1,lastUpdated:new Date().toISOString(),updatedBy:"admin",changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:"Initial itinerary created",timestamp:new Date().toISOString(),updatedBy:"admin"}]};a({type:"ADD_ITINERARY",payload:y})},[e,a,(x=i.user)==null?void 0:x.id,r.clients]);const N=()=>{const g=new Qe,y=g.internal.pageSize.width,A=20;let P=A;g.setFontSize(20),g.setFont("helvetica","bold"),g.text("Travel Itinerary",y/2,P,{align:"center"}),P+=15,g.setFontSize(12),g.setFont("helvetica","normal"),g.text(`Client: ${e.client.name}`,A,P),P+=8,g.text(`Contact: ${e.client.countryCode} ${e.client.whatsapp}`,A,P),P+=8,g.text(`Duration: ${e.client.numberOfDays} days`,A,P),P+=8,g.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,A,P),P+=15,g.setFont("helvetica","bold"),g.text("Day-by-Day Itinerary:",A,P),P+=10,e.dayPlans.forEach(_=>{if(P>250&&(g.addPage(),P=A),g.setFont("helvetica","bold"),g.text(`Day ${_.day}:`,A,P),P+=8,g.setFont("helvetica","normal"),_.sightseeing.length>0){const T=_.sightseeing.map(S=>{const L=o.find(R=>R.id===S);return L?L.name:"Unknown"}).join(", ");g.text(`• Sightseeing: ${T}`,A+5,P),P+=6}if(_.hotel){const T=l.find(L=>L.id===_.hotel.hotelId),S=T==null?void 0:T.roomTypes.find(L=>L.id===_.hotel.roomTypeId);T&&S&&(g.text(`• Hotel: ${T.name} - ${S.name}`,A+5,P),P+=6)}_.activities.length>0&&_.activities.forEach(T=>{const S=d.find(R=>R.id===T.activityId),L=S==null?void 0:S.options.find(R=>R.id===T.optionId);S&&L&&(g.text(`• Activity: ${S.name} - ${L.name}`,A+5,P),P+=6)}),P+=5}),P>220&&(g.addPage(),P=A),g.setFont("helvetica","bold"),g.text("Pricing Summary:",A,P),P+=10,g.setFont("helvetica","normal"),g.text(`Base Cost: $${e.totalBaseCost.toFixed(2)}`,A,P),P+=8,g.text(`Profit Margin: $${e.profitMargin.toFixed(2)}`,A,P),P+=8,g.setFont("helvetica","bold"),g.text(`Total Price: $${e.finalPrice.toFixed(2)}`,A,P),P+=8,g.text(`Total Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,A,P),g.save(`${e.client.name}-itinerary.pdf`)},h=g=>{const y=o.filter(S=>g.sightseeing.includes(S.id)),A=g.activities.map(S=>{const L=d.find(E=>E.id===S.activityId),R=L==null?void 0:L.options.find(E=>E.id===S.optionId);return{activity:L,option:R}}).filter(S=>S.activity&&S.option),P=u.filter(S=>g.entryTickets.includes(S.id)),_=p.filter(S=>g.meals.includes(S.id));let T=null;if(g.hotel){const S=l.find(R=>R.id===g.hotel.hotelId),L=S==null?void 0:S.roomTypes.find(R=>R.id===g.hotel.roomTypeId);S&&L&&(T={hotel:S,roomType:L})}return{sightseeing:y,activities:A,tickets:P,meals:_,hotel:T}},j=(()=>{let g=0,y=0,A=0,P=0,_=0,T=0,S=[];const L=e.client.numberOfPax.adults+e.client.numberOfPax.children,R=f.find(E=>E.vehicleName===e.client.transportationMode);return R&&R.type!=="cab"&&(g=R.costPerDay*e.client.numberOfDays),e.dayPlans.forEach(E=>{let I=0,Y=0,K=0,te=0,G=0;if(E.hotel){const Z=l.find(V=>V.id===E.hotel.hotelId);if(Z){const V=Z.roomTypes.find(ie=>ie.id===E.hotel.roomTypeId);if(V){const ie=new Date(e.client.travelDates.startDate),D=ie.getMonth()+1,q=ie.getDate();let J=V.offSeasonPrice;D===12&&q>=20||D===1&&q<=5?J=V.peakSeasonPrice:(D===7||D===8)&&(J=V.seasonPrice),y+=J,I=J}}}const M=e.client.transportationMode.toLowerCase();M.includes("cab")||M==="private cab service"?E.sightseeing.forEach(Z=>{const V=o.find(ie=>ie.id===Z);if(V&&V.vehicleCosts){let ie=0;L<=6?ie=V.vehicleCosts.avanza:L<=12?ie=V.vehicleCosts.hiace:L<=27?ie=V.vehicleCosts.miniBus:L<=32?ie=V.vehicleCosts.bus32:ie=V.vehicleCosts.bus39,A+=ie,Y+=ie}}):E.sightseeing.forEach(Z=>{const V=o.find(ie=>ie.id===Z);if(V){let ie=0;V.transportationMode==="self-drive-car"?ie=15:V.transportationMode==="self-drive-scooter"&&(ie=8),A+=ie,Y+=ie}}),E.activities.forEach(Z=>{const V=d.find(ie=>ie.id===Z.activityId);if(V){const ie=V.options.find(D=>D.id===Z.optionId);if(ie){let D=0;if(ie.costForHowMany>=L)D=ie.cost;else{const q=Math.ceil(L/ie.costForHowMany);D=ie.cost*q}P+=D,K+=D}}}),E.entryTickets.forEach(Z=>{const V=u.find(ie=>ie.id===Z);if(V){const ie=V.cost*L;_+=ie,te+=ie}}),E.meals.forEach(Z=>{const V=p.find(ie=>ie.id===Z);if(V){const ie=V.cost*L;T+=ie,G+=ie}});const H=I+Y+K+te+G;S.push({day:E.day,accommodation:I,sightseeing:Y,activities:K,tickets:te,meals:G,total:H})}),{transportation:g,accommodation:y,sightseeing:A,activities:P,tickets:_,meals:T,dailyBreakdown:S}})(),C=()=>{const g=e.client.numberOfPax.adults+e.client.numberOfPax.children;let y=`🌴 TRAVEL ITINERARY 🌴

`;y+=`📋 CLIENT DETAILS:
`,y+=`• Client: ${e.client.name}
`,y+=`• Contact: ${e.client.countryCode} ${e.client.whatsapp}
`,y+=`• Duration: ${e.client.numberOfDays} days
`,y+=`• Passengers: ${g} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,y+=`• Transportation: ${e.client.transportationMode}

`,y+=`📅 DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(P=>{const _=h(P);y+=`🗓️ DAY ${P.day}:
`,_.sightseeing.length>0&&(y+=`📍 SIGHTSEEING:
`,_.sightseeing.forEach(T=>{y+=`   • ${T.name}
`})),_.hotel&&(y+=`🏨 ACCOMMODATION:
`,y+=`   • ${_.hotel.hotel.name} - ${_.hotel.roomType.name}
`,y+=`   • Location: ${_.hotel.hotel.place}
`),_.activities.length>0&&(y+=`🎯 ACTIVITIES:
`,_.activities.forEach(T=>{var S,L;y+=`   • ${(S=T.activity)==null?void 0:S.name} - ${(L=T.option)==null?void 0:L.name}
`})),_.tickets.length>0&&(y+=`🎫 ENTRY TICKETS:
`,_.tickets.forEach(T=>{y+=`   • ${T.name}
`})),_.meals.length>0&&(y+=`🍽️ MEALS:
`,_.meals.forEach(T=>{y+=`   • ${T.type.charAt(0).toUpperCase()+T.type.slice(1)} at ${T.place}
`})),y+=`
`}),y+=`💰 PRICING:
`,y+=`• Total Package Price: $${e.finalPrice.toFixed(2)}
`,y+=`• Total Package Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,y+=`• Exchange Rate: 1 USD = ₹${e.exchangeRate}

`;const A=new Map;e.dayPlans.forEach(P=>{if(P.hotel){const _=l.find(S=>S.id===P.hotel.hotelId),T=_==null?void 0:_.roomTypes.find(S=>S.id===P.hotel.roomTypeId);if(_&&T){const S=`${_.id}-${T.id}`;A.has(S)?A.get(S).nights+=1:A.set(S,{hotel:_,roomType:T,nights:1})}}}),y+=`✅ INCLUSIONS:
`,y+=`• ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,A.size>0&&A.forEach(({hotel:P,roomType:_,nights:T})=>{y+=`• ${T} night${T>1?"s":""} stay ${P.name} in ${_.name}
`}),e.dayPlans.some(P=>P.sightseeing.length>0)&&(y+=`• Sightseeing tours as mentioned
`),e.dayPlans.some(P=>P.activities.length>0)&&(y+=`• Activities and experiences as listed
`),e.dayPlans.some(P=>P.entryTickets.length>0)&&(y+=`• Entry tickets to attractions
`),e.dayPlans.some(P=>P.meals.length>0)&&(y+=`• Meals as specified in itinerary
`),y+=`• Professional travel planning service
`,y+=`• 24/7 customer support during travel

`,y+=`❌ EXCLUSIONS:
`,y+=`• International/domestic flights
`,y+=`• Travel insurance
`,y+=`• Personal expenses and shopping
`,y+=`• Tips and gratuities
`,y+=`• Any meals not mentioned in inclusions
`,y+=`• Additional activities not listed
`,y+=`• Visa fees and documentation
`,y+=`• Emergency medical expenses

`,y+=`📞 CONTACT:
`,y+=`Nomadller Solutions - Travel Agency Management
`,y+=`Professional Travel Planning Services

`,y+=`Generated on: ${new Date().toLocaleDateString()}
`,y+=`Package ID: ${e.client.id}
`,navigator.clipboard.writeText(y).then(()=>{alert("✅ Complete itinerary copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy itinerary. Please try again.")})};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Itinerary Complete!"}),s.jsx("p",{className:"text-green-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-green-900",children:"Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-green-700 mt-1 text-sm md:text-base",children:["Your detailed itinerary for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qr,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Contact:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.countryCode," ",e.client.whatsapp]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(g=>{const y=h(g);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",g.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[y.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:y.sightseeing.map(A=>s.jsxs("li",{children:["• ",A.name]},A.id))})]}),y.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:y.activities.map((A,P)=>{var _,T;return s.jsxs("li",{children:["• ",(_=A.activity)==null?void 0:_.name," - ",(T=A.option)==null?void 0:T.name]},P)})})]}),y.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:y.tickets.map(A=>s.jsxs("li",{children:["• ",A.name]},A.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[y.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",y.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[y.hotel.roomType.name," - ",y.hotel.hotel.place]})]})]}),y.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:y.meals.map(A=>s.jsxs("li",{className:"capitalize",children:["• ",A.type," at ",A.place]},A.id))})]})]})]})]},g.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Daily Cost Analysis"]}),s.jsx("p",{className:"text-slate-600 mb-4 text-sm md:text-base",children:"Detailed day-by-day cost breakdown for complete transparency"}),s.jsx("div",{className:"space-y-4",children:j.dailyBreakdown.map(g=>s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-semibold text-slate-900",children:["Day ",g.day]}),s.jsxs("div",{className:"text-lg font-bold text-indigo-600",children:["$",g.total.toFixed(2)]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 text-sm",children:[g.accommodation>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Hotel"}),s.jsxs("div",{className:"font-semibold",children:["$",g.accommodation.toFixed(2)]})]}),g.sightseeing>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Sightseeing"}),s.jsxs("div",{className:"font-semibold",children:["$",g.sightseeing.toFixed(2)]})]}),g.activities>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Activities"}),s.jsxs("div",{className:"font-semibold",children:["$",g.activities.toFixed(2)]})]}),g.tickets>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Tickets"}),s.jsxs("div",{className:"font-semibold",children:["$",g.tickets.toFixed(2)]})]}),g.meals>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Meals"}),s.jsxs("div",{className:"font-semibold",children:["$",g.meals.toFixed(2)]})]})]})]},g.day))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Complete Cost Analysis & Calculations"]}),s.jsx("p",{className:"text-slate-600 mb-4 text-sm md:text-base",children:"Comprehensive breakdown of all costs with detailed calculations and pricing logic"}),s.jsxs("div",{className:"space-y-6",children:[j.transportation>0&&s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(Qa,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-semibold text-slate-900",children:"Transportation Analysis"})]}),s.jsxs("div",{className:"text-sm text-slate-600 mb-2",children:["Vehicle: ",e.client.transportationMode," • Duration: ",e.client.numberOfDays," days"]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.transportation.toFixed(2)]}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Self-drive vehicle rental including fuel and insurance"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(_t,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Accommodation"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.accommodation.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Hotels & room charges with seasonal pricing"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[e.client.numberOfDays," night",e.client.numberOfDays!==1?"s":""," • Various locations"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(pt,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Sightseeing"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.sightseeing.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:e.client.transportationMode.toLowerCase().includes("cab")?"Vehicle costs based on group size":"Fuel & parking for self-drive tours"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(is,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Activities"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.activities.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Adventure & experiences with group calculations"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Costs calculated per activity capacity requirements"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(ps,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Entry Tickets"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.tickets.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Attraction entries calculated per person"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["$",j.tickets.toFixed(2)," ÷ ",e.client.numberOfPax.adults+e.client.numberOfPax.children," = $",(j.tickets/(e.client.numberOfPax.adults+e.client.numberOfPax.children)).toFixed(2)," per person"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(Gt,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Meals"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.meals.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Food & beverages calculated per person"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Various restaurants and meal types included"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(Fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Calculation Summary"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsx("div",{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Base Services Total:"}),s.jsxs("span",{className:"font-semibold",children:["$",(j.transportation+j.accommodation+j.sightseeing+j.activities+j.tickets+j.meals).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Passenger Count:"}),s.jsxs("span",{className:"font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Trip Duration:"}),s.jsxs("span",{className:"font-semibold",children:[e.client.numberOfDays," days"]})]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cost per Person:"}),s.jsxs("span",{className:"font-semibold",children:["$",(e.totalBaseCost/(e.client.numberOfPax.adults+e.client.numberOfPax.children)).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cost per Day:"}),s.jsxs("span",{className:"font-semibold",children:["$",(e.totalBaseCost/e.client.numberOfDays).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transportation Mode:"}),s.jsx("span",{className:"font-semibold text-xs",children:e.client.transportationMode})]})]})})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",j.meals.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Food & beverages"})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700",children:"Subtotal (Base Cost):"}),s.jsxs("span",{className:"font-semibold text-slate-900",children:["$",e.totalBaseCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700",children:"Profit Margin:"}),s.jsxs("span",{className:"font-semibold text-slate-900",children:["$",e.profitMargin.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[s.jsx("span",{className:"text-slate-900",children:"Total (USD):"}),s.jsxs("span",{className:"text-green-600",children:["$",e.finalPrice.toFixed(2)]})]})]}),s.jsx("div",{className:"flex items-center justify-center mt-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Total Package Price"}),s.jsxs("div",{className:"text-2xl font-bold mb-1",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-lg font-semibold text-green-100",children:["₹",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-xs text-green-100 mt-2",children:["Exchange Rate: 1 USD = ₹",e.exchangeRate]})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Wi,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:N,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Fh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:C,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(Ui,{className:"mr-2 h-5 w-5"}),"Copy Itinerary"]})]}),s.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Ip,{className:"mr-2 h-5 w-5"}),"Create New Itinerary"]})]})]})]})})},O6=()=>{const[e,t]=ce.useState(1),[n,r]=ce.useState(null),[a,i]=ce.useState(null),[l,o]=ce.useState(null),[d,u]=ce.useState([]),[p,f]=ce.useState(null),N=A=>{r(A),t(2)},h=(A,P)=>{i(A),o(P),t(3)},b=A=>{u(A),t(4)},j=A=>{f(A),t(5)},C=A=>{f(A),t(5)},x=()=>{t(e-1)},g=()=>{t(1),r(null),i(null),o(null),u([]),f(null)},y=()=>{switch(e){case 1:return s.jsx(fh,{onNext:N});case 2:return n?s.jsx(Yp,{client:n,onNext:h,onBack:x,userType:"admin"}):null;case 3:return a==="fixed"&&l?s.jsx(Jp,{client:n,fixedItinerary:l,onNext:C,onBack:x,userType:"admin"}):a==="new"&&n?s.jsx(Uh,{client:n,onNext:b,onBack:x,isAgent:!1}):null;case 4:return n?s.jsx(D6,{client:n,dayPlans:d,onNext:j,onBack:x}):null;case 5:return p?s.jsx(I6,{itinerary:p,onBack:x,onStartNew:g}):null;default:return s.jsx(fh,{onNext:N})}};return e>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(A=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${A<=e?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:A}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${A<=e?"text-slate-900":"text-slate-500"}`,children:[A===1&&"Client Details",A===2&&"Itinerary Type",A===3&&(a==="fixed"?"Review Template":"Day Planning"),A===4&&"Review & Costing",A===5&&"Final Summary"]})}),A<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${A<e?"bg-blue-600":"bg-slate-200"}`})]},A))})})}),y()]})}):s.jsx(sn,{title:"Itinerary Builder",subtitle:"Create detailed travel packages for your clients",children:y()})},F6=()=>{var u,p;const{logout:e,state:t}=Yt(),[n,r]=ce.useState("dashboard"),[a,i]=ce.useState(!1),l=f=>{if(r(f),i(!1),f==="agents"){const N=localStorage.getItem("registeredAgents");if(N)try{const h=JSON.parse(N);setTimeout(()=>{window.dispatchEvent(new Event("refreshAgents"))},50)}catch(h){console.error("Error loading agents:",h)}}},o=[{id:"dashboard",name:"Dashboard",icon:oh,description:"Overview & client leads"},{id:"itinerary",name:"Itinerary Builder",icon:As,description:"Create new packages"},{id:"agents",name:"Agent Management",icon:Op,description:"Manage travel agents"},{id:"sales",name:"Sales Management",icon:Fs,description:"Manage sales team & performance"},{id:"fixedItineraries",name:"Fixed Itineraries",icon:ws,description:"Manage itinerary templates"}],d=()=>{switch(n){case"dashboard":return s.jsx(w3,{onNavigateToSection:r});case"itinerary":return s.jsx(O6,{});case"transportation":return s.jsx(N3,{});case"hotels":return s.jsx(j3,{});case"sightseeing":return s.jsx(S3,{});case"activities":return s.jsx(_3,{});case"tickets":return s.jsx(k3,{});case"meals":return s.jsx(C3,{});case"agents":return s.jsx(A3,{});case"sales":return s.jsx(A6,{});case"fixedItineraries":return s.jsx(E6,{});default:return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-slate-200 max-w-md",children:[s.jsx("div",{className:"bg-blue-100 p-4 rounded-lg mb-4 inline-block",children:s.jsx(C4,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Coming Soon"}),s.jsxs("p",{className:"text-slate-600 mb-4",children:["The ",n," management module is currently under development."]}),s.jsxs("button",{onClick:()=>r("dashboard"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(oh,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]})})})}};return s.jsx(Hp,{children:s.jsxs("div",{className:"flex h-screen bg-slate-50",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${a?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 p-2 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Admin Panel"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 text-slate-500 hover:text-slate-700",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:(u=t.user)==null?void 0:u.name}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:(p=t.user)==null?void 0:p.role})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:o.map(f=>s.jsxs("button",{onClick:()=>{l(f.id)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${n===f.id?"bg-gradient-to-r from-blue-600 to-teal-600 text-white font-medium shadow-md":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(f.icon,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:f.name}),s.jsx("div",{className:`text-xs ${n===f.id?"text-blue-100":"text-slate-500"}`,children:f.description})]})]},f.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 z-40 lg:hidden",onClick:()=>i(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-slate-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Dp,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 p-2 rounded-lg",children:s.jsx(yt,{className:"h-5 w-5 text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Admin Panel"})})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("main",{className:"flex-1 overflow-auto",children:d()})]})]})})},y1=()=>{var T,S;const{state:e}=At(),{state:t,updateAgentProfile:n}=Yt(),{clients:r,itineraries:a}=e,[i,l]=ce.useState("all"),[o,d]=ce.useState(!1),[u,p]=ce.useState({companyName:((T=t.user)==null?void 0:T.companyName)||"",companyLogo:""}),[f,N]=ce.useState(!1),[h,b]=ce.useState(null),j=r.filter(L=>!L.whatsapp),C=a.reduce((L,R)=>L+R.finalPrice,0),x=a.length>0?C/a.length:0,g=()=>{switch(i){case"itineraries":return{clients:[],itineraries:a};default:return{clients:j,itineraries:a}}},{clients:y,itineraries:A}=g(),P=async()=>{var L;if((L=t.user)!=null&&L.id){N(!0),b(null);try{const R=await n(t.user.id,{companyName:u.companyName,companyLogo:u.companyLogo});R.success?(b({type:"success",text:R.message}),d(!1),setTimeout(()=>b(null),3e3)):b({type:"error",text:R.message})}catch{b({type:"error",text:"Failed to update profile. Please try again."})}finally{N(!1)}}},_=L=>{var E;const R=(E=L.target.files)==null?void 0:E[0];if(R){const I=new FileReader;I.onload=Y=>{var K;p({...u,companyLogo:(K=Y.target)==null?void 0:K.result})},I.readAsDataURL(R)}};return s.jsxs(sn,{title:"Agent Dashboard",subtitle:"View your travel packages and client itineraries",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 mb-8",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(_t,{className:"h-6 w-6 text-teal-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Company Profile"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your company information"})]})]}),s.jsxs("button",{onClick:()=>{var L;d(!o),p({companyName:((L=t.user)==null?void 0:L.companyName)||"",companyLogo:""})},className:"inline-flex items-center px-4 py-2 text-teal-600 border border-teal-300 rounded-lg hover:bg-teal-50 transition-colors",children:[s.jsx(xa,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),s.jsxs("div",{className:"p-6",children:[h&&s.jsx("div",{className:`mb-4 p-4 rounded-lg flex items-center space-x-3 ${h.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${h.type==="success"?"text-green-700":"text-red-700"}`,children:h.text})}),o?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsx("input",{type:"text",value:u.companyName,onChange:L=>p({...u,companyName:L.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:"Enter company name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Logo"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden",id:"logo-upload"}),s.jsxs("label",{htmlFor:"logo-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[s.jsx(L4,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),u.companyLogo&&s.jsx("img",{src:u.companyLogo,alt:"Company Logo",className:"h-12 w-12 object-cover rounded-lg border border-slate-200"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsxs("button",{onClick:()=>d(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(zt,{className:"h-4 w-4 mr-2 inline"}),"Cancel"]}),s.jsxs("button",{onClick:P,disabled:f||!u.companyName,className:"inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[f?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(Ts,{className:"h-4 w-4 mr-2"}),f?"Updating...":"Save Changes"]})]})]}):s.jsx("div",{className:"flex items-center space-x-6",children:((S=t.user)==null?void 0:S.companyName)&&s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-teal-100 p-4 rounded-lg",children:s.jsx(_t,{className:"h-8 w-8 text-teal-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xl font-bold text-slate-900",children:t.user.companyName}),s.jsx("p",{className:"text-slate-600",children:"Travel Agency"})]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Trips"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:j.length})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(mt,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="itineraries"?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"}`,onClick:()=>l(i==="itineraries"?"all":"itineraries"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Completed Itineraries"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(pt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",C.toFixed(0)]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Package Value"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",x.toFixed(0)]})]}),s.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-amber-600"})})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-teal-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All Data"}),s.jsxs("button",{onClick:()=>l("itineraries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="itineraries"?"bg-teal-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Completed Itineraries (",a.length,")"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:i==="itineraries"?"All Completed Itineraries":"Recent Travel Packages"}),s.jsx("p",{className:"text-slate-500 text-sm",children:i==="itineraries"?"All generated itineraries and quotes":"Latest travel packages created"})]}),y.length===0&&A.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(zr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i==="itineraries"?"No completed itineraries yet":"No travel packages yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i==="itineraries"?"Completed itineraries will appear here.":"Travel packages will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Package Details":"Trip Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pax & Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Total Cost":"Transportation"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[y.map(L=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:L.name}),s.jsx("div",{className:"text-slate-500 text-sm",children:"Trip Package"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),L.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",L.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(L.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(L.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[L.numberOfPax.adults+L.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[L.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:L.transportationMode})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(L.createdAt).toLocaleDateString()})]},L.id)),A.map((L,R)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:L.client.name}),s.jsx("div",{className:"text-slate-500 text-sm",children:"Completed Package"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),L.client.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",L.client.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(L.client.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(L.client.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[L.client.numberOfPax.adults+L.client.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[L.client.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-green-600",children:["$",L.finalPrice.toFixed(0)]}),s.jsxs("div",{className:"text-slate-500",children:["₹",(L.finalPrice*L.exchangeRate).toLocaleString("en-IN")]})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(L.client.createdAt).toLocaleDateString()})]},R))]})]})})]})]})},w1=({onNext:e})=>{const{state:t}=At(),{state:n}=Yt(),{transportations:r}=t,[a,i]=ce.useState({name:"",startDate:"",endDate:"",isFlexible:!1,flexibleMonth:"",adults:2,children:0,numberOfDays:7,transportationMode:""}),l=["January","February","March","April","May","June","July","August","September","October","November","December"],o=(f,N)=>{if(f&&N){const h=new Date(f),b=new Date(N),j=Math.abs(b.getTime()-h.getTime());return Math.ceil(j/(1e3*60*60*24))+1}return 7},d=(f,N)=>{const h={...a,[f]:N};h.startDate&&h.endDate&&(h.numberOfDays=o(h.startDate,h.endDate)),i(h)},u=f=>{var h;f.preventDefault();const N={id:Date.now().toString(),name:a.name,whatsapp:"",countryCode:"",travelDates:{startDate:a.startDate,endDate:a.endDate,isFlexible:a.isFlexible,flexibleMonth:a.flexibleMonth},numberOfPax:{adults:a.adults,children:a.children},numberOfDays:a.numberOfDays,transportationMode:a.transportationMode,createdAt:new Date().toISOString(),createdBy:(h=n.user)==null?void 0:h.id};e(N)},p=()=>{const f=a.name&&a.transportationMode,N=a.isFlexible?a.flexibleMonth:a.startDate&&a.endDate;return f&&N};return s.jsx("div",{className:"max-w-2xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Trip Details"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 1 of 4 - Basic Information"})]})]})}),s.jsxs("form",{onSubmit:u,className:"p-4 md:p-8 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Trip Name / Client Reference *"}),s.jsx("input",{type:"text",value:a.name,onChange:f=>i({...a,name:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter trip name or client reference",required:!0})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Dates"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"flexible",checked:a.isFlexible,onChange:f=>i({...a,isFlexible:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"flexible",className:"text-sm md:text-base font-medium text-slate-700",children:"Flexible dates (month only)"})]}),a.isFlexible?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Preferred Month"}),s.jsxs("select",{value:a.flexibleMonth,onChange:f=>i({...a,flexibleMonth:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:a.isFlexible,children:[s.jsx("option",{value:"",children:"Select a month"}),l.map(f=>s.jsx("option",{value:f,children:f},f))]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",value:a.startDate,onChange:f=>d("startDate",f.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!a.isFlexible})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"End Date *"}),s.jsx("input",{type:"date",value:a.endDate,onChange:f=>d("endDate",f.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!a.isFlexible})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Number of Passengers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Adults"}),s.jsx("input",{type:"number",min:"1",value:a.adults,onChange:f=>i({...a,adults:parseInt(f.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Children"}),s.jsx("input",{type:"number",min:"0",value:a.children,onChange:f=>i({...a,children:parseInt(f.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(pt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",value:a.numberOfDays,onChange:f=>i({...a,numberOfDays:parseInt(f.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",disabled:!a.isFlexible&&a.startDate&&a.endDate}),s.jsx(zr,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),!a.isFlexible&&a.startDate&&a.endDate&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-calculated from dates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:a.transportationMode,onChange:f=>i({...a,transportationMode:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!0,children:[s.jsx("option",{value:"",children:"Select transportation"}),r.map(f=>s.jsxs("option",{value:f.vehicleName,children:[f.vehicleName," (",f.type.replace("-"," "),")"]},f.id))]})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 md:pt-6 border-t border-slate-200",children:s.jsxs("button",{type:"submit",disabled:!p(),className:"inline-flex items-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-blue-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:["Next Step",s.jsx(pt,{className:"ml-2 h-5 w-5"})]})})]})]})})},M6=({client:e,dayPlans:t,onNext:n,onBack:r})=>{const{state:a}=At(),{hotels:i,sightseeings:l,activities:o,entryTickets:d,meals:u,transportations:p}=a,[f,N]=ce.useState(0),[h,b]=ce.useState(83),x=Gi(e,t,i,l,o,d,u,p)+35,g=x+f,y=()=>{const P={id:`itinerary-${e.id}-${Date.now()}`,client:e,dayPlans:t,totalBaseCost:x,profitMargin:f,finalPrice:g,exchangeRate:h,version:1,lastUpdated:new Date().toISOString(),updatedBy:"agent",changeLog:[]};n(P)},A=P=>{const _=l.filter(E=>P.sightseeing.includes(E.id)),T=P.activities.map(E=>{const I=o.find(K=>K.id===E.activityId),Y=I==null?void 0:I.options.find(K=>K.id===E.optionId);return{activity:I,option:Y}}).filter(E=>E.activity&&E.option),S=d.filter(E=>P.entryTickets.includes(E.id)),L=u.filter(E=>P.meals.includes(E.id));let R=null;if(P.hotel){const E=i.find(Y=>Y.id===P.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===P.hotel.roomTypeId);E&&I&&(R={hotel:E,roomType:I})}return{sightseeing:_,activities:T,tickets:S,meals:L,hotel:R}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Pricing"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Agent Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(P=>{const _=A(P);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",P.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[_.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.sightseeing.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]}),_.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.activities.map((T,S)=>{var L,R;return s.jsxs("li",{children:["• ",(L=T.activity)==null?void 0:L.name," - ",(R=T.option)==null?void 0:R.name]},S)})})]}),_.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.tickets.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[_.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",_.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[_.hotel.roomType.name," - ",_.hotel.hotel.place]})]})]}),_.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.meals.map(T=>s.jsxs("li",{className:"capitalize",children:["• ",T.type," at ",T.place]},T.id))})]})]})]})]},P.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(Fs,{className:"h-5 w-5 mr-2 text-teal-600"}),"Package Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:h,onChange:P=>b(parseFloat(P.target.value)||83),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm md:text-base",placeholder:"Enter current exchange rate"}),s.jsxs("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:["Current rate: 1 USD = ₹",h]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Package Base Cost"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Vt(x,"USD")}),s.jsx("div",{className:"text-base md:text-lg font-semibold text-blue-600",children:Vt(Jn(x,h),"INR")})]}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Your Profit Margin (USD)"}),s.jsx("input",{type:"number",min:"0",step:"10",value:f,onChange:P=>N(parseFloat(P.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm md:text-base",placeholder:"Enter your profit in USD"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your commission or profit margin"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-green-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Vt(g,"USD")}),s.jsx("div",{className:"text-xl md:text-2xl font-bold text-teal-100",children:Vt(Jn(g,h),"INR")})]}),s.jsxs("p",{className:"text-teal-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-teal-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Package Cost: ",Vt(x,"USD")," / ",Vt(Jn(x,h),"INR")]}),s.jsxs("div",{children:["Your Profit: ",Vt(f,"USD")," / ",Vt(Jn(f,h),"INR")]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:r,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:y,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-green-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-green-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(fs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},R6=({itinerary:e,onBack:t,onStartNew:n})=>{var j;const{state:r,dispatch:a}=At(),{state:i}=Yt(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p,transportations:f}=r;Za.useEffect(()=>{var g;const C=r.clients.find(y=>y.id===e.client.id);if(e.client.whatsapp&&!C){const y={...e.client,followUpStatus:{status:"itinerary-created",updatedAt:new Date().toISOString(),remarks:"Initial itinerary created by agent",nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00"},followUpHistory:[{id:Date.now().toString(),status:"itinerary-created",remarks:"Initial itinerary created by agent",updatedAt:new Date().toISOString(),nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00",updatedBy:((g=i.user)==null?void 0:g.id)||"agent"}],nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00"};a({type:"ADD_CLIENT",payload:y})}const x={...e,id:`itinerary-${e.client.id}-${Date.now()}`,version:1,lastUpdated:new Date().toISOString(),updatedBy:"agent",changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:"Initial itinerary created by agent",timestamp:new Date().toISOString(),updatedBy:"agent"}]};a({type:"ADD_ITINERARY",payload:x})},[e,a,(j=i.user)==null?void 0:j.id,r.clients]);const N=()=>{const C=e.client.numberOfPax.adults+e.client.numberOfPax.children;let x=`🌴 TRAVEL PACKAGE 🌴

`;x+=`📋 TRIP DETAILS:
`,x+=`• Trip Name: ${e.client.name}
`,x+=`• Duration: ${e.client.numberOfDays} days
`,x+=`• Passengers: ${C} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,x+=`• Transportation: ${e.client.transportationMode}

`,x+=`📅 DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(y=>{const A=b(y);x+=`🗓️ DAY ${y.day}:
`,A.sightseeing.length>0&&(x+=`📍 SIGHTSEEING:
`,A.sightseeing.forEach(P=>{x+=`   • ${P.name}
`})),A.hotel&&(x+=`🏨 ACCOMMODATION:
`,x+=`   • ${A.hotel.hotel.name} - ${A.hotel.roomType.name}
`,x+=`   • Location: ${A.hotel.hotel.place}
`),A.activities.length>0&&(x+=`🎯 ACTIVITIES:
`,A.activities.forEach(P=>{var _,T;x+=`   • ${(_=P.activity)==null?void 0:_.name} - ${(T=P.option)==null?void 0:T.name}
`})),A.tickets.length>0&&(x+=`🎫 ENTRY TICKETS:
`,A.tickets.forEach(P=>{x+=`   • ${P.name}
`})),A.meals.length>0&&(x+=`🍽️ MEALS:
`,A.meals.forEach(P=>{x+=`   • ${P.type.charAt(0).toUpperCase()+P.type.slice(1)} at ${P.place}
`})),x+=`
`}),x+=`💰 PACKAGE PRICING:
`,x+=`• Total Package Price: $${e.finalPrice.toFixed(2)}
`,x+=`• Total Package Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,x+=`• Exchange Rate: 1 USD = ₹${e.exchangeRate}

`;const g=new Map;e.dayPlans.forEach(y=>{if(y.hotel){const A=l.find(_=>_.id===y.hotel.hotelId),P=A==null?void 0:A.roomTypes.find(_=>_.id===y.hotel.roomTypeId);if(A&&P){const _=`${A.id}-${P.id}`;g.has(_)?g.get(_).nights+=1:g.set(_,{hotel:A,roomType:P,nights:1})}}}),x+=`✅ INCLUSIONS:
`,x+=`• ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,g.size>0&&g.forEach(({hotel:y,roomType:A,nights:P})=>{x+=`• ${P} night${P>1?"s":""} stay ${y.name} in ${A.name}
`}),e.dayPlans.some(y=>y.sightseeing.length>0)&&(x+=`• Sightseeing tours as mentioned
`),e.dayPlans.some(y=>y.activities.length>0)&&(x+=`• Activities and experiences as listed
`),e.dayPlans.some(y=>y.entryTickets.length>0)&&(x+=`• Entry tickets to attractions
`),e.dayPlans.some(y=>y.meals.length>0)&&(x+=`• Meals as specified in itinerary
`),x+=`• Professional travel planning service
`,x+=`• 24/7 customer support during travel

`,x+=`❌ EXCLUSIONS:
`,x+=`• International/domestic flights
`,x+=`• Travel insurance
`,x+=`• Personal expenses and shopping
`,x+=`• Tips and gratuities
`,x+=`• Any meals not mentioned in inclusions
`,x+=`• Additional activities not listed
`,x+=`• Visa fees and documentation
`,x+=`• Emergency medical expenses

`,x+=`📞 CONTACT:
`,x+=`${e.client.name} Travel Package
`,x+=`Professional Travel Planning Services

`,x+=`Generated on: ${new Date().toLocaleDateString()}
`,x+=`Package ID: ${e.client.id}
`,navigator.clipboard.writeText(x).then(()=>{alert("✅ Complete travel package copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy package. Please try again.")})},h=()=>{const C=new Qe,x=C.internal.pageSize.width,g=20;let y=g;C.setFontSize(20),C.setFont("helvetica","bold"),C.text("Travel Itinerary",x/2,y,{align:"center"}),y+=15,C.setFontSize(12),C.setFont("helvetica","normal"),C.text(`Client: ${e.client.name}`,g,y),y+=8,C.text(`Duration: ${e.client.numberOfDays} days`,g,y),y+=8,C.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,g,y),y+=15,C.setFont("helvetica","bold"),C.text("Day-by-Day Itinerary:",g,y),y+=10,e.dayPlans.forEach(A=>{if(y>250&&(C.addPage(),y=g),C.setFont("helvetica","bold"),C.text(`Day ${A.day}:`,g,y),y+=8,C.setFont("helvetica","normal"),A.sightseeing.length>0){const P=A.sightseeing.map(_=>{const T=o.find(S=>S.id===_);return T?T.name:"Unknown"}).join(", ");C.text(`• Sightseeing: ${P}`,g+5,y),y+=6}if(A.hotel){const P=l.find(T=>T.id===A.hotel.hotelId),_=P==null?void 0:P.roomTypes.find(T=>T.id===A.hotel.roomTypeId);P&&_&&(C.text(`• Hotel: ${P.name} - ${_.name}`,g+5,y),y+=6)}A.activities.length>0&&A.activities.forEach(P=>{const _=d.find(S=>S.id===P.activityId),T=_==null?void 0:_.options.find(S=>S.id===P.optionId);_&&T&&(C.text(`• Activity: ${_.name} - ${T.name}`,g+5,y),y+=6)}),y+=5}),y>220&&(C.addPage(),y=g),C.setFont("helvetica","bold"),C.text("Package Pricing:",g,y),y+=10,C.setFont("helvetica","bold"),C.text(`Total Package Price: $${e.finalPrice.toFixed(2)}`,g,y),y+=8,C.text(`Total Package Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,g,y),C.save(`${e.client.name}-itinerary.pdf`)},b=C=>{const x=o.filter(_=>C.sightseeing.includes(_.id)),g=C.activities.map(_=>{const T=d.find(L=>L.id===_.activityId),S=T==null?void 0:T.options.find(L=>L.id===_.optionId);return{activity:T,option:S}}).filter(_=>_.activity&&_.option),y=u.filter(_=>C.entryTickets.includes(_.id)),A=p.filter(_=>C.meals.includes(_.id));let P=null;if(C.hotel){const _=l.find(S=>S.id===C.hotel.hotelId),T=_==null?void 0:_.roomTypes.find(S=>S.id===C.hotel.roomTypeId);_&&T&&(P={hotel:_,roomType:T})}return{sightseeing:x,activities:g,tickets:y,meals:A,hotel:P}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Package Complete!"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-green-900",children:"Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-green-700 mt-1 text-sm md:text-base",children:["Your detailed travel package for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.transportationMode})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(C=>{const x=b(C);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",C.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.sightseeing.map(g=>s.jsxs("li",{children:["• ",g.name]},g.id))})]}),x.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.activities.map((g,y)=>{var A,P;return s.jsxs("li",{children:["• ",(A=g.activity)==null?void 0:A.name," - ",(P=g.option)==null?void 0:P.name]},y)})})]}),x.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.tickets.map(g=>s.jsxs("li",{children:["• ",g.name]},g.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",x.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[x.hotel.roomType.name," - ",x.hotel.hotel.place]})]})]}),x.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.meals.map(g=>s.jsxs("li",{className:"capitalize",children:["• ",g.type," at ",g.place]},g.id))})]})]})]})]},C.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-teal-600"}),"Package Pricing"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-green-500 text-white rounded-xl p-6 md:p-8 text-center max-w-md",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Final Package Price"}),s.jsxs("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-teal-100 mb-4",children:["₹",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-teal-100 text-sm md:text-base",children:["Complete package for ",e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]}),s.jsxs("div",{className:"text-xs text-teal-100 mt-3",children:["Exchange Rate: 1 USD = ₹",e.exchangeRate]}),e.profitMargin>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-teal-400 border-opacity-50",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["Your Profit: $",e.profitMargin.toFixed(2)," / ₹",(e.profitMargin*e.exchangeRate).toLocaleString("en-IN")]})})})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Wi,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:h,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Fh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:N,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(Ui,{className:"mr-2 h-5 w-5"}),"Copy Package"]})]}),s.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-green-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-green-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Ip,{className:"mr-2 h-5 w-5"}),"Create New Package"]})]})]})]})})},$6=()=>{const[e,t]=ce.useState(1),[n,r]=ce.useState(null),[a,i]=ce.useState(null),[l,o]=ce.useState(null),[d,u]=ce.useState([]),[p,f]=ce.useState(null),N=A=>{r(A),t(2)},h=(A,P)=>{i(A),o(P),t(3)},b=A=>{u(A),t(4)},j=A=>{f(A),t(5)},C=A=>{f(A),t(5)},x=()=>{t(e-1)},g=()=>{t(1),r(null),i(null),o(null),u([]),f(null)},y=()=>{switch(e){case 1:return s.jsx(w1,{onNext:N});case 2:return n?s.jsx(Yp,{client:n,onNext:h,onBack:x,userType:"agent"}):null;case 3:return a==="fixed"&&l?s.jsx(Jp,{client:n,fixedItinerary:l,onNext:C,onBack:x,userType:"agent"}):a==="new"&&n?s.jsx(Uh,{client:n,onNext:b,onBack:x,isAgent:!0}):null;case 4:return n?s.jsx(M6,{client:n,dayPlans:d,onNext:j,onBack:x}):null;case 5:return p?s.jsx(R6,{itinerary:p,onBack:x,onStartNew:g}):null;default:return s.jsx(w1,{onNext:N})}};return e>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(A=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${A<=e?"bg-teal-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:A}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${A<=e?"text-slate-900":"text-slate-500"}`,children:[A===1&&"Trip Details",A===2&&"Itinerary Type",A===3&&(a==="fixed"?"Review Template":"Day Planning"),A===4&&"Review & Pricing",A===5&&"Final Summary"]})}),A<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${A<e?"bg-teal-600":"bg-slate-200"}`})]},A))})})}),y()]})}):s.jsx(sn,{title:"Itinerary Builder",subtitle:"Create travel packages for your clients",children:y()})},B6=()=>{var d,u,p,f,N;const{logout:e,state:t}=Yt(),[n,r]=ce.useState("dashboard"),[a,i]=ce.useState(!1),l=[{id:"dashboard",name:"Dashboard",icon:oh,description:"Overview & packages"},{id:"itinerary",name:"Itinerary Builder",icon:As,description:"Create new packages"}],o=()=>{switch(n){case"dashboard":return s.jsx(y1,{});case"itinerary":return s.jsx($6,{});default:return s.jsx(y1,{})}};return s.jsx(Hp,{children:s.jsxs("div",{className:"flex h-screen bg-slate-50",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${a?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 p-2 rounded-lg",children:s.jsx(_t,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:((d=t.user)==null?void 0:d.companyName)||"Travel Agent"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Agent Portal"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 text-slate-500 hover:text-slate-700",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:((u=t.user)==null?void 0:u.companyName)||((p=t.user)==null?void 0:p.name)}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:(f=t.user)==null?void 0:f.role})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:l.map(h=>s.jsxs("button",{onClick:()=>{r(h.id),i(!1)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${n===h.id?"bg-gradient-to-r from-teal-600 to-green-600 text-white font-medium shadow-md":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(h.icon,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:h.name}),s.jsx("div",{className:`text-xs ${n===h.id?"text-teal-100":"text-slate-500"}`,children:h.description})]})]},h.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 z-40 lg:hidden",onClick:()=>i(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-slate-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Dp,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 p-2 rounded-lg",children:s.jsx(_t,{className:"h-5 w-5 text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:((N=t.user)==null?void 0:N.companyName)||"Agent Portal"})})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("main",{className:"flex-1 overflow-auto",children:o()})]})]})})},N1=()=>{const{state:e}=At(),{state:t}=Yt(),{clients:n,itineraries:r}=e,[a,i]=ce.useState("all"),l=n.filter(j=>{var C;return j.createdBy===((C=t.user)==null?void 0:C.id)}),o=r.filter(j=>{var C;return j.client.createdBy===((C=t.user)==null?void 0:C.id)}),d=o.reduce((j,C)=>j+C.finalPrice,0),u=o.length>0?d/o.length:0,p=l.length>0?o.length/l.length*100:0,f=o.reduce((j,C)=>j+C.profitMargin,0),N=()=>{switch(a){case"itineraries":return{clients:[],itineraries:o};default:return{clients:l,itineraries:o}}},{clients:h,itineraries:b}=N();return s.jsxs(sn,{title:"Sales Dashboard",subtitle:"Track your sales performance and client conversions",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Leads"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${a==="itineraries"?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"}`,onClick:()=>i(a==="itineraries"?"all":"itineraries"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Converted Sales"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(pt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",d.toFixed(0)]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Conversion Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[p.toFixed(1),"%"]})]}),s.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:s.jsx(T4,{className:"h-6 w-6 text-amber-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Average Deal Size"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",u.toFixed(0)]})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Profit"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",f.toFixed(0)]})]}),s.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:s.jsx(Kg,{className:"h-6 w-6 text-emerald-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Prospects"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.filter(j=>{var C;return!["advance-paid-confirmed","dead"].includes(((C=j.followUpStatus)==null?void 0:C.status)||"")}).length})]}),s.jsx("div",{className:"bg-indigo-100 p-3 rounded-lg",children:s.jsx(zr,{className:"h-6 w-6 text-indigo-600"})})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="all"?"bg-purple-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All Data"}),s.jsxs("button",{onClick:()=>i("itineraries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="itineraries"?"bg-purple-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Converted Sales Only (",o.length,")"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:a==="itineraries"?"All Converted Sales":"Recent Sales Activity"}),s.jsx("p",{className:"text-slate-500 text-sm",children:a==="itineraries"?"All successfully converted sales and quotes":"Latest sales leads and conversions"})]}),h.length===0&&b.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(zr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:a==="itineraries"?"No converted sales yet":"No sales activity yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:a==="itineraries"?"Converted sales will appear here.":"Sales leads and conversions will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a==="itineraries"?"Sale Details":"Lead Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pax & Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:a==="itineraries"?"Sale Value":"Transportation"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[h.map(j=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:j.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),"Sales Lead"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),j.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",j.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(j.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(j.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[j.numberOfPax.adults+j.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[j.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:j.transportationMode})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(j.createdAt).toLocaleDateString()})]},j.id)),b.map((j,C)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:j.client.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(Kg,{className:"h-4 w-4 mr-1"}),"Converted Sale"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(mt,{className:"h-4 w-4 mr-2 text-slate-400"}),j.client.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",j.client.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(j.client.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(j.client.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[j.client.numberOfPax.adults+j.client.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[j.client.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-green-600",children:["$",j.finalPrice.toFixed(0)]}),s.jsxs("div",{className:"text-slate-500",children:["₹",(j.finalPrice*j.exchangeRate).toLocaleString("en-IN")]})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(j.client.createdAt).toLocaleDateString()})]},C))]})]})})]})]})},j1=({client:e,onClose:t,onSave:n})=>{var vt;const{state:r,updateItinerary:a,getLatestItinerary:i}=At(),{state:l}=Yt(),{hotels:o,sightseeings:d,activities:u,entryTickets:p,meals:f,transportations:N}=r,[h,b]=ce.useState(e.numberOfDays),[j,C]=ce.useState([]),[x,g]=ce.useState(0),[y,A]=ce.useState(83),[P,_]=ce.useState(""),[T,S]=ce.useState("idle"),[L,R]=ce.useState(1),[E,I]=ce.useState("sightseeing"),[Y,K]=ce.useState([]),[te,G]=ce.useState({sightseeing:"",hotel:"",activities:"",tickets:"",meals:""}),M=i(e.id),H=Za.useMemo(()=>j.length===0?(M==null?void 0:M.totalBaseCost)||0:Gi({...e,numberOfDays:h},j,o,d,u,p,f,N),[e,h,j,o,d,u,p,f,N]),Z=H+x;ce.useEffect(()=>{let be;M&&M.dayPlans.length>0?be=Array.from({length:h},(je,Le)=>{const Ae=Le+1;return M.dayPlans.find(Te=>Te.day===Ae)||{day:Ae,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:[]}}):be=Array.from({length:h},(je,Le)=>({day:Le+1,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:[]})),C(be)},[h,M]),ce.useEffect(()=>{M&&(g(M.profitMargin),A(M.exchangeRate))},[M]),ce.useEffect(()=>{const je=setTimeout(async()=>{var Le;if(j.length!==0){S("saving");try{const Ae={id:(M==null?void 0:M.id)||`itinerary-${e.id}-${Date.now()}`,client:e,dayPlans:j,totalBaseCost:H,profitMargin:x,finalPrice:Z,exchangeRate:y,version:((M==null?void 0:M.version)||0)+1,lastUpdated:new Date().toISOString(),updatedBy:((Le=l.user)==null?void 0:Le.id)||"admin",changeLog:(M==null?void 0:M.changeLog)||[]};await a(Ae,"general_edit",`Itinerary updated: ${h} days planned`),_(new Date().toLocaleTimeString()),S("saved"),setTimeout(()=>S("idle"),2e3)}catch(Ae){console.error("Auto-save failed:",Ae),S("idle")}}},1e3);return()=>clearTimeout(je)},[j,h,e,M,a,(vt=l.user)==null?void 0:vt.id,H,x,Z,y]);const V=d.filter(be=>{const je=e.transportationMode.toLowerCase();return je.includes("cab")?be.transportationMode==="cab":je.includes("car")?be.transportationMode==="self-drive-car":je.includes("scooter")?be.transportationMode==="self-drive-scooter":!0}),ie=[...new Set(o.map(be=>be.place))],D=(be,je)=>{G(Le=>({...Le,[be]:je}))},q=be=>{G(je=>({...je,[be]:""}))},J=be=>{const je=j.slice(0,be),Le=new Set;je.forEach(Te=>{Te.sightseeing.forEach(Tt=>Le.add(Tt))});const Ae=new Set;je.forEach(Te=>{Te.activities.forEach(Tt=>Ae.add(Tt.activityId))});const ot=new Set;return je.forEach(Te=>{Te.entryTickets.forEach(Tt=>ot.add(Tt))}),{availableSightseeing:V.filter(Te=>!Le.has(Te.id)),selectedActivityIds:Ae,selectedTicketIds:ot}},ee=be=>{const{availableSightseeing:je}=J(be),Le=te.sightseeing.toLowerCase();return je.filter(Ae=>Ae.name.toLowerCase().includes(Le)||Ae.description.toLowerCase().includes(Le))},ae=be=>{const{selectedActivityIds:je}=J(be),Le=te.activities.toLowerCase();return u.filter(Ae=>!je.has(Ae.id)&&(Ae.name.toLowerCase().includes(Le)||Ae.location.toLowerCase().includes(Le)))},de=(be,je)=>{const{selectedTicketIds:Le}=J(be),Ae=te.tickets.toLowerCase();return p.filter(ot=>je.includes(ot.sightseeingId)&&!Le.has(ot.id)&&ot.name.toLowerCase().includes(Ae))},xe=be=>{const je=te.meals.toLowerCase();return f.filter(Le=>Le.type===be&&Le.place.toLowerCase().includes(je))},ve=be=>{const je=te.hotel.toLowerCase();return Me(be).filter(Le=>Le.name.toLowerCase().includes(je))},Oe=(be,je,Le)=>{const Ae=[...j];Ae[be]={...Ae[be],[je]:Le},C(Ae)},Me=be=>o.filter(je=>je.place===be),ue=be=>{const je=o.find(Le=>Le.id===be);return je?je.roomTypes:[]},ge=(be,je)=>{const Le=j[be].activities;if(Le.find(ot=>ot.activityId===je)){const ot=Le.filter(Te=>Te.activityId!==je);Oe(be,"activities",ot)}else{const ot=u.find(Te=>Te.id===je);if(ot&&ot.options.length>0){const Te=[...Le,{activityId:je,optionId:ot.options[0].id}];Oe(be,"activities",Te)}}},Pe=(be,je,Le)=>{const Ae=[...j[be].activities],ot=Ae.findIndex(Te=>Te.activityId===je);ot!==-1&&(Ae[ot].optionId=Le,Oe(be,"activities",Ae))},me=be=>{switch(be){case"sightseeing":return s.jsx(pt,{className:"h-5 w-5"});case"hotel":return s.jsx(_t,{className:"h-5 w-5"});case"activities":return s.jsx(is,{className:"h-5 w-5"});case"tickets":return s.jsx(ps,{className:"h-5 w-5"});case"meals":return s.jsx(Gt,{className:"h-5 w-5"})}},X=be=>{switch(be){case"sightseeing":return"Select Sightseeing Spots";case"hotel":return"Choose Hotel Accommodation";case"activities":return"Add Activities & Experiences";case"tickets":return"Select Entry Tickets";case"meals":return"Choose Meals"}},we=be=>{switch(be){case"sightseeing":return"blue";case"hotel":return"purple";case"activities":return"green";case"tickets":return"orange";case"meals":return"red"}},Be=(be,je)=>{const Le=j[be];if(!Le)return!1;switch(je){case"sightseeing":return Le.sightseeing.length>0;case"hotel":return Le.hotel!==null;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},_e=(be,je)=>{var Le;switch(je){case"sightseeing":return((Le=j[be])==null?void 0:Le.sightseeing.length)>0;case"hotel":return!0;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},De=be=>{const je=["sightseeing","hotel","activities","tickets","meals"],Le=je.indexOf(be);return Le<je.length-1?je[Le+1]:null},$e=be=>{const je=["sightseeing","hotel","activities","tickets","meals"],Le=je.indexOf(be);return Le>0?je[Le-1]:null},Ue=()=>{const be=De(E);be?I(be):(K(je=>[...je,L]),L<h&&(R(L+1),I("sightseeing")))},Ye=()=>{const be=$e(E);be?I(be):L>1&&(R(L-1),I("meals"))},tt=()=>{L<h&&(K(be=>[...be,L]),R(L+1),I("sightseeing"))},lt=()=>{var Le,Ae,ot;const be=j[L-1],je=L-1;if(!be)return null;switch(E){case"sightseeing":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Select Sightseeing Spots"}),s.jsxs("p",{className:"text-blue-700 text-sm",children:["Choose the places you want to visit on Day ",L,". You can select multiple locations."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search sightseeing spots...",value:te.sightseeing,onChange:Te=>D("sightseeing",Te.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),te.sightseeing&&s.jsx("button",{onClick:()=>q("sightseeing"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:ee(je).map(Te=>s.jsxs("label",{className:"flex items-start space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:be.sightseeing.includes(Te.id),onChange:Tt=>{const nt=be.sightseeing,ct=Tt.target.checked?[...nt,Te.id]:nt.filter(Ms=>Ms!==Te.id);Oe(je,"sightseeing",ct)},className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:Te.name}),s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:Te.description}),s.jsxs("div",{className:"text-xs text-blue-600 mt-2 capitalize",children:["Transportation: ",Te.transportationMode.replace("-"," ")]})]})]},Te.id))}),ee(je).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(pt,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:te.sightseeing?"No sightseeing spots match your search.":"All available sightseeing spots for this transportation mode have been selected in previous days."})]})]});case"hotel":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Choose Hotel Accommodation"}),s.jsxs("p",{className:"text-purple-700 text-sm",children:["Select where you want to stay on Day ",L,". You can skip this if no accommodation is needed."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Place/Location"}),s.jsxs("select",{value:((Le=be.hotel)==null?void 0:Le.place)||"",onChange:Te=>{const Tt=Te.target.value;Tt?Oe(je,"hotel",{place:Tt,hotelId:"",roomTypeId:""}):Oe(je,"hotel",null)},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"No hotel needed"}),ie.map(Te=>s.jsx("option",{value:Te,children:Te},Te))]})]}),((Ae=be.hotel)==null?void 0:Ae.place)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Hotel Name"}),be.hotel.place&&s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Zs,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search hotels...",value:te.hotel,onChange:Te=>D("hotel",Te.target.value),className:"w-full pl-9 pr-9 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),te.hotel&&s.jsx("button",{onClick:()=>q("hotel"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-4 w-4"})})]}),s.jsxs("select",{value:be.hotel.hotelId,onChange:Te=>{Oe(je,"hotel",{...be.hotel,hotelId:Te.target.value,roomTypeId:""})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select hotel"}),ve(be.hotel.place).map(Te=>s.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]}),((ot=be.hotel)==null?void 0:ot.hotelId)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Room Type"}),s.jsxs("select",{value:be.hotel.roomTypeId,onChange:Te=>{Oe(je,"hotel",{...be.hotel,roomTypeId:Te.target.value})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select room type"}),ue(be.hotel.hotelId).map(Te=>s.jsx("option",{value:Te.id,children:Te.name},Te.id))]})]})]})]});case"activities":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Add Activities & Experiences"}),s.jsxs("p",{className:"text-green-700 text-sm",children:["Select activities for Day ",L,". These are optional but add value to the experience."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search activities...",value:te.activities,onChange:Te=>D("activities",Te.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),te.activities&&s.jsx("button",{onClick:()=>q("activities"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:ae(je).map(Te=>{const Tt=be.activities.some(ct=>ct.activityId===Te.id),nt=be.activities.find(ct=>ct.activityId===Te.id);return s.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-4 hover:border-green-300 transition-all",children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Tt,onChange:()=>ge(je,Te.id),className:"h-5 w-5 text-green-600 focus:ring-green-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:Te.name}),s.jsx("div",{className:"text-sm text-slate-600",children:Te.location})]})]}),Tt&&s.jsxs("div",{className:"mt-3 ml-8",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Choose Option:"}),s.jsx("select",{value:(nt==null?void 0:nt.optionId)||"",onChange:ct=>Pe(je,Te.id,ct.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:Te.options.map(ct=>s.jsxs("option",{value:ct.id,children:[ct.name," - $",ct.cost," (for ",ct.costForHowMany," ",ct.costForHowMany===1?"person":"people",")"]},ct.id))})]})]},Te.id)})}),ae(je).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(is,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:te.activities?"No activities match your search.":"All available activities have been used in previous days."})]})]});case"tickets":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Select Entry Tickets"}),s.jsxs("p",{className:"text-orange-700 text-sm",children:["Choose entry tickets for the sightseeing spots selected for Day ",L,"."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search entry tickets...",value:te.tickets,onChange:Te=>D("tickets",Te.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),te.tickets&&s.jsx("button",{onClick:()=>q("tickets"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:de(je,be.sightseeing).map(Te=>s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-orange-50 hover:border-orange-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:be.entryTickets.includes(Te.id),onChange:Tt=>{const nt=be.entryTickets,ct=Tt.target.checked?[...nt,Te.id]:nt.filter(Ms=>Ms!==Te.id);Oe(je,"entryTickets",ct)},className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:Te.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:["$",Te.cost," per person"]})]})]},Te.id))}),de(je,be.sightseeing).length===0&&be.sightseeing.length>0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ps,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:te.tickets?"No entry tickets match your search.":"All available entry tickets for selected sightseeing spots have been used in previous days."})]}),be.sightseeing.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ps,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"Select sightseeing spots first to see available entry tickets"})]})]});case"meals":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Choose Meals"}),s.jsxs("p",{className:"text-red-700 text-sm",children:["Select meal options for Day ",L,". You can choose multiple meals for different times of the day."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search restaurants/places...",value:te.meals,onChange:Te=>D("meals",Te.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),te.meals&&s.jsx("button",{onClick:()=>q("meals"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[["breakfast","lunch","dinner"].map(Te=>{const Tt=xe(Te);return s.jsxs("div",{children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-3 capitalize flex items-center",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-red-600"}),Te]}),s.jsx("div",{className:"space-y-2",children:Tt.map(nt=>s.jsxs("label",{className:"flex items-start space-x-3 p-3 border-2 border-slate-200 rounded-lg hover:bg-red-50 hover:border-red-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:be.meals.includes(nt.id),onChange:ct=>{const Ms=be.meals,St=ct.target.checked?[...Ms,nt.id]:Ms.filter(Vr=>Vr!==nt.id);Oe(je,"meals",St)},className:"mt-1 h-5 w-5 text-red-600 focus:ring-red-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:nt.place}),s.jsxs("div",{className:"text-sm text-slate-600",children:["$",nt.cost," per person"]})]})]},nt.id))})]},Te)}),te.meals&&["breakfast","lunch","dinner"].every(Te=>xe(Te).length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Gt,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"No restaurants match your search."})]})]})]});default:return null}},ft=()=>{var Le,Ae;const be={id:(M==null?void 0:M.id)||`itinerary-${e.id}-${Date.now()}`,client:{...e,numberOfDays:h},dayPlans:j,totalBaseCost:H,profitMargin:x,finalPrice:Z,exchangeRate:y,version:((M==null?void 0:M.version)||0)+1,lastUpdated:new Date().toISOString(),updatedBy:((Le=l.user)==null?void 0:Le.id)||"admin",changeLog:[...(M==null?void 0:M.changeLog)||[],{id:Date.now().toString(),version:((M==null?void 0:M.version)||0)+1,changeType:h!==e.numberOfDays?"days_modified":"general_edit",description:h!==e.numberOfDays?`Days changed from ${e.numberOfDays} to ${h}`:"Itinerary details updated",timestamp:new Date().toISOString(),updatedBy:((Ae=l.user)==null?void 0:Ae.id)||"admin"}]};a(be,h!==e.numberOfDays?"days_modified":"general_edit",h!==e.numberOfDays?`Days changed from ${e.numberOfDays} to ${h}`:"Itinerary details updated");const je={...e,numberOfDays:h};n(je)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Edit Itinerary - ",e.name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Modify the travel itinerary and day plans"})]}),s.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Itinerary Editor"}),s.jsx("p",{className:"text-slate-600 text-sm",children:M?`Version ${M.version} • Last updated: ${new Date(M.lastUpdated).toLocaleString()}`:"Creating new itinerary"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${T==="saving"?"bg-yellow-500 animate-pulse":T==="saved"?"bg-green-500":"bg-slate-300"}`}),s.jsx("span",{className:"text-xs text-slate-600",children:T==="saving"?"Saving...":T==="saved"?`Saved ${P}`:"Auto-save enabled"})]})]})}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Trip Duration"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Adjust the number of days for this trip"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Number of Days:"}),s.jsx("input",{type:"number",min:"1",max:"30",value:h,onChange:be=>b(parseInt(be.target.value)||1),className:"w-20 p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center"})]})]})}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-green-600"}),"Live Cost Summary"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:y,onChange:be=>A(parseFloat(be.target.value)||83),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Profit Margin (USD)"}),s.jsx("input",{type:"number",min:"0",step:"10",value:x,onChange:be=>g(parseFloat(be.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg p-4 text-center w-full",children:[s.jsx("div",{className:"text-sm font-medium mb-1",children:"Updated Total"}),s.jsxs("div",{className:"text-xl font-bold",children:["$",Z.toFixed(2)]}),s.jsxs("div",{className:"text-sm text-green-100",children:["₹",(Z*y).toLocaleString("en-IN")]})]})})]}),s.jsxs("div",{className:"mt-3 text-sm text-slate-600",children:["Base Cost: $",H.toFixed(2)," • Profit: $",x.toFixed(2)," • Total: $",Z.toFixed(2)]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Day ",L," of ",h," for ",e.name]}),s.jsxs("p",{className:"text-slate-600 mt-1",children:["Current Step: ",X(E)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-slate-600",children:"Progress"}),s.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:[Y.length," / ",h," days completed"]})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Select Day to Edit"}),s.jsx("div",{className:"text-sm text-slate-600",children:"Click any day to jump directly to it"})]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:Array.from({length:h},(be,je)=>{const Le=je+1,Ae=Y.includes(Le),ot=Le===L;return s.jsx("button",{onClick:()=>{R(Le),I("sightseeing")},className:`
                      flex items-center justify-center w-12 h-12 rounded-full font-semibold text-sm transition-all hover:scale-110 cursor-pointer
                      ${ot?"bg-blue-600 text-white ring-2 ring-blue-200":Ae?"bg-green-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}
                    `,title:`Edit Day ${Le}`,children:Ae?"✓":Le},Le)})}),s.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Quick Jump:"}),s.jsx("select",{value:L,onChange:be=>{R(parseInt(be.target.value)),I("sightseeing")},className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:Array.from({length:h},(be,je)=>{const Le=je+1;return s.jsxs("option",{value:Le,children:["Day ",Le," ",Y.includes(Le)?"(Completed)":""]},Le)})}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Currently editing: Day ",L]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3",children:["Day ",L," Planning Steps"]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:["sightseeing","hotel","activities","tickets","meals"].map((be,je)=>{const Le=be===E,Ae=Be(L-1,be),ot=we(be);return s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`
                        flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm transition-all
                        ${Le?`bg-${ot}-600 text-white ring-2 ring-${ot}-200`:Ae?"bg-green-500 text-white":"bg-slate-200 text-slate-500"}
                      `,children:Ae?s.jsx(Yc,{className:"h-5 w-5"}):me(be)}),s.jsx("div",{className:"ml-2 min-w-0",children:s.jsx("div",{className:`text-xs font-medium ${Le?"text-slate-900":"text-slate-500"}`,children:be.charAt(0).toUpperCase()+be.slice(1)})}),je<4&&s.jsx(so,{className:"h-4 w-4 text-slate-400 mx-2"})]},be)})})]})}),s.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden mb-6",children:[s.jsx("div",{className:`bg-gradient-to-r from-${we(E)}-50 to-${we(E)}-100 px-6 py-4`,children:s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[me(E),s.jsx("span",{className:"ml-2",children:X(E)})]})}),s.jsx("div",{className:"p-6 bg-white",children:lt()})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Close Editor"}),(E!=="sightseeing"||L>1)&&s.jsxs("button",{onClick:Ye,className:"px-6 py-3 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:[s.jsx(cb,{className:"h-4 w-4 mr-2 inline"}),"Previous"]})]}),s.jsx("div",{className:"flex gap-3",children:E!=="meals"?s.jsxs("button",{onClick:Ue,disabled:!_e(L-1,E),className:`inline-flex items-center px-6 py-3 font-semibold rounded-lg transition-all duration-200 ${_e(L-1,E)?`bg-gradient-to-r from-${we(E)}-600 to-${we(E)}-700 text-white hover:from-${we(E)}-700 hover:to-${we(E)}-800 transform hover:scale-105`:"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:["Next",s.jsx(so,{className:"ml-2 h-4 w-4"})]}):s.jsx(s.Fragment,{children:L<h?s.jsxs("button",{onClick:tt,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Day ",L+1,s.jsx(so,{className:"ml-2 h-4 w-4"})]}):s.jsxs("button",{onClick:ft,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Save Itinerary",s.jsx(Ts,{className:"ml-2 h-5 w-5"})]})})})]})]})]})})},U6=({client:e,onClose:t,onSave:n})=>{const{state:r,updateItinerary:a,getLatestItinerary:i}=At();Yt();const{transportations:l,hotels:o,sightseeings:d,activities:u,entryTickets:p,meals:f}=r,[N,h]=ce.useState(!1),[b,j]=ce.useState({name:e.name,whatsapp:e.whatsapp,countryCode:e.countryCode,startDate:e.travelDates.startDate,endDate:e.travelDates.endDate,isFlexible:e.travelDates.isFlexible,flexibleMonth:e.travelDates.flexibleMonth,adults:e.numberOfPax.adults,children:e.numberOfPax.children,numberOfDays:e.numberOfDays,transportationMode:e.transportationMode}),C=[{code:"+1",country:"US/CA"},{code:"+44",country:"UK"},{code:"+91",country:"IN"},{code:"+61",country:"AU"},{code:"+49",country:"DE"},{code:"+33",country:"FR"},{code:"+81",country:"JP"},{code:"+86",country:"CN"},{code:"+65",country:"SG"},{code:"+60",country:"MY"},{code:"+62",country:"ID"}],x=["January","February","March","April","May","June","July","August","September","October","November","December"],g=(P,_)=>{if(P&&_){const T=new Date(P),S=new Date(_),L=Math.abs(S.getTime()-T.getTime());return Math.ceil(L/(1e3*60*60*24))+1}return b.numberOfDays},y=(P,_)=>{const T={...b,[P]:_};T.startDate&&T.endDate&&(T.numberOfDays=g(T.startDate,T.endDate)),j(T)},A=()=>{const P={...e,name:b.name,whatsapp:b.whatsapp,countryCode:b.countryCode,travelDates:{startDate:b.startDate,endDate:b.endDate,isFlexible:b.isFlexible,flexibleMonth:b.flexibleMonth},numberOfPax:{adults:b.adults,children:b.children},numberOfDays:b.numberOfDays,transportationMode:b.transportationMode},_=i(e.id);if(_){const T=Gi(P,_.dayPlans,o,d,u,p,f,l),S={..._,client:P,totalBaseCost:T,finalPrice:T+_.profitMargin};a(S,"general_edit","Client details updated - costs recalculated")}n(P)};return N?s.jsx(j1,{client:e,onClose:()=>h(!1),onSave:P=>{n(P),h(!1)}}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit Client Details"}),s.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Personal Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Client Name *"}),s.jsx("input",{type:"text",value:b.name,onChange:P=>j({...b,name:P.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter client's full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"WhatsApp Number *"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("select",{value:b.countryCode,onChange:P=>j({...b,countryCode:P.target.value}),className:"w-auto p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:C.map(({code:P,country:_})=>s.jsxs("option",{value:P,children:[P," (",_,")"]},P))}),s.jsx("input",{type:"tel",value:b.whatsapp,onChange:P=>j({...b,whatsapp:P.target.value}),className:"flex-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter WhatsApp number"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Dates"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"flexible-edit",checked:b.isFlexible,onChange:P=>j({...b,isFlexible:P.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"flexible-edit",className:"text-sm font-medium text-slate-700",children:"Flexible dates (month only)"})]}),b.isFlexible?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Preferred Month"}),s.jsxs("select",{value:b.flexibleMonth,onChange:P=>j({...b,flexibleMonth:P.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select a month"}),x.map(P=>s.jsx("option",{value:P,children:P},P))]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",value:b.startDate,onChange:P=>y("startDate",P.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"End Date *"}),s.jsx("input",{type:"date",value:b.endDate,onChange:P=>y("endDate",P.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Number of Passengers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Adults"}),s.jsx("input",{type:"number",min:"1",value:b.adults,onChange:P=>j({...b,adults:parseInt(P.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Children"}),s.jsx("input",{type:"number",min:"0",value:b.children,onChange:P=>j({...b,children:parseInt(P.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 flex items-center",children:[s.jsx(pt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",value:b.numberOfDays,onChange:P=>j({...b,numberOfDays:parseInt(P.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!b.isFlexible&&b.startDate&&b.endDate}),s.jsx(zr,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),!b.isFlexible&&b.startDate&&b.endDate&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-calculated from dates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:b.transportationMode,onChange:P=>j({...b,transportationMode:P.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select transportation"}),l.map(P=>s.jsxs("option",{value:P.vehicleName,children:[P.vehicleName," (",P.type.replace("-"," "),")"]},P.id))]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(S4,{className:"h-4 w-4 mr-2"}),"Edit Itinerary"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]}),N&&s.jsx(j1,{client:e,onClose:()=>h(!1),onSave:P=>{n(P),h(!1)}})]})})},z6=({client:e,onClose:t,onSave:n})=>{var A,P,_,T;const[r,a]=ce.useState(((A=e.followUpStatus)==null?void 0:A.status)||"itinerary-created"),[i,l]=ce.useState(""),[o,d]=ce.useState(""),[u,p]=ce.useState(""),[f,N]=ce.useState({}),h=S=>{const L=["itinerary-created","itinerary-sent","1st-follow-up","2nd-follow-up","3rd-follow-up","4th-follow-up","itinerary-edited","updated-itinerary-sent","advance-paid-confirmed","dead"];return S==="itinerary-created"||S==="itinerary-sent"?["itinerary-sent","1st-follow-up","itinerary-edited","advance-paid-confirmed","dead"]:S==="1st-follow-up"?["2nd-follow-up","itinerary-edited","advance-paid-confirmed","dead"]:S==="2nd-follow-up"?["3rd-follow-up","itinerary-edited","advance-paid-confirmed","dead"]:S==="3rd-follow-up"?["4th-follow-up","itinerary-edited","advance-paid-confirmed","dead"]:S==="4th-follow-up"?["itinerary-edited","advance-paid-confirmed","dead"]:S==="itinerary-edited"?["updated-itinerary-sent","advance-paid-confirmed","dead"]:S==="updated-itinerary-sent"?["1st-follow-up","advance-paid-confirmed","dead"]:L},b=S=>{switch(S){case"itinerary-created":return"Itinerary Created";case"itinerary-sent":return"Itinerary Sent";case"1st-follow-up":return"1st Follow Up";case"2nd-follow-up":return"2nd Follow Up";case"3rd-follow-up":return"3rd Follow Up";case"4th-follow-up":return"4th Follow Up";case"itinerary-edited":return"Itinerary Edited";case"updated-itinerary-sent":return"Updated Itinerary Sent";case"advance-paid-confirmed":return"Advance Paid & Confirmed";case"dead":return"Dead"}},j=S=>!["advance-paid-confirmed","dead"].includes(S),C=()=>{const S={};return i.trim()||(S.remarks="Remarks are required"),j(r)&&(o||(S.nextFollowUpDate="Next follow-up date is required"),u||(S.nextFollowUpTime="Next follow-up time is required")),N(S),Object.keys(S).length===0},x=()=>{C()&&(n(e.id,r,i,j(r)?o:void 0,j(r)?u:void 0),t())},g=()=>{const S=encodeURIComponent(`Hello ${e.name}! This is regarding your ${e.numberOfDays}-day travel package. How can I assist you today?`),L=`https://wa.me/${e.countryCode.replace("+","")}${e.whatsapp}?text=${S}`;window.open(L,"_blank")},y=h(((P=e.followUpStatus)==null?void 0:P.status)||"itinerary-created");return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Follow-up Management"}),s.jsxs("p",{className:"text-slate-500 text-sm",children:["Update follow-up status for ",e.name]})]}),s.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Current Status"}),s.jsx("p",{className:"text-slate-700",children:b(((_=e.followUpStatus)==null?void 0:_.status)||"itinerary-created")}),((T=e.followUpStatus)==null?void 0:T.remarks)&&s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Last remarks: ",e.followUpStatus.remarks]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Update Follow-up Status *"}),s.jsx("select",{value:r,onChange:S=>a(S.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:y.map(S=>s.jsx("option",{value:S,children:b(S)},S))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Remarks *"}),s.jsx("textarea",{value:i,onChange:S=>l(S.target.value),rows:4,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${f.remarks?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter detailed remarks about this follow-up..."}),f.remarks&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.remarks})]}),j(r)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Next Follow-up Date *"}),s.jsx("input",{type:"date",value:o,onChange:S=>d(S.target.value),min:new Date().toISOString().split("T")[0],className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${f.nextFollowUpDate?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`}),f.nextFollowUpDate&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.nextFollowUpDate})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Next Follow-up Time *"}),s.jsx("input",{type:"time",value:u,onChange:S=>p(S.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${f.nextFollowUpTime?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`}),f.nextFollowUpTime&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:f.nextFollowUpTime})]})]}),!j(r)&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(So,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-900 font-medium",children:"Final Status"}),s.jsx("p",{className:"text-blue-700 text-sm",children:"This status doesn't require a follow-up date as it represents a final outcome."})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 border-t border-slate-200",children:[s.jsxs("button",{onClick:g,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Start Conversation"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Update Follow-up"]})]})]})]})]})})},q6=()=>{const{state:e,dispatch:t}=At(),{state:n}=Yt(),{clients:r,hotels:a,sightseeings:i,activities:l,entryTickets:o,meals:d,transportations:u}=e,[p,f]=ce.useState("all"),[N,h]=ce.useState(null),[b,j]=ce.useState(!1),[C,x]=ce.useState(!1),[g,y]=ce.useState(!1),[A,P]=ce.useState(!1),_=r.filter(V=>{var ie;return V.createdBy===((ie=n.user)==null?void 0:ie.id)}),T=new Date().toISOString().split("T")[0],L=(()=>{switch(p){case"prospects":return _.filter(V=>{var ie;return!["advance-paid-confirmed","dead"].includes(((ie=V.followUpStatus)==null?void 0:ie.status)||"")});case"followups":return _.filter(V=>V.nextFollowUpDate?V.nextFollowUpDate===T:!1);case"converted":return _.filter(V=>{var ie;return((ie=V.followUpStatus)==null?void 0:ie.status)==="advance-paid-confirmed"});default:return _}})(),R=V=>{h(V),j(!0)},E=V=>{h(V),x(!0)},I=V=>{h(V),y(!0)},Y=V=>{h(V),P(!0)},K=(V,ie)=>{if(confirm(`Are you sure you want to delete client "${ie}"? This action cannot be undone.`)){const D=_.filter(q=>q.id!==V);t({type:"SET_DATA",payload:{clients:D}})}},te=V=>{const ie=encodeURIComponent(`Hello ${V.name}! This is regarding your ${V.numberOfDays}-day travel package. How can I assist you today?`),D=`https://wa.me/${V.countryCode.replace("+","")}${V.whatsapp}?text=${ie}`;window.open(D,"_blank")},G=(V,ie,D,q,J)=>{const ee=_.map(ae=>{var de;if(ae.id===V){const xe={id:Date.now().toString(),status:ie,remarks:D,updatedAt:new Date().toISOString(),nextFollowUpDate:q,nextFollowUpTime:J,updatedBy:((de=n.user)==null?void 0:de.id)||"sales"};return{...ae,followUpStatus:{status:ie,updatedAt:new Date().toISOString(),remarks:D,nextFollowUpDate:q,nextFollowUpTime:J},followUpHistory:[...ae.followUpHistory||[],xe],nextFollowUpDate:q,nextFollowUpTime:J}}return ae});t({type:"SET_DATA",payload:{clients:ee}})},M=V=>{switch(V){case"advance-paid-confirmed":return"bg-green-100 text-green-800";case"dead":return"bg-red-100 text-red-800";case"itinerary-sent":return"bg-blue-100 text-blue-800";case"itinerary-edited":return"bg-purple-100 text-purple-800";case"updated-itinerary-sent":return"bg-indigo-100 text-indigo-800";default:return"bg-yellow-100 text-yellow-800"}},H=V=>{switch(V){case"itinerary-created":return"Itinerary Created";case"itinerary-sent":return"Itinerary Sent";case"1st-follow-up":return"1st Follow Up";case"2nd-follow-up":return"2nd Follow Up";case"3rd-follow-up":return"3rd Follow Up";case"4th-follow-up":return"4th Follow Up";case"itinerary-edited":return"Itinerary Edited";case"updated-itinerary-sent":return"Updated Itinerary Sent";case"advance-paid-confirmed":return"Advance Paid & Confirmed";case"dead":return"Dead";default:return"New Lead"}},Z=V=>{switch(V){case"prospects":return _.filter(ie=>{var D;return!["advance-paid-confirmed","dead"].includes(((D=ie.followUpStatus)==null?void 0:D.status)||"")}).length;case"followups":return _.filter(ie=>ie.nextFollowUpDate===T).length;case"converted":return _.filter(ie=>{var D;return((D=ie.followUpStatus)==null?void 0:D.status)==="advance-paid-confirmed"}).length;default:return _.length}};return s.jsxs(sn,{title:"Sales Guest Management",subtitle:"Manage sales leads, prospects, and client conversions",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sales Client Management"}),s.jsxs("div",{className:"flex items-center space-x-1 bg-slate-100 rounded-lg p-1",children:[s.jsxs("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="all"?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["All Clients (",Z("all"),")"]}),s.jsxs("button",{onClick:()=>f("prospects"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="prospects"?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Active Prospects (",Z("prospects"),")"]}),s.jsxs("button",{onClick:()=>f("followups"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="followups"?"bg-white text-orange-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Today's Follow Ups (",Z("followups"),")"]}),s.jsxs("button",{onClick:()=>f("converted"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${p==="converted"?"bg-white text-green-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Converted Sales (",Z("converted"),")"]})]})]})}),s.jsx("div",{className:"p-6",children:L.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(yt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:p==="prospects"?"No active prospects":p==="followups"?"No follow-ups scheduled for today":p==="converted"?"No converted sales yet":"No clients yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:p==="prospects"?"Active prospects will appear here.":p==="followups"?"Clients scheduled for follow-up today will appear here.":p==="converted"?"Successfully converted sales will appear here.":"Client leads will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Sales Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Next Follow-up"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:L.map(V=>{var ie,D;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:V.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-1"}),V.countryCode," ",V.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[V.numberOfDays," days • ",V.numberOfPax.adults+V.numberOfPax.children," pax"]}),s.jsx("div",{className:"text-slate-500",children:V.transportationMode})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M((ie=V.followUpStatus)==null?void 0:ie.status)}`,children:H((D=V.followUpStatus)==null?void 0:D.status)})}),s.jsx("td",{className:"px-6 py-4",children:V.nextFollowUpDate?s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"text-slate-900",children:new Date(V.nextFollowUpDate).toLocaleDateString()}),V.nextFollowUpTime&&s.jsx("div",{className:"text-slate-500",children:V.nextFollowUpTime})]}):s.jsx("span",{className:"text-slate-400 text-sm",children:"No follow-up scheduled"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>R(V),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View Details",children:s.jsx(ni,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>E(V),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Edit Client",children:s.jsx(xa,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>I(V),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"Follow Up",children:s.jsx(j4,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Y(V),className:"p-2 text-indigo-600 hover:bg-indigo-100 rounded-lg transition-colors",title:"View Latest Itinerary",children:s.jsx(ws,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>te(V),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"WhatsApp Chat",children:s.jsx(qr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>K(V.id,V.name),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Client",children:s.jsx(Sn,{className:"h-4 w-4"})})]})})]},V.id)})})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Leads"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(yt,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Prospects"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.filter(V=>{var ie;return!["advance-paid-confirmed","dead"].includes(((ie=V.followUpStatus)==null?void 0:ie.status)||"")}).length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Today's Follow-ups"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.filter(V=>V.nextFollowUpDate===T).length})]}),s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(zr,{className:"h-6 w-6 text-orange-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Converted Sales"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.filter(V=>{var ie;return((ie=V.followUpStatus)==null?void 0:ie.status)==="advance-paid-confirmed"}).length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-green-600"})})]})})]})]}),b&&N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Client Details"}),s.jsx("button",{onClick:()=>j(!1),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(zt,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Personal Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Name"}),s.jsx("p",{className:"text-slate-900",children:N.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"WhatsApp"}),s.jsxs("p",{className:"text-slate-900",children:[N.countryCode," ",N.whatsapp]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Travel Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Travel Dates"}),s.jsx("p",{className:"text-slate-900",children:N.travelDates.isFlexible?`Flexible (${N.travelDates.flexibleMonth})`:`${new Date(N.travelDates.startDate).toLocaleDateString()} - ${new Date(N.travelDates.endDate).toLocaleDateString()}`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Duration"}),s.jsxs("p",{className:"text-slate-900",children:[N.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Passengers"}),s.jsxs("p",{className:"text-slate-900",children:[N.numberOfPax.adults+N.numberOfPax.children," pax (",N.numberOfPax.adults," adults, ",N.numberOfPax.children," children)"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Transportation"}),s.jsx("p",{className:"text-slate-900",children:N.transportationMode})]})]})]})]}),N.followUpHistory&&N.followUpHistory.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Sales Follow-up History"}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:N.followUpHistory.map(V=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M(V.status)}`,children:H(V.status)}),s.jsx("span",{className:"text-xs text-slate-500",children:new Date(V.updatedAt).toLocaleDateString()})]}),s.jsx("p",{className:"text-sm text-slate-700",children:V.remarks}),V.nextFollowUpDate&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Next follow-up: ",new Date(V.nextFollowUpDate).toLocaleDateString(),V.nextFollowUpTime&&` at ${V.nextFollowUpTime}`]})]},V.id))})]})]})]})}),C&&N&&s.jsx(U6,{client:N,onClose:()=>x(!1),onSave:V=>{const ie=_.map(D=>D.id===V.id?V:D);t({type:"SET_DATA",payload:{clients:ie}}),x(!1)}}),g&&N&&s.jsx(z6,{client:N,onClose:()=>y(!1),onSave:G}),A&&N&&s.jsx(Ub,{client:N,onClose:()=>P(!1)})]})},H6=({client:e,dayPlans:t,onNext:n,onBack:r})=>{const{state:a}=At(),{hotels:i,sightseeings:l,activities:o,entryTickets:d,meals:u,transportations:p}=a,[f,N]=ce.useState(0),[h,b]=ce.useState(83),x=Gi(e,t,i,l,o,d,u,p)+50,g=x+f,y=()=>{const P={id:`itinerary-${e.id}-${Date.now()}`,client:e,dayPlans:t,totalBaseCost:x,profitMargin:f,finalPrice:g,exchangeRate:h,version:1,lastUpdated:new Date().toISOString(),updatedBy:"sales",changeLog:[]};n(P)},A=P=>{const _=l.filter(E=>P.sightseeing.includes(E.id)),T=P.activities.map(E=>{const I=o.find(K=>K.id===E.activityId),Y=I==null?void 0:I.options.find(K=>K.id===E.optionId);return{activity:I,option:Y}}).filter(E=>E.activity&&E.option),S=d.filter(E=>P.entryTickets.includes(E.id)),L=u.filter(E=>P.meals.includes(E.id));let R=null;if(P.hotel){const E=i.find(Y=>Y.id===P.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===P.hotel.roomTypeId);E&&I&&(R={hotel:E,roomType:I})}return{sightseeing:_,activities:T,tickets:S,meals:L,hotel:R}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(fs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Sales Pricing"}),s.jsx("p",{className:"text-purple-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Sales Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(P=>{const _=A(P);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Day ",P.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[_.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.sightseeing.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]}),_.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.activities.map((T,S)=>{var L,R;return s.jsxs("li",{children:["• ",(L=T.activity)==null?void 0:L.name," - ",(R=T.option)==null?void 0:R.name]},S)})})]}),_.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.tickets.map(T=>s.jsxs("li",{children:["• ",T.name]},T.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[_.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",_.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[_.hotel.roomType.name," - ",_.hotel.hotel.place]})]})]}),_.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:_.meals.map(T=>s.jsxs("li",{className:"capitalize",children:["• ",T.type," at ",T.place]},T.id))})]})]})]})]},P.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(Fs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Sales Package Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:h,onChange:P=>b(parseFloat(P.target.value)||83),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",placeholder:"Enter current exchange rate"}),s.jsxs("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:["Current rate: 1 USD = ₹",h]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Package Base Cost"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Vt(x,"USD")}),s.jsx("div",{className:"text-base md:text-lg font-semibold text-blue-600",children:Vt(Jn(x,h),"INR")})]}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Sales Commission (USD)"}),s.jsx("input",{type:"number",min:"0",step:"25",value:f,onChange:P=>N(parseFloat(P.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",placeholder:"Enter your sales commission in USD"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your sales commission or markup"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Sales Quote"}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Vt(g,"USD")}),s.jsx("div",{className:"text-xl md:text-2xl font-bold text-purple-100",children:Vt(Jn(g,h),"INR")})]}),s.jsxs("p",{className:"text-purple-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-purple-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Package Cost: ",Vt(x,"USD")," / ",Vt(Jn(x,h),"INR")]}),s.jsxs("div",{children:["Your Commission: ",Vt(f,"USD")," / ",Vt(Jn(f,h),"INR")]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:r,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:y,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(fs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},V6=({itinerary:e,onBack:t,onStartNew:n})=>{var j;const{state:r,dispatch:a}=At(),{state:i}=Yt(),{hotels:l,sightseeings:o,activities:d,entryTickets:u,meals:p,transportations:f}=r;Za.useEffect(()=>{var y;const C={...e.client,followUpStatus:{status:"itinerary-created",updatedAt:new Date().toISOString(),remarks:"Initial itinerary created by sales team",nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"10:00"},followUpHistory:[{id:Date.now().toString(),status:"itinerary-created",remarks:"Initial itinerary created by sales team",updatedAt:new Date().toISOString(),nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"10:00",updatedBy:((y=i.user)==null?void 0:y.id)||"sales"}],nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"10:00"};r.clients.find(A=>A.id===e.client.id)||a({type:"ADD_CLIENT",payload:C});const g={...e,id:`itinerary-${e.client.id}-${Date.now()}`,version:1,lastUpdated:new Date().toISOString(),updatedBy:"sales",changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:"Initial itinerary created by sales team",timestamp:new Date().toISOString(),updatedBy:"sales"}]};a({type:"ADD_ITINERARY",payload:g}),setTimeout(()=>{const A=localStorage.getItem("appData");let P=A?JSON.parse(A):{clients:[],itineraries:[]};P.clients.some(S=>S.id===C.id)||(P.clients=[...P.clients,C]),P.itineraries=[...P.itineraries,g],localStorage.setItem("appData",JSON.stringify(P));const T=new CustomEvent("refreshData",{detail:P});window.dispatchEvent(T)},100)},[e,a,(j=i.user)==null?void 0:j.id,r.clients]);const N=()=>{const C=e.client.numberOfPax.adults+e.client.numberOfPax.children;let x=`🌴 PREMIUM TRAVEL PACKAGE 🌴

`;x+=`📋 TRIP DETAILS:
`,x+=`• Trip Name: ${e.client.name}
`,x+=`• Duration: ${e.client.numberOfDays} days
`,x+=`• Passengers: ${C} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,x+=`• Transportation: ${e.client.transportationMode}

`,x+=`📅 DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(y=>{const A=b(y);x+=`🗓️ DAY ${y.day}:
`,A.sightseeing.length>0&&(x+=`📍 SIGHTSEEING:
`,A.sightseeing.forEach(P=>{x+=`   • ${P.name}
`})),A.hotel&&(x+=`🏨 ACCOMMODATION:
`,x+=`   • ${A.hotel.hotel.name} - ${A.hotel.roomType.name}
`,x+=`   • Location: ${A.hotel.hotel.place}
`),A.activities.length>0&&(x+=`🎯 ACTIVITIES:
`,A.activities.forEach(P=>{var _,T;x+=`   • ${(_=P.activity)==null?void 0:_.name} - ${(T=P.option)==null?void 0:T.name}
`})),A.tickets.length>0&&(x+=`🎫 ENTRY TICKETS:
`,A.tickets.forEach(P=>{x+=`   • ${P.name}
`})),A.meals.length>0&&(x+=`🍽️ MEALS:
`,A.meals.forEach(P=>{x+=`   • ${P.type.charAt(0).toUpperCase()+P.type.slice(1)} at ${P.place}
`})),x+=`
`}),x+=`💰 PREMIUM PACKAGE PRICING:
`,x+=`• Total Package Price: $${e.finalPrice.toFixed(2)}
`,x+=`• Total Package Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,x+=`• Exchange Rate: 1 USD = ₹${e.exchangeRate}

`;const g=new Map;e.dayPlans.forEach(y=>{if(y.hotel){const A=l.find(_=>_.id===y.hotel.hotelId),P=A==null?void 0:A.roomTypes.find(_=>_.id===y.hotel.roomTypeId);if(A&&P){const _=`${A.id}-${P.id}`;g.has(_)?g.get(_).nights+=1:g.set(_,{hotel:A,roomType:P,nights:1})}}}),x+=`✅ PREMIUM INCLUSIONS:
`,x+=`• ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,g.size>0&&g.forEach(({hotel:y,roomType:A,nights:P})=>{x+=`• ${P} night${P>1?"s":""} stay ${y.name} in ${A.name}
`}),e.dayPlans.some(y=>y.sightseeing.length>0)&&(x+=`• Comprehensive sightseeing tours as mentioned
`),e.dayPlans.some(y=>y.activities.length>0)&&(x+=`• Premium activities and experiences as listed
`),e.dayPlans.some(y=>y.entryTickets.length>0)&&(x+=`• All entry tickets to attractions
`),e.dayPlans.some(y=>y.meals.length>0)&&(x+=`• Meals as specified in itinerary
`),x+=`• Professional travel planning service
`,x+=`• 24/7 customer support during travel
`,x+=`• Dedicated sales representative assistance

`,x+=`❌ EXCLUSIONS:
`,x+=`• International/domestic flights
`,x+=`• Travel insurance
`,x+=`• Personal expenses and shopping
`,x+=`• Tips and gratuities
`,x+=`• Any meals not mentioned in inclusions
`,x+=`• Additional activities not listed
`,x+=`• Visa fees and documentation
`,x+=`• Emergency medical expenses

`,x+=`📞 SALES CONTACT:
`,x+=`${e.client.name} Premium Travel Package
`,x+=`Nomadller Solutions - Sales Department
`,x+=`Professional Travel Planning Services

`,x+=`Generated on: ${new Date().toLocaleDateString()}
`,x+=`Package ID: ${e.client.id}
`,x+=`Sales Representative: Sales Team
`,navigator.clipboard.writeText(x).then(()=>{alert("✅ Complete sales package copied to clipboard!")}).catch(()=>{alert("❌ Failed to copy package. Please try again.")})},h=()=>{const C=new Qe,x=C.internal.pageSize.width,g=20;let y=g;C.setFontSize(20),C.setFont("helvetica","bold"),C.text("Premium Travel Package",x/2,y,{align:"center"}),y+=15,C.setFontSize(12),C.setFont("helvetica","normal"),C.text(`Client: ${e.client.name}`,g,y),y+=8,C.text(`Duration: ${e.client.numberOfDays} days`,g,y),y+=8,C.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,g,y),y+=15,C.setFont("helvetica","bold"),C.text("Day-by-Day Itinerary:",g,y),y+=10,e.dayPlans.forEach(A=>{if(y>250&&(C.addPage(),y=g),C.setFont("helvetica","bold"),C.text(`Day ${A.day}:`,g,y),y+=8,C.setFont("helvetica","normal"),A.sightseeing.length>0){const P=A.sightseeing.map(_=>{const T=o.find(S=>S.id===_);return T?T.name:"Unknown"}).join(", ");C.text(`• Sightseeing: ${P}`,g+5,y),y+=6}if(A.hotel){const P=l.find(T=>T.id===A.hotel.hotelId),_=P==null?void 0:P.roomTypes.find(T=>T.id===A.hotel.roomTypeId);P&&_&&(C.text(`• Hotel: ${P.name} - ${_.name}`,g+5,y),y+=6)}y+=5}),y>220&&(C.addPage(),y=g),C.setFont("helvetica","bold"),C.text("Premium Package Pricing:",g,y),y+=10,C.setFont("helvetica","bold"),C.text(`Total Package Price: $${e.finalPrice.toFixed(2)}`,g,y),y+=8,C.text(`Total Package Price (INR): ₹${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,g,y),C.save(`${e.client.name}-sales-package.pdf`)},b=C=>{const x=o.filter(_=>C.sightseeing.includes(_.id)),g=C.activities.map(_=>{const T=d.find(L=>L.id===_.activityId),S=T==null?void 0:T.options.find(L=>L.id===_.optionId);return{activity:T,option:S}}).filter(_=>_.activity&&_.option),y=u.filter(_=>C.entryTickets.includes(_.id)),A=p.filter(_=>C.meals.includes(_.id));let P=null;if(C.hotel){const _=l.find(S=>S.id===C.hotel.hotelId),T=_==null?void 0:_.roomTypes.find(S=>S.id===C.hotel.roomTypeId);_&&T&&(P={hotel:_,roomType:T})}return{sightseeing:x,activities:g,tickets:y,meals:A,hotel:P}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Xt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Sales Package Complete!"}),s.jsx("p",{className:"text-purple-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xt,{className:"h-6 w-6 text-purple-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-purple-900",children:"Premium Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-purple-700 mt-1 text-sm md:text-base",children:["Your detailed sales package for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(yt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(yt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(pt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.transportationMode})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(C=>{const x=b(C);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(mt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Day ",C.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(pt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.sightseeing.map(g=>s.jsxs("li",{children:["• ",g.name]},g.id))})]}),x.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(is,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.activities.map((g,y)=>{var A,P;return s.jsxs("li",{children:["• ",(A=g.activity)==null?void 0:A.name," - ",(P=g.option)==null?void 0:P.name]},y)})})]}),x.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ps,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.tickets.map(g=>s.jsxs("li",{children:["• ",g.name]},g.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(_t,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:["• ",x.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[x.hotel.roomType.name," - ",x.hotel.hotel.place]})]})]}),x.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.meals.map(g=>s.jsxs("li",{className:"capitalize",children:["• ",g.type," at ",g.place]},g.id))})]})]})]})]},C.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(fs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Premium Package Pricing"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-6 md:p-8 text-center max-w-md",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Final Sales Package Price"}),s.jsxs("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-purple-100 mb-4",children:["₹",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-purple-100 text-sm md:text-base",children:["Premium package for ",e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]}),s.jsxs("div",{className:"text-xs text-purple-100 mt-3",children:["Exchange Rate: 1 USD = ₹",e.exchangeRate]}),e.profitMargin>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-purple-400 border-opacity-50",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["Your Commission: $",e.profitMargin.toFixed(2)," / ₹",(e.profitMargin*e.exchangeRate).toLocaleString("en-IN")]})})})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Wi,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:h,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Fh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:N,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(Ui,{className:"mr-2 h-5 w-5"}),"Copy Package"]})]}),s.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Ip,{className:"mr-2 h-5 w-5"}),"Create New Package"]})]})]})]})})},W6=()=>{const[e,t]=ce.useState(1),[n,r]=ce.useState(null),[a,i]=ce.useState(null),[l,o]=ce.useState(null),[d,u]=ce.useState([]),[p,f]=ce.useState(null),N=A=>{r(A),t(2)},h=(A,P)=>{i(A),o(P),t(3)},b=A=>{u(A),t(4)},j=A=>{f(A),t(5)},C=A=>{f(A),t(5)},x=()=>{t(e-1)},g=()=>{t(1),r(null),i(null),o(null),u([]),f(null)},y=()=>{switch(e){case 1:return s.jsx(fh,{onNext:N});case 2:return n?s.jsx(Yp,{client:n,onNext:h,onBack:x,userType:"sales"}):null;case 3:return a==="fixed"&&l?s.jsx(Jp,{client:n,fixedItinerary:l,onNext:C,onBack:x,userType:"sales"}):a==="new"&&n?s.jsx(Uh,{client:n,onNext:b,onBack:x,isAgent:!1}):null;case 4:return n?s.jsx(H6,{client:n,dayPlans:d,onNext:j,onBack:x}):null;case 5:return p?s.jsx(V6,{itinerary:p,onBack:x,onStartNew:g}):null;default:return s.jsx(fh,{onNext:N})}};return e>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(A=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${A<=e?"bg-purple-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:A}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${A<=e?"text-slate-900":"text-slate-500"}`,children:[A===1&&"Client Details",A===2&&"Itinerary Type",A===3&&(a==="fixed"?"Review Template":"Day Planning"),A===4&&"Review & Pricing",A===5&&"Final Summary"]})}),A<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${A<e?"bg-purple-600":"bg-slate-200"}`})]},A))})})}),y()]})}):s.jsx(sn,{title:"Sales Itinerary Builder",subtitle:"Create compelling travel packages for sales prospects",children:y()})},G6=()=>{var d,u,p,f;const{logout:e,state:t}=Yt(),[n,r]=ce.useState("dashboard"),[a,i]=ce.useState(!1),l=[{id:"dashboard",name:"Dashboard",icon:oh,description:"Sales overview & metrics"},{id:"itinerary",name:"Itinerary Builder",icon:As,description:"Create travel packages"},{id:"guests",name:"Guest Management",icon:Op,description:"Manage clients & leads"}],o=()=>{switch(n){case"dashboard":return s.jsx(N1,{});case"itinerary":return s.jsx(W6,{});case"guests":return s.jsx(q6,{});default:return s.jsx(N1,{})}};return s.jsx(Hp,{children:s.jsxs("div",{className:"flex h-screen bg-slate-50",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${a?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 rounded-lg",children:s.jsx(Fs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:((d=t.user)==null?void 0:d.company_name)||((u=t.user)==null?void 0:u.full_name)||"Sales Portal"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Sales Dashboard"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 text-slate-500 hover:text-slate-700",children:s.jsx(zt,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:((p=t.user)==null?void 0:p.full_name)||"Sales User"}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:(f=t.user)==null?void 0:f.role})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:l.map(N=>s.jsxs("button",{onClick:()=>{r(N.id),i(!1)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${n===N.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-medium shadow-md":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(N.icon,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:N.name}),s.jsx("div",{className:`text-xs ${n===N.id?"text-purple-100":"text-slate-500"}`,children:N.description})]})]},N.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 z-40 lg:hidden",onClick:()=>i(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-slate-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Dp,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 rounded-lg",children:s.jsx(Fs,{className:"h-5 w-5 text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Sales Portal"})})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(go,{className:"h-4 w-4"})})]})}),s.jsx("main",{className:"flex-1 overflow-auto",children:o()})]})]})})};function Y6(){var t,n,r;const{state:e}=Yt();return e.isAuthenticated?((t=e.user)==null?void 0:t.role)==="admin"?s.jsx(F6,{}):((n=e.user)==null?void 0:n.role)==="agent"?s.jsx(B6,{}):((r=e.user)==null?void 0:r.role)==="sales"?s.jsx(G6,{}):s.jsx(Xg,{}):s.jsx(Xg,{})}function J6(){return s.jsx(x4,{children:s.jsx(Y6,{})})}F2(document.getElementById("root")).render(s.jsx(ce.StrictMode,{children:s.jsx(J6,{})}));export{Et as _,Xn as c,ky as g};
