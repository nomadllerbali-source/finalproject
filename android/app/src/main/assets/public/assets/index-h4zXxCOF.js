(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function My(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var E1={exports:{}},bh={},I1={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),Ry=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),By=Symbol.for("react.strict_mode"),Uy=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Wy=Symbol.for("react.memo"),Gy=Symbol.for("react.lazy"),Tx=Symbol.iterator;function Yy(e){return e===null||typeof e!="object"?null:(e=Tx&&e[Tx]||e["@@iterator"],typeof e=="function"?e:null)}var D1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O1=Object.assign,F1={};function vl(e,t,r){this.props=e,this.context=t,this.refs=F1,this.updater=r||D1}vl.prototype.isReactComponent={};vl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M1(){}M1.prototype=vl.prototype;function U0(e,t,r){this.props=e,this.context=t,this.refs=F1,this.updater=r||D1}var q0=U0.prototype=new M1;q0.constructor=U0;O1(q0,vl.prototype);q0.isPureReactComponent=!0;var Px=Array.isArray,R1=Object.prototype.hasOwnProperty,z0={current:null},$1={key:!0,ref:!0,__self:!0,__source:!0};function B1(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)R1.call(t,n)&&!$1.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Jc,type:e,key:i,ref:o,props:a,_owner:z0.current}}function Ky(e,t){return{$$typeof:Jc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function H0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jc}function Jy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Lx=/\/+/g;function Dm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jy(""+e.key):t.toString(36)}function yu(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Jc:case Ry:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Dm(o,0):n,Px(a)?(r="",e!=null&&(r=e.replace(Lx,"$&/")+"/"),yu(a,t,r,"",function(u){return u})):a!=null&&(H0(a)&&(a=Ky(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Lx,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Px(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Dm(i,l);o+=yu(i,t,r,c,a)}else if(c=Yy(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Dm(i,l++),o+=yu(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Kd(e,t,r){if(e==null)return e;var n=[],a=0;return yu(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Xy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var or={current:null},wu={transition:null},Qy={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:wu,ReactCurrentOwner:z0};function U1(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:Kd,forEach:function(e,t,r){Kd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kd(e,function(){t++}),t},toArray:function(e){return Kd(e,function(t){return t})||[]},only:function(e){if(!H0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ht.Component=vl;ht.Fragment=$y;ht.Profiler=Uy;ht.PureComponent=U0;ht.StrictMode=By;ht.Suspense=Vy;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qy;ht.act=U1;ht.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=O1({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=z0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)R1.call(t,c)&&!$1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Jc,type:e.type,key:a,ref:i,props:n,_owner:o}};ht.createContext=function(e){return e={$$typeof:zy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qy,_context:e},e.Consumer=e};ht.createElement=B1;ht.createFactory=function(e){var t=B1.bind(null,e);return t.type=e,t};ht.createRef=function(){return{current:null}};ht.forwardRef=function(e){return{$$typeof:Hy,render:e}};ht.isValidElement=H0;ht.lazy=function(e){return{$$typeof:Gy,_payload:{_status:-1,_result:e},_init:Xy}};ht.memo=function(e,t){return{$$typeof:Wy,type:e,compare:t===void 0?null:t}};ht.startTransition=function(e){var t=wu.transition;wu.transition={};try{e()}finally{wu.transition=t}};ht.unstable_act=U1;ht.useCallback=function(e,t){return or.current.useCallback(e,t)};ht.useContext=function(e){return or.current.useContext(e)};ht.useDebugValue=function(){};ht.useDeferredValue=function(e){return or.current.useDeferredValue(e)};ht.useEffect=function(e,t){return or.current.useEffect(e,t)};ht.useId=function(){return or.current.useId()};ht.useImperativeHandle=function(e,t,r){return or.current.useImperativeHandle(e,t,r)};ht.useInsertionEffect=function(e,t){return or.current.useInsertionEffect(e,t)};ht.useLayoutEffect=function(e,t){return or.current.useLayoutEffect(e,t)};ht.useMemo=function(e,t){return or.current.useMemo(e,t)};ht.useReducer=function(e,t,r){return or.current.useReducer(e,t,r)};ht.useRef=function(e){return or.current.useRef(e)};ht.useState=function(e){return or.current.useState(e)};ht.useSyncExternalStore=function(e,t,r){return or.current.useSyncExternalStore(e,t,r)};ht.useTransition=function(){return or.current.useTransition()};ht.version="18.3.1";I1.exports=ht;var ne=I1.exports;const il=Fy(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=ne,e5=Symbol.for("react.element"),t5=Symbol.for("react.fragment"),s5=Object.prototype.hasOwnProperty,r5=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n5={key:!0,ref:!0,__self:!0,__source:!0};function q1(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)s5.call(t,n)&&!n5.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:e5,type:e,key:i,ref:o,props:a,_owner:r5.current}}bh.Fragment=t5;bh.jsx=q1;bh.jsxs=q1;E1.exports=bh;var s=E1.exports,z1={exports:{}},Dr={},H1={exports:{}},V1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,ee){var te=$.length;$.push(ee);e:for(;0<te;){var re=te-1>>>1,D=$[re];if(0<a(D,ee))$[re]=ee,$[te]=D,te=re;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var ee=$[0],te=$.pop();if(te!==ee){$[0]=te;e:for(var re=0,D=$.length,R=D>>>1;re<R;){var V=2*(re+1)-1,Q=$[V],se=V+1,ue=$[se];if(0>a(Q,te))se<D&&0>a(ue,Q)?($[re]=ue,$[se]=te,re=se):($[re]=Q,$[V]=te,re=V);else if(se<D&&0>a(ue,te))$[re]=ue,$[se]=te,re=se;else break e}}return ee}function a($,ee){var te=$.sortIndex-ee.sortIndex;return te!==0?te:$.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],p=1,f=null,j=3,m=!1,y=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var ee=r(u);ee!==null;){if(ee.callback===null)n(u);else if(ee.startTime<=$)n(u),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=r(u)}}function S($){if(_=!1,b($),!y)if(r(c)!==null)y=!0,X(L);else{var ee=r(u);ee!==null&&q(S,ee.startTime-$)}}function L($,ee){y=!1,_&&(_=!1,v(N),N=-1),m=!0;var te=j;try{for(b(ee),f=r(c);f!==null&&(!(f.expirationTime>ee)||$&&!E());){var re=f.callback;if(typeof re=="function"){f.callback=null,j=f.priorityLevel;var D=re(f.expirationTime<=ee);ee=e.unstable_now(),typeof D=="function"?f.callback=D:f===r(c)&&n(c),b(ee)}else n(c);f=r(c)}if(f!==null)var R=!0;else{var V=r(u);V!==null&&q(S,V.startTime-ee),R=!1}return R}finally{f=null,j=te,m=!1}}var T=!1,A=null,N=-1,P=5,M=-1;function E(){return!(e.unstable_now()-M<P)}function I(){if(A!==null){var $=e.unstable_now();M=$;var ee=!0;try{ee=A(!0,$)}finally{ee?Y():(T=!1,A=null)}}else T=!1}var Y;if(typeof x=="function")Y=function(){x(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=I,Y=function(){Z.postMessage(null)}}else Y=function(){k(I,0)};function X($){A=$,T||(T=!0,Y())}function q($,ee){N=k(function(){$(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,X(L))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(j){case 1:case 2:case 3:var ee=3;break;default:ee=j}var te=j;j=ee;try{return $()}finally{j=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=j;j=$;try{return ee()}finally{j=te}},e.unstable_scheduleCallback=function($,ee,te){var re=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?re+te:re):te=re,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=te+D,$={id:p++,callback:ee,priorityLevel:$,startTime:te,expirationTime:D,sortIndex:-1},te>re?($.sortIndex=te,t(u,$),r(c)===null&&$===r(u)&&(_?(v(N),N=-1):_=!0,q(S,te-re))):($.sortIndex=D,t(c,$),y||m||(y=!0,X(L))),$},e.unstable_shouldYield=E,e.unstable_wrapCallback=function($){var ee=j;return function(){var te=j;j=ee;try{return $.apply(this,arguments)}finally{j=te}}}})(V1);H1.exports=V1;var a5=H1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5=ne,Ir=a5;function Ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var W1=new Set,Pc={};function Vi(e,t){ol(e,t),ol(e+"Capture",t)}function ol(e,t){for(Pc[e]=t,e=0;e<t.length;e++)W1.add(t[e])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,o5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ex={},Ix={};function l5(e){return kf.call(Ix,e)?!0:kf.call(Ex,e)?!1:o5.test(e)?Ix[e]=!0:(Ex[e]=!0,!1)}function c5(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function d5(e,t,r,n){if(t===null||typeof t>"u"||c5(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bs[e]=new lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bs[t]=new lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bs[e]=new lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bs[e]=new lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bs[e]=new lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bs[e]=new lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bs[e]=new lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bs[e]=new lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bs[e]=new lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function W0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V0,W0);Bs[t]=new lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V0,W0);Bs[t]=new lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V0,W0);Bs[t]=new lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bs[e]=new lr(e,1,!1,e.toLowerCase(),null,!1,!1)});Bs.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bs[e]=new lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function G0(e,t,r,n){var a=Bs.hasOwnProperty(t)?Bs[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(d5(t,r,a,n)&&(r=null),n||a===null?l5(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ba=i5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jd=Symbol.for("react.element"),Mo=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),Y0=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),Y1=Symbol.for("react.context"),K0=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),Tf=Symbol.for("react.suspense_list"),J0=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),K1=Symbol.for("react.offscreen"),Dx=Symbol.iterator;function Zl(e){return e===null||typeof e!="object"?null:(e=Dx&&e[Dx]||e["@@iterator"],typeof e=="function"?e:null)}var Jt=Object.assign,Om;function uc(e){if(Om===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Om=t&&t[1]||""}return`
`+Om+e}var Fm=!1;function Mm(e,t){if(!e||Fm)return"";Fm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?uc(e):""}function u5(e){switch(e.tag){case 5:return uc(e.type);case 16:return uc("Lazy");case 13:return uc("Suspense");case 19:return uc("SuspenseList");case 0:case 2:case 15:return e=Mm(e.type,!1),e;case 11:return e=Mm(e.type.render,!1),e;case 1:return e=Mm(e.type,!0),e;default:return""}}function Pf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ro:return"Fragment";case Mo:return"Portal";case Af:return"Profiler";case Y0:return"StrictMode";case Cf:return"Suspense";case Tf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Y1:return(e.displayName||"Context")+".Consumer";case G1:return(e._context.displayName||"Context")+".Provider";case K0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J0:return t=e.displayName||null,t!==null?t:Pf(e.type)||"Memo";case $a:t=e._payload,e=e._init;try{return Pf(e(t))}catch{}}return null}function h5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pf(t);case 8:return t===Y0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ti(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function J1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function m5(e){var t=J1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xd(e){e._valueTracker||(e._valueTracker=m5(e))}function X1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=J1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ru(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lf(e,t){var r=t.checked;return Jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ox(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ti(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Q1(e,t){t=t.checked,t!=null&&G0(e,"checked",t,!1)}function Ef(e,t){Q1(e,t);var r=ti(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?If(e,t.type,r):t.hasOwnProperty("defaultValue")&&If(e,t.type,ti(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function If(e,t,r){(t!=="number"||Ru(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var hc=Array.isArray;function Jo(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ti(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Df(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Jt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ie(92));if(hc(r)){if(1<r.length)throw Error(Ie(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ti(r)}}function Z1(e,t){var r=ti(t.value),n=ti(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Rx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ev(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Of(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ev(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qd,tv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qd=Qd||document.createElement("div"),Qd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f5=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(e){f5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gc[t]=gc[e]})});function sv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||gc.hasOwnProperty(e)&&gc[e]?(""+t).trim():t+"px"}function rv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=sv(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var p5=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ff(e,t){if(t){if(p5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ie(62))}}function Mf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rf=null;function X0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $f=null,Xo=null,Qo=null;function $x(e){if(e=Zc(e)){if(typeof $f!="function")throw Error(Ie(280));var t=e.stateNode;t&&(t=_h(t),$f(e.stateNode,e.type,t))}}function nv(e){Xo?Qo?Qo.push(e):Qo=[e]:Xo=e}function av(){if(Xo){var e=Xo,t=Qo;if(Qo=Xo=null,$x(e),t)for(e=0;e<t.length;e++)$x(t[e])}}function iv(e,t){return e(t)}function ov(){}var Rm=!1;function lv(e,t,r){if(Rm)return e(t,r);Rm=!0;try{return iv(e,t,r)}finally{Rm=!1,(Xo!==null||Qo!==null)&&(ov(),av())}}function Ec(e,t){var r=e.stateNode;if(r===null)return null;var n=_h(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ie(231,t,typeof r));return r}var Bf=!1;if(fa)try{var ec={};Object.defineProperty(ec,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{Bf=!1}function x5(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(p){this.onError(p)}}var vc=!1,$u=null,Bu=!1,Uf=null,g5={onError:function(e){vc=!0,$u=e}};function v5(e,t,r,n,a,i,o,l,c){vc=!1,$u=null,x5.apply(g5,arguments)}function b5(e,t,r,n,a,i,o,l,c){if(v5.apply(this,arguments),vc){if(vc){var u=$u;vc=!1,$u=null}else throw Error(Ie(198));Bu||(Bu=!0,Uf=u)}}function Wi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bx(e){if(Wi(e)!==e)throw Error(Ie(188))}function y5(e){var t=e.alternate;if(!t){if(t=Wi(e),t===null)throw Error(Ie(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Bx(a),e;if(i===n)return Bx(a),t;i=i.sibling}throw Error(Ie(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Ie(189))}}if(r.alternate!==n)throw Error(Ie(190))}if(r.tag!==3)throw Error(Ie(188));return r.stateNode.current===r?e:t}function dv(e){return e=y5(e),e!==null?uv(e):null}function uv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uv(e);if(t!==null)return t;e=e.sibling}return null}var hv=Ir.unstable_scheduleCallback,Ux=Ir.unstable_cancelCallback,w5=Ir.unstable_shouldYield,N5=Ir.unstable_requestPaint,ls=Ir.unstable_now,j5=Ir.unstable_getCurrentPriorityLevel,Q0=Ir.unstable_ImmediatePriority,mv=Ir.unstable_UserBlockingPriority,Uu=Ir.unstable_NormalPriority,_5=Ir.unstable_LowPriority,fv=Ir.unstable_IdlePriority,yh=null,zn=null;function S5(e){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(yh,e,void 0,(e.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:C5,k5=Math.log,A5=Math.LN2;function C5(e){return e>>>=0,e===0?32:31-(k5(e)/A5|0)|0}var Zd=64,eu=4194304;function mc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=mc(l):(i&=o,i!==0&&(n=mc(i)))}else o=r&~a,o!==0?n=mc(o):i!==0&&(n=mc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-yn(t),a=1<<r,n|=e[r],t&=~a;return n}function T5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P5(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-yn(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=T5(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function qf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pv(){var e=Zd;return Zd<<=1,!(Zd&4194240)&&(Zd=64),e}function $m(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yn(t),e[t]=r}function L5(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-yn(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Z0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-yn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var At=0;function xv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gv,ep,vv,bv,yv,zf=!1,tu=[],Ga=null,Ya=null,Ka=null,Ic=new Map,Dc=new Map,Ua=[],E5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qx(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":Ic.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(t.pointerId)}}function tc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Zc(t),t!==null&&ep(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function I5(e,t,r,n,a){switch(t){case"focusin":return Ga=tc(Ga,e,t,r,n,a),!0;case"dragenter":return Ya=tc(Ya,e,t,r,n,a),!0;case"mouseover":return Ka=tc(Ka,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ic.set(i,tc(Ic.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Dc.set(i,tc(Dc.get(i)||null,e,t,r,n,a)),!0}return!1}function wv(e){var t=Ii(e.target);if(t!==null){var r=Wi(t);if(r!==null){if(t=r.tag,t===13){if(t=cv(r),t!==null){e.blockedOn=t,yv(e.priority,function(){vv(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Hf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Rf=n,r.target.dispatchEvent(n),Rf=null}else return t=Zc(r),t!==null&&ep(t),e.blockedOn=r,!1;t.shift()}return!0}function zx(e,t,r){Nu(e)&&r.delete(t)}function D5(){zf=!1,Ga!==null&&Nu(Ga)&&(Ga=null),Ya!==null&&Nu(Ya)&&(Ya=null),Ka!==null&&Nu(Ka)&&(Ka=null),Ic.forEach(zx),Dc.forEach(zx)}function sc(e,t){e.blockedOn===t&&(e.blockedOn=null,zf||(zf=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,D5)))}function Oc(e){function t(a){return sc(a,e)}if(0<tu.length){sc(tu[0],e);for(var r=1;r<tu.length;r++){var n=tu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ga!==null&&sc(Ga,e),Ya!==null&&sc(Ya,e),Ka!==null&&sc(Ka,e),Ic.forEach(t),Dc.forEach(t),r=0;r<Ua.length;r++)n=Ua[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ua.length&&(r=Ua[0],r.blockedOn===null);)wv(r),r.blockedOn===null&&Ua.shift()}var Zo=ba.ReactCurrentBatchConfig,zu=!0;function O5(e,t,r,n){var a=At,i=Zo.transition;Zo.transition=null;try{At=1,tp(e,t,r,n)}finally{At=a,Zo.transition=i}}function F5(e,t,r,n){var a=At,i=Zo.transition;Zo.transition=null;try{At=4,tp(e,t,r,n)}finally{At=a,Zo.transition=i}}function tp(e,t,r,n){if(zu){var a=Hf(e,t,r,n);if(a===null)Km(e,t,n,Hu,r),qx(e,n);else if(I5(a,e,t,r,n))n.stopPropagation();else if(qx(e,n),t&4&&-1<E5.indexOf(e)){for(;a!==null;){var i=Zc(a);if(i!==null&&gv(i),i=Hf(e,t,r,n),i===null&&Km(e,t,n,Hu,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Km(e,t,n,null,r)}}var Hu=null;function Hf(e,t,r,n){if(Hu=null,e=X0(n),e=Ii(e),e!==null)if(t=Wi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hu=e,null}function Nv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j5()){case Q0:return 1;case mv:return 4;case Uu:case _5:return 16;case fv:return 536870912;default:return 16}default:return 16}}var Ha=null,sp=null,ju=null;function jv(){if(ju)return ju;var e,t=sp,r=t.length,n,a="value"in Ha?Ha.value:Ha.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return ju=a.slice(e,1<n?1-n:void 0)}function _u(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function su(){return!0}function Hx(){return!1}function Or(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?su:Hx,this.isPropagationStopped=Hx,this}return Jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),t}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=Or(bl),Qc=Jt({},bl,{view:0,detail:0}),M5=Or(Qc),Bm,Um,rc,wh=Jt({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rc&&(rc&&e.type==="mousemove"?(Bm=e.screenX-rc.screenX,Um=e.screenY-rc.screenY):Um=Bm=0,rc=e),Bm)},movementY:function(e){return"movementY"in e?e.movementY:Um}}),Vx=Or(wh),R5=Jt({},wh,{dataTransfer:0}),$5=Or(R5),B5=Jt({},Qc,{relatedTarget:0}),qm=Or(B5),U5=Jt({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),q5=Or(U5),z5=Jt({},bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),H5=Or(z5),V5=Jt({},bl,{data:0}),Wx=Or(V5),W5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Y5[e])?!!t[e]:!1}function np(){return K5}var J5=Jt({},Qc,{key:function(e){if(e.key){var t=W5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_u(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(e){return e.type==="keypress"?_u(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_u(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X5=Or(J5),Q5=Jt({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gx=Or(Q5),Z5=Jt({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),ew=Or(Z5),tw=Jt({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),sw=Or(tw),rw=Jt({},wh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nw=Or(rw),aw=[9,13,27,32],ap=fa&&"CompositionEvent"in window,bc=null;fa&&"documentMode"in document&&(bc=document.documentMode);var iw=fa&&"TextEvent"in window&&!bc,_v=fa&&(!ap||bc&&8<bc&&11>=bc),Yx=" ",Kx=!1;function Sv(e,t){switch(e){case"keyup":return aw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $o=!1;function ow(e,t){switch(e){case"compositionend":return kv(t);case"keypress":return t.which!==32?null:(Kx=!0,Yx);case"textInput":return e=t.data,e===Yx&&Kx?null:e;default:return null}}function lw(e,t){if($o)return e==="compositionend"||!ap&&Sv(e,t)?(e=jv(),ju=sp=Ha=null,$o=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _v&&t.locale!=="ko"?null:t.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cw[e.type]:t==="textarea"}function Av(e,t,r,n){nv(n),t=Vu(t,"onChange"),0<t.length&&(r=new rp("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var yc=null,Fc=null;function dw(e){Rv(e,0)}function Nh(e){var t=qo(e);if(X1(t))return e}function uw(e,t){if(e==="change")return t}var Cv=!1;if(fa){var zm;if(fa){var Hm="oninput"in document;if(!Hm){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),Hm=typeof Xx.oninput=="function"}zm=Hm}else zm=!1;Cv=zm&&(!document.documentMode||9<document.documentMode)}function Qx(){yc&&(yc.detachEvent("onpropertychange",Tv),Fc=yc=null)}function Tv(e){if(e.propertyName==="value"&&Nh(Fc)){var t=[];Av(t,Fc,e,X0(e)),lv(dw,t)}}function hw(e,t,r){e==="focusin"?(Qx(),yc=t,Fc=r,yc.attachEvent("onpropertychange",Tv)):e==="focusout"&&Qx()}function mw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nh(Fc)}function fw(e,t){if(e==="click")return Nh(t)}function pw(e,t){if(e==="input"||e==="change")return Nh(t)}function xw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jn=typeof Object.is=="function"?Object.is:xw;function Mc(e,t){if(jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!kf.call(t,a)||!jn(e[a],t[a]))return!1}return!0}function Zx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eg(e,t){var r=Zx(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zx(r)}}function Pv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lv(){for(var e=window,t=Ru();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ru(e.document)}return t}function ip(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gw(e){var t=Lv(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Pv(r.ownerDocument.documentElement,r)){if(n!==null&&ip(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=eg(r,i);var o=eg(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vw=fa&&"documentMode"in document&&11>=document.documentMode,Bo=null,Vf=null,wc=null,Wf=!1;function tg(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wf||Bo==null||Bo!==Ru(n)||(n=Bo,"selectionStart"in n&&ip(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),wc&&Mc(wc,n)||(wc=n,n=Vu(Vf,"onSelect"),0<n.length&&(t=new rp("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Bo)))}function ru(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Uo={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Vm={},Ev={};fa&&(Ev=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function jh(e){if(Vm[e])return Vm[e];if(!Uo[e])return e;var t=Uo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ev)return Vm[e]=t[r];return e}var Iv=jh("animationend"),Dv=jh("animationiteration"),Ov=jh("animationstart"),Fv=jh("transitionend"),Mv=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(e,t){Mv.set(e,t),Vi(t,[e])}for(var Wm=0;Wm<sg.length;Wm++){var Gm=sg[Wm],bw=Gm.toLowerCase(),yw=Gm[0].toUpperCase()+Gm.slice(1);li(bw,"on"+yw)}li(Iv,"onAnimationEnd");li(Dv,"onAnimationIteration");li(Ov,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(Fv,"onTransitionEnd");ol("onMouseEnter",["mouseout","mouseover"]);ol("onMouseLeave",["mouseout","mouseover"]);ol("onPointerEnter",["pointerout","pointerover"]);ol("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function rg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,b5(n,t,void 0,e),e.currentTarget=null}function Rv(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;rg(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;rg(a,l,u),i=c}}}if(Bu)throw e=Uf,Bu=!1,Uf=null,e}function $t(e,t){var r=t[Xf];r===void 0&&(r=t[Xf]=new Set);var n=e+"__bubble";r.has(n)||($v(t,e,2,!1),r.add(n))}function Ym(e,t,r){var n=0;t&&(n|=4),$v(r,e,n,t)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[nu]){e[nu]=!0,W1.forEach(function(r){r!=="selectionchange"&&(ww.has(r)||Ym(r,!1,e),Ym(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nu]||(t[nu]=!0,Ym("selectionchange",!1,t))}}function $v(e,t,r,n){switch(Nv(t)){case 1:var a=O5;break;case 4:a=F5;break;default:a=tp}r=a.bind(null,t,r,e),a=void 0,!Bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Km(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ii(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}lv(function(){var u=i,p=X0(r),f=[];e:{var j=Mv.get(e);if(j!==void 0){var m=rp,y=e;switch(e){case"keypress":if(_u(r)===0)break e;case"keydown":case"keyup":m=X5;break;case"focusin":y="focus",m=qm;break;case"focusout":y="blur",m=qm;break;case"beforeblur":case"afterblur":m=qm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ew;break;case Iv:case Dv:case Ov:m=q5;break;case Fv:m=sw;break;case"scroll":m=M5;break;case"wheel":m=nw;break;case"copy":case"cut":case"paste":m=H5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gx}var _=(t&4)!==0,k=!_&&e==="scroll",v=_?j!==null?j+"Capture":null:j;_=[];for(var x=u,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Ec(x,v),S!=null&&_.push($c(x,S,b)))),k)break;x=x.return}0<_.length&&(j=new m(j,y,null,r,p),f.push({event:j,listeners:_}))}}if(!(t&7)){e:{if(j=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",j&&r!==Rf&&(y=r.relatedTarget||r.fromElement)&&(Ii(y)||y[pa]))break e;if((m||j)&&(j=p.window===p?p:(j=p.ownerDocument)?j.defaultView||j.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?Ii(y):null,y!==null&&(k=Wi(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(_=Vx,S="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(_=Gx,S="onPointerLeave",v="onPointerEnter",x="pointer"),k=m==null?j:qo(m),b=y==null?j:qo(y),j=new _(S,x+"leave",m,r,p),j.target=k,j.relatedTarget=b,S=null,Ii(p)===u&&(_=new _(v,x+"enter",y,r,p),_.target=b,_.relatedTarget=k,S=_),k=S,m&&y)t:{for(_=m,v=y,x=0,b=_;b;b=So(b))x++;for(b=0,S=v;S;S=So(S))b++;for(;0<x-b;)_=So(_),x--;for(;0<b-x;)v=So(v),b--;for(;x--;){if(_===v||v!==null&&_===v.alternate)break t;_=So(_),v=So(v)}_=null}else _=null;m!==null&&ng(f,j,m,_,!1),y!==null&&k!==null&&ng(f,k,y,_,!0)}}e:{if(j=u?qo(u):window,m=j.nodeName&&j.nodeName.toLowerCase(),m==="select"||m==="input"&&j.type==="file")var L=uw;else if(Jx(j))if(Cv)L=pw;else{L=mw;var T=hw}else(m=j.nodeName)&&m.toLowerCase()==="input"&&(j.type==="checkbox"||j.type==="radio")&&(L=fw);if(L&&(L=L(e,u))){Av(f,L,r,p);break e}T&&T(e,j,u),e==="focusout"&&(T=j._wrapperState)&&T.controlled&&j.type==="number"&&If(j,"number",j.value)}switch(T=u?qo(u):window,e){case"focusin":(Jx(T)||T.contentEditable==="true")&&(Bo=T,Vf=u,wc=null);break;case"focusout":wc=Vf=Bo=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,tg(f,r,p);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":tg(f,r,p)}var A;if(ap)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else $o?Sv(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(_v&&r.locale!=="ko"&&($o||N!=="onCompositionStart"?N==="onCompositionEnd"&&$o&&(A=jv()):(Ha=p,sp="value"in Ha?Ha.value:Ha.textContent,$o=!0)),T=Vu(u,N),0<T.length&&(N=new Wx(N,e,null,r,p),f.push({event:N,listeners:T}),A?N.data=A:(A=kv(r),A!==null&&(N.data=A)))),(A=iw?ow(e,r):lw(e,r))&&(u=Vu(u,"onBeforeInput"),0<u.length&&(p=new Wx("onBeforeInput","beforeinput",null,r,p),f.push({event:p,listeners:u}),p.data=A))}Rv(f,t)})}function $c(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vu(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ec(e,r),i!=null&&n.unshift($c(e,i,a)),i=Ec(e,t),i!=null&&n.push($c(e,i,a))),e=e.return}return n}function So(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ng(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Ec(r,i),c!=null&&o.unshift($c(r,c,l))):a||(c=Ec(r,i),c!=null&&o.push($c(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Nw=/\r\n?/g,jw=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(Nw,`
`).replace(jw,"")}function au(e,t,r){if(t=ag(t),ag(e)!==t&&r)throw Error(Ie(425))}function Wu(){}var Gf=null,Yf=null;function Kf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jf=typeof setTimeout=="function"?setTimeout:void 0,_w=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(e){return ig.resolve(null).then(e).catch(kw)}:Jf;function kw(e){setTimeout(function(){throw e})}function Jm(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Oc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Oc(t)}function Ja(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function og(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yl=Math.random().toString(36).slice(2),Un="__reactFiber$"+yl,Bc="__reactProps$"+yl,pa="__reactContainer$"+yl,Xf="__reactEvents$"+yl,Aw="__reactListeners$"+yl,Cw="__reactHandles$"+yl;function Ii(e){var t=e[Un];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pa]||r[Un]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=og(e);e!==null;){if(r=e[Un])return r;e=og(e)}return t}e=r,r=e.parentNode}return null}function Zc(e){return e=e[Un]||e[pa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ie(33))}function _h(e){return e[Bc]||null}var Qf=[],zo=-1;function ci(e){return{current:e}}function Ut(e){0>zo||(e.current=Qf[zo],Qf[zo]=null,zo--)}function Mt(e,t){zo++,Qf[zo]=e.current,e.current=t}var si={},Qs=ci(si),vr=ci(!1),$i=si;function ll(e,t){var r=e.type.contextTypes;if(!r)return si;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function br(e){return e=e.childContextTypes,e!=null}function Gu(){Ut(vr),Ut(Qs)}function lg(e,t,r){if(Qs.current!==si)throw Error(Ie(168));Mt(Qs,t),Mt(vr,r)}function Bv(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Ie(108,h5(e)||"Unknown",a));return Jt({},r,n)}function Yu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||si,$i=Qs.current,Mt(Qs,e),Mt(vr,vr.current),!0}function cg(e,t,r){var n=e.stateNode;if(!n)throw Error(Ie(169));r?(e=Bv(e,t,$i),n.__reactInternalMemoizedMergedChildContext=e,Ut(vr),Ut(Qs),Mt(Qs,e)):Ut(vr),Mt(vr,r)}var da=null,Sh=!1,Xm=!1;function Uv(e){da===null?da=[e]:da.push(e)}function Tw(e){Sh=!0,Uv(e)}function di(){if(!Xm&&da!==null){Xm=!0;var e=0,t=At;try{var r=da;for(At=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}da=null,Sh=!1}catch(a){throw da!==null&&(da=da.slice(e+1)),hv(Q0,di),a}finally{At=t,Xm=!1}}return null}var Ho=[],Vo=0,Ku=null,Ju=0,Hr=[],Vr=0,Bi=null,ua=1,ha="";function Ai(e,t){Ho[Vo++]=Ju,Ho[Vo++]=Ku,Ku=e,Ju=t}function qv(e,t,r){Hr[Vr++]=ua,Hr[Vr++]=ha,Hr[Vr++]=Bi,Bi=e;var n=ua;e=ha;var a=32-yn(n)-1;n&=~(1<<a),r+=1;var i=32-yn(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ua=1<<32-yn(t)+a|r<<a|n,ha=i+e}else ua=1<<i|r<<a|n,ha=e}function op(e){e.return!==null&&(Ai(e,1),qv(e,1,0))}function lp(e){for(;e===Ku;)Ku=Ho[--Vo],Ho[Vo]=null,Ju=Ho[--Vo],Ho[Vo]=null;for(;e===Bi;)Bi=Hr[--Vr],Hr[Vr]=null,ha=Hr[--Vr],Hr[Vr]=null,ua=Hr[--Vr],Hr[Vr]=null}var Er=null,Pr=null,zt=!1,bn=null;function zv(e,t){var r=Gr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function dg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Er=e,Pr=Ja(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Er=e,Pr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bi!==null?{id:ua,overflow:ha}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Er=e,Pr=null,!0):!1;default:return!1}}function Zf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function e0(e){if(zt){var t=Pr;if(t){var r=t;if(!dg(e,t)){if(Zf(e))throw Error(Ie(418));t=Ja(r.nextSibling);var n=Er;t&&dg(e,t)?zv(n,r):(e.flags=e.flags&-4097|2,zt=!1,Er=e)}}else{if(Zf(e))throw Error(Ie(418));e.flags=e.flags&-4097|2,zt=!1,Er=e}}}function ug(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Er=e}function iu(e){if(e!==Er)return!1;if(!zt)return ug(e),zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Kf(e.type,e.memoizedProps)),t&&(t=Pr)){if(Zf(e))throw Hv(),Error(Ie(418));for(;t;)zv(e,t),t=Ja(t.nextSibling)}if(ug(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Pr=Ja(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Pr=null}}else Pr=Er?Ja(e.stateNode.nextSibling):null;return!0}function Hv(){for(var e=Pr;e;)e=Ja(e.nextSibling)}function cl(){Pr=Er=null,zt=!1}function cp(e){bn===null?bn=[e]:bn.push(e)}var Pw=ba.ReactCurrentBatchConfig;function nc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ie(309));var n=r.stateNode}if(!n)throw Error(Ie(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ie(284));if(!r._owner)throw Error(Ie(290,e))}return e}function ou(e,t){throw e=Object.prototype.toString.call(t),Error(Ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hg(e){var t=e._init;return t(e._payload)}function Vv(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=ei(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,b,S){return x===null||x.tag!==6?(x=nf(b,v.mode,S),x.return=v,x):(x=a(x,b),x.return=v,x)}function c(v,x,b,S){var L=b.type;return L===Ro?p(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$a&&hg(L)===x.type)?(S=a(x,b.props),S.ref=nc(v,x,b),S.return=v,S):(S=Lu(b.type,b.key,b.props,null,v.mode,S),S.ref=nc(v,x,b),S.return=v,S)}function u(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=af(b,v.mode,S),x.return=v,x):(x=a(x,b.children||[]),x.return=v,x)}function p(v,x,b,S,L){return x===null||x.tag!==7?(x=Mi(b,v.mode,S,L),x.return=v,x):(x=a(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nf(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jd:return b=Lu(x.type,x.key,x.props,null,v.mode,b),b.ref=nc(v,null,x),b.return=v,b;case Mo:return x=af(x,v.mode,b),x.return=v,x;case $a:var S=x._init;return f(v,S(x._payload),b)}if(hc(x)||Zl(x))return x=Mi(x,v.mode,b,null),x.return=v,x;ou(v,x)}return null}function j(v,x,b,S){var L=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return L!==null?null:l(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jd:return b.key===L?c(v,x,b,S):null;case Mo:return b.key===L?u(v,x,b,S):null;case $a:return L=b._init,j(v,x,L(b._payload),S)}if(hc(b)||Zl(b))return L!==null?null:p(v,x,b,S,null);ou(v,b)}return null}function m(v,x,b,S,L){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,l(x,v,""+S,L);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jd:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,L);case Mo:return v=v.get(S.key===null?b:S.key)||null,u(x,v,S,L);case $a:var T=S._init;return m(v,x,b,T(S._payload),L)}if(hc(S)||Zl(S))return v=v.get(b)||null,p(x,v,S,L,null);ou(x,S)}return null}function y(v,x,b,S){for(var L=null,T=null,A=x,N=x=0,P=null;A!==null&&N<b.length;N++){A.index>N?(P=A,A=null):P=A.sibling;var M=j(v,A,b[N],S);if(M===null){A===null&&(A=P);break}e&&A&&M.alternate===null&&t(v,A),x=i(M,x,N),T===null?L=M:T.sibling=M,T=M,A=P}if(N===b.length)return r(v,A),zt&&Ai(v,N),L;if(A===null){for(;N<b.length;N++)A=f(v,b[N],S),A!==null&&(x=i(A,x,N),T===null?L=A:T.sibling=A,T=A);return zt&&Ai(v,N),L}for(A=n(v,A);N<b.length;N++)P=m(A,v,N,b[N],S),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?N:P.key),x=i(P,x,N),T===null?L=P:T.sibling=P,T=P);return e&&A.forEach(function(E){return t(v,E)}),zt&&Ai(v,N),L}function _(v,x,b,S){var L=Zl(b);if(typeof L!="function")throw Error(Ie(150));if(b=L.call(b),b==null)throw Error(Ie(151));for(var T=L=null,A=x,N=x=0,P=null,M=b.next();A!==null&&!M.done;N++,M=b.next()){A.index>N?(P=A,A=null):P=A.sibling;var E=j(v,A,M.value,S);if(E===null){A===null&&(A=P);break}e&&A&&E.alternate===null&&t(v,A),x=i(E,x,N),T===null?L=E:T.sibling=E,T=E,A=P}if(M.done)return r(v,A),zt&&Ai(v,N),L;if(A===null){for(;!M.done;N++,M=b.next())M=f(v,M.value,S),M!==null&&(x=i(M,x,N),T===null?L=M:T.sibling=M,T=M);return zt&&Ai(v,N),L}for(A=n(v,A);!M.done;N++,M=b.next())M=m(A,v,N,M.value,S),M!==null&&(e&&M.alternate!==null&&A.delete(M.key===null?N:M.key),x=i(M,x,N),T===null?L=M:T.sibling=M,T=M);return e&&A.forEach(function(I){return t(v,I)}),zt&&Ai(v,N),L}function k(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Ro&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jd:e:{for(var L=b.key,T=x;T!==null;){if(T.key===L){if(L=b.type,L===Ro){if(T.tag===7){r(v,T.sibling),x=a(T,b.props.children),x.return=v,v=x;break e}}else if(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$a&&hg(L)===T.type){r(v,T.sibling),x=a(T,b.props),x.ref=nc(v,T,b),x.return=v,v=x;break e}r(v,T);break}else t(v,T);T=T.sibling}b.type===Ro?(x=Mi(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=Lu(b.type,b.key,b.props,null,v.mode,S),S.ref=nc(v,x,b),S.return=v,v=S)}return o(v);case Mo:e:{for(T=b.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(v,x.sibling),x=a(x,b.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=af(b,v.mode,S),x.return=v,v=x}return o(v);case $a:return T=b._init,k(v,x,T(b._payload),S)}if(hc(b))return y(v,x,b,S);if(Zl(b))return _(v,x,b,S);ou(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,b),x.return=v,v=x):(r(v,x),x=nf(b,v.mode,S),x.return=v,v=x),o(v)):r(v,x)}return k}var dl=Vv(!0),Wv=Vv(!1),Xu=ci(null),Qu=null,Wo=null,dp=null;function up(){dp=Wo=Qu=null}function hp(e){var t=Xu.current;Ut(Xu),e._currentValue=t}function t0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function el(e,t){Qu=e,dp=Wo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Xr(e){var t=e._currentValue;if(dp!==e)if(e={context:e,memoizedValue:t,next:null},Wo===null){if(Qu===null)throw Error(Ie(308));Wo=e,Qu.dependencies={lanes:0,firstContext:e}}else Wo=Wo.next=e;return t}var Di=null;function mp(e){Di===null?Di=[e]:Di.push(e)}function Gv(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,mp(t)):(r.next=a.next,a.next=r),t.interleaved=r,xa(e,n)}function xa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ba=!1;function fp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,vt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,xa(e,r)}return a=n.interleaved,a===null?(t.next=t,mp(n)):(t.next=a.next,a.next=t),n.interleaved=t,xa(e,r)}function Su(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Z0(e,r)}}function mg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Zu(e,t,r,n){var a=e.updateQueue;Ba=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var p=e.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,p=u=c=null,l=i;do{var j=l.lane,m=l.eventTime;if((n&j)===j){p!==null&&(p=p.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,_=l;switch(j=t,m=r,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(m,f,j);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,j=typeof y=="function"?y.call(m,f,j):y,j==null)break e;f=Jt({},f,j);break e;case 2:Ba=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,j=a.effects,j===null?a.effects=[l]:j.push(l))}else m={eventTime:m,lane:j,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(u=p=m,c=f):p=p.next=m,o|=j;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;j=l,l=j.next,j.next=null,a.lastBaseUpdate=j,a.shared.pending=null}}while(!0);if(p===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);qi|=o,e.lanes=o,e.memoizedState=f}}function fg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Ie(191,a));a.call(n)}}}var ed={},Hn=ci(ed),Uc=ci(ed),qc=ci(ed);function Oi(e){if(e===ed)throw Error(Ie(174));return e}function pp(e,t){switch(Mt(qc,t),Mt(Uc,e),Mt(Hn,ed),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Of(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Of(t,e)}Ut(Hn),Mt(Hn,t)}function ul(){Ut(Hn),Ut(Uc),Ut(qc)}function Kv(e){Oi(qc.current);var t=Oi(Hn.current),r=Of(t,e.type);t!==r&&(Mt(Uc,e),Mt(Hn,r))}function xp(e){Uc.current===e&&(Ut(Hn),Ut(Uc))}var Wt=ci(0);function eh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qm=[];function gp(){for(var e=0;e<Qm.length;e++)Qm[e]._workInProgressVersionPrimary=null;Qm.length=0}var ku=ba.ReactCurrentDispatcher,Zm=ba.ReactCurrentBatchConfig,Ui=0,Yt=null,Ss=null,Ls=null,th=!1,Nc=!1,zc=0,Lw=0;function Hs(){throw Error(Ie(321))}function vp(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!jn(e[r],t[r]))return!1;return!0}function bp(e,t,r,n,a,i){if(Ui=i,Yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ku.current=e===null||e.memoizedState===null?Ow:Fw,e=r(n,a),Nc){i=0;do{if(Nc=!1,zc=0,25<=i)throw Error(Ie(301));i+=1,Ls=Ss=null,t.updateQueue=null,ku.current=Mw,e=r(n,a)}while(Nc)}if(ku.current=sh,t=Ss!==null&&Ss.next!==null,Ui=0,Ls=Ss=Yt=null,th=!1,t)throw Error(Ie(300));return e}function yp(){var e=zc!==0;return zc=0,e}function $n(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?Yt.memoizedState=Ls=e:Ls=Ls.next=e,Ls}function Qr(){if(Ss===null){var e=Yt.alternate;e=e!==null?e.memoizedState:null}else e=Ss.next;var t=Ls===null?Yt.memoizedState:Ls.next;if(t!==null)Ls=t,Ss=e;else{if(e===null)throw Error(Ie(310));Ss=e,e={memoizedState:Ss.memoizedState,baseState:Ss.baseState,baseQueue:Ss.baseQueue,queue:Ss.queue,next:null},Ls===null?Yt.memoizedState=Ls=e:Ls=Ls.next=e}return Ls}function Hc(e,t){return typeof t=="function"?t(e):t}function ef(e){var t=Qr(),r=t.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=e;var n=Ss,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var p=u.lane;if((Ui&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Yt.lanes|=p,qi|=p}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,jn(n,t.memoizedState)||(gr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Yt.lanes|=i,qi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tf(e){var t=Qr(),r=t.queue;if(r===null)throw Error(Ie(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);jn(i,t.memoizedState)||(gr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Jv(){}function Xv(e,t){var r=Yt,n=Qr(),a=t(),i=!jn(n.memoizedState,a);if(i&&(n.memoizedState=a,gr=!0),n=n.queue,wp(e2.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ls!==null&&Ls.memoizedState.tag&1){if(r.flags|=2048,Vc(9,Zv.bind(null,r,n,a,t),void 0,null),Ds===null)throw Error(Ie(349));Ui&30||Qv(r,t,a)}return a}function Qv(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zv(e,t,r,n){t.value=r,t.getSnapshot=n,t2(t)&&s2(e)}function e2(e,t,r){return r(function(){t2(t)&&s2(e)})}function t2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jn(e,r)}catch{return!0}}function s2(e){var t=xa(e,1);t!==null&&wn(t,e,1,-1)}function pg(e){var t=$n();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:e},t.queue=e,e=e.dispatch=Dw.bind(null,Yt,e),[t.memoizedState,e]}function Vc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Yt.updateQueue,t===null?(t={lastEffect:null,stores:null},Yt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function r2(){return Qr().memoizedState}function Au(e,t,r,n){var a=$n();Yt.flags|=e,a.memoizedState=Vc(1|t,r,void 0,n===void 0?null:n)}function kh(e,t,r,n){var a=Qr();n=n===void 0?null:n;var i=void 0;if(Ss!==null){var o=Ss.memoizedState;if(i=o.destroy,n!==null&&vp(n,o.deps)){a.memoizedState=Vc(t,r,i,n);return}}Yt.flags|=e,a.memoizedState=Vc(1|t,r,i,n)}function xg(e,t){return Au(8390656,8,e,t)}function wp(e,t){return kh(2048,8,e,t)}function n2(e,t){return kh(4,2,e,t)}function a2(e,t){return kh(4,4,e,t)}function i2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o2(e,t,r){return r=r!=null?r.concat([e]):null,kh(4,4,i2.bind(null,t,e),r)}function Np(){}function l2(e,t){var r=Qr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vp(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function c2(e,t){var r=Qr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vp(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function d2(e,t,r){return Ui&21?(jn(r,t)||(r=pv(),Yt.lanes|=r,qi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=r)}function Ew(e,t){var r=At;At=r!==0&&4>r?r:4,e(!0);var n=Zm.transition;Zm.transition={};try{e(!1),t()}finally{At=r,Zm.transition=n}}function u2(){return Qr().memoizedState}function Iw(e,t,r){var n=Za(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},h2(e))m2(t,r);else if(r=Gv(e,t,r,n),r!==null){var a=ar();wn(r,e,n,a),f2(r,t,n)}}function Dw(e,t,r){var n=Za(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(h2(e))m2(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,jn(l,o)){var c=t.interleaved;c===null?(a.next=a,mp(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Gv(e,t,a,n),r!==null&&(a=ar(),wn(r,e,n,a),f2(r,t,n))}}function h2(e){var t=e.alternate;return e===Yt||t!==null&&t===Yt}function m2(e,t){Nc=th=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function f2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Z0(e,r)}}var sh={readContext:Xr,useCallback:Hs,useContext:Hs,useEffect:Hs,useImperativeHandle:Hs,useInsertionEffect:Hs,useLayoutEffect:Hs,useMemo:Hs,useReducer:Hs,useRef:Hs,useState:Hs,useDebugValue:Hs,useDeferredValue:Hs,useTransition:Hs,useMutableSource:Hs,useSyncExternalStore:Hs,useId:Hs,unstable_isNewReconciler:!1},Ow={readContext:Xr,useCallback:function(e,t){return $n().memoizedState=[e,t===void 0?null:t],e},useContext:Xr,useEffect:xg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Au(4194308,4,i2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Au(4194308,4,e,t)},useInsertionEffect:function(e,t){return Au(4,2,e,t)},useMemo:function(e,t){var r=$n();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=$n();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Iw.bind(null,Yt,e),[n.memoizedState,e]},useRef:function(e){var t=$n();return e={current:e},t.memoizedState=e},useState:pg,useDebugValue:Np,useDeferredValue:function(e){return $n().memoizedState=e},useTransition:function(){var e=pg(!1),t=e[0];return e=Ew.bind(null,e[1]),$n().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Yt,a=$n();if(zt){if(r===void 0)throw Error(Ie(407));r=r()}else{if(r=t(),Ds===null)throw Error(Ie(349));Ui&30||Qv(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,xg(e2.bind(null,n,i,e),[e]),n.flags|=2048,Vc(9,Zv.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=$n(),t=Ds.identifierPrefix;if(zt){var r=ha,n=ua;r=(n&~(1<<32-yn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=zc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Lw++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Fw={readContext:Xr,useCallback:l2,useContext:Xr,useEffect:wp,useImperativeHandle:o2,useInsertionEffect:n2,useLayoutEffect:a2,useMemo:c2,useReducer:ef,useRef:r2,useState:function(){return ef(Hc)},useDebugValue:Np,useDeferredValue:function(e){var t=Qr();return d2(t,Ss.memoizedState,e)},useTransition:function(){var e=ef(Hc)[0],t=Qr().memoizedState;return[e,t]},useMutableSource:Jv,useSyncExternalStore:Xv,useId:u2,unstable_isNewReconciler:!1},Mw={readContext:Xr,useCallback:l2,useContext:Xr,useEffect:wp,useImperativeHandle:o2,useInsertionEffect:n2,useLayoutEffect:a2,useMemo:c2,useReducer:tf,useRef:r2,useState:function(){return tf(Hc)},useDebugValue:Np,useDeferredValue:function(e){var t=Qr();return Ss===null?t.memoizedState=e:d2(t,Ss.memoizedState,e)},useTransition:function(){var e=tf(Hc)[0],t=Qr().memoizedState;return[e,t]},useMutableSource:Jv,useSyncExternalStore:Xv,useId:u2,unstable_isNewReconciler:!1};function pn(e,t){if(e&&e.defaultProps){t=Jt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function s0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Jt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ah={isMounted:function(e){return(e=e._reactInternals)?Wi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ar(),a=Za(e),i=ma(n,a);i.payload=t,r!=null&&(i.callback=r),t=Xa(e,i,a),t!==null&&(wn(t,e,a,n),Su(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ar(),a=Za(e),i=ma(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Xa(e,i,a),t!==null&&(wn(t,e,a,n),Su(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ar(),n=Za(e),a=ma(r,n);a.tag=2,t!=null&&(a.callback=t),t=Xa(e,a,n),t!==null&&(wn(t,e,n,r),Su(t,e,n))}};function gg(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Mc(r,n)||!Mc(a,i):!0}function p2(e,t,r){var n=!1,a=si,i=t.contextType;return typeof i=="object"&&i!==null?i=Xr(i):(a=br(t)?$i:Qs.current,n=t.contextTypes,i=(n=n!=null)?ll(e,a):si),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ah,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ah.enqueueReplaceState(t,t.state,null)}function r0(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},fp(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Xr(i):(i=br(t)?$i:Qs.current,a.context=ll(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(s0(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ah.enqueueReplaceState(a,a.state,null),Zu(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function hl(e,t){try{var r="",n=t;do r+=u5(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function sf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function n0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Rw=typeof WeakMap=="function"?WeakMap:Map;function x2(e,t,r){r=ma(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){nh||(nh=!0,f0=n),n0(e,t)},r}function g2(e,t,r){r=ma(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){n0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){n0(e,t),typeof n!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function bg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Rw;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Qw.bind(null,e,t,r),t.then(e,e))}function yg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wg(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ma(-1,1),t.tag=2,Xa(r,t,1))),r.lanes|=1),e)}var $w=ba.ReactCurrentOwner,gr=!1;function nr(e,t,r,n){t.child=e===null?Wv(t,null,r,n):dl(t,e.child,r,n)}function Ng(e,t,r,n,a){r=r.render;var i=t.ref;return el(t,a),n=bp(e,t,r,n,i,a),r=yp(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ga(e,t,a)):(zt&&r&&op(t),t.flags|=1,nr(e,t,n,a),t.child)}function jg(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Pp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,v2(e,t,i,n,a)):(e=Lu(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Mc,r(o,n)&&e.ref===t.ref)return ga(e,t,a)}return t.flags|=1,e=ei(i,n),e.ref=t.ref,e.return=t,t.child=e}function v2(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Mc(i,n)&&e.ref===t.ref)if(gr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,ga(e,t,a)}return a0(e,t,r,n,a)}function b2(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Yo,Tr),Tr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mt(Yo,Tr),Tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Mt(Yo,Tr),Tr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Mt(Yo,Tr),Tr|=n;return nr(e,t,a,r),t.child}function y2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function a0(e,t,r,n,a){var i=br(r)?$i:Qs.current;return i=ll(t,i),el(t,a),r=bp(e,t,r,n,i,a),n=yp(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ga(e,t,a)):(zt&&n&&op(t),t.flags|=1,nr(e,t,r,a),t.child)}function _g(e,t,r,n,a){if(br(r)){var i=!0;Yu(t)}else i=!1;if(el(t,a),t.stateNode===null)Cu(e,t),p2(t,r,n),r0(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Xr(u):(u=br(r)?$i:Qs.current,u=ll(t,u));var p=r.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&vg(t,o,n,u),Ba=!1;var j=t.memoizedState;o.state=j,Zu(t,n,o,a),c=t.memoizedState,l!==n||j!==c||vr.current||Ba?(typeof p=="function"&&(s0(t,r,p,n),c=t.memoizedState),(l=Ba||gg(t,r,l,n,j,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Yv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:pn(t.type,l),o.props=u,f=t.pendingProps,j=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Xr(c):(c=br(r)?$i:Qs.current,c=ll(t,c));var m=r.getDerivedStateFromProps;(p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||j!==c)&&vg(t,o,n,c),Ba=!1,j=t.memoizedState,o.state=j,Zu(t,n,o,a);var y=t.memoizedState;l!==f||j!==y||vr.current||Ba?(typeof m=="function"&&(s0(t,r,m,n),y=t.memoizedState),(u=Ba||gg(t,r,u,n,j,y,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),n=!1)}return i0(e,t,r,n,i,a)}function i0(e,t,r,n,a,i){y2(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&cg(t,r,!1),ga(e,t,i);n=t.stateNode,$w.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=dl(t,e.child,null,i),t.child=dl(t,null,l,i)):nr(e,t,l,i),t.memoizedState=n.state,a&&cg(t,r,!0),t.child}function w2(e){var t=e.stateNode;t.pendingContext?lg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lg(e,t.context,!1),pp(e,t.containerInfo)}function Sg(e,t,r,n,a){return cl(),cp(a),t.flags|=256,nr(e,t,r,n),t.child}var o0={dehydrated:null,treeContext:null,retryLane:0};function l0(e){return{baseLanes:e,cachePool:null,transitions:null}}function N2(e,t,r){var n=t.pendingProps,a=Wt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Mt(Wt,a&1),e===null)return e0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ph(o,n,0,null),e=Mi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=l0(r),t.memoizedState=o0,e):jp(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Bw(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ei(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ei(l,i):(i=Mi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?l0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=o0,n}return i=e.child,e=i.sibling,n=ei(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jp(e,t){return t=Ph({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lu(e,t,r,n){return n!==null&&cp(n),dl(t,e.child,null,r),e=jp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bw(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=sf(Error(Ie(422))),lu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Ph({mode:"visible",children:n.children},a,0,null),i=Mi(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&dl(t,e.child,null,o),t.child.memoizedState=l0(o),t.memoizedState=o0,i);if(!(t.mode&1))return lu(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Ie(419)),n=sf(i,n,void 0),lu(e,t,o,n)}if(l=(o&e.childLanes)!==0,gr||l){if(n=Ds,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xa(e,a),wn(n,e,a,-1))}return Tp(),n=sf(Error(Ie(421))),lu(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Zw.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Pr=Ja(a.nextSibling),Er=t,zt=!0,bn=null,e!==null&&(Hr[Vr++]=ua,Hr[Vr++]=ha,Hr[Vr++]=Bi,ua=e.id,ha=e.overflow,Bi=t),t=jp(t,n.children),t.flags|=4096,t)}function kg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),t0(e.return,t,r)}function rf(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function j2(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(nr(e,t,n.children,r),n=Wt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kg(e,r,t);else if(e.tag===19)kg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Mt(Wt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&eh(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),rf(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&eh(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}rf(t,!0,r,null,i);break;case"together":rf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ga(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ie(153));if(t.child!==null){for(e=t.child,r=ei(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ei(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Uw(e,t,r){switch(t.tag){case 3:w2(t),cl();break;case 5:Kv(t);break;case 1:br(t.type)&&Yu(t);break;case 4:pp(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Mt(Xu,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Mt(Wt,Wt.current&1),t.flags|=128,null):r&t.child.childLanes?N2(e,t,r):(Mt(Wt,Wt.current&1),e=ga(e,t,r),e!==null?e.sibling:null);Mt(Wt,Wt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return j2(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Mt(Wt,Wt.current),n)break;return null;case 22:case 23:return t.lanes=0,b2(e,t,r)}return ga(e,t,r)}var _2,c0,S2,k2;_2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};c0=function(){};S2=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Oi(Hn.current);var i=null;switch(r){case"input":a=Lf(e,a),n=Lf(e,n),i=[];break;case"select":a=Jt({},a,{value:void 0}),n=Jt({},n,{value:void 0}),i=[];break;case"textarea":a=Df(e,a),n=Df(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Wu)}Ff(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$t("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};k2=function(e,t,r,n){r!==n&&(t.flags|=4)};function ac(e,t){if(!zt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function qw(e,t,r){var n=t.pendingProps;switch(lp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:return br(t.type)&&Gu(),Vs(t),null;case 3:return n=t.stateNode,ul(),Ut(vr),Ut(Qs),gp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(iu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bn!==null&&(g0(bn),bn=null))),c0(e,t),Vs(t),null;case 5:xp(t);var a=Oi(qc.current);if(r=t.type,e!==null&&t.stateNode!=null)S2(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ie(166));return Vs(t),null}if(e=Oi(Hn.current),iu(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Un]=t,n[Bc]=i,e=(t.mode&1)!==0,r){case"dialog":$t("cancel",n),$t("close",n);break;case"iframe":case"object":case"embed":$t("load",n);break;case"video":case"audio":for(a=0;a<fc.length;a++)$t(fc[a],n);break;case"source":$t("error",n);break;case"img":case"image":case"link":$t("error",n),$t("load",n);break;case"details":$t("toggle",n);break;case"input":Ox(n,i),$t("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},$t("invalid",n);break;case"textarea":Mx(n,i),$t("invalid",n)}Ff(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&au(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&au(n.textContent,l,e),a=["children",""+l]):Pc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$t("scroll",n)}switch(r){case"input":Xd(n),Fx(n,i,!0);break;case"textarea":Xd(n),Rx(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Wu)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ev(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Un]=t,e[Bc]=n,_2(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mf(r,n),r){case"dialog":$t("cancel",e),$t("close",e),a=n;break;case"iframe":case"object":case"embed":$t("load",e),a=n;break;case"video":case"audio":for(a=0;a<fc.length;a++)$t(fc[a],e);a=n;break;case"source":$t("error",e),a=n;break;case"img":case"image":case"link":$t("error",e),$t("load",e),a=n;break;case"details":$t("toggle",e),a=n;break;case"input":Ox(e,n),a=Lf(e,n),$t("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Jt({},n,{value:void 0}),$t("invalid",e);break;case"textarea":Mx(e,n),a=Df(e,n),$t("invalid",e);break;default:a=n}Ff(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?rv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tv(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Lc(e,c):typeof c=="number"&&Lc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$t("scroll",e):c!=null&&G0(e,i,c,o))}switch(r){case"input":Xd(e),Fx(e,n,!1);break;case"textarea":Xd(e),Rx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ti(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Jo(e,!!n.multiple,i,!1):n.defaultValue!=null&&Jo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Wu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&t.stateNode!=null)k2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ie(166));if(r=Oi(qc.current),Oi(Hn.current),iu(t)){if(n=t.stateNode,r=t.memoizedProps,n[Un]=t,(i=n.nodeValue!==r)&&(e=Er,e!==null))switch(e.tag){case 3:au(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&au(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Un]=t,t.stateNode=n}return Vs(t),null;case 13:if(Ut(Wt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zt&&Pr!==null&&t.mode&1&&!(t.flags&128))Hv(),cl(),t.flags|=98560,i=!1;else if(i=iu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Ie(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ie(317));i[Un]=t}else cl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vs(t),i=!1}else bn!==null&&(g0(bn),bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Wt.current&1?ks===0&&(ks=3):Tp())),t.updateQueue!==null&&(t.flags|=4),Vs(t),null);case 4:return ul(),c0(e,t),e===null&&Rc(t.stateNode.containerInfo),Vs(t),null;case 10:return hp(t.type._context),Vs(t),null;case 17:return br(t.type)&&Gu(),Vs(t),null;case 19:if(Ut(Wt),i=t.memoizedState,i===null)return Vs(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ac(i,!1);else{if(ks!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=eh(e),o!==null){for(t.flags|=128,ac(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Mt(Wt,Wt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ls()>ml&&(t.flags|=128,n=!0,ac(i,!1),t.lanes=4194304)}else{if(!n)if(e=eh(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ac(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!zt)return Vs(t),null}else 2*ls()-i.renderingStartTime>ml&&r!==1073741824&&(t.flags|=128,n=!0,ac(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ls(),t.sibling=null,r=Wt.current,Mt(Wt,n?r&1|2:r&1),t):(Vs(t),null);case 22:case 23:return Cp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Tr&1073741824&&(Vs(t),t.subtreeFlags&6&&(t.flags|=8192)):Vs(t),null;case 24:return null;case 25:return null}throw Error(Ie(156,t.tag))}function zw(e,t){switch(lp(t),t.tag){case 1:return br(t.type)&&Gu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ul(),Ut(vr),Ut(Qs),gp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xp(t),null;case 13:if(Ut(Wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ie(340));cl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ut(Wt),null;case 4:return ul(),null;case 10:return hp(t.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var cu=!1,Js=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Go(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ss(e,t,n)}else r.current=null}function d0(e,t,r){try{r()}catch(n){ss(e,t,n)}}var Ag=!1;function Vw(e,t){if(Gf=zu,e=Lv(),ip(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,p=0,f=e,j=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)j=f,f=m;for(;;){if(f===e)break t;if(j===r&&++u===a&&(l=o),j===i&&++p===n&&(c=o),(m=f.nextSibling)!==null)break;f=j,j=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yf={focusedElem:e,selectionRange:r},zu=!1,qe=t;qe!==null;)if(t=qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qe=e;else for(;qe!==null;){t=qe;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,k=y.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?_:pn(t.type,_),k);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(S){ss(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,qe=e;break}qe=t.return}return y=Ag,Ag=!1,y}function jc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&d0(t,r,i)}a=a.next}while(a!==n)}}function Ch(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function u0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function A2(e){var t=e.alternate;t!==null&&(e.alternate=null,A2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Un],delete t[Bc],delete t[Xf],delete t[Aw],delete t[Cw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function C2(e){return e.tag===5||e.tag===3||e.tag===4}function Cg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||C2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function h0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Wu));else if(n!==4&&(e=e.child,e!==null))for(h0(e,t,r),e=e.sibling;e!==null;)h0(e,t,r),e=e.sibling}function m0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(m0(e,t,r),e=e.sibling;e!==null;)m0(e,t,r),e=e.sibling}var Rs=null,gn=!1;function Da(e,t,r){for(r=r.child;r!==null;)T2(e,t,r),r=r.sibling}function T2(e,t,r){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(yh,r)}catch{}switch(r.tag){case 5:Js||Go(r,t);case 6:var n=Rs,a=gn;Rs=null,Da(e,t,r),Rs=n,gn=a,Rs!==null&&(gn?(e=Rs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Rs.removeChild(r.stateNode));break;case 18:Rs!==null&&(gn?(e=Rs,r=r.stateNode,e.nodeType===8?Jm(e.parentNode,r):e.nodeType===1&&Jm(e,r),Oc(e)):Jm(Rs,r.stateNode));break;case 4:n=Rs,a=gn,Rs=r.stateNode.containerInfo,gn=!0,Da(e,t,r),Rs=n,gn=a;break;case 0:case 11:case 14:case 15:if(!Js&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&d0(r,t,o),a=a.next}while(a!==n)}Da(e,t,r);break;case 1:if(!Js&&(Go(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ss(r,t,l)}Da(e,t,r);break;case 21:Da(e,t,r);break;case 22:r.mode&1?(Js=(n=Js)||r.memoizedState!==null,Da(e,t,r),Js=n):Da(e,t,r);break;default:Da(e,t,r)}}function Tg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Hw),t.forEach(function(n){var a=eN.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function un(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Rs=l.stateNode,gn=!1;break e;case 3:Rs=l.stateNode.containerInfo,gn=!0;break e;case 4:Rs=l.stateNode.containerInfo,gn=!0;break e}l=l.return}if(Rs===null)throw Error(Ie(160));T2(i,o,a),Rs=null,gn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){ss(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)P2(t,e),t=t.sibling}function P2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(un(t,e),Mn(e),n&4){try{jc(3,e,e.return),Ch(3,e)}catch(_){ss(e,e.return,_)}try{jc(5,e,e.return)}catch(_){ss(e,e.return,_)}}break;case 1:un(t,e),Mn(e),n&512&&r!==null&&Go(r,r.return);break;case 5:if(un(t,e),Mn(e),n&512&&r!==null&&Go(r,r.return),e.flags&32){var a=e.stateNode;try{Lc(a,"")}catch(_){ss(e,e.return,_)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Q1(a,i),Mf(l,o);var u=Mf(l,i);for(o=0;o<c.length;o+=2){var p=c[o],f=c[o+1];p==="style"?rv(a,f):p==="dangerouslySetInnerHTML"?tv(a,f):p==="children"?Lc(a,f):G0(a,p,f,u)}switch(l){case"input":Ef(a,i);break;case"textarea":Z1(a,i);break;case"select":var j=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Jo(a,!!i.multiple,m,!1):j!==!!i.multiple&&(i.defaultValue!=null?Jo(a,!!i.multiple,i.defaultValue,!0):Jo(a,!!i.multiple,i.multiple?[]:"",!1))}a[Bc]=i}catch(_){ss(e,e.return,_)}}break;case 6:if(un(t,e),Mn(e),n&4){if(e.stateNode===null)throw Error(Ie(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(_){ss(e,e.return,_)}}break;case 3:if(un(t,e),Mn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Oc(t.containerInfo)}catch(_){ss(e,e.return,_)}break;case 4:un(t,e),Mn(e);break;case 13:un(t,e),Mn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(kp=ls())),n&4&&Tg(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Js=(u=Js)||p,un(t,e),Js=u):un(t,e),Mn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(qe=e,p=e.child;p!==null;){for(f=qe=p;qe!==null;){switch(j=qe,m=j.child,j.tag){case 0:case 11:case 14:case 15:jc(4,j,j.return);break;case 1:Go(j,j.return);var y=j.stateNode;if(typeof y.componentWillUnmount=="function"){n=j,r=j.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){ss(n,r,_)}}break;case 5:Go(j,j.return);break;case 22:if(j.memoizedState!==null){Lg(f);continue}}m!==null?(m.return=j,qe=m):Lg(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sv("display",o))}catch(_){ss(e,e.return,_)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){ss(e,e.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:un(t,e),Mn(e),n&4&&Tg(e);break;case 21:break;default:un(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(C2(r)){var n=r;break e}r=r.return}throw Error(Ie(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Lc(a,""),n.flags&=-33);var i=Cg(e);m0(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Cg(e);h0(e,l,o);break;default:throw Error(Ie(161))}}catch(c){ss(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ww(e,t,r){qe=e,L2(e)}function L2(e,t,r){for(var n=(e.mode&1)!==0;qe!==null;){var a=qe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||cu;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Js;l=cu;var u=Js;if(cu=o,(Js=c)&&!u)for(qe=a;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?Eg(a):c!==null?(c.return=o,qe=c):Eg(a);for(;i!==null;)qe=i,L2(i),i=i.sibling;qe=a,cu=l,Js=u}Pg(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,qe=i):Pg(e)}}function Pg(e){for(;qe!==null;){var t=qe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Js||Ch(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Js)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:pn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&fg(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}fg(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Oc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}Js||t.flags&512&&u0(t)}catch(j){ss(t,t.return,j)}}if(t===e){qe=null;break}if(r=t.sibling,r!==null){r.return=t.return,qe=r;break}qe=t.return}}function Lg(e){for(;qe!==null;){var t=qe;if(t===e){qe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,qe=r;break}qe=t.return}}function Eg(e){for(;qe!==null;){var t=qe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ch(4,t)}catch(c){ss(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ss(t,a,c)}}var i=t.return;try{u0(t)}catch(c){ss(t,i,c)}break;case 5:var o=t.return;try{u0(t)}catch(c){ss(t,o,c)}}}catch(c){ss(t,t.return,c)}if(t===e){qe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,qe=l;break}qe=t.return}}var Gw=Math.ceil,rh=ba.ReactCurrentDispatcher,_p=ba.ReactCurrentOwner,Kr=ba.ReactCurrentBatchConfig,vt=0,Ds=null,gs=null,$s=0,Tr=0,Yo=ci(0),ks=0,Wc=null,qi=0,Th=0,Sp=0,_c=null,pr=null,kp=0,ml=1/0,la=null,nh=!1,f0=null,Qa=null,du=!1,Va=null,ah=0,Sc=0,p0=null,Tu=-1,Pu=0;function ar(){return vt&6?ls():Tu!==-1?Tu:Tu=ls()}function Za(e){return e.mode&1?vt&2&&$s!==0?$s&-$s:Pw.transition!==null?(Pu===0&&(Pu=pv()),Pu):(e=At,e!==0||(e=window.event,e=e===void 0?16:Nv(e.type)),e):1}function wn(e,t,r,n){if(50<Sc)throw Sc=0,p0=null,Error(Ie(185));Xc(e,r,n),(!(vt&2)||e!==Ds)&&(e===Ds&&(!(vt&2)&&(Th|=r),ks===4&&qa(e,$s)),yr(e,n),r===1&&vt===0&&!(t.mode&1)&&(ml=ls()+500,Sh&&di()))}function yr(e,t){var r=e.callbackNode;P5(e,t);var n=qu(e,e===Ds?$s:0);if(n===0)r!==null&&Ux(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ux(r),t===1)e.tag===0?Tw(Ig.bind(null,e)):Uv(Ig.bind(null,e)),Sw(function(){!(vt&6)&&di()}),r=null;else{switch(xv(n)){case 1:r=Q0;break;case 4:r=mv;break;case 16:r=Uu;break;case 536870912:r=fv;break;default:r=Uu}r=$2(r,E2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function E2(e,t){if(Tu=-1,Pu=0,vt&6)throw Error(Ie(327));var r=e.callbackNode;if(tl()&&e.callbackNode!==r)return null;var n=qu(e,e===Ds?$s:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ih(e,n);else{t=n;var a=vt;vt|=2;var i=D2();(Ds!==e||$s!==t)&&(la=null,ml=ls()+500,Fi(e,t));do try{Jw();break}catch(l){I2(e,l)}while(!0);up(),rh.current=i,vt=a,gs!==null?t=0:(Ds=null,$s=0,t=ks)}if(t!==0){if(t===2&&(a=qf(e),a!==0&&(n=a,t=x0(e,a))),t===1)throw r=Wc,Fi(e,0),qa(e,n),yr(e,ls()),r;if(t===6)qa(e,n);else{if(a=e.current.alternate,!(n&30)&&!Yw(a)&&(t=ih(e,n),t===2&&(i=qf(e),i!==0&&(n=i,t=x0(e,i))),t===1))throw r=Wc,Fi(e,0),qa(e,n),yr(e,ls()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Ie(345));case 2:Ci(e,pr,la);break;case 3:if(qa(e,n),(n&130023424)===n&&(t=kp+500-ls(),10<t)){if(qu(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ar(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Jf(Ci.bind(null,e,pr,la),t);break}Ci(e,pr,la);break;case 4:if(qa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-yn(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=ls()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gw(n/1960))-n,10<n){e.timeoutHandle=Jf(Ci.bind(null,e,pr,la),n);break}Ci(e,pr,la);break;case 5:Ci(e,pr,la);break;default:throw Error(Ie(329))}}}return yr(e,ls()),e.callbackNode===r?E2.bind(null,e):null}function x0(e,t){var r=_c;return e.current.memoizedState.isDehydrated&&(Fi(e,t).flags|=256),e=ih(e,t),e!==2&&(t=pr,pr=r,t!==null&&g0(t)),e}function g0(e){pr===null?pr=e:pr.push.apply(pr,e)}function Yw(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!jn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qa(e,t){for(t&=~Sp,t&=~Th,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yn(t),n=1<<r;e[r]=-1,t&=~n}}function Ig(e){if(vt&6)throw Error(Ie(327));tl();var t=qu(e,0);if(!(t&1))return yr(e,ls()),null;var r=ih(e,t);if(e.tag!==0&&r===2){var n=qf(e);n!==0&&(t=n,r=x0(e,n))}if(r===1)throw r=Wc,Fi(e,0),qa(e,t),yr(e,ls()),r;if(r===6)throw Error(Ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ci(e,pr,la),yr(e,ls()),null}function Ap(e,t){var r=vt;vt|=1;try{return e(t)}finally{vt=r,vt===0&&(ml=ls()+500,Sh&&di())}}function zi(e){Va!==null&&Va.tag===0&&!(vt&6)&&tl();var t=vt;vt|=1;var r=Kr.transition,n=At;try{if(Kr.transition=null,At=1,e)return e()}finally{At=n,Kr.transition=r,vt=t,!(vt&6)&&di()}}function Cp(){Tr=Yo.current,Ut(Yo)}function Fi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_w(r)),gs!==null)for(r=gs.return;r!==null;){var n=r;switch(lp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gu();break;case 3:ul(),Ut(vr),Ut(Qs),gp();break;case 5:xp(n);break;case 4:ul();break;case 13:Ut(Wt);break;case 19:Ut(Wt);break;case 10:hp(n.type._context);break;case 22:case 23:Cp()}r=r.return}if(Ds=e,gs=e=ei(e.current,null),$s=Tr=t,ks=0,Wc=null,Sp=Th=qi=0,pr=_c=null,Di!==null){for(t=0;t<Di.length;t++)if(r=Di[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Di=null}return e}function I2(e,t){do{var r=gs;try{if(up(),ku.current=sh,th){for(var n=Yt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}th=!1}if(Ui=0,Ls=Ss=Yt=null,Nc=!1,zc=0,_p.current=null,r===null||r.return===null){ks=1,Wc=t,gs=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=$s,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=l,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var j=p.alternate;j?(p.updateQueue=j.updateQueue,p.memoizedState=j.memoizedState,p.lanes=j.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=yg(o);if(m!==null){m.flags&=-257,wg(m,o,l,i,t),m.mode&1&&bg(i,u,t),t=m,c=u;var y=t.updateQueue;if(y===null){var _=new Set;_.add(c),t.updateQueue=_}else y.add(c);break e}else{if(!(t&1)){bg(i,u,t),Tp();break e}c=Error(Ie(426))}}else if(zt&&l.mode&1){var k=yg(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),wg(k,o,l,i,t),cp(hl(c,l));break e}}i=c=hl(c,l),ks!==4&&(ks=2),_c===null?_c=[i]:_c.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=x2(i,c,t);mg(i,v);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qa===null||!Qa.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=g2(i,l,t);mg(i,S);break e}}i=i.return}while(i!==null)}F2(r)}catch(L){t=L,gs===r&&r!==null&&(gs=r=r.return);continue}break}while(!0)}function D2(){var e=rh.current;return rh.current=sh,e===null?sh:e}function Tp(){(ks===0||ks===3||ks===2)&&(ks=4),Ds===null||!(qi&268435455)&&!(Th&268435455)||qa(Ds,$s)}function ih(e,t){var r=vt;vt|=2;var n=D2();(Ds!==e||$s!==t)&&(la=null,Fi(e,t));do try{Kw();break}catch(a){I2(e,a)}while(!0);if(up(),vt=r,rh.current=n,gs!==null)throw Error(Ie(261));return Ds=null,$s=0,ks}function Kw(){for(;gs!==null;)O2(gs)}function Jw(){for(;gs!==null&&!w5();)O2(gs)}function O2(e){var t=R2(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,t===null?F2(e):gs=t,_p.current=null}function F2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zw(r,t),r!==null){r.flags&=32767,gs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ks=6,gs=null;return}}else if(r=qw(r,t,Tr),r!==null){gs=r;return}if(t=t.sibling,t!==null){gs=t;return}gs=t=e}while(t!==null);ks===0&&(ks=5)}function Ci(e,t,r){var n=At,a=Kr.transition;try{Kr.transition=null,At=1,Xw(e,t,r,n)}finally{Kr.transition=a,At=n}return null}function Xw(e,t,r,n){do tl();while(Va!==null);if(vt&6)throw Error(Ie(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ie(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(L5(e,i),e===Ds&&(gs=Ds=null,$s=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||du||(du=!0,$2(Uu,function(){return tl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Kr.transition,Kr.transition=null;var o=At;At=1;var l=vt;vt|=4,_p.current=null,Vw(e,r),P2(r,e),gw(Yf),zu=!!Gf,Yf=Gf=null,e.current=r,Ww(r),N5(),vt=l,At=o,Kr.transition=i}else e.current=r;if(du&&(du=!1,Va=e,ah=a),i=e.pendingLanes,i===0&&(Qa=null),S5(r.stateNode),yr(e,ls()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(nh)throw nh=!1,e=f0,f0=null,e;return ah&1&&e.tag!==0&&tl(),i=e.pendingLanes,i&1?e===p0?Sc++:(Sc=0,p0=e):Sc=0,di(),null}function tl(){if(Va!==null){var e=xv(ah),t=Kr.transition,r=At;try{if(Kr.transition=null,At=16>e?16:e,Va===null)var n=!1;else{if(e=Va,Va=null,ah=0,vt&6)throw Error(Ie(331));var a=vt;for(vt|=4,qe=e.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(qe=u;qe!==null;){var p=qe;switch(p.tag){case 0:case 11:case 15:jc(8,p,i)}var f=p.child;if(f!==null)f.return=p,qe=f;else for(;qe!==null;){p=qe;var j=p.sibling,m=p.return;if(A2(p),p===u){qe=null;break}if(j!==null){j.return=m,qe=j;break}qe=m}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,qe=v;break e}qe=i.return}}var x=e.current;for(qe=x;qe!==null;){o=qe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,qe=b;else e:for(o=x;qe!==null;){if(l=qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ch(9,l)}}catch(L){ss(l,l.return,L)}if(l===o){qe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,qe=S;break e}qe=l.return}}if(vt=a,di(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(yh,e)}catch{}n=!0}return n}finally{At=r,Kr.transition=t}}return!1}function Dg(e,t,r){t=hl(r,t),t=x2(e,t,1),e=Xa(e,t,1),t=ar(),e!==null&&(Xc(e,1,t),yr(e,t))}function ss(e,t,r){if(e.tag===3)Dg(e,e,r);else for(;t!==null;){if(t.tag===3){Dg(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qa===null||!Qa.has(n))){e=hl(r,e),e=g2(t,e,1),t=Xa(t,e,1),e=ar(),t!==null&&(Xc(t,1,e),yr(t,e));break}}t=t.return}}function Qw(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&r,Ds===e&&($s&r)===r&&(ks===4||ks===3&&($s&130023424)===$s&&500>ls()-kp?Fi(e,0):Sp|=r),yr(e,t)}function M2(e,t){t===0&&(e.mode&1?(t=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):t=1);var r=ar();e=xa(e,t),e!==null&&(Xc(e,t,r),yr(e,r))}function Zw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),M2(e,r)}function eN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ie(314))}n!==null&&n.delete(t),M2(e,r)}var R2;R2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vr.current)gr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return gr=!1,Uw(e,t,r);gr=!!(e.flags&131072)}else gr=!1,zt&&t.flags&1048576&&qv(t,Ju,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Cu(e,t),e=t.pendingProps;var a=ll(t,Qs.current);el(t,r),a=bp(null,t,n,e,a,r);var i=yp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(n)?(i=!0,Yu(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,fp(t),a.updater=Ah,t.stateNode=a,a._reactInternals=t,r0(t,n,e,r),t=i0(null,t,n,!0,i,r)):(t.tag=0,zt&&i&&op(t),nr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Cu(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=sN(n),e=pn(n,e),a){case 0:t=a0(null,t,n,e,r);break e;case 1:t=_g(null,t,n,e,r);break e;case 11:t=Ng(null,t,n,e,r);break e;case 14:t=jg(null,t,n,pn(n.type,e),r);break e}throw Error(Ie(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pn(n,a),a0(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pn(n,a),_g(e,t,n,a,r);case 3:e:{if(w2(t),e===null)throw Error(Ie(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Yv(e,t),Zu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=hl(Error(Ie(423)),t),t=Sg(e,t,n,r,a);break e}else if(n!==a){a=hl(Error(Ie(424)),t),t=Sg(e,t,n,r,a);break e}else for(Pr=Ja(t.stateNode.containerInfo.firstChild),Er=t,zt=!0,bn=null,r=Wv(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(cl(),n===a){t=ga(e,t,r);break e}nr(e,t,n,r)}t=t.child}return t;case 5:return Kv(t),e===null&&e0(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Kf(n,a)?o=null:i!==null&&Kf(n,i)&&(t.flags|=32),y2(e,t),nr(e,t,o,r),t.child;case 6:return e===null&&e0(t),null;case 13:return N2(e,t,r);case 4:return pp(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=dl(t,null,n,r):nr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pn(n,a),Ng(e,t,n,a,r);case 7:return nr(e,t,t.pendingProps,r),t.child;case 8:return nr(e,t,t.pendingProps.children,r),t.child;case 12:return nr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Mt(Xu,n._currentValue),n._currentValue=o,i!==null)if(jn(i.value,o)){if(i.children===a.children&&!vr.current){t=ga(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ma(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),t0(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ie(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),t0(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,el(t,r),a=Xr(a),n=n(a),t.flags|=1,nr(e,t,n,r),t.child;case 14:return n=t.type,a=pn(n,t.pendingProps),a=pn(n.type,a),jg(e,t,n,a,r);case 15:return v2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pn(n,a),Cu(e,t),t.tag=1,br(n)?(e=!0,Yu(t)):e=!1,el(t,r),p2(t,n,a),r0(t,n,a,r),i0(null,t,n,!0,e,r);case 19:return j2(e,t,r);case 22:return b2(e,t,r)}throw Error(Ie(156,t.tag))};function $2(e,t){return hv(e,t)}function tN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(e,t,r,n){return new tN(e,t,r,n)}function Pp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sN(e){if(typeof e=="function")return Pp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===K0)return 11;if(e===J0)return 14}return 2}function ei(e,t){var r=e.alternate;return r===null?(r=Gr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Lu(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Pp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ro:return Mi(r.children,a,i,t);case Y0:o=8,a|=8;break;case Af:return e=Gr(12,r,t,a|2),e.elementType=Af,e.lanes=i,e;case Cf:return e=Gr(13,r,t,a),e.elementType=Cf,e.lanes=i,e;case Tf:return e=Gr(19,r,t,a),e.elementType=Tf,e.lanes=i,e;case K1:return Ph(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G1:o=10;break e;case Y1:o=9;break e;case K0:o=11;break e;case J0:o=14;break e;case $a:o=16,n=null;break e}throw Error(Ie(130,e==null?e:typeof e,""))}return t=Gr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Mi(e,t,r,n){return e=Gr(7,e,n,t),e.lanes=r,e}function Ph(e,t,r,n){return e=Gr(22,e,n,t),e.elementType=K1,e.lanes=r,e.stateNode={isHidden:!1},e}function nf(e,t,r){return e=Gr(6,e,null,t),e.lanes=r,e}function af(e,t,r){return t=Gr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rN(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$m(0),this.expirationTimes=$m(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$m(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Lp(e,t,r,n,a,i,o,l,c){return e=new rN(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Gr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(i),e}function nN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function B2(e){if(!e)return si;e=e._reactInternals;e:{if(Wi(e)!==e||e.tag!==1)throw Error(Ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ie(171))}if(e.tag===1){var r=e.type;if(br(r))return Bv(e,r,t)}return t}function U2(e,t,r,n,a,i,o,l,c){return e=Lp(r,n,!0,e,a,i,o,l,c),e.context=B2(null),r=e.current,n=ar(),a=Za(r),i=ma(n,a),i.callback=t??null,Xa(r,i,a),e.current.lanes=a,Xc(e,a,n),yr(e,n),e}function Lh(e,t,r,n){var a=t.current,i=ar(),o=Za(a);return r=B2(r),t.context===null?t.context=r:t.pendingContext=r,t=ma(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Xa(a,t,o),e!==null&&(wn(e,a,o,i),Su(e,a,o)),o}function oh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Og(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ep(e,t){Og(e,t),(e=e.alternate)&&Og(e,t)}function aN(){return null}var q2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ip(e){this._internalRoot=e}Eh.prototype.render=Ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ie(409));Lh(e,t,null,null)};Eh.prototype.unmount=Ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zi(function(){Lh(null,e,null,null)}),t[pa]=null}};function Eh(e){this._internalRoot=e}Eh.prototype.unstable_scheduleHydration=function(e){if(e){var t=bv();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ua.length&&t!==0&&t<Ua[r].priority;r++);Ua.splice(r,0,e),r===0&&wv(e)}};function Dp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ih(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fg(){}function iN(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=oh(o);i.call(u)}}var o=U2(t,n,e,0,null,!1,!1,"",Fg);return e._reactRootContainer=o,e[pa]=o.current,Rc(e.nodeType===8?e.parentNode:e),zi(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=oh(c);l.call(u)}}var c=Lp(e,0,!1,null,null,!1,!1,"",Fg);return e._reactRootContainer=c,e[pa]=c.current,Rc(e.nodeType===8?e.parentNode:e),zi(function(){Lh(t,c,r,n)}),c}function Dh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=oh(o);l.call(c)}}Lh(t,o,e,a)}else o=iN(r,t,e,a,n);return oh(o)}gv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mc(t.pendingLanes);r!==0&&(Z0(t,r|1),yr(t,ls()),!(vt&6)&&(ml=ls()+500,di()))}break;case 13:zi(function(){var n=xa(e,1);if(n!==null){var a=ar();wn(n,e,1,a)}}),Ep(e,1)}};ep=function(e){if(e.tag===13){var t=xa(e,134217728);if(t!==null){var r=ar();wn(t,e,134217728,r)}Ep(e,134217728)}};vv=function(e){if(e.tag===13){var t=Za(e),r=xa(e,t);if(r!==null){var n=ar();wn(r,e,t,n)}Ep(e,t)}};bv=function(){return At};yv=function(e,t){var r=At;try{return At=e,t()}finally{At=r}};$f=function(e,t,r){switch(t){case"input":if(Ef(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=_h(n);if(!a)throw Error(Ie(90));X1(n),Ef(n,a)}}}break;case"textarea":Z1(e,r);break;case"select":t=r.value,t!=null&&Jo(e,!!r.multiple,t,!1)}};iv=Ap;ov=zi;var oN={usingClientEntryPoint:!1,Events:[Zc,qo,_h,nv,av,Ap]},ic={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lN={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dv(e),e===null?null:e.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||aN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{yh=uu.inject(lN),zn=uu}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oN;Dr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dp(t))throw Error(Ie(200));return nN(e,t,null,r)};Dr.createRoot=function(e,t){if(!Dp(e))throw Error(Ie(299));var r=!1,n="",a=q2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Lp(e,1,!1,null,null,r,!1,n,a),e[pa]=t.current,Rc(e.nodeType===8?e.parentNode:e),new Ip(t)};Dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ie(188)):(e=Object.keys(e).join(","),Error(Ie(268,e)));return e=dv(t),e=e===null?null:e.stateNode,e};Dr.flushSync=function(e){return zi(e)};Dr.hydrate=function(e,t,r){if(!Ih(t))throw Error(Ie(200));return Dh(null,e,t,!0,r)};Dr.hydrateRoot=function(e,t,r){if(!Dp(e))throw Error(Ie(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=q2;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=U2(t,null,e,1,r??null,a,!1,i,o),e[pa]=t.current,Rc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Eh(t)};Dr.render=function(e,t,r){if(!Ih(t))throw Error(Ie(200));return Dh(null,e,t,!1,r)};Dr.unmountComponentAtNode=function(e){if(!Ih(e))throw Error(Ie(40));return e._reactRootContainer?(zi(function(){Dh(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0):!1};Dr.unstable_batchedUpdates=Ap;Dr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ih(r))throw Error(Ie(200));if(e==null||e._reactInternals===void 0)throw Error(Ie(38));return Dh(e,t,r,!1,n)};Dr.version="18.3.1-next-f1338f8080-20240426";function z2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z2)}catch(e){console.error(e)}}z2(),z1.exports=Dr;var cN=z1.exports,H2,Mg=cN;H2=Mg.createRoot,Mg.hydrateRoot;const dN="modulepreload",uN=function(e){return"/"+e},Rg={},ri=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=uN(c),c in Rg)return;Rg[c]=!0;const u=c.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":dN,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((j,m)=>{f.addEventListener("load",j),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},hN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ri(async()=>{const{default:n}=await Promise.resolve().then(()=>wl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Op extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class mN extends Op{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $g extends Op{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bg extends Op{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var v0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(v0||(v0={}));var fN=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class pN{constructor(t,{headers:r={},customFetch:n,region:a=v0.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=hN(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return fN(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let p;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",p=o):typeof o=="string"?(l["Content-Type"]="text/plain",p=o):typeof FormData<"u"&&o instanceof FormData?p=o:(l["Content-Type"]="application/json",p=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:p}).catch(_=>{throw new mN(_)}),j=f.headers.get("x-relay-error");if(j&&j==="true")throw new $g(f);if(!f.ok)throw new Bg(f);let m=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield f.json():m==="application/octet-stream"?y=yield f.blob():m==="text/event-stream"?y=f:m==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof Bg||a instanceof $g?a.context:void 0}}})}}var xr={},Fp={},Oh={},td={},Fh={},Mh={},xN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fl=xN();const gN=fl.fetch,V2=fl.fetch.bind(fl),W2=fl.Headers,vN=fl.Request,bN=fl.Response,wl=Object.freeze(Object.defineProperty({__proto__:null,Headers:W2,Request:vN,Response:bN,default:V2,fetch:gN},Symbol.toStringTag,{value:"Module"})),yN=My(wl);var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});let wN=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Rh.default=wN;var G2=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mh,"__esModule",{value:!0});const NN=G2(yN),jN=G2(Rh);let _N=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=NN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let p=null,f=null,j=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=x:f=JSON.parse(x))}const k=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");k&&v&&v.length>1&&(j=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(p={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,j=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const k=await i.text();try{p=JSON.parse(k),Array.isArray(p)&&i.status===404&&(f=[],p=null,m=200,y="OK")}catch{i.status===404&&k===""?(m=204,y="No Content"):p={message:k}}if(p&&this.isMaybeSingle&&(!((u=p==null?void 0:p.details)===null||u===void 0)&&u.includes("0 rows"))&&(p=null,m=200,y="OK"),p&&this.shouldThrowOnError)throw new jN.default(p)}return{error:p,data:f,count:j,status:m,statusText:y}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Mh.default=_N;var SN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fh,"__esModule",{value:!0});const kN=SN(Mh);let AN=class extends kN.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Fh.default=AN;var CN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});const TN=CN(Fh);let PN=class extends TN.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};td.default=PN;var LN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oh,"__esModule",{value:!0});const oc=LN(td);let EN=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new oc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var a;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new oc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(c.length>0){const u=[...new Set(c)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new oc.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new oc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new oc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Oh.default=EN;var Y2=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fp,"__esModule",{value:!0});const IN=Y2(Oh),DN=Y2(td);let ON=class K2{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new IN.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new K2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,j])=>j!==void 0).map(([f,j])=>[f,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([f,j])=>{c.searchParams.append(f,j)})):(l="POST",u=r);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new DN.default({method:l,url:c,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Fp.default=ON;var Nl=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xr,"__esModule",{value:!0});xr.PostgrestError=xr.PostgrestBuilder=xr.PostgrestTransformBuilder=xr.PostgrestFilterBuilder=xr.PostgrestQueryBuilder=xr.PostgrestClient=void 0;const J2=Nl(Fp);xr.PostgrestClient=J2.default;const X2=Nl(Oh);xr.PostgrestQueryBuilder=X2.default;const Q2=Nl(td);xr.PostgrestFilterBuilder=Q2.default;const Z2=Nl(Fh);xr.PostgrestTransformBuilder=Z2.default;const eb=Nl(Mh);xr.PostgrestBuilder=eb.default;const tb=Nl(Rh);xr.PostgrestError=tb.default;var FN=xr.default={PostgrestClient:J2.default,PostgrestQueryBuilder:X2.default,PostgrestFilterBuilder:Q2.default,PostgrestTransformBuilder:Z2.default,PostgrestBuilder:eb.default,PostgrestError:tb.default};const{PostgrestClient:MN,PostgrestQueryBuilder:R_,PostgrestFilterBuilder:$_,PostgrestTransformBuilder:B_,PostgrestBuilder:U_,PostgrestError:q_}=FN;class RN{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const $N="2.15.5",BN=`realtime-js/${$N}`,UN="1.0.0",b0=1e4,qN=1e3,zN=100;var kc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kc||(kc={}));var Ns;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ns||(Ns={}));var vn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vn||(vn={}));var y0;(function(e){e.websocket="websocket"})(y0||(y0={}));var Li;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Li||(Li={}));class HN{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class sb{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ft;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ft||(Ft={}));const Ug=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=VN(o,e,t,a),i),{})},VN=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?rb(i,o):w0(o)},rb=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return KN(t,r)}switch(e){case Ft.bool:return WN(t);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return GN(t);case Ft.json:case Ft.jsonb:return YN(t);case Ft.timestamp:return JN(t);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return w0(t);default:return w0(t)}},w0=e=>e,WN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},GN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},YN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},KN=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>rb(t,l))}return e},JN=e=>typeof e=="string"?e.replace(" ","T"):e,nb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class of{constructor(t,r,n={},a=b0){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qg||(qg={}));class Ac{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ac.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Ac.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ac.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,p)=>{o[u]||(c[u]=p)}),this.map(o,(u,p)=>{const f=i[u];if(f){const j=p.map(k=>k.presence_ref),m=f.map(k=>k.presence_ref),y=p.filter(k=>m.indexOf(k.presence_ref)<0),_=f.filter(k=>j.indexOf(k.presence_ref)<0);y.length>0&&(l[u]=y),_.length>0&&(c[u]=_)}else l[u]=p}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const p=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),p.length>0){const f=t[l].map(m=>m.presence_ref),j=p.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...j)}n(l,p,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const p=c.map(f=>f.presence_ref);u=u.filter(f=>p.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(zg||(zg={}));var Cc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cc||(Cc={}));var ca;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ca||(ca={}));class Mp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ns.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new of(this,vn.join,this.params,this.timeout),this.rejoinTimer=new sb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ns.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ns.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ns.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ns.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ns.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vn.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Ac(this),this.broadcastEndpointURL=nb(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ns.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Cc.PRESENCE]&&this.bindings[Cc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},j={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ca.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ca.CLOSED)),this.updateJoinPayload(Object.assign({config:j},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){t==null||t(ca.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,k=(y=_==null?void 0:_.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<k;x++){const b=_[x],{filter:{event:S,schema:L,table:T,filter:A}}=b,N=m&&m[x];if(N&&N.event===S&&N.schema===L&&N.table===T&&N.filter===A)v.push(Object.assign(Object.assign({},b),{id:N.id}));else{this.unsubscribe(),this.state=Ns.errored,t==null||t(ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ca.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ns.errored,t==null||t(ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ns.joined&&t===Cc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ns.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new of(this,vn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ns.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new of(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:p}=vn;if(n&&[l,c,u,p].indexOf(o)>=0&&n!==this._joinRef())return;let j=this._onMessage(o,r,n);if(r&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var y,_,k;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((k=(_=m.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(j,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,_,k,v,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const S=m.id,L=(y=m.filter)===null||y===void 0?void 0:y.event;return S&&((_=r.ids)===null||_===void 0?void 0:_.includes(S))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const S=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof j=="object"&&"ids"in j){const y=j.data,{schema:_,table:k,commit_timestamp:v,type:x,errors:b}=y;j=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(j,n)})}_isClosed(){return this.state===Ns.closed}_isJoined(){return this.state===Ns.joined}_isJoining(){return this.state===Ns.joining}_isLeaving(){return this.state===Ns.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Mp.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vn.close,{},t)}_onError(t){this._on(vn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ns.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ug(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ug(t.columns,t.old_record)),r}}const lf=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XN=[1e3,2e3,5e3,1e4],QN=1e4,ZN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ej{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b0,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lf,this.ref=0,this.reconnectTimer=null,this.logger=lf,this.conn=null,this.sendBuffer=[],this.serializer=new HN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>ri(async()=>{const{default:l}=await Promise.resolve().then(()=>wl);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${y0.websocket}`,this.httpEndpoint=nb(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=RN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:UN}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kc.connecting:return Li.Connecting;case kc.open:return Li.Open;case kc.closing:return Li.Closing;default:return Li.Closed}}isConnected(){return this.connectionState()===Li.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Mp(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(qN,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([ZN],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:BN};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(vn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,p;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:b0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:hu.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:lf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>XN[f-1]||QN,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,j)=>j(JSON.stringify(f)),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Rp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function js(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tj extends Rp{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class N0 extends Rp{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var sj=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ab=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ri(async()=>{const{default:n}=await Promise.resolve().then(()=>wl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},rj=()=>sj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ri(()=>Promise.resolve().then(()=>wl),void 0)).Response:Response}),j0=e=>{if(Array.isArray(e))return e.map(r=>j0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=j0(n)}),t},nj=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gi=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const cf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),aj=(e,t,r)=>Gi(void 0,void 0,void 0,function*(){const n=yield rj();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new tj(cf(a),i,o))}).catch(a=>{t(new N0(cf(a),a))}):t(new N0(cf(e),e))}),ij=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(nj(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function sd(e,t,r,n,a,i){return Gi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,ij(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>aj(c,l,n))})})}function lh(e,t,r,n){return Gi(this,void 0,void 0,function*(){return sd(e,"GET",t,r,n)})}function Bn(e,t,r,n,a){return Gi(this,void 0,void 0,function*(){return sd(e,"POST",t,n,a,r)})}function _0(e,t,r,n,a){return Gi(this,void 0,void 0,function*(){return sd(e,"PUT",t,n,a,r)})}function oj(e,t,r,n){return Gi(this,void 0,void 0,function*(){return sd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function ib(e,t,r,n,a){return Gi(this,void 0,void 0,function*(){return sd(e,"DELETE",t,n,a,r)})}var rr=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const lj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cj{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=ab(a)}uploadOrUpdate(t,r,n,a){return rr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Hg),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),p=this._getFinalPath(u),f=yield(t=="PUT"?_0:Bn)(this.fetch,`${this.url}/object/${p}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(js(i))return{data:null,error:i};throw i}})}upload(t,r,n){return rr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return rr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Hg.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const f=yield _0(this.fetch,l.toString(),c,{headers:p});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(js(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return rr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Bn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Rp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(js(n))return{data:null,error:n};throw n}})}update(t,r,n){return rr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return rr(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(js(a))return{data:null,error:a};throw a}})}copy(t,r,n){return rr(this,void 0,void 0,function*(){try{return{data:{path:(yield Bn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(js(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return rr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Bn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(js(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return rr(this,void 0,void 0,function*(){try{const a=yield Bn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(js(a))return{data:null,error:a};throw a}})}download(t,r){return rr(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield lh(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(js(l))return{data:null,error:l};throw l}})}info(t){return rr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield lh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:j0(n),error:null}}catch(n){if(js(n))return{data:null,error:n};throw n}})}exists(t){return rr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield oj(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(js(n)&&n instanceof N0){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return rr(this,void 0,void 0,function*(){try{return{data:yield ib(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(js(r))return{data:null,error:r};throw r}})}list(t,r,n){return rr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},lj),r),{prefix:t||""});return{data:yield Bn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(js(a))return{data:null,error:a};throw a}})}listV2(t,r){return rr(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Bn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(js(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const dj="2.11.1",uj={"X-Client-Info":`storage-js/${dj}`};var ko=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class hj{constructor(t,r={},n,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},uj),r),this.fetch=ab(n)}listBuckets(){return ko(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(js(t))return{data:null,error:t};throw t}})}getBucket(t){return ko(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(js(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ko(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(js(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ko(this,void 0,void 0,function*(){try{return{data:yield _0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(js(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ko(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(js(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ko(this,void 0,void 0,function*(){try{return{data:yield ib(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(js(r))return{data:null,error:r};throw r}})}}class mj extends hj{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new cj(this.url,this.headers,t,this.fetch)}}const fj="2.57.2";let pc="";typeof Deno<"u"?pc="deno":typeof document<"u"?pc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pc="react-native":pc="node";const pj={"X-Client-Info":`supabase-js-${pc}/${fj}`},xj={headers:pj},gj={schema:"public"},vj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bj={};var yj=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const wj=e=>{let t;return e?t=e:typeof fetch>"u"?t=V2:t=fetch,(...r)=>t(...r)},Nj=()=>typeof Headers>"u"?W2:Headers,jj=(e,t,r)=>{const n=wj(r),a=Nj();return(i,o)=>yj(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var _j=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Sj(e){return e.endsWith("/")?e:e+"/"}function kj(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:p,global:f}=t,j={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},p),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>_j(this,void 0,void 0,function*(){return""})};return e.accessToken?j.accessToken=e.accessToken:delete j.accessToken,j}const ob="2.71.1",Io=30*1e3,S0=3,df=S0*Io,Aj="http://localhost:9999",Cj="supabase.auth.token",Tj={"X-Client-Info":`gotrue-js/${ob}`},k0="X-Supabase-Api-Version",lb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lj=10*60*1e3;class $p extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function it(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ej extends $p{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Ij(e){return it(e)&&e.name==="AuthApiError"}class cb extends $p{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ui extends $p{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Ra extends ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dj(e){return it(e)&&e.name==="AuthSessionMissingError"}class mu extends ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fu extends ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pu extends ui{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Oj(e){return it(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vg extends ui{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class A0 extends ui{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function uf(e){return it(e)&&e.name==="AuthRetryableFetchError"}class Wg extends ui{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class C0 extends ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gg=` 	
\r=`.split(""),Fj=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Gg.length;t+=1)e[Gg[t].charCodeAt(0)]=-2;for(let t=0;t<ch.length;t+=1)e[ch[t].charCodeAt(0)]=t;return e})();function Yg(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ch[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ch[n]),t.queuedBits-=6}}function db(e,t,r){const n=Fj[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Kg(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{$j(o,n,r)};for(let o=0;o<e.length;o+=1)db(e.charCodeAt(o),a,i);return t.join("")}function Mj(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Rj(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Mj(n,t)}}function $j(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Bj(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)db(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Uj(e){const t=[];return Rj(e,r=>t.push(r)),new Uint8Array(t)}function qj(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Yg(a,r,n)),Yg(null,r,n),t.join("")}function zj(e){return Math.round(Date.now()/1e3)+e}function Hj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const fn=()=>typeof window<"u"&&typeof document<"u",Si={tested:!1,writable:!1},ub=()=>{if(!fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Si.tested)return Si.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Si.tested=!0,Si.writable=!0}catch{Si.tested=!0,Si.writable=!1}return Si.writable};function Vj(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const hb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ri(async()=>{const{default:n}=await Promise.resolve().then(()=>wl);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Wj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Do=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ki=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Oa=async(e,t)=>{await e.removeItem(t)};class $h{constructor(){this.promise=new $h.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}$h.promiseConstructor=Promise;function hf(e){const t=e.split(".");if(t.length!==3)throw new C0("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Pj.test(t[n]))throw new C0("JWT not in base64url format");return{header:JSON.parse(Kg(t[0])),payload:JSON.parse(Kg(t[1])),signature:Bj(t[2]),raw:{header:t[0],payload:t[1]}}}async function Gj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yj(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Kj(e){return("0"+e.toString(16)).substr(-2)}function Jj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Kj).join("")}async function Xj(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Qj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Xj(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ao(e,t,r=!1){const n=Jj();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Do(e,`${t}-code-verifier`,a);const i=await Qj(n);return[i,n===i?"plain":"s256"]}const Zj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e4(e){const t=e.headers.get(k0);if(!t||!t.match(Zj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function t4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function s4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const r4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Co(e){if(!r4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jg(e){return JSON.parse(JSON.stringify(e))}var n4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Ti=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a4=[502,503,504];async function Xg(e){var t;if(!Wj(e))throw new A0(Ti(e),0);if(a4.includes(e.status))throw new A0(Ti(e),e.status);let r;try{r=await e.json()}catch(i){throw new cb(Ti(i),i)}let n;const a=e4(e);if(a&&a.getTime()>=lb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Wg(Ti(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ra}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wg(Ti(r),e.status,r.weak_password.reasons);throw new Ej(Ti(r),e.status||500,n)}const i4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function dt(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[k0]||(i[k0]=lb["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await o4(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function o4(e,t,r,n,a,i){const o=i4(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new A0(Ti(c),0)}if(l.ok||await Xg(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Xg(c)}}function oa(e){var t;let r=null;u4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=zj(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qg(e){const t=oa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function za(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function l4(e){return{data:e,error:null}}function c4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=n4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function d4(e){return e}function u4(e){return e.access_token&&e.refresh_token&&e.expires_in}const ff=["global","local","others"];var h4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class m4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=hb(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ff[0]){if(ff.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ff.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:za})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=h4(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:c4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(it(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:za})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},p=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:d4});if(p.error)throw p.error;const f=await p.json(),j=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);u[`${k}Page`]=_}),u.total=parseInt(j)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(it(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Co(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:za})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Co(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:za})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Co(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:za})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Co(t.userId);try{const{data:r,error:n}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Co(t.userId),Co(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}}function Zg(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function f4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const To={debug:!!(globalThis&&ub()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class p4 extends mb{}async function x4(e,t,r){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),To.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){To.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{To.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw To.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new p4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(To.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}f4();const g4={url:Aj,storageKey:Cj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function e1(e,t,r){return await r()}const Po={};class Gc{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gc.nextInstanceID,Gc.nextInstanceID+=1,this.instanceID>0&&fn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},g4),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new m4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=hb(a.fetch),this.lock=a.lock||e1,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:fn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=x4:this.lock=e1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ub()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Zg(this.memoryStorage)),fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Po[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Po[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Po[this.storageKey]=Object.assign(Object.assign({},Po[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ob}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Vj(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),fn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Oj(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return it(r)?{error:r}:{error:new cb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:oa}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(it(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:p,password:f,options:j}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Ao(this.storage,this.storageKey)),i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:p,password:f,data:(r=j==null?void 0:j.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:m,code_challenge_method:y},xform:oa})}else if("phone"in t){const{phone:p,password:f,options:j}=t;i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(n=j==null?void 0:j.data)!==null&&n!==void 0?n:{},channel:(a=j==null?void 0:j.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:oa})}else throw new fu("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(it(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qg})}else throw new fu("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new mu}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(it(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,u,p,f,j,m;let y,_;if("message"in t)y=t.message,_=t.signature;else{const{chain:k,wallet:v,statement:x,options:b}=t;let S;if(fn())if(typeof v=="object")S=v;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))S=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const L=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const T=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),x?{statement:x}:null));let A;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")A=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)A=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)y=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),_=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${L.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(a=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(p=b==null?void 0:b.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const T=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:k,error:v}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:qj(_)},!((j=t.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:oa});if(v)throw v;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new mu}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:v})}catch(k){if(it(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await ki(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:oa});if(await Oa(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new mu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(it(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:oa}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new mu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(it(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await Ao(this.storage,this.storageKey));const{error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:p}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new fu("You must provide either an email or phone number.")}catch(l){if(it(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:oa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(it(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ao(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:l4})}catch(i){if(it(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ra;const{error:a}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(it(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await dt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new fu("You must provide either an email or phone number and a type")}catch(r){if(it(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<df:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ki(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=mf()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,p)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,p))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:za}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ra}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:za})})}catch(r){if(it(r))return Dj(r)&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ra;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ao(this.storage,this.storageKey));const{data:u,error:p}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:za});if(p)throw p;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ra;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=hf(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(it(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ra;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(it(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!fn())throw new pu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vg("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new pu("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(l);let j=p+f;c&&(j=parseInt(c));const m=j-p;m*1e3<=Io&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=j-f;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,j,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,j,p);const{data:_,error:k}=await this._getUser(i);if(k)throw k;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:j,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(it(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Ij(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Hj(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ao(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(it(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,p;const{data:f,error:j}=i;if(j)throw j;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",m,{headers:this.headers,jwt:(p=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return fn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(it(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Yj(async a=>(a>0&&await Gj(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:oa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&uf(i)&&Date.now()+o-n<Io})}catch(n){if(this._debug(r,"error",n),it(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),fn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ki(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Do(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:mf()}else if(a&&!a.user&&!a.user){const o=await ki(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Oa(this.storage,this.storageKey+"-user"),await Do(this.storage,this.storageKey,a)):a.user=mf()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<df;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${df}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),uf(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $h;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ra;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),it(i)){const o={session:null,error:i};return uf(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Do(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Jg(a);await Do(this.storage,this.storageKey,i)}else{const a=Jg(r);await Do(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Oa(this.storage,this.storageKey),await Oa(this.storage,this.storageKey+"-code-verifier"),await Oa(this.storage,this.storageKey+"-user"),this.userStorage&&await Oa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Io);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Io);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Io}ms, refresh threshold is ${S0} ticks`),a<=S0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ao(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(it(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(it(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hf(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Lj>a)return n;const{data:i,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=hf(n);r!=null&&r.allowExpired||t4(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const p=s4(a.alg),f=await crypto.subtle.importKey("jwk",u,p,!0,["verify"]);if(!await crypto.subtle.verify(p,f,o,Uj(`${l}.${c}`)))throw new C0("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}}Gc.nextInstanceID=0;const v4=Gc;class b4 extends v4{constructor(t){super(t)}}var y4=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{u(n.next(p))}catch(f){o(f)}}function c(p){try{u(n.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):a(p.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class w4{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Sj(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:gj,realtime:bj,auth:Object.assign(Object.assign({},vj),{storageKey:u}),global:xj},f=kj(n??{},p);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(j,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=jj(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new MN(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new mj(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new pN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return y4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},p,f){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b4({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),p),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ej(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N4=(e,t,r)=>new w4(e,t,r);function j4(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}j4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fb="https://mzbzvupalrdmerpxqwxo.supabase.co",_4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16Ynp2dXBhbHJkbWVycHhxd3hvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NDk4MDYsImV4cCI6MjA3NzIyNTgwNn0.twnzj1cyjc2-_A5Ytfpp35dwZrejJQhngAsFDnb_0J0",_s=()=>fb!=="your-supabase-project-url",fe=N4(fb,_4,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),S4={user:null,session:null,isAuthenticated:!1,isLoading:!0,registeredAgents:[]},k4=(e,t)=>{switch(t.type){case"SET_SESSION":return{...e,user:t.payload.user,session:t.payload.session,isAuthenticated:!!t.payload.user,isLoading:!1};case"SET_LOADING":return{...e,isLoading:t.payload};case"LOGOUT":return{...e,user:null,session:null,isAuthenticated:!1,isLoading:!1};case"SET_REGISTERED_AGENTS":return{...e,registeredAgents:t.payload};case"ADD_AGENT_REGISTRATION":return{...e,registeredAgents:[...e.registeredAgents,t.payload]};case"UPDATE_AGENT_STATUS":return{...e,registeredAgents:e.registeredAgents.map(r=>r.id===t.payload.id?{...r,status:t.payload.status}:r)};case"DELETE_AGENT":return{...e,registeredAgents:e.registeredAgents.filter(r=>r.id!==t.payload)};default:return e}},pb=ne.createContext(null),A4=({children:e})=>{const[t,r]=ne.useReducer(k4,S4);ne.useEffect(()=>{if((async()=>{if(!fe){console.log("Running in demo mode - no Supabase connection"),r({type:"SET_LOADING",payload:!1});return}try{const{data:{session:y}}=await fe.auth.getSession();if(y!=null&&y.user){const _=await n(y.user.id);r({type:"SET_SESSION",payload:{user:_,session:y}})}else r({type:"SET_LOADING",payload:!1})}catch(y){console.error("Auth initialization error:",y),r({type:"SET_LOADING",payload:!1})}})(),fe){const{data:{subscription:y}}=fe.auth.onAuthStateChange((_,k)=>{(async()=>{if(k!=null&&k.user){const v=await n(k.user.id);r({type:"SET_SESSION",payload:{user:v,session:k}})}else r({type:"LOGOUT"})})()});return()=>y.unsubscribe()}},[]),ne.useEffect(()=>{(async()=>{if(!(!t.user||t.user.role!=="admin"))try{const{data:y,error:_}=await fe.from("agent_registrations").select("*").order("created_at",{ascending:!1});if(_){console.error("Error loading agent registrations:",_);return}r({type:"SET_REGISTERED_AGENTS",payload:y||[]})}catch(y){console.error("Error loading agent registrations:",y)}})()},[t.user]);const n=async m=>{if(!fe)return null;try{const{data:y,error:_}=await fe.from("profiles").select("*").eq("id",m).maybeSingle();return _?(console.error("Error fetching profile:",_),null):y||(console.error("Profile not found for user:",m),null)}catch(y){return console.error("Error fetching profile:",y),null}},a=async(m,y)=>{var _;r({type:"SET_LOADING",payload:!0});try{if(!_s()||!fe)return console.error("Supabase not configured"),r({type:"SET_LOADING",payload:!1}),{success:!1,error:"Supabase not configured"};console.log("Attempting login for:",m);const{data:k,error:v}=await fe.auth.signInWithPassword({email:m,password:y});if(v)return console.error("Login error:",v),r({type:"SET_LOADING",payload:!1}),{success:!1,error:v.message};if(console.log("Login successful, user:",(_=k.user)==null?void 0:_.id),k.user){console.log("Fetching profile for user:",k.user.id);const x=await n(k.user.id);if(console.log("Profile fetched:",x),x){if(x.role==="agent"){const{data:b}=await fe.from("agent_registrations").select("status").eq("email",x.email).maybeSingle();if(!b||b.status!=="approved")return await fe.auth.signOut(),r({type:"SET_LOADING",payload:!1}),{success:!1,error:"Your agent account is pending admin approval. Please wait for approval to login."}}return console.log("Setting session with profile:",x.role),r({type:"SET_SESSION",payload:{user:x,session:k.session}}),r({type:"SET_LOADING",payload:!1}),{success:!0}}else console.error("Profile not found for user:",k.user.id)}return r({type:"SET_LOADING",payload:!1}),{success:!1,error:"Profile not found"}}catch(k){return console.error("Unexpected login error:",k),r({type:"SET_LOADING",payload:!1}),{success:!1,error:"An unexpected error occurred"}}},i=async()=>{fe&&await fe.auth.signOut(),r({type:"LOGOUT"})},o=async(m,y,_)=>{if(!fe){const k={id:`demo-${_.role}-${Date.now()}`,email:m,full_name:_.full_name,role:_.role,company_name:_.company_name||null,company_logo:null,phone_number:null,address:null};return r({type:"SET_SESSION",payload:{user:k,session:null}}),{success:!0}}try{const{data:k,error:v}=await fe.auth.signUp({email:m,password:y,options:{data:{full_name:_.full_name,role:_.role,company_name:_.company_name}}});return v?{success:!1,error:v.message}:{success:!0}}catch{return{success:!1,error:"An unexpected error occurred"}}},l=async m=>{try{if(_s()&&fe){const{data:b,error:S}=await fe.from("agent_registrations").insert({company_name:m.companyName,company_logo:m.companyLogo||null,address:m.address,email:m.email,phone_no:m.phoneNo,username:m.username,password_hash:m.password}).select().single();return S?(console.error("Agent registration error:",S),{success:!1,message:S.message||"Registration failed. Please try again."}):(r({type:"ADD_AGENT_REGISTRATION",payload:b}),{success:!0,message:"Registration successful! Your account is pending admin approval."})}const y={id:Date.now().toString(),company_name:m.companyName,company_logo:m.companyLogo||null,address:m.address,email:m.email,phone_no:m.phoneNo,username:m.username,status:"pending",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),approved_by:null,approved_at:null},_=localStorage.getItem("registeredAgents")||"[]",k=JSON.parse(_),v=k.some(b=>b.email===m.email),x=k.some(b=>b.username===m.username);return v||x?{success:!1,message:"Email or username already exists"}:(k.push(y),localStorage.setItem("registeredAgents",JSON.stringify(k)),r({type:"ADD_AGENT_REGISTRATION",payload:y}),{success:!0,message:"Registration successful! Your account is pending admin approval."})}catch{return{success:!1,message:"An unexpected error occurred"}}},c=async(m,y)=>{var _;if(!t.user||t.user.role!=="admin")return{success:!1,message:"Unauthorized"};try{if(_s()&&fe){const{error:b}=await fe.from("agent_registrations").update({status:y,approved_by:(_=t.user)==null?void 0:_.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",m);if(b)return{success:!1,message:b.message}}const k=localStorage.getItem("registeredAgents")||"[]",x=JSON.parse(k).map(b=>b.id===m?{...b,status:y,approved_by:t.user.id,approved_at:new Date().toISOString(),updated_at:new Date().toISOString()}:b);return localStorage.setItem("registeredAgents",JSON.stringify(x)),r({type:"UPDATE_AGENT_STATUS",payload:{id:m,status:y}}),{success:!0,message:`Agent ${y} successfully`}}catch{return{success:!1,message:"An unexpected error occurred"}}},u=async m=>{if(!t.user||t.user.role!=="admin")return{success:!1,message:"Unauthorized"};try{if(_s()&&fe){const{error:v}=await fe.from("agent_registrations").delete().eq("id",m);if(v)return{success:!1,message:v.message}}const y=localStorage.getItem("registeredAgents")||"[]",k=JSON.parse(y).filter(v=>v.id!==m);return localStorage.setItem("registeredAgents",JSON.stringify(k)),r({type:"DELETE_AGENT",payload:m}),{success:!0,message:"Agent deleted successfully"}}catch{return{success:!1,message:"An unexpected error occurred"}}},p=async(m,y)=>{try{if(_s()&&fe){const{error:_}=await fe.from("profiles").update({company_name:y.companyName,company_logo:y.companyLogo,updated_at:new Date().toISOString()}).eq("id",m);if(_)return{success:!1,message:_.message}}if(t.user&&t.user.id===m){const _={...t.user,company_name:y.companyName,company_logo:y.companyLogo};r({type:"SET_SESSION",payload:{user:_,session:t.session}})}return{success:!0,message:"Profile updated successfully"}}catch{return{success:!1,message:"An unexpected error occurred"}}},f=async m=>{if(!fe)return{success:!0,message:"Password reset email sent! (Demo mode - no actual email sent)"};try{const{error:y}=await fe.auth.resetPasswordForEmail(m);return y?{success:!1,message:y.message}:{success:!0,message:"Password reset email sent! Check your inbox."}}catch{return{success:!1,message:"Failed to send reset email. Please try again."}}},j=async(m,y)=>fe?{success:!0,message:"Password updated successfully!"}:{success:!0,message:"Password updated successfully! (Demo mode)"};return s.jsx(pb.Provider,{value:{state:t,login:a,logout:i,signUp:o,registerAgent:l,updateAgentStatus:c,deleteAgent:u,updateAgentProfile:p,forgotPassword:f,resetPassword:j,dispatch:r},children:e})},Ht=()=>{const e=ne.useContext(pb);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),He=(e,t)=>{const r=ne.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},p)=>ne.createElement("svg",{ref:p,...C4,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${T4(e)}`,l].join(" "),...u},[...t.map(([f,j])=>ne.createElement(f,j)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=He("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=He("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=He("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=He("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=He("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=He("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=He("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=He("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=He("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=He("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=He("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=He("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=He("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=He("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=He("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=He("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=He("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=He("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=He("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=He("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=He("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=He("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=He("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=He("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=He("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=He("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=He("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=He("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=He("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=He("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=He("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=He("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=He("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=He("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=He("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=He("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=He("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=He("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=He("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=He("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=He("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=He("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=He("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=He("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=He("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=He("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=He("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=He("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=He("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=He("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=He("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=He("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=He("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),W4=({onBack:e,onSuccess:t})=>{const{registerAgent:r}=Ht(),[n,a]=ne.useState(!1),[i,o]=ne.useState(!1),[l,c]=ne.useState(!1),[u,p]=ne.useState(null),[f,j]=ne.useState({companyName:"",address:"",email:"",phoneNo:"",username:"",password:"",confirmPassword:""}),[m,y]=ne.useState({}),_=()=>{const x={};return f.companyName.trim()||(x.companyName="Company name is required"),f.address.trim()||(x.address="Address is required"),f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(x.email="Please enter a valid email address"):x.email="Email is required",f.phoneNo.trim()?/^\+?[\d\s-()]{10,}$/.test(f.phoneNo)||(x.phoneNo="Please enter a valid phone number"):x.phoneNo="Phone number is required",f.username.trim()?f.username.length<3&&(x.username="Username must be at least 3 characters"):x.username="Username is required",f.password?f.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",f.confirmPassword?f.password!==f.confirmPassword&&(x.confirmPassword="Passwords do not match"):x.confirmPassword="Please confirm your password",y(x),Object.keys(x).length===0},k=async x=>{if(x.preventDefault(),!!_()){a(!0),p(null);try{const b=await r({companyName:f.companyName,address:f.address,email:f.email,phoneNo:f.phoneNo,username:f.username,password:f.password});b.success?(p({type:"success",text:b.message}),setTimeout(()=>{t()},2e3)):p({type:"error",text:b.message})}catch{p({type:"error",text:"Registration failed. Please try again."})}finally{a(!1)}}},v=(x,b)=>{j({...f,[x]:b}),m[x]&&y({...m,[x]:""})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-2xl w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Nr,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(wt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Agent Registration"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Join Nomadller Solutions as a Travel Agent"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[u&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${u.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[u.type==="success"?s.jsx(Rt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(va,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${u.type==="success"?"text-green-700":"text-red-700"}`,children:u.text})]}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(wt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Company Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(wt,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.companyName,onChange:x=>v("companyName",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.companyName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter your company name",disabled:n})]}),m.companyName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Wn,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"tel",value:f.phoneNo,onChange:x=>v("phoneNo",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.phoneNo?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter phone number",disabled:n})]}),m.phoneNo&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.phoneNo})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ft,{className:"h-5 w-5 text-slate-400 absolute left-3 top-3"}),s.jsx("textarea",{value:f.address,onChange:x=>v("address",x.target.value),rows:3,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors resize-none ${m.address?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter complete company address",disabled:n})]}),m.address&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ai,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:f.email,onChange:x=>v("email",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.email?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Enter email address",disabled:n})]}),m.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.email})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(gl,{className:"h-5 w-5 mr-2 text-teal-600"}),"Login Credentials"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Username *"}),s.jsxs("div",{className:"relative",children:[s.jsx(gl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.username,onChange:x=>v("username",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.username?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Choose a username",disabled:n})]}),m.username&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.username})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:i?"text":"password",value:f.password,onChange:x=>v("password",x.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.password?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Create a password",disabled:n}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:n,children:i?s.jsx(Yc,{className:"h-5 w-5"}):s.jsx(Hi,{className:"h-5 w-5"})})]}),m.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:l?"text":"password",value:f.confirmPassword,onChange:x=>v("confirmPassword",x.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-teal-500 transition-colors ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-teal-500"}`,placeholder:"Confirm your password",disabled:n}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:n,children:l?s.jsx(Yc,{className:"h-5 w-5"}):s.jsx(Hi,{className:"h-5 w-5"})})]}),m.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.confirmPassword})]})]})]}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-slate-600",children:"By registering, you agree to our Terms of Service and Privacy Policy. Your account will be activated after admin approval."})}),s.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-teal-600 to-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-teal-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:n?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Agent Account"})]})]})]})})})},G4=({onBack:e})=>{const{forgotPassword:t}=Ht(),[r,n]=ne.useState(""),[a,i]=ne.useState(!1),[o,l]=ne.useState(null),c=async u=>{if(u.preventDefault(),!r.trim()){l({type:"error",text:"Please enter your email address"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){l({type:"error",text:"Please enter a valid email address"});return}i(!0),l(null);try{const p=await t(r);l({type:p.success?"success":"error",text:p.message}),p.success&&setTimeout(()=>{e()},3e3)}catch{l({type:"error",text:"Failed to send reset email. Please try again."})}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Nr,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(ai,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Forgot Password"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Reset your account password"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[s.jsx("div",{className:"text-center mb-6",children:s.jsx("p",{className:"text-slate-600",children:"Enter your email address and we'll send you a link to reset your password."})}),o&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${o.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o.type==="success"?s.jsx(Rt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(va,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${o.type==="success"?"text-green-700":"text-red-700"}`,children:o.text})]}),s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(ai,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:r,onChange:u=>n(u.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email address",disabled:a,required:!0})]})]}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:a?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Sending Reset Link..."})]}):"Send Reset Link"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Back to Login"})})]})]})})})},Y4=({onBack:e,onSuccess:t})=>{const{signUp:r}=Ht(),[n,a]=ne.useState(!1),[i,o]=ne.useState(!1),[l,c]=ne.useState(!1),[u,p]=ne.useState(null),[f,j]=ne.useState({email:"",password:"",confirmPassword:"",fullName:"",role:"agent",companyName:""}),[m,y]=ne.useState({}),_=()=>{const x={};return f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(x.email="Please enter a valid email address"):x.email="Email is required",f.fullName.trim()||(x.fullName="Full name is required"),f.role==="agent"&&!f.companyName.trim()&&(x.companyName="Company name is required for agents"),f.password?f.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",f.confirmPassword?f.password!==f.confirmPassword&&(x.confirmPassword="Passwords do not match"):x.confirmPassword="Please confirm your password",y(x),Object.keys(x).length===0},k=async x=>{if(x.preventDefault(),!!_()){a(!0),p(null);try{const b=await r(f.email,f.password,{full_name:f.fullName,role:f.role,company_name:f.role==="agent"?f.companyName:void 0});b.success?(p({type:"success",text:"Account created successfully! Please check your email to verify your account."}),setTimeout(()=>{t()},2e3)):p({type:"error",text:b.error||"Registration failed"})}catch{p({type:"error",text:"Registration failed. Please try again."})}finally{a(!1)}}},v=(x,b)=>{j({...f,[x]:b}),m[x]&&y({...m,[x]:""})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 p-2 rounded-lg hover:bg-opacity-30 transition-colors",children:s.jsx(Nr,{className:"h-5 w-5 text-white"})}),s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(gl,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Create Account"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Join Nomadller Solutions"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[u&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center space-x-3 ${u.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[u.type==="success"?s.jsx(Rt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(va,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${u.type==="success"?"text-green-700":"text-red-700"}`,children:u.text})]}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ai,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:f.email,onChange:x=>v("email",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${m.email?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your email address",disabled:n})]}),m.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(gl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.fullName,onChange:x=>v("fullName",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${m.fullName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your full name",disabled:n})]}),m.fullName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.fullName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Account Type *"}),s.jsxs("select",{value:f.role,onChange:x=>v("role",x.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:n,children:[s.jsx("option",{value:"agent",children:"Travel Agent"}),s.jsx("option",{value:"admin",children:"Administrator"})]})]}),(f.role==="agent"||f.role==="sales")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(wt,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:f.companyName,onChange:x=>v("companyName",x.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${m.companyName?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Enter your company name",disabled:n})]}),m.companyName&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.companyName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:i?"text":"password",value:f.password,onChange:x=>v("password",x.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${m.password?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Create a password",disabled:n}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:n,children:i?s.jsx(Yc,{className:"h-5 w-5"}):s.jsx(Hi,{className:"h-5 w-5"})})]}),m.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:l?"text":"password",value:f.confirmPassword,onChange:x=>v("confirmPassword",x.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${m.confirmPassword?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"Confirm your password",disabled:n}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:n,children:l?s.jsx(Yc,{className:"h-5 w-5"}):s.jsx(Hi,{className:"h-5 w-5"})})]}),m.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.confirmPassword})]}),s.jsxs("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:[s.jsx("option",{value:"sales",children:"Sales Representative"}),n?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Creating Account..."})]}):"Create Account"]})]})]})]})})})},n1=()=>{const{login:e,state:t}=Ht(),[r,n]=ne.useState("login"),[a,i]=ne.useState({email:"",password:""}),[o,l]=ne.useState(!1),[c,u]=ne.useState(""),p=async m=>{if(m.preventDefault(),u(""),!a.email||!a.password){u("Please enter both email and password");return}const y=await e(a.email,a.password);y.success||u(y.error||"Invalid email or password")},f=()=>{n("login")},j=()=>{n("login"),u("")};return r==="register"?s.jsx(W4,{onBack:j,onSuccess:f}):r==="forgot"?s.jsx(G4,{onBack:j}):r==="signup"?s.jsx(Y4,{onBack:j,onSuccess:f}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center px-4 py-8",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-6 md:px-8 py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Travel Agency Management"})]})]})}),s.jsxs("div",{className:"p-6 md:p-8",children:[s.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Welcome Back"}),s.jsx("p",{className:"text-slate-600 mt-2 text-sm md:text-base",children:"Sign in to your account to continue"})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-3",children:[s.jsx(va,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-700 text-sm",children:c})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(ai,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:a.email,onChange:m=>i({...a,email:m.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter your email address",disabled:t.isLoading})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:o?"text":"password",value:a.password,onChange:m=>i({...a,password:m.target.value}),className:"w-full pl-10 pr-12 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter your password",disabled:t.isLoading}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",disabled:t.isLoading,children:o?s.jsx(Yc,{className:"h-5 w-5"}):s.jsx(Hi,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",onClick:()=>n("forgot"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",disabled:t.isLoading,children:"Forgot Password?"})}),s.jsx("button",{type:"submit",disabled:t.isLoading,className:"w-full bg-gradient-to-r from-blue-600 to-teal-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 text-sm md:text-base",children:t.isLoading?s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Signing in..."})]}):"Sign In"})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-600 text-sm mb-3",children:"Are you a travel agency?"}),s.jsxs("button",{type:"button",onClick:()=>n("register"),className:"w-full bg-gradient-to-r from-teal-600 to-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:from-teal-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105 text-sm md:text-base flex items-center justify-center space-x-2",disabled:t.isLoading,children:[s.jsx(V4,{className:"h-5 w-5"}),s.jsx("span",{children:"Register as Travel Agent"})]})]})})]})]})})})},qh=e=>({id:e.id,name:e.name,whatsapp:e.whatsapp,countryCode:e.country_code,travelDates:{startDate:e.travel_dates_start_date||"",endDate:e.travel_dates_end_date||"",isFlexible:e.travel_dates_is_flexible,flexibleMonth:e.travel_dates_flexible_month||""},numberOfPax:{adults:e.number_of_pax_adults,children:e.number_of_pax_children},numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,createdAt:e.created_at,createdBy:e.created_by||void 0,followUpStatus:e.follow_up_status_status?{status:e.follow_up_status_status,updatedAt:e.follow_up_status_updated_at||"",remarks:e.follow_up_status_remarks||"",nextFollowUpDate:e.next_follow_up_date||void 0,nextFollowUpTime:e.next_follow_up_time||void 0}:void 0,nextFollowUpDate:e.next_follow_up_date||void 0,nextFollowUpTime:e.next_follow_up_time||void 0}),vb=e=>{var t,r,n;return{id:e.id,name:e.name,whatsapp:e.whatsapp,country_code:e.countryCode,travel_dates_start_date:e.travelDates.startDate||null,travel_dates_end_date:e.travelDates.endDate||null,travel_dates_is_flexible:e.travelDates.isFlexible,travel_dates_flexible_month:e.travelDates.flexibleMonth||null,number_of_pax_adults:e.numberOfPax.adults,number_of_pax_children:e.numberOfPax.children,number_of_days:e.numberOfDays,transportation_mode:e.transportationMode,created_at:e.createdAt,created_by:e.createdBy||null,follow_up_status_status:((t=e.followUpStatus)==null?void 0:t.status)||null,follow_up_status_updated_at:((r=e.followUpStatus)==null?void 0:r.updatedAt)||null,follow_up_status_remarks:((n=e.followUpStatus)==null?void 0:n.remarks)||null,next_follow_up_date:e.nextFollowUpDate||null,next_follow_up_time:e.nextFollowUpTime||null}},qp=e=>({id:e.id,type:e.type,vehicleName:e.vehicle_name,costPerDay:e.cost_per_day}),bb=e=>({id:e.id,type:e.type,vehicle_name:e.vehicleName,cost_per_day:e.costPerDay}),zp=e=>({id:e.id,name:e.name,place:e.place,starCategory:e.star_category,roomTypes:e.room_types?e.room_types.map(K4):[]}),yb=e=>({id:e.id,name:e.name,place:e.place,star_category:e.starCategory}),K4=e=>({id:e.id,name:e.name,peakSeasonPrice:e.peak_season_price,seasonPrice:e.season_price,offSeasonPrice:e.off_season_price}),hh=(e,t)=>({id:e.id,hotel_id:t,name:e.name,peak_season_price:e.peakSeasonPrice,season_price:e.seasonPrice,off_season_price:e.offSeasonPrice}),Hp=e=>({id:e.id,name:e.name,description:e.description,transportationMode:e.transportation_mode,vehicleCosts:e.vehicle_costs||void 0}),wb=e=>({id:e.id,name:e.name,description:e.description,transportation_mode:e.transportationMode,vehicle_costs:e.vehicleCosts||null}),Vp=e=>({id:e.id,name:e.name,location:e.location,options:e.activity_options?e.activity_options.map(J4):[]}),Nb=e=>({id:e.id,name:e.name,location:e.location}),J4=e=>({id:e.id,name:e.name,cost:e.cost,costForHowMany:e.cost_for_how_many}),mh=(e,t)=>({id:e.id,activity_id:t,name:e.name,cost:e.cost,cost_for_how_many:e.costForHowMany}),Wp=e=>({id:e.id,name:e.name,cost:e.cost,sightseeingId:e.sightseeing_id}),jb=e=>({id:e.id,name:e.name,cost:e.cost,sightseeing_id:e.sightseeingId}),Gp=e=>({id:e.id,type:e.type,place:e.place,cost:e.cost}),_b=e=>({id:e.id,type:e.type,place:e.place,cost:e.cost}),X4=e=>({day:e.day,sightseeing:e.sightseeing_ids||[],hotel:e.hotel_id&&e.room_type_id&&e.hotel_place?{place:e.hotel_place,hotelId:e.hotel_id,roomTypeId:e.room_type_id}:null,activities:e.activities_data||[],entryTickets:e.entry_ticket_ids||[],meals:e.meal_ids||[]}),fh=(e,t)=>{var r,n,a;return{itinerary_id:t,day:e.day,sightseeing_ids:e.sightseeing,hotel_place:((r=e.hotel)==null?void 0:r.place)||null,hotel_id:((n=e.hotel)==null?void 0:n.hotelId)||null,room_type_id:((a=e.hotel)==null?void 0:a.roomTypeId)||null,activities_data:e.activities,entry_ticket_ids:e.entryTickets,meal_ids:e.meals}},Yp=e=>({id:e.id,client:e.clients?qh(e.clients):{},dayPlans:e.day_plans?e.day_plans.map(X4):[],totalBaseCost:e.total_base_cost,profitMargin:e.profit_margin,finalPrice:e.final_price,exchangeRate:e.exchange_rate,version:e.version,lastUpdated:e.last_updated,updatedBy:e.updated_by,changeLog:[]}),Sb=e=>({id:e.id,client_id:e.client.id,total_base_cost:e.totalBaseCost,profit_margin:e.profitMargin,final_price:e.finalPrice,exchange_rate:e.exchangeRate,version:e.version,last_updated:e.lastUpdated,updated_by:e.updatedBy}),Kp=e=>({id:e.id,name:e.name,numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,baseCost:e.base_cost,inclusions:e.inclusions,exclusions:e.exclusions,dayPlans:e.day_plans_data||[],createdAt:e.created_at,updatedAt:e.updated_at,createdBy:e.created_by}),kb=e=>({id:e.id,name:e.name,number_of_days:e.numberOfDays,transportation_mode:e.transportationMode,base_cost:e.baseCost,inclusions:e.inclusions,exclusions:e.exclusions,day_plans_data:e.dayPlans,created_at:e.createdAt,updated_at:e.updatedAt,created_by:e.createdBy});let a1=0,lc=null;const Q4=1e3,i1=async()=>{if(!fe)return null;const e=Date.now();return lc?(console.log("Fetch already in progress, returning existing promise"),lc):e-a1<Q4?(console.log("Fetch throttled, skipping"),null):(a1=e,console.log("Fetching all data from Supabase..."),lc=(async()=>{try{const[{data:t,error:r},{data:n,error:a},{data:i,error:o},{data:l,error:c},{data:u,error:p},{data:f,error:j},{data:m,error:y},{data:_,error:k},{data:v,error:x}]=await Promise.all([fe.from("clients").select("*"),fe.from("transportations").select("*"),fe.from("hotels").select("*, room_types(*)"),fe.from("sightseeings").select("*"),fe.from("activities").select("*, activity_options(*)"),fe.from("entry_tickets").select("*"),fe.from("meals").select("*"),fe.from("itineraries").select("*, clients(*), day_plans(*)"),fe.from("fixed_itineraries").select("*")]);if(r)throw r;if(a)throw a;if(o)throw o;if(c)throw c;if(p)throw p;if(j)throw j;if(y)throw y;if(k)throw k;if(x)throw x;return console.log("Data fetched successfully"),{clients:(t==null?void 0:t.map(qh))||[],transportations:(n==null?void 0:n.map(qp))||[],hotels:(i==null?void 0:i.map(zp))||[],sightseeings:(l==null?void 0:l.map(Hp))||[],activities:(u==null?void 0:u.map(Vp))||[],entryTickets:(f==null?void 0:f.map(Wp))||[],meals:(m==null?void 0:m.map(Gp))||[],itineraries:(_==null?void 0:_.map(Yp))||[],fixedItineraries:(v==null?void 0:v.map(Kp))||[]}}catch(t){throw console.error("Error fetching all data:",t),t}finally{lc=null}})(),lc)},Z4=async e=>{if(!fe)throw console.error("insertClient: Supabase not initialized!"),new Error("Supabase is not configured");const t=vb(e);console.log("=== INSERT CLIENT TO SUPABASE ==="),console.log("Client ID:",t.id),console.log("Insert data:",JSON.stringify(t,null,2)),console.log("created_by field:",t.created_by);const{data:r,error:n}=await fe.from("clients").insert(t).select().single();if(n)throw console.error("=== INSERT CLIENT ERROR ==="),console.error("Error code:",n.code),console.error("Error message:",n.message),console.error("Error details:",n.details),console.error("Error hint:",n.hint),console.error("Full error object:",JSON.stringify(n,null,2)),new Error(`Failed to insert client: ${n.message}`);return console.log("=== INSERT CLIENT SUCCESS ==="),console.log("Returned data:",r),qh(r)},e3=async e=>{if(!fe)return null;const t=vb(e);console.log("Updating client:",e.id,t);const{data:r,error:n}=await fe.from("clients").update(t).eq("id",e.id).select().single();if(n)throw console.error("Update client error:",n),n;return console.log("Update client success:",r),qh(r)},t3=async e=>{if(!fe)return;const{error:t}=await fe.from("clients").delete().eq("id",e);if(t)throw t},s3=async e=>{if(!fe)return null;const t=bb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("transportations").insert(n).select().single();if(i)throw i;return qp(a)},r3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("transportations").update(bb(e)).eq("id",e.id).select().single();if(r)throw r;return qp(t)},n3=async e=>{if(!fe)return;const{error:t}=await fe.from("transportations").delete().eq("id",e);if(t)throw t},a3=async e=>{if(!fe)return null;const t=yb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("hotels").insert(n).select().single();if(i)throw i;if(e.roomTypes.length>0){const o=e.roomTypes.map(c=>{const{id:u,...p}=hh(c,a.id);return p}),{error:l}=await fe.from("room_types").insert(o);if(l)throw l}return zp({...a,room_types:e.roomTypes.map(o=>hh(o,a.id))})},i3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("hotels").update(yb(e)).eq("id",e.id).select().single();if(r)throw r;const{error:n}=await fe.from("room_types").delete().eq("hotel_id",e.id);if(n)throw n;if(e.roomTypes.length>0){const a=e.roomTypes.map(o=>hh(o,e.id)),{error:i}=await fe.from("room_types").insert(a);if(i)throw i}return zp({...t,room_types:e.roomTypes.map(a=>hh(a,e.id))})},o3=async e=>{if(!fe)return;const{error:t}=await fe.from("hotels").delete().eq("id",e);if(t)throw t},l3=async e=>{if(!fe)return null;const t=wb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("sightseeings").insert(n).select().single();if(i)throw i;return Hp(a)},c3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("sightseeings").update(wb(e)).eq("id",e.id).select().single();if(r)throw r;return Hp(t)},d3=async e=>{if(!fe)return;const{error:t}=await fe.from("sightseeings").delete().eq("id",e);if(t)throw t},u3=async e=>{if(!fe)return null;const t=Nb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("activities").insert(n).select().single();if(i)throw i;if(e.options.length>0){const o=e.options.map(c=>{const{id:u,...p}=mh(c,a.id);return p}),{error:l}=await fe.from("activity_options").insert(o);if(l)throw l}return Vp({...a,activity_options:e.options.map(o=>mh(o,a.id))})},h3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("activities").update(Nb(e)).eq("id",e.id).select().single();if(r)throw r;const{error:n}=await fe.from("activity_options").delete().eq("activity_id",e.id);if(n)throw n;if(e.options.length>0){const a=e.options.map(o=>mh(o,e.id)),{error:i}=await fe.from("activity_options").insert(a);if(i)throw i}return Vp({...t,activity_options:e.options.map(a=>mh(a,e.id))})},m3=async e=>{if(!fe)return;const{error:t}=await fe.from("activities").delete().eq("id",e);if(t)throw t},f3=async e=>{if(!fe)return null;const t=jb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("entry_tickets").insert(n).select().single();if(i)throw i;return Wp(a)},p3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("entry_tickets").update(jb(e)).eq("id",e.id).select().single();if(r)throw r;return Wp(t)},x3=async e=>{if(!fe)return;const{error:t}=await fe.from("entry_tickets").delete().eq("id",e);if(t)throw t},g3=async e=>{if(!fe)return null;const t=_b(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("meals").insert(n).select().single();if(i)throw i;return Gp(a)},v3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("meals").update(_b(e)).eq("id",e.id).select().single();if(r)throw r;return Gp(t)},b3=async e=>{if(!fe)return;const{error:t}=await fe.from("meals").delete().eq("id",e);if(t)throw t},o1=async e=>{var c,u,p;if(!fe)throw console.error("insertItinerary: Supabase not initialized!"),new Error("Supabase is not configured");const t=Sb(e),{id:r,...n}=t;console.log("=== INSERT ITINERARY TO SUPABASE ==="),console.log("Itinerary ID:",r),console.log("Client ID:",n.client_id),console.log("Insert data:",JSON.stringify(n,null,2));const{data:a,error:i}=await fe.from("clients").select("id, created_by").eq("id",n.client_id).maybeSingle();if(console.log("Client check:",a),console.log("Current user:",(c=(await fe.auth.getUser()).data.user)==null?void 0:c.id),i&&console.error("Error checking client:",i),!a)throw console.error("CLIENT NOT FOUND IN DATABASE!"),new Error(`Client ${n.client_id} does not exist in database`);a.created_by!==((u=(await fe.auth.getUser()).data.user)==null?void 0:u.id)&&(console.error("CLIENT CREATED_BY MISMATCH!"),console.error("Client created_by:",a.created_by),console.error("Current user:",(p=(await fe.auth.getUser()).data.user)==null?void 0:p.id));const{data:o,error:l}=await fe.from("itineraries").insert(n).select().single();if(l)throw console.error("=== INSERT ITINERARY ERROR ==="),console.error("Error code:",l.code),console.error("Error message:",l.message),console.error("Error details:",l.details),console.error("Error hint:",l.hint),new Error(`Failed to insert itinerary: ${l.message}`);if(e.dayPlans.length>0){const f=e.dayPlans.map(m=>fh(m,o.id)),{error:j}=await fe.from("day_plans").insert(f);if(j)throw j}return Yp({...o,day_plans:e.dayPlans.map(f=>fh(f,o.id))})},y3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("itineraries").update(Sb(e)).eq("id",e.id).select().single();if(r)throw r;const{error:n}=await fe.from("day_plans").delete().eq("itinerary_id",e.id);if(n)throw n;if(e.dayPlans.length>0){const a=e.dayPlans.map(o=>fh(o,e.id)),{error:i}=await fe.from("day_plans").insert(a);if(i)throw i}return Yp({...t,day_plans:e.dayPlans.map(a=>fh(a,e.id))})},w3=async e=>{if(!fe)return;const{error:t}=await fe.from("itineraries").delete().eq("id",e);if(t)throw t},N3=async e=>{if(!fe)return null;const t=kb(e),{id:r,...n}=t,{data:a,error:i}=await fe.from("fixed_itineraries").insert(n).select().single();if(i)throw i;return Kp(a)},j3=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("fixed_itineraries").update(kb(e)).eq("id",e.id).select().single();if(r)throw r;return Kp(t)},_3=async e=>{if(!fe)return;const{error:t}=await fe.from("fixed_itineraries").delete().eq("id",e);if(t)throw t},S3=async()=>{if(!fe)return[];const{data:e,error:t}=await fe.from("sales_persons").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},k3=async e=>{if(!fe)return null;if(console.log("insertSalesPerson called with:",{...e,raw_password:"***"}),e.raw_password){console.log("Creating Supabase auth user for:",e.email);const{data:t,error:r}=await fe.auth.signUp({email:e.email,password:e.raw_password,options:{data:{full_name:e.full_name,role:"sales",company_name:e.company_name}}});if(r)throw console.error("Auth signup error:",r),new Error(`Failed to create auth user: ${r.message}`);if(!t.user)throw console.error("No user data returned from signup"),new Error("Failed to create auth user");console.log("Auth user created successfully:",t.user.id),console.log("Waiting for profile and sales_persons entry creation...");let n=!1;for(let a=0;a<15;a++){const{data:i}=await fe.from("sales_persons").select("*").eq("id",t.user.id).maybeSingle();if(i)return n=!0,console.log("Sales person created successfully:",i),i;await new Promise(o=>setTimeout(o,300))}if(!n)throw console.error("Sales person creation timeout"),new Error("Sales person creation timeout - please try again")}return null},l1=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("sales_persons").update(e).eq("id",e.id).select().single();if(r)throw r;return t},A3=async e=>{if(!fe)return;const{error:t}=await fe.auth.admin.deleteUser(e);if(t){console.error("Error deleting auth user:",t);const{error:r}=await fe.from("sales_persons").delete().eq("id",e);if(r)throw r}},C3=async e=>{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")},T3=async()=>{if(!fe)return[];const{data:e,error:t}=await fe.from("agent_registrations").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},P3=async(e,t)=>{if(!fe)return null;const{data:r,error:n}=await fe.from("agent_registrations").select("*").eq("id",e).single();if(n)throw n;if(!r)throw new Error("Agent registration not found");const{data:a,error:i}=await fe.auth.signUp({email:r.email,password:r.password_hash,options:{data:{full_name:r.username,role:"agent",company_name:r.company_name}}});if(i)throw i;const{data:o,error:l}=await fe.from("agent_registrations").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return o},L3=async e=>{if(!fe)return;const{error:t}=await fe.from("agent_registrations").update({status:"rejected"}).eq("id",e);if(t)throw t},E3=async e=>{if(!fe)return;const{error:t}=await fe.from("agent_registrations").delete().eq("id",e);if(t)throw t},I3=async e=>{if(!fe)return null;if(console.log("insertOperationsPerson called with:",{...e,raw_password:"***"}),e.raw_password){console.log("Creating Supabase auth user for:",e.email);const{data:t,error:r}=await fe.auth.signUp({email:e.email,password:e.raw_password,options:{data:{full_name:e.full_name,role:"operations",company_name:e.company_name,phone_number:e.phone_number}}});if(r)throw console.error("Auth signup error:",r),new Error(`Failed to create auth user: ${r.message}`);if(!t.user)throw console.error("No user data returned from signup"),new Error("Failed to create auth user");console.log("Auth user created successfully:",t.user.id),console.log("Waiting for profile and operations_persons entry creation...");let n=!1;for(let a=0;a<15;a++){const{data:i}=await fe.from("operations_persons").select("*").eq("id",t.user.id).maybeSingle();if(i)return n=!0,console.log("Operations person created successfully:",i),i;await new Promise(o=>setTimeout(o,300))}if(!n)throw console.error("Operations person creation timeout"),new Error("Operations person creation timeout - please try again")}return null},D3=async()=>{if(!fe)return[];const{data:e,error:t}=await fe.from("operations_persons").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},O3=[{id:"1",type:"cab",vehicleName:"Private Cab Service",costPerDay:0},{id:"2",type:"self-drive-car",vehicleName:"Toyota Avanza",costPerDay:45},{id:"3",type:"self-drive-car",vehicleName:"Honda Brio",costPerDay:35},{id:"4",type:"self-drive-scooter",vehicleName:"Honda Vario",costPerDay:8},{id:"5",type:"self-drive-scooter",vehicleName:"Yamaha NMAX",costPerDay:12},{id:"6",type:"self-drive-car",vehicleName:"Toyota Innova",costPerDay:55},{id:"7",type:"self-drive-car",vehicleName:"Mitsubishi Pajero",costPerDay:75},{id:"8",type:"self-drive-car",vehicleName:"Daihatsu Terios",costPerDay:38},{id:"9",type:"self-drive-scooter",vehicleName:"Yamaha Aerox",costPerDay:12},{id:"10",type:"self-drive-scooter",vehicleName:"Honda ADV 150",costPerDay:15},{id:"11",type:"self-drive-scooter",vehicleName:"Vespa Primavera",costPerDay:18},{id:"12",type:"cab",vehicleName:"Luxury Car Service",costPerDay:0}],F3=[{id:"1",name:"Ubud Palace Resort",place:"Ubud",starCategory:"5-star",roomTypes:[{id:"1-1",name:"Deluxe Garden View",peakSeasonPrice:180,seasonPrice:150,offSeasonPrice:120},{id:"1-2",name:"Premium Pool View",peakSeasonPrice:220,seasonPrice:180,offSeasonPrice:150},{id:"1-3",name:"Royal Suite",peakSeasonPrice:350,seasonPrice:280,offSeasonPrice:220}]},{id:"2",name:"Seminyak Beach Hotel",place:"Seminyak",starCategory:"4-star",roomTypes:[{id:"2-1",name:"Superior Room",peakSeasonPrice:120,seasonPrice:100,offSeasonPrice:80},{id:"2-2",name:"Ocean View Room",peakSeasonPrice:160,seasonPrice:130,offSeasonPrice:110}]},{id:"3",name:"Kuta Beach Resort",place:"Kuta",starCategory:"3-star",roomTypes:[{id:"3-1",name:"Standard Room",peakSeasonPrice:80,seasonPrice:65,offSeasonPrice:50},{id:"3-2",name:"Beach View Room",peakSeasonPrice:110,seasonPrice:90,offSeasonPrice:70}]},{id:"4",name:"Sanur Sunrise Hotel",place:"Sanur",starCategory:"4-star",roomTypes:[{id:"4-1",name:"Garden Room",peakSeasonPrice:100,seasonPrice:85,offSeasonPrice:70},{id:"4-2",name:"Beachfront Suite",peakSeasonPrice:180,seasonPrice:150,offSeasonPrice:120}]},{id:"5",name:"Lovina Beach Resort",place:"Lovina",starCategory:"4-star",roomTypes:[{id:"5-1",name:"Ocean View Room",peakSeasonPrice:140,seasonPrice:115,offSeasonPrice:90},{id:"5-2",name:"Dolphin Suite",peakSeasonPrice:200,seasonPrice:165,offSeasonPrice:130}]},{id:"6",name:"Amed Beach Villa",place:"Amed",starCategory:"3-star",roomTypes:[{id:"6-1",name:"Garden Villa",peakSeasonPrice:90,seasonPrice:75,offSeasonPrice:60},{id:"6-2",name:"Sea View Villa",peakSeasonPrice:130,seasonPrice:105,offSeasonPrice:85}]},{id:"7",name:"Munduk Mountain Resort",place:"Munduk",starCategory:"4-star",roomTypes:[{id:"7-1",name:"Mountain View Room",peakSeasonPrice:120,seasonPrice:100,offSeasonPrice:80},{id:"7-2",name:"Lake View Suite",peakSeasonPrice:170,seasonPrice:140,offSeasonPrice:115}]},{id:"8",name:"Sidemen Valley Lodge",place:"Sidemen",starCategory:"3-star",roomTypes:[{id:"8-1",name:"Valley View Room",peakSeasonPrice:85,seasonPrice:70,offSeasonPrice:55}]},{id:"9",name:"Candidasa Beach Hotel",place:"Candidasa",starCategory:"4-star",roomTypes:[{id:"9-1",name:"Beach Front Room",peakSeasonPrice:150,seasonPrice:125,offSeasonPrice:100}]},{id:"10",name:"Pemuteran Bay Resort",place:"Pemuteran",starCategory:"5-star",roomTypes:[{id:"10-1",name:"Luxury Ocean Suite",peakSeasonPrice:280,seasonPrice:230,offSeasonPrice:180}]},{id:"11",name:"Tabanan Rice Field Resort",place:"Tabanan",starCategory:"4-star",roomTypes:[{id:"11-1",name:"Rice Field View Room",peakSeasonPrice:110,seasonPrice:90,offSeasonPrice:75}]},{id:"12",name:"Denpasar City Hotel",place:"Denpasar",starCategory:"3-star",roomTypes:[{id:"12-1",name:"Standard City Room",peakSeasonPrice:70,seasonPrice:60,offSeasonPrice:45},{id:"12-2",name:"Executive Room",peakSeasonPrice:95,seasonPrice:80,offSeasonPrice:65}]}],M3=[{id:"1",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"cab",vehicleCosts:{avanza:45,hiace:65,miniBus:85,bus32:120,bus39:140}},{id:"2",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"cab",vehicleCosts:{avanza:50,hiace:70,miniBus:90,bus32:125,bus39:145}},{id:"3",name:"Besakih Temple",description:"Mother temple of Bali with panoramic mountain views",transportationMode:"cab",vehicleCosts:{avanza:80,hiace:110,miniBus:140,bus32:180,bus39:210}},{id:"4",name:"Jatiluwih Rice Terraces",description:"UNESCO World Heritage rice terraces",transportationMode:"cab",vehicleCosts:{avanza:70,hiace:95,miniBus:125,bus32:160,bus39:185}},{id:"5",name:"Nusa Penida Day Trip",description:"Island adventure with pristine beaches and cliffs",transportationMode:"cab",vehicleCosts:{avanza:120,hiace:150,miniBus:180,bus32:220,bus39:250}},{id:"6",name:"Lovina Dolphin Watching",description:"Early morning dolphin watching tour",transportationMode:"cab",vehicleCosts:{avanza:90,hiace:120,miniBus:150,bus32:190,bus39:220}},{id:"7",name:"Banyumala Twin Waterfalls",description:"Hidden twin waterfalls with crystal clear pools",transportationMode:"cab",vehicleCosts:{avanza:60,hiace:85,miniBus:110,bus32:145,bus39:170}},{id:"8",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"cab",vehicleCosts:{avanza:35,hiace:50,miniBus:70,bus32:95,bus39:115}},{id:"9",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"cab",vehicleCosts:{avanza:55,hiace:75,miniBus:95,bus32:125,bus39:145}},{id:"10",name:"Goa Gajah Elephant Cave",description:"Ancient archaeological site with intricate stone carvings",transportationMode:"cab",vehicleCosts:{avanza:40,hiace:60,miniBus:80,bus32:105,bus39:125}},{id:"11",name:"Gunung Kawi Temple",description:"Ancient rock-cut temple complex in lush valley",transportationMode:"cab",vehicleCosts:{avanza:50,hiace:70,miniBus:90,bus32:120,bus39:140}},{id:"12",name:"Batukaru Temple",description:"Peaceful mountain temple surrounded by forest",transportationMode:"cab",vehicleCosts:{avanza:75,hiace:100,miniBus:130,bus32:165,bus39:190}},{id:"13",name:"Jembrana Beach Drive",description:"Scenic coastal drive with black sand beaches",transportationMode:"cab",vehicleCosts:{avanza:85,hiace:115,miniBus:145,bus32:185,bus39:215}},{id:"14",name:"Bangli Traditional Villages",description:"Cultural village tour with traditional crafts",transportationMode:"cab",vehicleCosts:{avanza:65,hiace:90,miniBus:115,bus32:150,bus39:175}},{id:"15",name:"Klungkung Royal Palace",description:"Historical palace with traditional Balinese architecture",transportationMode:"cab",vehicleCosts:{avanza:55,hiace:75,miniBus:95,bus32:125,bus39:145}},{id:"16",name:"Buleleng Waterfall Circuit",description:"Multiple waterfalls tour in northern Bali",transportationMode:"cab",vehicleCosts:{avanza:95,hiace:125,miniBus:155,bus32:195,bus39:225}},{id:"17",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"self-drive-car"},{id:"18",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"self-drive-car"},{id:"19",name:"Besakih Temple",description:"Mother temple of Bali with panoramic mountain views",transportationMode:"self-drive-car"},{id:"20",name:"Jatiluwih Rice Terraces",description:"UNESCO World Heritage rice terraces",transportationMode:"self-drive-car"},{id:"21",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"self-drive-car"},{id:"22",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"self-drive-car"},{id:"23",name:"Goa Gajah Elephant Cave",description:"Ancient archaeological site with intricate stone carvings",transportationMode:"self-drive-car"},{id:"24",name:"Gunung Kawi Temple",description:"Ancient rock-cut temple complex in lush valley",transportationMode:"self-drive-car"},{id:"25",name:"Tanah Lot Temple",description:"Iconic sea temple perched on a rock formation",transportationMode:"self-drive-scooter"},{id:"26",name:"Uluwatu Temple",description:"Clifftop temple with stunning sunset views",transportationMode:"self-drive-scooter"},{id:"27",name:"Tegallalang Rice Terraces",description:"Famous Instagram-worthy rice terraces with swing",transportationMode:"self-drive-scooter"},{id:"28",name:"Tirta Empul Temple",description:"Holy spring water temple for purification rituals",transportationMode:"self-drive-scooter"}],R3=[{id:"1",name:"Bali Swing",location:"Ubud",options:[{id:"1-1",name:"Single Swing",cost:25,costForHowMany:1},{id:"1-2",name:"Couple Swing",cost:40,costForHowMany:2}]},{id:"2",name:"ATV Ride",location:"Ubud",options:[{id:"2-1",name:"Single ATV",cost:35,costForHowMany:1},{id:"2-2",name:"Tandem ATV",cost:55,costForHowMany:2}]},{id:"3",name:"White Water Rafting",location:"Ubud",options:[{id:"3-1",name:"Ayung River Rafting",cost:45,costForHowMany:1},{id:"3-2",name:"Telaga Waja Rafting",cost:55,costForHowMany:1}]},{id:"4",name:"Snorkeling",location:"Amed",options:[{id:"4-1",name:"Half Day Snorkeling",cost:30,costForHowMany:1},{id:"4-2",name:"Full Day with Lunch",cost:65,costForHowMany:1}]},{id:"5",name:"Mount Batur Sunrise Hike",location:"Kintamani",options:[{id:"5-1",name:"Standard Hike with Breakfast",cost:55,costForHowMany:1},{id:"5-2",name:"Private Guide Hike",cost:85,costForHowMany:1}]},{id:"6",name:"Yoga Class",location:"Ubud",options:[{id:"6-1",name:"Group Morning Session",cost:20,costForHowMany:1},{id:"6-2",name:"Private Instruction",cost:80,costForHowMany:2}]},{id:"7",name:"Batik Making Workshop",location:"Ubud",options:[{id:"7-1",name:"Basic Workshop",cost:35,costForHowMany:1},{id:"7-2",name:"Advanced with Take-home",cost:65,costForHowMany:1}]},{id:"8",name:"Silver Jewelry Making",location:"Celuk",options:[{id:"8-1",name:"Basic Ring Making",cost:45,costForHowMany:1},{id:"8-2",name:"Custom Jewelry Design",cost:85,costForHowMany:1}]},{id:"9",name:"Wood Carving Class",location:"Mas",options:[{id:"9-1",name:"Small Sculpture",cost:40,costForHowMany:1},{id:"9-2",name:"Large Art Piece",cost:75,costForHowMany:1}]},{id:"10",name:"Kite Flying",location:"Sanur",options:[{id:"10-1",name:"Traditional Kite Experience",cost:25,costForHowMany:1},{id:"10-2",name:"Kite Making & Flying",cost:45,costForHowMany:1}]},{id:"11",name:"Fishing Trip",location:"Sanur",options:[{id:"11-1",name:"Traditional Fishing",cost:50,costForHowMany:1},{id:"11-2",name:"Deep Sea Fishing",cost:120,costForHowMany:4}]},{id:"12",name:"Photography Tour",location:"Various",options:[{id:"12-1",name:"Sunrise Photography Tour",cost:75,costForHowMany:2},{id:"12-2",name:"Full Day Workshop",cost:150,costForHowMany:4}]},{id:"13",name:"Meditation Retreat",location:"Ubud",options:[{id:"13-1",name:"Half Day Session",cost:60,costForHowMany:1},{id:"13-2",name:"Full Day Retreat",cost:120,costForHowMany:1}]},{id:"14",name:"Surfing Lessons",location:"Kuta",options:[{id:"14-1",name:"Beginner Lesson",cost:40,costForHowMany:1},{id:"14-2",name:"Advanced Coaching",cost:70,costForHowMany:1}]},{id:"15",name:"Horseback Riding",location:"Canggu",options:[{id:"15-1",name:"Beach Ride",cost:55,costForHowMany:1},{id:"15-2",name:"Sunset Ride",cost:75,costForHowMany:1}]},{id:"16",name:"Traditional Dance Class",location:"Ubud",options:[{id:"16-1",name:"Balinese Dance Lesson",cost:35,costForHowMany:1},{id:"16-2",name:"Private Performance",cost:150,costForHowMany:6}]},{id:"17",name:"Jungle Trekking",location:"Munduk",options:[{id:"17-1",name:"Half Day Trek",cost:45,costForHowMany:1},{id:"17-2",name:"Full Day Adventure",cost:85,costForHowMany:1}]}],$3=[{id:"1",name:"Tanah Lot Temple Entry",cost:5,sightseeingId:"1"},{id:"2",name:"Uluwatu Temple Entry",cost:6,sightseeingId:"2"},{id:"3",name:"Kecak Fire Dance Show",cost:15,sightseeingId:"2"},{id:"4",name:"Besakih Temple Entry",cost:8,sightseeingId:"3"},{id:"5",name:"Jatiluwih Rice Terraces Entry",cost:4,sightseeingId:"4"},{id:"6",name:"Nusa Penida Fast Boat",cost:35,sightseeingId:"5"},{id:"7",name:"Kelingking Beach Access",cost:3,sightseeingId:"5"},{id:"8",name:"Dolphin Watching Boat",cost:25,sightseeingId:"6"},{id:"9",name:"Banyumala Waterfall Entry",cost:6,sightseeingId:"7"},{id:"10",name:"Tegallalang Rice Terraces Entry",cost:5,sightseeingId:"8"},{id:"11",name:"Bali Swing Experience",cost:20,sightseeingId:"8"},{id:"12",name:"Tirta Empul Temple Entry",cost:8,sightseeingId:"9"},{id:"13",name:"Holy Water Blessing Ceremony",cost:15,sightseeingId:"9"},{id:"14",name:"Goa Gajah Elephant Cave Entry",cost:7,sightseeingId:"10"},{id:"15",name:"Gunung Kawi Temple Entry",cost:9,sightseeingId:"11"},{id:"16",name:"Batukaru Temple Entry",cost:6,sightseeingId:"12"},{id:"17",name:"Klungkung Palace Entry",cost:8,sightseeingId:"15"},{id:"18",name:"Traditional Art Gallery",cost:5,sightseeingId:"15"}],B3=[{id:"1",type:"breakfast",place:"Hotel Restaurant",cost:12},{id:"2",type:"lunch",place:"Local Warung",cost:15},{id:"3",type:"dinner",place:"Sunset Restaurant",cost:25}],U3=[{id:"1",name:"Bali Highlights - 5 Days",numberOfDays:5,transportationMode:"Private Cab Service",baseCost:850,inclusions:` 5 days private cab transportation with driver
 4 nights accommodation in 4-star hotels
 Daily breakfast at hotels
 Sightseeing tours: Tanah Lot, Uluwatu, Tegallalang Rice Terraces, Tirta Empul Temple
 Entry tickets to all mentioned attractions
 Professional English-speaking driver/guide
 Fuel, parking, and toll charges
 24/7 customer support`,exclusions:` International/domestic flights
 Travel insurance
 Lunch and dinner (except where mentioned)
 Personal expenses and shopping
 Tips and gratuities
 Activities not mentioned in inclusions
 Visa fees and documentation
 Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["1"],hotel:{place:"Seminyak",hotelId:"2",roomTypeId:"2-1"},activities:[],entryTickets:["1"],meals:["1"]},{day:2,sightseeing:["2"],hotel:{place:"Seminyak",hotelId:"2",roomTypeId:"2-1"},activities:[],entryTickets:["2"],meals:["1"]},{day:3,sightseeing:["8"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"1",optionId:"1-1"}],entryTickets:["10","11"],meals:["1"]},{day:4,sightseeing:["9"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[],entryTickets:["12","13"],meals:["1"]},{day:5,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"},{id:"2",name:"Bali Adventure - 7 Days",numberOfDays:7,transportationMode:"Toyota Avanza",baseCost:1200,inclusions:` 7 days self-drive Toyota Avanza rental
 6 nights accommodation in mixed 3-4 star hotels
 Daily breakfast at hotels
 Comprehensive sightseeing: Tanah Lot, Uluwatu, Besakih Temple, Jatiluwih Rice Terraces
 Adventure activities: Bali Swing, ATV Ride, White Water Rafting
 Entry tickets to all attractions
 Fuel allowance and insurance
 GPS navigation system
 24/7 roadside assistance`,exclusions:` International/domestic flights
 Travel insurance beyond vehicle coverage
 Lunch and dinner
 Personal expenses and shopping
 Tips and gratuities
 Additional fuel beyond allowance
 Traffic violation fines
 Visa fees and documentation
 Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["17"],hotel:{place:"Kuta",hotelId:"3",roomTypeId:"3-1"},activities:[],entryTickets:["1"],meals:["1"]},{day:2,sightseeing:["18"],hotel:{place:"Kuta",hotelId:"3",roomTypeId:"3-1"},activities:[],entryTickets:["2"],meals:["1"]},{day:3,sightseeing:["21"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-2"},activities:[{activityId:"1",optionId:"1-2"}],entryTickets:["10","11"],meals:["1"]},{day:4,sightseeing:["22"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-2"},activities:[{activityId:"2",optionId:"2-1"}],entryTickets:["12","13"],meals:["1"]},{day:5,sightseeing:["19"],hotel:{place:"Sanur",hotelId:"4",roomTypeId:"4-1"},activities:[{activityId:"3",optionId:"3-1"}],entryTickets:["4"],meals:["1"]},{day:6,sightseeing:["20"],hotel:{place:"Sanur",hotelId:"4",roomTypeId:"4-1"},activities:[],entryTickets:[],meals:["1"]},{day:7,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"},{id:"3",name:"Bali Cultural Experience - 3 Days",numberOfDays:3,transportationMode:"Honda Vario",baseCost:320,inclusions:` 3 days Honda Vario scooter rental
 2 nights accommodation in 3-star hotel
 Daily breakfast
 Cultural sightseeing: Tegallalang Rice Terraces, Tirta Empul Temple
 Traditional activities: Batik Making Workshop, Wood Carving Class
 Entry tickets to cultural sites
 Helmet and safety gear
 Basic insurance coverage`,exclusions:` International/domestic flights
 Travel insurance beyond basic coverage
 Lunch and dinner
 Personal expenses and shopping
 Tips and gratuities
 Fuel costs
 Traffic violation fines
 Visa fees and documentation
 Emergency medical expenses`,dayPlans:[{day:1,sightseeing:["27"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"7",optionId:"7-1"}],entryTickets:["10","11"],meals:["1"]},{day:2,sightseeing:["28"],hotel:{place:"Ubud",hotelId:"1",roomTypeId:"1-1"},activities:[{activityId:"9",optionId:"9-1"}],entryTickets:["12","13"],meals:["1"]},{day:3,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:["1"]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin"}],pf={clients:[],transportations:O3,hotels:F3,sightseeings:M3,activities:R3,entryTickets:$3,meals:B3,itineraries:[],fixedItineraries:U3},q3=(e,t)=>{let r;switch(t.type){case"SET_DATA":r={...e,...t.payload};break;case"ADD_CLIENT":r={...e,clients:[...e.clients,t.payload]};break;case"UPDATE_CLIENT":r={...e,clients:e.clients.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_CLIENT":r={...e,clients:e.clients.filter(n=>n.id!==t.payload)};break;case"ADD_TRANSPORTATION":r={...e,transportations:[...e.transportations,t.payload]};break;case"UPDATE_TRANSPORTATION":r={...e,transportations:e.transportations.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_TRANSPORTATION":r={...e,transportations:e.transportations.filter(n=>n.id!==t.payload)};break;case"ADD_HOTEL":r={...e,hotels:[...e.hotels,t.payload]};break;case"UPDATE_HOTEL":r={...e,hotels:e.hotels.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_HOTEL":r={...e,hotels:e.hotels.filter(n=>n.id!==t.payload)};break;case"ADD_SIGHTSEEING":r={...e,sightseeings:[...e.sightseeings,t.payload]};break;case"UPDATE_SIGHTSEEING":r={...e,sightseeings:e.sightseeings.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_SIGHTSEEING":r={...e,sightseeings:e.sightseeings.filter(n=>n.id!==t.payload)};break;case"ADD_ACTIVITY":r={...e,activities:[...e.activities,t.payload]};break;case"UPDATE_ACTIVITY":r={...e,activities:e.activities.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_ACTIVITY":r={...e,activities:e.activities.filter(n=>n.id!==t.payload)};break;case"ADD_ENTRY_TICKET":r={...e,entryTickets:[...e.entryTickets,t.payload]};break;case"UPDATE_ENTRY_TICKET":r={...e,entryTickets:e.entryTickets.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_ENTRY_TICKET":r={...e,entryTickets:e.entryTickets.filter(n=>n.id!==t.payload)};break;case"ADD_MEAL":r={...e,meals:[...e.meals,t.payload]};break;case"UPDATE_MEAL":r={...e,meals:e.meals.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_MEAL":r={...e,meals:e.meals.filter(n=>n.id!==t.payload)};break;case"ADD_ITINERARY":r={...e,itineraries:[...e.itineraries,t.payload]};break;case"UPDATE_ITINERARY":r={...e,itineraries:e.itineraries.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_ITINERARY":r={...e,itineraries:e.itineraries.filter(n=>n.id!==t.payload)};break;case"ADD_FIXED_ITINERARY":r={...e,fixedItineraries:[...e.fixedItineraries,t.payload]};break;case"UPDATE_FIXED_ITINERARY":r={...e,fixedItineraries:e.fixedItineraries.map(n=>n.id===t.payload.id?t.payload:n)};break;case"DELETE_FIXED_ITINERARY":r={...e,fixedItineraries:e.fixedItineraries.filter(n=>n.id!==t.payload)};break;default:return e}return r},Ab=ne.createContext(null),ph=({children:e})=>{const[t,r]=ne.useReducer(q3,pf);ne.useEffect(()=>{const q=ee=>{ee.detail&&r({type:"SET_DATA",payload:ee.detail})};window.addEventListener("refreshData",q);const $=ee=>{if(ee.key==="appData"&&ee.newValue)try{const te=JSON.parse(ee.newValue);r({type:"SET_DATA",payload:te})}catch(te){console.error("Error parsing storage data:",te)}};return window.addEventListener("storage",$),()=>{window.removeEventListener("refreshData",q),window.removeEventListener("storage",$)}},[]),ne.useEffect(()=>{let q=!1;(async()=>{if(q){console.log("Data load already in progress, skipping...");return}{q=!0;try{console.log("Loading initial data from Supabase...");const re=await i1();re?(r({type:"SET_DATA",payload:re}),console.log("Initial data loaded successfully")):r({type:"SET_DATA",payload:pf})}catch(re){console.error("Error fetching data from Supabase:",re),r({type:"SET_DATA",payload:pf})}finally{q=!1}}})();const ee=re=>{re.detail&&r({type:"SET_DATA",payload:re.detail})};window.addEventListener("refreshData",ee);const te=re=>{};return window.addEventListener("storage",te),()=>{window.removeEventListener("refreshData",ee),window.removeEventListener("storage",te)}},[]);const n=async q=>{try{const $=await Z4(q);$&&r({type:"ADD_CLIENT",payload:$})}catch($){throw console.error("Error adding client to Supabase:",$),$}},a=async q=>{try{const $=await e3(q);$&&r({type:"UPDATE_CLIENT",payload:$})}catch($){throw console.error("Error updating client in Supabase:",$),$}},i=async q=>{try{await t3(q),r({type:"DELETE_CLIENT",payload:q})}catch($){throw console.error("Error deleting client from Supabase:",$),$}},o=async q=>{try{const $=await s3(q);$&&r({type:"ADD_TRANSPORTATION",payload:$})}catch($){console.error("Error adding transportation to Supabase:",$),r({type:"ADD_TRANSPORTATION",payload:q})}},l=async q=>{try{const $=await r3(q);$&&r({type:"UPDATE_TRANSPORTATION",payload:$})}catch($){console.error("Error updating transportation in Supabase:",$),r({type:"UPDATE_TRANSPORTATION",payload:q})}},c=async q=>{try{await n3(q),r({type:"DELETE_TRANSPORTATION",payload:q})}catch($){console.error("Error deleting transportation from Supabase:",$),r({type:"DELETE_TRANSPORTATION",payload:q})}},u=async q=>{try{const $=await a3(q);$&&r({type:"ADD_HOTEL",payload:$})}catch($){console.error("Error adding hotel to Supabase:",$),r({type:"ADD_HOTEL",payload:q})}},p=async q=>{try{const $=await i3(q);$&&r({type:"UPDATE_HOTEL",payload:$})}catch($){console.error("Error updating hotel in Supabase:",$),r({type:"UPDATE_HOTEL",payload:q})}},f=async q=>{try{await o3(q),r({type:"DELETE_HOTEL",payload:q})}catch($){console.error("Error deleting hotel from Supabase:",$),r({type:"DELETE_HOTEL",payload:q})}},j=async q=>{try{const $=await l3(q);$&&r({type:"ADD_SIGHTSEEING",payload:$})}catch($){console.error("Error adding sightseeing to Supabase:",$),r({type:"ADD_SIGHTSEEING",payload:q})}},m=async q=>{try{const $=await c3(q);$&&r({type:"UPDATE_SIGHTSEEING",payload:$})}catch($){console.error("Error updating sightseeing in Supabase:",$),r({type:"UPDATE_SIGHTSEEING",payload:q})}},y=async q=>{try{await d3(q),r({type:"DELETE_SIGHTSEEING",payload:q})}catch($){console.error("Error deleting sightseeing from Supabase:",$),r({type:"DELETE_SIGHTSEEING",payload:q})}},_=async q=>{try{const $=await u3(q);$&&r({type:"ADD_ACTIVITY",payload:$})}catch($){console.error("Error adding activity to Supabase:",$),r({type:"ADD_ACTIVITY",payload:q})}},k=async q=>{try{const $=await h3(q);$&&r({type:"UPDATE_ACTIVITY",payload:$})}catch($){console.error("Error updating activity in Supabase:",$),r({type:"UPDATE_ACTIVITY",payload:q})}},v=async q=>{try{await m3(q),r({type:"DELETE_ACTIVITY",payload:q})}catch($){console.error("Error deleting activity from Supabase:",$),r({type:"DELETE_ACTIVITY",payload:q})}},x=async q=>{try{const $=await f3(q);$&&r({type:"ADD_ENTRY_TICKET",payload:$})}catch($){console.error("Error adding entry ticket to Supabase:",$),r({type:"ADD_ENTRY_TICKET",payload:q})}},b=async q=>{try{const $=await p3(q);$&&r({type:"UPDATE_ENTRY_TICKET",payload:$})}catch($){console.error("Error updating entry ticket in Supabase:",$),r({type:"UPDATE_ENTRY_TICKET",payload:q})}},S=async q=>{try{await x3(q),r({type:"DELETE_ENTRY_TICKET",payload:q})}catch($){console.error("Error deleting entry ticket from Supabase:",$),r({type:"DELETE_ENTRY_TICKET",payload:q})}},L=async q=>{try{const $=await g3(q);$&&r({type:"ADD_MEAL",payload:$})}catch($){console.error("Error adding meal to Supabase:",$),r({type:"ADD_MEAL",payload:q})}},T=async q=>{try{const $=await v3(q);$&&r({type:"UPDATE_MEAL",payload:$})}catch($){console.error("Error updating meal in Supabase:",$),r({type:"UPDATE_MEAL",payload:q})}},A=async q=>{try{await b3(q),r({type:"DELETE_MEAL",payload:q})}catch($){console.error("Error deleting meal from Supabase:",$),r({type:"DELETE_MEAL",payload:q})}},N=async q=>{try{const $=await o1(q);$&&r({type:"ADD_ITINERARY",payload:$})}catch($){console.error("Error adding itinerary to Supabase:",$),r({type:"ADD_ITINERARY",payload:q})}},P=async q=>{try{if(t.itineraries.find(ee=>ee.id===q.id)){const ee=await y3(q);ee&&r({type:"UPDATE_ITINERARY",payload:ee})}else{const ee=await o1(q);ee&&r({type:"ADD_ITINERARY",payload:ee})}}catch($){console.error("Error updating itinerary in Supabase:",$);const ee=t.itineraries.find(te=>te.id===q.id);r(ee?{type:"UPDATE_ITINERARY",payload:q}:{type:"ADD_ITINERARY",payload:q})}},M=async q=>{try{await w3(q),r({type:"DELETE_ITINERARY",payload:q})}catch($){console.error("Error deleting itinerary from Supabase:",$),r({type:"DELETE_ITINERARY",payload:q})}},E=async q=>{try{const $=await N3(q);$&&r({type:"ADD_FIXED_ITINERARY",payload:$})}catch($){console.error("Error adding fixed itinerary to Supabase:",$),r({type:"ADD_FIXED_ITINERARY",payload:q})}},I=async q=>{try{const $=await j3(q);$&&r({type:"UPDATE_FIXED_ITINERARY",payload:$})}catch($){console.error("Error updating fixed itinerary in Supabase:",$),r({type:"UPDATE_FIXED_ITINERARY",payload:q})}},Y=async q=>{try{await _3(q),r({type:"DELETE_FIXED_ITINERARY",payload:q})}catch($){console.error("Error deleting fixed itinerary from Supabase:",$),r({type:"DELETE_FIXED_ITINERARY",payload:q})}},G=async(q,$,ee)=>{try{const te={id:Date.now().toString(),version:q.version,changeType:$,description:ee,timestamp:new Date().toISOString(),updatedBy:q.updatedBy},re={...q,changeLog:[...q.changeLog||[],te]};_s()&&await P(re)}catch(te){throw console.error("Error updating itinerary with change log:",te),te}},Z=q=>{const $=t.itineraries.filter(ee=>ee.client.id===q);return $.length===0?null:$.reduce((ee,te)=>te.version>ee.version?te:ee)},X=async()=>{try{console.log("Refreshing all data from Supabase...");const q=await i1();q&&(r({type:"SET_DATA",payload:q}),console.log("Data refreshed successfully"))}catch(q){throw console.error("Error refreshing data from Supabase:",q),q}};return s.jsx(Ab.Provider,{value:{state:t,dispatch:r,updateItinerary:G,getLatestItinerary:Z,refreshAllData:X,addClient:n,updateClientData:a,deleteClientData:i,addTransportation:o,updateTransportationData:l,deleteTransportationData:c,addHotel:u,updateHotelData:p,deleteHotelData:f,addSightseeing:j,updateSightseeingData:m,deleteSightseeingData:y,addActivity:_,updateActivityData:k,deleteActivityData:v,addEntryTicket:x,updateEntryTicketData:b,deleteEntryTicketData:S,addMeal:L,updateMealData:T,deleteMealData:A,addItinerary:N,updateItineraryData:P,deleteItineraryData:M,addFixedItinerary:E,updateFixedItineraryData:I,deleteFixedItineraryData:Y},children:e})},It=()=>{const e=ne.useContext(Ab);if(!e)throw new Error("useData must be used within a DataProvider");return e},Kt=({children:e,title:t,subtitle:r,hideHeader:n=!1})=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[!n&&s.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50",children:s.jsx("div",{className:"w-full mx-auto px-3 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center justify-between h-14 sm:h-16 overflow-hidden",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[s.jsx("div",{className:"bg-blue-600 p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:s.jsx(ft,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-sm sm:text-xl font-bold text-slate-900 truncate",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-xs text-slate-500 hidden sm:block truncate",children:"Travel Agency Management"})]})]})})})}),s.jsxs("main",{className:`w-full mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8 pb-6 sm:pb-8 overflow-x-hidden ${n?"pt-4":""}`,children:[s.jsxs("div",{className:"mb-4 sm:mb-8",children:[s.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-slate-900 break-words",children:t}),r&&s.jsx("p",{className:"mt-1 sm:mt-2 text-sm sm:text-base text-slate-600 break-words",children:r})]}),e]})]}),z3=()=>{It();const{state:e}=Ht(),[t,r]=ne.useState("idle"),[n,a]=ne.useState(""),[i,o]=ne.useState("");ne.useEffect(()=>{(async()=>{try{const{data:{session:u}}=await fe.auth.getSession();u!=null&&u.user&&(r("connected"),a("Connected to Supabase"))}catch(u){console.error("Connection check failed:",u)}})()},[e.isAuthenticated]);const l=async()=>{r("connecting"),a("Testing connection..."),o("");try{const{data:{session:c},error:u}=await fe.auth.getSession();if(u)throw new Error(`Session error: ${u.message}`);const{error:p}=await fe.from("profiles").select("count").limit(1);if(p)throw new Error(`Database connection error: ${p.message}`);r("connected"),a("Successfully connected to Supabase")}catch(c){r("error"),a("Connection failed"),o(c.message||c.toString()),console.error("Supabase connection failed:",c)}};return s.jsx("div",{className:`border rounded-lg p-4 mb-6 ${t==="connected"?"bg-green-50 border-green-200":t==="error"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsx(F4,{className:`h-5 w-5 flex-shrink-0 ${t==="connected"?"text-green-600":t==="error"?"text-red-600":"text-blue-600"}`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h4",{className:`font-medium ${t==="connected"?"text-green-800":t==="error"?"text-red-800":"text-blue-800"}`,children:t==="connected"?"Connected to Supabase":t==="error"?"Connection Failed":t==="connecting"?"Connecting...":"Supabase Database"}),s.jsx("p",{className:`text-sm mt-1 ${t==="connected"?"text-green-700":t==="error"?"text-red-700":"text-blue-700"}`,children:n||(t==="idle"?"Test your Supabase connection":"")}),i&&s.jsx("p",{className:"text-xs mt-1 text-red-600 break-words",children:i})]})]}),(t==="idle"||t==="connected")&&s.jsx("button",{onClick:l,className:`px-4 py-2 rounded-lg transition-colors flex-shrink-0 ml-4 ${t==="connected"?"bg-green-600 text-white hover:bg-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:t==="connected"?"Test Again":"Test Connection"}),t==="connecting"&&s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4",children:[s.jsx(M4,{className:"h-4 w-4 animate-spin text-blue-600"}),s.jsx("span",{className:"text-blue-700 text-sm",children:"Testing..."})]}),t==="error"&&s.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex-shrink-0 ml-4",children:"Retry"})]})})},H3=({onNavigateToSection:e})=>{const{state:t,dispatch:r}=It(),{clients:n,itineraries:a}=t,[i,o]=ne.useState("all");il.useEffect(()=>{const y=localStorage.getItem("appData");if(y)try{const k=JSON.parse(y);(k.clients||k.itineraries)&&r({type:"SET_DATA",payload:k})}catch(k){console.error("Error loading dashboard data:",k)}const _=setInterval(()=>{const k=localStorage.getItem("appData");if(k)try{const v=JSON.parse(k);(v.clients||v.itineraries)&&r({type:"SET_DATA",payload:v})}catch(v){console.error("Error loading dashboard data:",v)}},3e3);return()=>clearInterval(_)},[]);const l=n,c=a,u=c.reduce((y,_)=>y+_.finalPrice,0),p=c.length>0?u/c.length:0,f=()=>{switch(i){case"clients":return{clients:l,itineraries:[]};case"itineraries":return{clients:[],itineraries:c};default:return{clients:l,itineraries:c}}},{clients:j,itineraries:m}=f();return s.jsxs(Kt,{title:"Admin Dashboard",subtitle:"Manage your travel agency operations and view client leads",children:[s.jsx(z3,{}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Admin Panel"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[s.jsxs("button",{onClick:()=>e("guests"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(gb,{className:"h-4 w-4 mr-2"}),"Guest Management"]}),s.jsxs("button",{onClick:()=>e("fixedItineraries"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-violet-600 to-purple-600 text-white rounded-lg hover:from-violet-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Fixed Itineraries"]}),s.jsxs("button",{onClick:()=>e("transportation"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Transportation"]}),s.jsxs("button",{onClick:()=>e("hotels"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-violet-600 text-white rounded-lg hover:from-purple-700 hover:to-violet-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(wt,{className:"h-4 w-4 mr-2"}),"Hotels"]}),s.jsxs("button",{onClick:()=>e("sightseeing"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(ft,{className:"h-4 w-4 mr-2"}),"Sightseeing"]}),s.jsxs("button",{onClick:()=>e("activities"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(hs,{className:"h-4 w-4 mr-2"}),"Activities"]}),s.jsxs("button",{onClick:()=>e("meals"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(ns,{className:"h-4 w-4 mr-2"}),"Meals"]}),s.jsxs("button",{onClick:()=>e("tickets"),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),"Entry Tickets"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="clients"?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"}`,onClick:()=>o(i==="clients"?"all":"clients"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Clients"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="itineraries"?"border-teal-500 ring-2 ring-teal-200":"border-slate-200"}`,onClick:()=>o(i==="itineraries"?"all":"itineraries"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Itineraries"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:c.length})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(ft,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",u.toFixed(0)]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Quote Value"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",p.toFixed(0)]})]}),s.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-amber-600"})})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All Data"}),s.jsxs("button",{onClick:()=>o("clients"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="clients"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Clients Only (",l.length,")"]}),s.jsxs("button",{onClick:()=>o("itineraries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="itineraries"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Itineraries Only (",c.length,")"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:i==="clients"?"All Clients":i==="itineraries"?"All Itineraries":"Recent Client Leads"}),s.jsx("p",{className:"text-slate-500 text-sm",children:i==="clients"?"Complete list of all client inquiries":i==="itineraries"?"All generated itineraries and quotes":"Latest inquiries from the itinerary builder"})]}),j.length===0&&m.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Zs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i==="clients"?"No clients yet":i==="itineraries"?"No itineraries yet":"No data yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i==="clients"?"Client leads will appear here when created through the itinerary builder.":i==="itineraries"?"Completed itineraries will appear here.":"Data will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Itinerary Details":"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pax & Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Total Cost":"Transportation"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[j.map(y=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:y.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(Wn,{className:"h-4 w-4 mr-1"}),y.countryCode," ",y.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-slate-400"}),y.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",y.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(y.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(y.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[y.numberOfPax.adults+y.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[y.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:y.transportationMode})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(y.createdAt).toLocaleDateString()})]},y.id)),m.map((y,_)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:y.client.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(Wn,{className:"h-4 w-4 mr-1"}),y.client.countryCode," ",y.client.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-slate-400"}),y.client.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",y.client.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(y.client.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(y.client.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[y.client.numberOfPax.adults+y.client.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[y.client.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"font-medium text-green-600",children:["Rp ",y.finalPrice.toLocaleString("id-ID")]})})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(y.client.createdAt).toLocaleDateString()})]},_))]})]})})]})]})},V3=()=>{const{state:e,addTransportation:t,updateTransportationData:r,deleteTransportationData:n}=It(),{transportations:a}=e,[i,o]=ne.useState(null),[l,c]=ne.useState({}),[u,p]=ne.useState(!1),[f,j]=ne.useState({type:"cab",vehicleName:"",costPerDay:0}),m=async()=>{const x={...f,id:Date.now().toString()};await t(x),j({type:"cab",vehicleName:"",costPerDay:0}),p(!1)},y=x=>{o(x.id),c(x)},_=async()=>{i&&l.id&&(await r(l),o(null),c({}))},k=async x=>{confirm("Are you sure you want to delete this transportation option?")&&await n(x)},v=x=>{switch(x){case"cab":return s.jsx(Nn,{className:"h-5 w-5"});case"self-drive-car":return s.jsx(z4,{className:"h-5 w-5"});case"self-drive-scooter":return s.jsx(E4,{className:"h-5 w-5"});default:return s.jsx(Nn,{className:"h-5 w-5"})}};return s.jsx(Kt,{title:"Transportation Management",subtitle:"Manage vehicle types and pricing",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"Add New Transportation"}),s.jsxs("button",{onClick:()=>p(!u),className:"inline-flex items-center justify-center px-4 py-2.5 sm:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base touch-target w-full sm:w-auto",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Add Transportation"})]})]})}),u&&s.jsxs("div",{className:"p-3 sm:p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Transportation Type"}),s.jsxs("select",{value:f.type,onChange:x=>j({...f,type:x.target.value}),className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Vehicle Name"}),s.jsx("input",{type:"text",value:f.vehicleName,onChange:x=>j({...f,vehicleName:x.target.value}),placeholder:"e.g., Avanza, Honda Activa",className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Cost per Day (Rp)"}),s.jsx("input",{type:"number",inputMode:"decimal",value:f.costPerDay,onChange:x=>j({...f,costPerDay:parseFloat(x.target.value)||0}),className:"w-full p-3 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"}),f.type==="cab"&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Can default to Rp 0 (cost tied to sightseeing)"})]})]}),s.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 mt-4",children:[s.jsx("button",{onClick:()=>p(!1),className:"w-full sm:w-auto px-4 py-2.5 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors touch-target",children:"Cancel"}),s.jsxs("button",{onClick:m,disabled:!f.vehicleName,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch-target",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),s.jsx("span",{children:"Add Transportation"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900",children:"All Transportation Options"})}),a.length===0?s.jsxs("div",{className:"p-6 sm:p-12 text-center",children:[s.jsx(Nn,{className:"h-10 w-10 sm:h-12 sm:w-12 text-slate-400 mx-auto mb-3 sm:mb-4"}),s.jsx("h4",{className:"text-base sm:text-lg text-slate-900 font-medium",children:"No transportation options yet"}),s.jsx("p",{className:"text-sm sm:text-base text-slate-500 mt-1",children:"Add your first transportation option to get started."})]}):s.jsx("div",{className:"overflow-x-auto -mx-3 sm:mx-0",children:s.jsxs("table",{className:"w-full min-w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Vehicle"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider whitespace-nowrap",children:"Cost/Day"}),s.jsx("th",{className:"px-3 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(x=>s.jsx("tr",{className:"hover:bg-slate-50 transition-colors",children:i===x.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("select",{value:l.type,onChange:b=>c({...l,type:b.target.value}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsx("input",{type:"text",value:l.vehicleName||"",onChange:b=>c({...l,vehicleName:b.target.value}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target"})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsx("input",{type:"number",inputMode:"decimal",value:l.costPerDay||0,onChange:b=>c({...l,costPerDay:parseFloat(b.target.value)||0}),className:"w-full p-2 text-base border border-slate-300 rounded-lg touch-target"})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[s.jsx("button",{onClick:_,className:"p-2 sm:p-2.5 text-green-600 hover:bg-green-100 rounded-lg transition-colors touch-target","aria-label":"Save",children:s.jsx(bs,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{o(null),c({})},className:"p-2 sm:p-2.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors touch-target","aria-label":"Cancel",children:s.jsx(Is,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"text-slate-600 flex-shrink-0",children:v(x.type)}),s.jsx("span",{className:"capitalize text-sm sm:text-base text-slate-900 truncate",children:x.type.replace("-"," ")})]})}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4 font-medium text-sm sm:text-base text-slate-900",children:s.jsx("div",{className:"truncate max-w-[150px] sm:max-w-none",children:x.vehicleName})}),s.jsxs("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm sm:text-base text-slate-900 font-semibold whitespace-nowrap",children:["Rp ",x.costPerDay.toLocaleString("id-ID")]}),s.jsx("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:s.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[s.jsx("button",{onClick:()=>y(x),className:"p-2 sm:p-2.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors touch-target","aria-label":"Edit",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>k(x.id),className:"p-2 sm:p-2.5 text-red-600 hover:bg-red-100 rounded-lg transition-colors touch-target","aria-label":"Delete",children:s.jsx(ir,{className:"h-4 w-4"})})]})})]})},x.id))})]})})]})]})})},W3=()=>{const{state:e,addHotel:t,updateHotelData:r,deleteHotelData:n}=It(),{hotels:a}=e,[i,o]=ne.useState(""),[l,c]=ne.useState(null),[u,p]=ne.useState({}),[f,j]=ne.useState(!1),[m,y]=ne.useState({name:"",place:"",starCategory:"3-star",roomTypes:[]}),_=a.filter(N=>N.name.toLowerCase().includes(i.toLowerCase())||N.place.toLowerCase().includes(i.toLowerCase())),k=(N=!1)=>{const P={id:Date.now().toString(),name:"",peakSeasonPrice:0,seasonPrice:0,offSeasonPrice:0};N?y({...m,roomTypes:[...m.roomTypes,P]}):u.roomTypes&&p({...u,roomTypes:[...u.roomTypes,P]})},v=(N,P,M,E=!1)=>{if(E){const I=[...m.roomTypes];I[N]={...I[N],[P]:M},y({...m,roomTypes:I})}else if(u.roomTypes){const I=[...u.roomTypes];I[N]={...I[N],[P]:M},p({...u,roomTypes:I})}},x=(N,P=!1)=>{if(P){const M=m.roomTypes.filter((E,I)=>I!==N);y({...m,roomTypes:M})}else if(u.roomTypes){const M=u.roomTypes.filter((E,I)=>I!==N);p({...u,roomTypes:M})}},b=async()=>{if(m.roomTypes.length===0){alert("Please add at least one room type.");return}const N={...m,id:Date.now().toString()};await t(N),y({name:"",place:"",starCategory:"3-star",roomTypes:[]}),j(!1)},S=N=>{c(N.id),p(N)},L=async()=>{l&&u.id&&(await r(u),c(null),p({}))},T=async N=>{confirm("Are you sure you want to delete this hotel?")&&await n(N)},A=N=>{const P=parseInt(N.charAt(0));return Array(P).fill(0).map((M,E)=>s.jsx(q4,{className:"h-4 w-4 fill-current text-yellow-400"},E))};return s.jsx(Kt,{title:"Hotel Management",subtitle:"Manage hotels, room types, and seasonal pricing",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[s.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-900 flex-shrink-0",children:"Hotel Management"}),s.jsxs("div",{className:"relative flex-1 max-w-full sm:max-w-md",children:[s.jsx(Wr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search hotels by name or place...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2.5 sm:py-2 text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 touch-target"})]}),s.jsxs("button",{onClick:()=>j(!f),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2.5 sm:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors touch-target flex-shrink-0",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Hotel"]})]})}),f&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hotel Name"}),s.jsx("input",{type:"text",value:m.name,onChange:N=>y({...m,name:N.target.value}),placeholder:"Enter hotel name",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Place/Location"}),s.jsx("input",{type:"text",value:m.place,onChange:N=>y({...m,place:N.target.value}),placeholder:"Enter location",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Star Category"}),s.jsxs("select",{value:m.starCategory,onChange:N=>y({...m,starCategory:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"3-star",children:"3 Star"}),s.jsx("option",{value:"4-star",children:"4 Star"}),s.jsx("option",{value:"5-star",children:"5 Star"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Room Types & Pricing"}),s.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-1"}),"Add Room Type"]})]}),m.roomTypes.map((N,P)=>s.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room Type Name"}),s.jsx("input",{type:"text",value:N.name,onChange:M=>v(P,"name",M.target.value,!0),placeholder:"e.g., Deluxe Room",className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Peak Season (Rp)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Dec 20 - Jan 5"})]}),s.jsx("input",{type:"number",value:N.peakSeasonPrice,onChange:M=>v(P,"peakSeasonPrice",parseFloat(M.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Season (Rp)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Jul 1 - Aug 31"})]}),s.jsx("input",{type:"number",value:N.seasonPrice,onChange:M=>v(P,"seasonPrice",parseFloat(M.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Off-Season (Rp)",s.jsx("span",{className:"text-xs text-slate-500 block",children:"Other dates"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:N.offSeasonPrice,onChange:M=>v(P,"offSeasonPrice",parseFloat(M.target.value)||0,!0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>x(P,!0),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})]})},P))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:b,disabled:!m.name||!m.place||m.roomTypes.length===0,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Hotel"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:_.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(wt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i?"No hotels found":"No hotels yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i?"Try adjusting your search terms":"Add your first hotel to get started."})]}):_.map(N=>{var P;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:l===N.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hotel Name"}),s.jsx("input",{type:"text",value:u.name||"",onChange:M=>p({...u,name:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Place/Location"}),s.jsx("input",{type:"text",value:u.place||"",onChange:M=>p({...u,place:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Star Category"}),s.jsxs("select",{value:u.starCategory,onChange:M=>p({...u,starCategory:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"3-star",children:"3 Star"}),s.jsx("option",{value:"4-star",children:"4 Star"}),s.jsx("option",{value:"5-star",children:"5 Star"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Room Types & Pricing"}),s.jsxs("button",{onClick:()=>k(!1),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-1"}),"Add Room Type"]})]}),(P=u.roomTypes)==null?void 0:P.map((M,E)=>s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Room Type Name"}),s.jsx("input",{type:"text",value:M.name,onChange:I=>v(E,"name",I.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Peak Season (Rp)"}),s.jsx("input",{type:"number",value:M.peakSeasonPrice,onChange:I=>v(E,"peakSeasonPrice",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Season (Rp)"}),s.jsx("input",{type:"number",value:M.seasonPrice,onChange:I=>v(E,"seasonPrice",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Off-Season (Rp)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",value:M.offSeasonPrice,onChange:I=>v(E,"offSeasonPrice",parseFloat(I.target.value)||0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>x(E),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})]})},M.id))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{c(null),p({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(wt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:N.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:N.place}),s.jsx("div",{className:"flex items-center",children:A(N.starCategory)})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>S(N),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(N.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-4",children:"Room Types & Pricing"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.roomTypes.map(M=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-slate-900 mb-3",children:M.name}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Peak Season:"}),s.jsxs("span",{className:"font-medium",children:["Rp ",M.peakSeasonPrice.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Season:"}),s.jsxs("span",{className:"font-medium",children:["Rp ",M.seasonPrice.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Off-Season:"}),s.jsxs("span",{className:"font-medium",children:["Rp ",M.offSeasonPrice.toLocaleString("id-ID")]})]})]})]},M.id))})]})]})},N.id)})})]})})},G3=()=>{const{state:e,addSightseeing:t,updateSightseeingData:r,deleteSightseeingData:n}=It(),{sightseeings:a}=e,[i,o]=ne.useState(""),[l,c]=ne.useState(null),[u,p]=ne.useState({}),[f,j]=ne.useState(!1),[m,y]=ne.useState({name:"",description:"",transportationMode:"cab",vehicleCosts:{avanza:0,hiace:0,miniBus:0,bus32:0,bus39:0}}),_=a.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.description.toLowerCase().includes(i.toLowerCase())),k=async()=>{const T=["cab","self-drive-car","self-drive-scooter"];for(const A of T){const N={id:`${Date.now()}-${A}`,name:m.name,description:m.description,transportationMode:A,vehicleCosts:A==="cab"?m.vehicleCosts:void 0};await t(N)}y({name:"",description:"",transportationMode:"cab",vehicleCosts:{avanza:0,hiace:0,miniBus:0,bus32:0,bus39:0}}),j(!1)},v=T=>{c(T.id),p(T)},x=async()=>{l&&u.id&&(await r(u),c(null),p({}))},b=async T=>{confirm("Are you sure you want to delete this sightseeing spot?")&&await n(T)},S=(T,A,N=!1)=>{N?y({...m,vehicleCosts:{...m.vehicleCosts,[T]:A}}):u.vehicleCosts&&p({...u,vehicleCosts:{...u.vehicleCosts,[T]:A}})},L=(T,A=!1)=>{if(!T)return null;const N=[{key:"avanza",name:"Avanza",pax:"2-6 pax"},{key:"hiace",name:"Hiace",pax:"6-12 pax"},{key:"miniBus",name:"Mini Bus",pax:"12-27 pax"},{key:"bus32",name:"Bus 32",pax:"27-32 pax"},{key:"bus39",name:"Bus 39",pax:"32-39 pax"}];return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(P=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[P.name," Cost (Rp)",s.jsx("span",{className:"text-xs text-slate-500 block",children:P.pax})]}),s.jsx("input",{type:"number",value:T[P.key],onChange:M=>S(P.key,parseFloat(M.target.value)||0,A),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]},P.key))})};return s.jsx(Kt,{title:"Sightseeing Management",subtitle:"Manage sightseeing spots and transportation costs",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sightseeing Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search sightseeing spots...",value:i,onChange:T=>o(T.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>j(!f),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Sightseeing"]})]})}),f&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Name"}),s.jsx("input",{type:"text",value:m.name,onChange:T=>y({...m,name:T.target.value}),placeholder:"Enter sightseeing spot name",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation Mode"}),s.jsxs("select",{value:m.transportationMode,onChange:T=>y({...m,transportationMode:T.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:m.description,onChange:T=>y({...m,description:T.target.value}),placeholder:"Enter description of the sightseeing spot",rows:3,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),m.transportationMode==="cab"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs (for Cab mode)"]}),L(m.vehicleCosts,!0)]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:k,disabled:!m.name||!m.description,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Sightseeing"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:_.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(ft,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i?"No sightseeing spots found":"No sightseeing spots yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i?"Try adjusting your search terms":"Add your first sightseeing spot to get started."})]}):_.map(T=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:l===T.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Name"}),s.jsx("input",{type:"text",value:u.name||"",onChange:A=>p({...u,name:A.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation Mode"}),s.jsxs("select",{value:u.transportationMode,onChange:A=>p({...u,transportationMode:A.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"cab",children:"Cab"}),s.jsx("option",{value:"self-drive-car",children:"Self-drive Car"}),s.jsx("option",{value:"self-drive-scooter",children:"Self-drive Scooter"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:u.description||"",onChange:A=>p({...u,description:A.target.value}),rows:3,className:"w-full p-3 border border-slate-300 rounded-lg"})]}),u.transportationMode==="cab"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs (for Cab mode)"]}),L(u.vehicleCosts)]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{c(null),p({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ft,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:T.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:T.description}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:T.transportationMode.replace("-"," ")})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>v(T),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>b(T.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})}),T.transportationMode==="cab"&&T.vehicleCosts&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h4",{className:"text-md font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Nn,{className:"h-4 w-4 mr-2 text-blue-600"}),"Vehicle Costs"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Avanza (2-6 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["Rp ",T.vehicleCosts.avanza.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Hiace (6-12 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["Rp ",T.vehicleCosts.hiace.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Mini Bus (12-27 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["Rp ",T.vehicleCosts.miniBus.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Bus 32 (27-32 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["Rp ",T.vehicleCosts.bus32.toLocaleString("id-ID")]})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700",children:"Bus 39 (32-39 pax)"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["Rp ",T.vehicleCosts.bus39.toLocaleString("id-ID")]})]})]})]})]})},T.id))})]})})},Y3=()=>{const{state:e,addEntryTicket:t,updateEntryTicketData:r,deleteEntryTicketData:n}=It(),{entryTickets:a,sightseeings:i}=e,[o,l]=ne.useState(""),[c,u]=ne.useState(null),[p,f]=ne.useState({}),[j,m]=ne.useState(!1),[y,_]=ne.useState({name:"",cost:0,sightseeingId:""}),k=a.filter(T=>T.name.toLowerCase().includes(o.toLowerCase())||v(T.sightseeingId).toLowerCase().includes(o.toLowerCase()));function v(T){const A=i.find(N=>N.id===T);return A?A.name:"Unknown Location"}const x=async()=>{const T={...y,id:Date.now().toString()};await t(T),_({name:"",cost:0,sightseeingId:""}),m(!1)},b=T=>{u(T.id),f(T)},S=async()=>{c&&p.id&&(await r(p),u(null),f({}))},L=async T=>{confirm("Are you sure you want to delete this entry ticket?")&&await n(T)};return s.jsx(Kt,{title:"Entry Ticket Management",subtitle:"Manage entry tickets for sightseeing locations",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Entry Ticket Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search entry tickets...",value:o,onChange:T=>l(T.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>m(!j),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Entry Ticket"]})]})}),j&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ticket Name"}),s.jsx("input",{type:"text",value:y.name,onChange:T=>_({...y,name:T.target.value}),placeholder:"e.g., Temple Entry, Museum Pass",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost per Person (Rp)"}),s.jsx("input",{type:"number",value:y.cost,onChange:T=>_({...y,cost:parseFloat(T.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sightseeing Location"}),s.jsxs("select",{value:y.sightseeingId,onChange:T=>_({...y,sightseeingId:T.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select location"}),i.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,disabled:!y.name||!y.sightseeingId,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Entry Ticket"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Entry Tickets"})}),k.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(As,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:o?"No entry tickets found":"No entry tickets yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:o?"Try adjusting your search terms":"Add your first entry ticket to get started."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ticket Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Cost/Person"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:k.map(T=>s.jsx("tr",{className:"hover:bg-slate-50",children:c===T.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:p.name||"",onChange:A=>f({...p,name:A.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:p.sightseeingId||"",onChange:A=>f({...p,sightseeingId:A.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Select location"}),i.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"number",value:p.cost||0,onChange:A=>f({...p,cost:parseFloat(A.target.value)||0}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:S,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:s.jsx(bs,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{u(null),f({})},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Is,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(As,{className:"h-4 w-4 text-blue-600"})}),s.jsx("span",{className:"font-medium text-slate-900",children:T.name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"h-4 w-4 text-slate-400"}),s.jsx("span",{className:"text-slate-900",children:v(T.sightseeingId)})]})}),s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900",children:["Rp ",T.cost.toLocaleString("id-ID")]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>b(T),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>L(T.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})})]})},T.id))})]})})]})]})})},K3=()=>{const{state:e,addActivity:t,updateActivityData:r,deleteActivityData:n}=It(),{activities:a,sightseeings:i}=e,[o,l]=ne.useState(""),[c,u]=ne.useState(null),[p,f]=ne.useState({}),[j,m]=ne.useState(!1),[y,_]=ne.useState({name:"",location:"",options:[]}),k=a.filter(N=>N.name.toLowerCase().includes(o.toLowerCase())||N.options.some(P=>P.name.toLowerCase().includes(o.toLowerCase()))||N.location.toLowerCase().includes(o.toLowerCase()));i.reduce((N,P)=>(N.find(M=>M.name===P.name)||N.push({id:P.id,name:P.name}),N),[]);const v=(N=!1)=>{const P={id:Date.now().toString(),name:"",cost:0,costForHowMany:1};N?_({...y,options:[...y.options,P]}):p.options&&f({...p,options:[...p.options,P]})},x=(N,P,M,E=!1)=>{if(E){const I=[...y.options];I[N]={...I[N],[P]:M},_({...y,options:I})}else if(p.options){const I=[...p.options];I[N]={...I[N],[P]:M},f({...p,options:I})}},b=(N,P=!1)=>{if(P){const M=y.options.filter((E,I)=>I!==N);_({...y,options:M})}else if(p.options){const M=p.options.filter((E,I)=>I!==N);f({...p,options:M})}},S=async()=>{if(y.options.length===0){alert("Please add at least one activity option.");return}const N={...y,id:Date.now().toString()};await t(N),_({name:"",location:"",options:[]}),m(!1)},L=N=>{u(N.id),f(N)},T=async()=>{c&&p.id&&(await r(p),u(null),f({}))},A=async N=>{confirm("Are you sure you want to delete this activity?")&&await n(N)};return s.jsx(Kt,{title:"Activity Management",subtitle:"Manage activities and their pricing options",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Activity Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search activities...",value:o,onChange:N=>l(N.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>m(!j),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),j&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Activity Name"}),s.jsx("input",{type:"text",value:y.name,onChange:N=>_({...y,name:N.target.value}),placeholder:"e.g., Bali Swing, ATV Ride, Snorkeling",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1 mt-4",children:"Location"}),s.jsx("input",{type:"text",value:y.location,onChange:N=>_({...y,location:N.target.value}),placeholder:"e.g., Ubud, Seminyak, Kuta",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Activity Options & Pricing"}),s.jsxs("button",{onClick:()=>v(!0),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),y.options.map((N,P)=>s.jsx("div",{className:"bg-white p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Option Name"}),s.jsx("input",{type:"text",value:N.name,onChange:M=>x(P,"name",M.target.value,!0),placeholder:"e.g., Single Rider, Tandem Rider",className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost (Rp)"}),s.jsx("input",{type:"number",value:N.cost,onChange:M=>x(P,"cost",parseFloat(M.target.value)||0,!0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost for How Many People"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",min:"1",value:N.costForHowMany,onChange:M=>x(P,"costForHowMany",parseInt(M.target.value)||1,!0),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>b(P,!0),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})]})},P)),y.options.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(hs,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:'No options added yet. Click "Add Option" to get started.'})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:S,disabled:!y.name||!y.location||y.options.length===0,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})]})]}),s.jsx("div",{className:"space-y-4",children:k.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(hs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:o?"No activities found":"No activities yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:o?"Try adjusting your search terms":"Add your first activity to get started."})]}):k.map(N=>{var P;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:c===N.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Activity Name"}),s.jsx("input",{type:"text",value:p.name||"",onChange:M=>f({...p,name:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"}),s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1 mt-4",children:"Location"}),s.jsx("input",{type:"text",value:p.location||"",onChange:M=>f({...p,location:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900",children:"Activity Options & Pricing"}),s.jsxs("button",{onClick:()=>v(!1),className:"inline-flex items-center px-3 py-2 text-sm bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(P=p.options)==null?void 0:P.map((M,E)=>s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Option Name"}),s.jsx("input",{type:"text",value:M.name,onChange:I=>x(E,"name",I.target.value),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost ($)"}),s.jsx("input",{type:"number",value:M.cost,onChange:I=>x(E,"cost",parseFloat(I.target.value)||0),className:"w-full p-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost for How Many People"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",min:"1",value:M.costForHowMany,onChange:I=>x(E,"costForHowMany",parseInt(I.target.value)||1),className:"flex-1 p-2 border border-slate-300 rounded-lg"}),s.jsx("button",{onClick:()=>b(E),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})]})},M.id))]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{u(null),f({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:T,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(hs,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:N.name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-slate-600",children:N.location}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsxs("span",{className:"text-slate-600",children:[N.options.length," option",N.options.length!==1?"s":""," available"]})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>L(N),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>A(N.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-4",children:"Available Options"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.options.map(M=>s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-slate-900 mb-2",children:M.name}),s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["Rp ",M.cost.toLocaleString("id-ID")]}),s.jsxs("div",{className:"text-sm text-slate-600",children:["for ",M.costForHowMany," ",M.costForHowMany===1?"person":"people"]})]},M.id))})]})]})},N.id)})})]})})},J3=()=>{const{state:e,addMeal:t,updateMealData:r,deleteMealData:n}=It(),{meals:a}=e,[i,o]=ne.useState(""),[l,c]=ne.useState("all"),[u,p]=ne.useState(null),[f,j]=ne.useState({}),[m,y]=ne.useState(!1),[_,k]=ne.useState({type:"breakfast",place:"",cost:0}),v=a.filter(N=>{const P=N.place.toLowerCase().includes(i.toLowerCase()),M=l==="all"||N.type===l;return P&&M}),x=async()=>{const N={..._,id:Date.now().toString()};await t(N),k({type:"breakfast",place:"",cost:0}),y(!1)},b=N=>{p(N.id),j(N)},S=async()=>{u&&f.id&&(await r(f),p(null),j({}))},L=async N=>{confirm("Are you sure you want to delete this meal option?")&&await n(N)},T=N=>{switch(N){case"breakfast":return"";case"lunch":return"";case"dinner":return"";default:return""}},A=N=>{switch(N){case"breakfast":return"bg-yellow-100 text-yellow-800";case"lunch":return"bg-orange-100 text-orange-800";case"dinner":return"bg-purple-100 text-purple-800";default:return"bg-slate-100 text-slate-800"}};return s.jsx(Kt,{title:"Meal Management",subtitle:"Manage meal options and restaurant partnerships",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Meal Management"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search by restaurant/place...",value:i,onChange:N=>o(N.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Meals"}),s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})]}),s.jsxs("button",{onClick:()=>y(!m),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Meal Option"]})]})}),m&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Meal Type"}),s.jsxs("select",{value:_.type,onChange:N=>k({..._,type:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Restaurant/Place"}),s.jsx("input",{type:"text",value:_.place,onChange:N=>k({..._,place:N.target.value}),placeholder:"e.g., Warung Bali, Hotel Restaurant",className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost per Person (Rp)"}),s.jsx("input",{type:"number",value:_.cost,onChange:N=>k({..._,cost:parseFloat(N.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,disabled:!_.place,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Meal Option"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"All Meal Options"})}),v.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ns,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i||l!=="all"?"No meal options found":"No meal options yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i||l!=="all"?"Try adjusting your search or filter criteria":"Add your first meal option to get started."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Meal Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Restaurant/Place"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Cost/Person"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:v.map(N=>s.jsx("tr",{className:"hover:bg-slate-50",children:u===N.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:f.type,onChange:P=>j({...f,type:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg",children:[s.jsx("option",{value:"breakfast",children:"Breakfast"}),s.jsx("option",{value:"lunch",children:"Lunch"}),s.jsx("option",{value:"dinner",children:"Dinner"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:f.place||"",onChange:P=>j({...f,place:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"number",value:f.cost||0,onChange:P=>j({...f,cost:parseFloat(P.target.value)||0}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:S,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:s.jsx(bs,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{p(null),j({})},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Is,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:T(N.type)}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ${A(N.type)}`,children:N.type})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(ns,{className:"h-4 w-4 text-blue-600"})}),s.jsx("span",{className:"font-medium text-slate-900",children:N.place})]})}),s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900",children:["Rp ",N.cost.toLocaleString("id-ID")]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>b(N),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>L(N.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})})]})},N.id))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Meals"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ns,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Breakfast Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(N=>N.type==="breakfast").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Lunch Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(N=>N.type==="lunch").length})]}),s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Dinner Options"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.filter(N=>N.type==="dinner").length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:""})})]})})]})]})})},X3=()=>{const{state:e}=Ht(),[t,r]=ne.useState([]);ne.useState(null);const[n,a]=ne.useState("pending"),[i,o]=ne.useState(!1),[l,c]=ne.useState(null);ne.useEffect(()=>{u();const k=setInterval(()=>{u()},5e3);return()=>clearInterval(k)},[]);const u=async()=>{try{if(_s()){const k=await T3();r(k)}}catch(k){console.error("Error loading agents:",k)}},p=async k=>{var x;if(!((x=e.user)!=null&&x.id))return;const v=t.find(b=>b.id===k);if(v&&confirm(`Approve registration for ${v.company_name}? This will create their agent account and allow them to login.`)){o(!0);try{_s()&&(await P3(k,e.user.id),c({type:"success",text:`${v.company_name} has been approved!`}),setTimeout(()=>c(null),3e3),await u())}catch(b){console.error("Error approving agent:",b),c({type:"error",text:b.message||"Failed to approve agent"}),setTimeout(()=>c(null),3e3)}finally{o(!1)}}},f=async k=>{const v=t.find(x=>x.id===k);if(v&&confirm(`Reject registration for ${v.company_name}? They can register again later.`)){o(!0);try{_s()&&(await L3(k),c({type:"success",text:`${v.company_name} registration rejected`}),setTimeout(()=>c(null),3e3),await u())}catch(x){console.error("Error rejecting agent:",x),c({type:"error",text:"Failed to reject agent"}),setTimeout(()=>c(null),3e3)}finally{o(!1)}}},j=async(k,v)=>{if(confirm(`Permanently delete ${v}? This action cannot be undone.`)){o(!0);try{_s()&&(await E3(k),c({type:"success",text:`${v} deleted successfully`}),setTimeout(()=>c(null),3e3),await u())}catch(x){console.error("Error deleting agent:",x),c({type:"error",text:"Failed to delete agent"}),setTimeout(()=>c(null),3e3)}finally{o(!1)}}},m=t.filter(k=>k.status===n),y=k=>{switch(k){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},_=k=>{switch(k){case"approved":return s.jsx(Rt,{className:"h-4 w-4"});case"pending":return s.jsx(Zs,{className:"h-4 w-4"});case"rejected":return s.jsx(Iu,{className:"h-4 w-4"});default:return s.jsx(va,{className:"h-4 w-4"})}};return s.jsx(Kt,{title:"Agent Management",subtitle:"Approve, reject, and manage travel agent registrations",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[l&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${l.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.type==="success"?s.jsx(Rt,{className:"h-5 w-5 text-green-600"}):s.jsx(va,{className:"h-5 w-5 text-red-600"}),s.jsx("span",{className:l.type==="success"?"text-green-800":"text-red-800",children:l.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Registrations"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.length})]}),s.jsx("div",{className:"bg-slate-100 p-3 rounded-lg",children:s.jsx(gl,{className:"h-6 w-6 text-slate-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Pending Approval"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(k=>k.status==="pending").length})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:s.jsx(Zs,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Approved Agents"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(k=>k.status==="approved").length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Rejected"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.filter(k=>k.status==="rejected").length})]}),s.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:s.jsx(Iu,{className:"h-6 w-6 text-red-600"})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center space-x-1 bg-slate-100 rounded-lg p-1 inline-flex",children:[s.jsxs("button",{onClick:()=>a("pending"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="pending"?"bg-white text-yellow-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Pending (",t.filter(k=>k.status==="pending").length,")"]}),s.jsxs("button",{onClick:()=>a("approved"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="approved"?"bg-white text-green-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Approved (",t.filter(k=>k.status==="approved").length,")"]}),s.jsxs("button",{onClick:()=>a("rejected"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="rejected"?"bg-white text-red-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:["Rejected (",t.filter(k=>k.status==="rejected").length,")"]})]})}),s.jsx("div",{className:"p-6",children:m.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wt,{className:"h-12 w-12 text-slate-400 mx-auto mb-3"}),s.jsxs("h4",{className:"text-slate-900 font-medium",children:["No ",n," agents"]}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:n==="pending"?"New agent registrations will appear here for your approval.":`No agents with ${n} status.`})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(k=>s.jsxs("div",{className:"p-5 border border-slate-200 rounded-lg hover:border-slate-300 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-teal-100 p-2 rounded-lg",children:s.jsx(wt,{className:"h-5 w-5 text-teal-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:k.company_name}),s.jsx("p",{className:"text-sm text-slate-600",children:k.username})]})]}),s.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-1 rounded-full text-xs font-medium ${y(k.status)}`,children:[_(k.status),s.jsx("span",{className:"capitalize",children:k.status})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(ai,{className:"h-4 w-4 mr-2"}),k.email]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),k.phone_no]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(ft,{className:"h-4 w-4 mr-2"}),k.address]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(nt,{className:"h-4 w-4 mr-2"}),"Applied: ",new Date(k.created_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-slate-200",children:[k.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>p(k.id),disabled:i,className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm font-medium transition-colors",children:[s.jsx(Bh,{className:"h-4 w-4 inline mr-1"}),"Approve"]}),s.jsxs("button",{onClick:()=>f(k.id),disabled:i,className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm font-medium transition-colors",children:[s.jsx(Iu,{className:"h-4 w-4 inline mr-1"}),"Reject"]})]}),k.status==="approved"&&k.approved_at&&s.jsxs("div",{className:"text-sm text-slate-600",children:["Approved on ",new Date(k.approved_at).toLocaleDateString()]}),s.jsx("button",{onClick:()=>j(k.id,k.company_name),disabled:i,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(ir,{className:"h-4 w-4"})})]})]},k.id))})})]})]})})},Q3=async()=>{if(!fe)return[];const{data:e,error:t}=await fe.from("sales_clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},Z3=async e=>{if(!fe)return[];const{data:t,error:r}=await fe.from("sales_clients").select("*").eq("sales_person_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},e6=async e=>{if(!fe)return[];const{data:t,error:r}=await fe.from("sales_clients").select("*").eq("sales_person_id",e).eq("current_follow_up_status","advance-paid-confirmed").order("created_at",{ascending:!1});if(r)throw r;return t||[]},t6=async e=>{if(!fe)return[];const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await fe.from("sales_clients").select("*").eq("sales_person_id",e).eq("next_follow_up_date",t).order("next_follow_up_time",{ascending:!0});if(n)throw n;return r||[]},s6=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("sales_clients").insert(e).select().single();if(r)throw r;return t},T0=async(e,t)=>{if(!fe)return null;const{data:r,error:n}=await fe.from("sales_clients").update(t).eq("id",e).select().single();if(n)throw n;return r},r6=async e=>{if(!fe)return;const{error:t}=await fe.from("sales_clients").delete().eq("id",e);if(t)throw t},n6=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("follow_up_history").insert(e).select().single();if(r)throw r;return t},a6=async(e,t)=>{if(!fe)return;const r=[];if(t&&t.dayPlans&&t.dayPlans.forEach((n,a)=>{const i=a+1;n.sightseeing&&n.sightseeing.forEach(o=>{r.push({client_id:e,item_type:"sightseeing",item_id:o,item_name:`Sightseeing - Day ${i}`,day_number:i,is_booked:!1})}),n.hotel&&r.push({client_id:e,item_type:"hotel",item_id:n.hotel.hotelId,item_name:`Hotel - Day ${i}`,day_number:i,is_booked:!1}),n.activities&&n.activities.forEach(o=>{r.push({client_id:e,item_type:"activity",item_id:o.activityId,item_name:`Activity - Day ${i}`,day_number:i,is_booked:!1})}),n.entryTickets&&n.entryTickets.forEach(o=>{r.push({client_id:e,item_type:"entry_ticket",item_id:o,item_name:`Entry Ticket - Day ${i}`,day_number:i,is_booked:!1})}),n.meals&&n.meals.forEach(o=>{r.push({client_id:e,item_type:"meal",item_id:o,item_name:`Meal - Day ${i}`,day_number:i,is_booked:!1})})}),r.length>0){const{error:n}=await fe.from("booking_checklist").insert(r);if(n)throw n}},i6=async e=>{if(!fe)return[];const{data:t,error:r}=await fe.from("sales_itinerary_versions").select("*").eq("client_id",e).order("version_number",{ascending:!1});if(r)throw r;return t||[]},Cb=async e=>{if(!fe)return null;const{data:t,error:r}=await fe.from("sales_itinerary_versions").select("*").eq("client_id",e).order("version_number",{ascending:!1}).limit(1).maybeSingle();if(r)throw r;return t},Tb=async(e,t,r,n,a,i)=>{if(!fe)return null;const{data:o,error:l}=await fe.rpc("get_next_version_number",{p_client_id:e});if(l)throw l;const c=o||1,{data:u,error:p}=await fe.from("sales_itinerary_versions").insert({client_id:e,version_number:c,itinerary_data:t,total_cost:r,change_description:n,associated_follow_up_status:a,created_by:i}).select().single();if(p)throw p;return u},o6=async e=>{if(!fe)return[];const{data:t,error:r}=await fe.from("follow_up_history").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},l6=(e,t)=>{const r=new Date(t),n=r.getMonth()+1,a=r.getDate();return n===12&&a>=20||n===1&&a<=5?e.peakSeasonPrice:n===7||n===8?e.seasonPrice:e.offSeasonPrice},c6=(e,t)=>e.vehicleCosts?t<=6?e.vehicleCosts.avanza:t<=12?e.vehicleCosts.hiace:t<=27?e.vehicleCosts.miniBus:t<=32?e.vehicleCosts.bus32:e.vehicleCosts.bus39:0,rd=(e,t,r,n,a,i,o,l)=>{let c=0;const u=e.numberOfPax.adults+e.numberOfPax.children,p=l.find(f=>f.vehicleName===e.transportationMode);return p&&p.type!=="cab"&&(c+=p.costPerDay*e.numberOfDays),t.forEach(f=>{if(f.hotel){const m=r.find(y=>y.id===f.hotel.hotelId);if(m){const y=m.roomTypes.find(_=>_.id===f.hotel.roomTypeId);if(y){const _=l6(y,e.travelDates.startDate);c+=_}}}const j=e.transportationMode.toLowerCase();j.includes("cab")||j==="private cab service"?f.sightseeing.forEach(m=>{const y=n.find(_=>_.id===m);y&&y.transportationMode==="cab"&&(c+=c6(y,u))}):f.sightseeing.forEach(m=>{const y=n.find(_=>_.id===m);y&&(y.transportationMode==="self-drive-car"?c+=24e4:y.transportationMode==="self-drive-scooter"&&(c+=13e4))}),f.activities.forEach(m=>{const y=a.find(_=>_.id===m.activityId);if(y){const _=y.options.find(k=>k.id===m.optionId);if(_)if(_.costForHowMany>=u)c+=_.cost;else{const k=Math.ceil(u/_.costForHowMany);c+=_.cost*k}}}),f.entryTickets.forEach(m=>{const y=i.find(_=>_.id===m);y&&(c+=y.cost*u)}),f.meals.forEach(m=>{const y=o.find(_=>_.id===m);y&&(c+=y.cost*u)})}),c},Yr=(e,t="IDR")=>`Rp ${e.toLocaleString("id-ID",{maximumFractionDigits:0})}`;function kt(e){"@babel/helpers - typeof";return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(e)}var Xs=Uint8Array,Lr=Uint16Array,Jp=Int32Array,zh=new Xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hh=new Xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),P0=new Xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pb=function(e,t){for(var r=new Lr(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new Jp(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},Lb=Pb(zh,2),Eb=Lb.b,L0=Lb.r;Eb[28]=258,L0[258]=28;var Ib=Pb(Hh,0),d6=Ib.b,c1=Ib.r,E0=new Lr(32768);for(var Bt=0;Bt<32768;++Bt){var Fa=(Bt&43690)>>1|(Bt&21845)<<1;Fa=(Fa&52428)>>2|(Fa&13107)<<2,Fa=(Fa&61680)>>4|(Fa&3855)<<4,E0[Bt]=((Fa&65280)>>8|(Fa&255)<<8)>>1}var Vn=function(e,t,r){for(var n=e.length,a=0,i=new Lr(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new Lr(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Lr(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],p=t-e[a],f=o[e[a]-1]++<<p,j=f|(1<<p)-1;f<=j;++f)l[E0[f]>>c]=u}else for(l=new Lr(n),a=0;a<n;++a)e[a]&&(l[a]=E0[o[e[a]-1]++]>>15-e[a]);return l},ii=new Xs(288);for(var Bt=0;Bt<144;++Bt)ii[Bt]=8;for(var Bt=144;Bt<256;++Bt)ii[Bt]=9;for(var Bt=256;Bt<280;++Bt)ii[Bt]=7;for(var Bt=280;Bt<288;++Bt)ii[Bt]=8;var Kc=new Xs(32);for(var Bt=0;Bt<32;++Bt)Kc[Bt]=5;var u6=Vn(ii,9,0),h6=Vn(ii,9,1),m6=Vn(Kc,5,0),f6=Vn(Kc,5,1),xf=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},hn=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},gf=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Xp=function(e){return(e+7)/8|0},Db=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Xs(e.subarray(t,r))},p6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],xn=function(e,t,r){var n=new Error(t||p6[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,xn),!r)throw n;return n},x6=function(e,t,r,n){var a=e.length,i=0;if(!a||t.f&&!t.l)return r||new Xs(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Xs(a*3));var u=function(Pe){var De=r.length;if(Pe>De){var me=new Xs(Math.max(De*2,Pe));me.set(r),r=me}},p=t.f||0,f=t.p||0,j=t.b||0,m=t.l,y=t.d,_=t.m,k=t.n,v=a*8;do{if(!m){p=hn(e,f,1);var x=hn(e,f+1,3);if(f+=3,x)if(x==1)m=h6,y=f6,_=9,k=5;else if(x==2){var T=hn(e,f,31)+257,A=hn(e,f+10,15)+4,N=T+hn(e,f+5,31)+1;f+=14;for(var P=new Xs(N),M=new Xs(19),E=0;E<A;++E)M[P0[E]]=hn(e,f+E*3,7);f+=A*3;for(var I=xf(M),Y=(1<<I)-1,G=Vn(M,I,1),E=0;E<N;){var Z=G[hn(e,f,Y)];f+=Z&15;var b=Z>>4;if(b<16)P[E++]=b;else{var X=0,q=0;for(b==16?(q=3+hn(e,f,3),f+=2,X=P[E-1]):b==17?(q=3+hn(e,f,7),f+=3):b==18&&(q=11+hn(e,f,127),f+=7);q--;)P[E++]=X}}var $=P.subarray(0,T),ee=P.subarray(T);_=xf($),k=xf(ee),m=Vn($,_,1),y=Vn(ee,k,1)}else xn(1);else{var b=Xp(f)+4,S=e[b-4]|e[b-3]<<8,L=b+S;if(L>a){c&&xn(0);break}l&&u(j+S),r.set(e.subarray(b,L),j),t.b=j+=S,t.p=f=L*8,t.f=p;continue}if(f>v){c&&xn(0);break}}l&&u(j+131072);for(var te=(1<<_)-1,re=(1<<k)-1,D=f;;D=f){var X=m[gf(e,f)&te],R=X>>4;if(f+=X&15,f>v){c&&xn(0);break}if(X||xn(2),R<256)r[j++]=R;else if(R==256){D=f,m=null;break}else{var V=R-254;if(R>264){var E=R-257,Q=zh[E];V=hn(e,f,(1<<Q)-1)+Eb[E],f+=Q}var se=y[gf(e,f)&re],ue=se>>4;se||xn(3),f+=se&15;var ee=d6[ue];if(ue>3){var Q=Hh[ue];ee+=gf(e,f)&(1<<Q)-1,f+=Q}if(f>v){c&&xn(0);break}l&&u(j+131072);var ae=j+V;if(j<ee){var xe=i-ee,Te=Math.min(ee,ae);for(xe+j<0&&xn(3);j<Te;++j)r[j]=n[xe+j]}for(;j<ae;++j)r[j]=r[j-ee]}}t.l=m,t.p=D,t.b=j,t.f=p,m&&(p=1,t.m=_,t.d=y,t.n=k)}while(!p);return j!=r.length&&o?Db(r,0,j):r.subarray(0,j)},ia=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},cc=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},vf=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:Fb,l:0};if(a==1){var o=new Xs(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(L,T){return L.f-T.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,p=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};p!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=p&&r[u].f<r[f].f?u++:f++],r[p++]={s:-1,f:l.f+c.f,l,r:c};for(var j=i[0].s,n=1;n<a;++n)i[n].s>j&&(j=i[n].s);var m=new Lr(j+1),y=I0(r[p-1],m,0);if(y>t){var n=0,_=0,k=y-t,v=1<<k;for(i.sort(function(T,A){return m[A.s]-m[T.s]||T.f-A.f});n<a;++n){var x=i[n].s;if(m[x]>t)_+=v-(1<<y-m[x]),m[x]=t;else break}for(_>>=k;_>0;){var b=i[n].s;m[b]<t?_-=1<<t-m[b]++-1:++n}for(;n>=0&&_;--n){var S=i[n].s;m[S]==t&&(--m[S],++_)}y=t}return{t:new Xs(m),l:y}},I0=function(e,t,r){return e.s==-1?Math.max(I0(e.l,t,r+1),I0(e.r,t,r+1)):t[e.s]=r},d1=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Lr(++t),n=0,a=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},dc=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Ob=function(e,t,r){var n=r.length,a=Xp(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},u1=function(e,t,r,n,a,i,o,l,c,u,p){ia(t,p++,r),++a[256];for(var f=vf(a,15),j=f.t,m=f.l,y=vf(i,15),_=y.t,k=y.l,v=d1(j),x=v.c,b=v.n,S=d1(_),L=S.c,T=S.n,A=new Lr(19),N=0;N<x.length;++N)++A[x[N]&31];for(var N=0;N<L.length;++N)++A[L[N]&31];for(var P=vf(A,7),M=P.t,E=P.l,I=19;I>4&&!M[P0[I-1]];--I);var Y=u+5<<3,G=dc(a,ii)+dc(i,Kc)+o,Z=dc(a,j)+dc(i,_)+o+14+3*I+dc(A,M)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&Y<=G&&Y<=Z)return Ob(t,p,e.subarray(c,c+u));var X,q,$,ee;if(ia(t,p,1+(Z<G)),p+=2,Z<G){X=Vn(j,m,0),q=j,$=Vn(_,k,0),ee=_;var te=Vn(M,E,0);ia(t,p,b-257),ia(t,p+5,T-1),ia(t,p+10,I-4),p+=14;for(var N=0;N<I;++N)ia(t,p+3*N,M[P0[N]]);p+=3*I;for(var re=[x,L],D=0;D<2;++D)for(var R=re[D],N=0;N<R.length;++N){var V=R[N]&31;ia(t,p,te[V]),p+=M[V],V>15&&(ia(t,p,R[N]>>5&127),p+=R[N]>>12)}}else X=u6,q=ii,$=m6,ee=Kc;for(var N=0;N<l;++N){var Q=n[N];if(Q>255){var V=Q>>18&31;cc(t,p,X[V+257]),p+=q[V+257],V>7&&(ia(t,p,Q>>23&31),p+=zh[V]);var se=Q&31;cc(t,p,$[se]),p+=ee[se],se>3&&(cc(t,p,Q>>5&8191),p+=Hh[se])}else cc(t,p,X[Q]),p+=q[Q]}return cc(t,p,X[256]),p+q[256]},g6=new Jp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fb=new Xs(0),v6=function(e,t,r,n,a,i){var o=i.z||e.length,l=new Xs(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,p=(i.r||0)&7;if(t){p&&(c[0]=i.r>>3);for(var f=g6[t-1],j=f>>13,m=f&8191,y=(1<<r)-1,_=i.p||new Lr(32768),k=i.h||new Lr(y+1),v=Math.ceil(r/3),x=2*v,b=function(Ne){return(e[Ne]^e[Ne+1]<<v^e[Ne+2]<<x)&y},S=new Jp(25e3),L=new Lr(288),T=new Lr(32),A=0,N=0,P=i.i||0,M=0,E=i.w||0,I=0;P+2<o;++P){var Y=b(P),G=P&32767,Z=k[Y];if(_[G]=Z,k[Y]=G,E<=P){var X=o-P;if((A>7e3||M>24576)&&(X>423||!u)){p=u1(e,c,0,S,L,T,N,M,I,P-I,p),M=A=N=0,I=P;for(var q=0;q<286;++q)L[q]=0;for(var q=0;q<30;++q)T[q]=0}var $=2,ee=0,te=m,re=G-Z&32767;if(X>2&&Y==b(P-re))for(var D=Math.min(j,X)-1,R=Math.min(32767,P),V=Math.min(258,X);re<=R&&--te&&G!=Z;){if(e[P+$]==e[P+$-re]){for(var Q=0;Q<V&&e[P+Q]==e[P+Q-re];++Q);if(Q>$){if($=Q,ee=re,Q>D)break;for(var se=Math.min(re,Q-2),ue=0,q=0;q<se;++q){var ae=P-re+q&32767,xe=_[ae],Te=ae-xe&32767;Te>ue&&(ue=Te,Z=ae)}}}G=Z,Z=_[G],re+=G-Z&32767}if(ee){S[M++]=268435456|L0[$]<<18|c1[ee];var Pe=L0[$]&31,De=c1[ee]&31;N+=zh[Pe]+Hh[De],++L[257+Pe],++T[De],E=P+$,++A}else S[M++]=e[P],++L[e[P]]}}for(P=Math.max(P,E);P<o;++P)S[M++]=e[P],++L[e[P]];p=u1(e,c,u,S,L,T,N,M,I,P-I,p),u||(i.r=p&7|c[p/8|0]<<3,p-=7,i.h=k,i.p=_,i.i=P,i.w=E)}else{for(var P=i.w||0;P<o+u;P+=65535){var me=P+65535;me>=o&&(c[p/8|0]=u,me=o),p=Ob(c,p+1,e.subarray(P,me))}i.i=o}return Db(l,0,n+Xp(p)+a)},Mb=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},b6=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Xs(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return v6(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Rb=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},y6=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Mb();a.p(t.dictionary),Rb(e,2,a.d())}},w6=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&xn(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&xn(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function D0(e,t){t||(t={});var r=Mb();r.p(e);var n=b6(e,t,t.dictionary?6:2,4);return y6(n,t),Rb(n,n.length-4,r.d()),n}function N6(e,t){return x6(e.subarray(w6(e,t),-4),{i:2},t,t)}var j6=typeof TextDecoder<"u"&&new TextDecoder,_6=0;try{j6.decode(Fb,{stream:!0}),_6=1}catch{}var Je=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function bf(){Je.console&&typeof Je.console.log=="function"&&Je.console.log.apply(Je.console,arguments)}var Et={log:bf,warn:function(e){Je.console&&(typeof Je.console.warn=="function"?Je.console.warn.apply(Je.console,arguments):bf.call(null,arguments))},error:function(e){Je.console&&(typeof Je.console.error=="function"?Je.console.error.apply(Je.console,arguments):bf(e))}};function yf(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Pi(n.response,t,r)},n.onerror=function(){Et.error("could not download file")},n.send()}function h1(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function xu(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Tc,O0,Pi=Je.saveAs||((typeof window>"u"?"undefined":kt(window))!=="object"||window!==Je?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Je.URL||Je.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?h1(a.href)?yf(e,t,r):xu(a,a.target="_blank"):xu(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){xu(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(h1(e))yf(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){xu(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:kt(i)!=="object"&&(Et.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return yf(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Je.HTMLElement)||Je.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":kt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var p=l.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},l.readAsDataURL(e)}else{var c=Je.URL||Je.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $b(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wf(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Ws(r,n,a,i,t[0],7,-680876936),i=Ws(i,r,n,a,t[1],12,-389564586),a=Ws(a,i,r,n,t[2],17,606105819),n=Ws(n,a,i,r,t[3],22,-1044525330),r=Ws(r,n,a,i,t[4],7,-176418897),i=Ws(i,r,n,a,t[5],12,1200080426),a=Ws(a,i,r,n,t[6],17,-1473231341),n=Ws(n,a,i,r,t[7],22,-45705983),r=Ws(r,n,a,i,t[8],7,1770035416),i=Ws(i,r,n,a,t[9],12,-1958414417),a=Ws(a,i,r,n,t[10],17,-42063),n=Ws(n,a,i,r,t[11],22,-1990404162),r=Ws(r,n,a,i,t[12],7,1804603682),i=Ws(i,r,n,a,t[13],12,-40341101),a=Ws(a,i,r,n,t[14],17,-1502002290),r=Gs(r,n=Ws(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Gs(i,r,n,a,t[6],9,-1069501632),a=Gs(a,i,r,n,t[11],14,643717713),n=Gs(n,a,i,r,t[0],20,-373897302),r=Gs(r,n,a,i,t[5],5,-701558691),i=Gs(i,r,n,a,t[10],9,38016083),a=Gs(a,i,r,n,t[15],14,-660478335),n=Gs(n,a,i,r,t[4],20,-405537848),r=Gs(r,n,a,i,t[9],5,568446438),i=Gs(i,r,n,a,t[14],9,-1019803690),a=Gs(a,i,r,n,t[3],14,-187363961),n=Gs(n,a,i,r,t[8],20,1163531501),r=Gs(r,n,a,i,t[13],5,-1444681467),i=Gs(i,r,n,a,t[2],9,-51403784),a=Gs(a,i,r,n,t[7],14,1735328473),r=Ys(r,n=Gs(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ys(i,r,n,a,t[8],11,-2022574463),a=Ys(a,i,r,n,t[11],16,1839030562),n=Ys(n,a,i,r,t[14],23,-35309556),r=Ys(r,n,a,i,t[1],4,-1530992060),i=Ys(i,r,n,a,t[4],11,1272893353),a=Ys(a,i,r,n,t[7],16,-155497632),n=Ys(n,a,i,r,t[10],23,-1094730640),r=Ys(r,n,a,i,t[13],4,681279174),i=Ys(i,r,n,a,t[0],11,-358537222),a=Ys(a,i,r,n,t[3],16,-722521979),n=Ys(n,a,i,r,t[6],23,76029189),r=Ys(r,n,a,i,t[9],4,-640364487),i=Ys(i,r,n,a,t[12],11,-421815835),a=Ys(a,i,r,n,t[15],16,530742520),r=Ks(r,n=Ys(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Ks(i,r,n,a,t[7],10,1126891415),a=Ks(a,i,r,n,t[14],15,-1416354905),n=Ks(n,a,i,r,t[5],21,-57434055),r=Ks(r,n,a,i,t[12],6,1700485571),i=Ks(i,r,n,a,t[3],10,-1894986606),a=Ks(a,i,r,n,t[10],15,-1051523),n=Ks(n,a,i,r,t[1],21,-2054922799),r=Ks(r,n,a,i,t[8],6,1873313359),i=Ks(i,r,n,a,t[15],10,-30611744),a=Ks(a,i,r,n,t[6],15,-1560198380),n=Ks(n,a,i,r,t[13],21,1309151649),r=Ks(r,n,a,i,t[4],6,-145523070),i=Ks(i,r,n,a,t[11],10,-1120210379),a=Ks(a,i,r,n,t[2],15,718787259),n=Ks(n,a,i,r,t[9],21,-343485551),e[0]=Wa(r,e[0]),e[1]=Wa(n,e[1]),e[2]=Wa(a,e[2]),e[3]=Wa(i,e[3])}function Vh(e,t,r,n,a,i){return t=Wa(Wa(t,e),Wa(n,i)),Wa(t<<a|t>>>32-a,r)}function Ws(e,t,r,n,a,i,o){return Vh(t&r|~t&n,e,t,a,i,o)}function Gs(e,t,r,n,a,i,o){return Vh(t&n|r&~n,e,t,a,i,o)}function Ys(e,t,r,n,a,i,o){return Vh(t^r^n,e,t,a,i,o)}function Ks(e,t,r,n,a,i,o){return Vh(r^(t|~n),e,t,a,i,o)}function Bb(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)wf(n,S6(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(wf(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,wf(n,a),n}function S6(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Tc=Je.atob.bind(Je),O0=Je.btoa.bind(Je);var m1="0123456789abcdef".split("");function k6(e){for(var t="",r=0;r<4;r++)t+=m1[e>>8*r+4&15]+m1[e>>8*r&15];return t}function A6(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function F0(e){return Bb(e).map(A6).join("")}var C6=function(e){for(var t=0;t<e.length;t++)e[t]=k6(e[t]);return e.join("")}(Bb("hello"))!="5d41402abc4b2a76b9719d911017c592";function Wa(e,t){if(C6){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function M0(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var p=l[c];u=(u+p+o.charCodeAt(c))%256,l[c]=l[u],l[u]=p}r=e,n=l}else l=n;var f=t.length,j=0,m=0,y="";for(c=0;c<f;c++)m=(m+(p=l[j=(j+1)%256]))%256,l[j]=l[m],l[m]=p,o=l[(l[j]+l[m])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var f1={print:4,modify:8,copy:16,"annot-forms":32};function Oo(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(f1.perm!==void 0)throw new Error("Invalid permission: "+l);a+=f1[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=F0(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=M0(this.encryptionKey,this.padding)}function Fo(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function p1(e){if(kt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){Je.console&&Et.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function xh(e){if(!(this instanceof xh))return new xh(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Ub(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ei(e,t,r,n,a){if(!(this instanceof Ei))return new Ei(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Ub.call(this,n,a)}function Ko(e,t,r,n,a){if(!(this instanceof Ko))return new Ko(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Ub.call(this,n,a)}function Ye(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",p=null;kt(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,j={},m={internal:{},__private__:{}};m.__private__.PubSub=p1;var y="1.3",_=m.__private__.getPdfVersion=function(){return y};m.__private__.setPdfVersion=function(g){y=g};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var v=m.__private__.getPageFormat=function(g){return k[g]};a=a||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},b=x.COMPAT;function S(){this.saveGraphicsState(),K(new Ke(Re,0,0,-Re,0,Na()*Re).toString()+" cm"),this.setFontSize(this.getFontSize()/Re),u="n",b=x.ADVANCED}function L(){this.restoreGraphicsState(),u="S",b=x.COMPAT}var T=m.__private__.combineFontStyleAndFontWeight=function(g,F){if(g=="bold"&&F=="normal"||g=="bold"&&F==400||g=="normal"&&F=="italic"||g=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(g=F==400||F==="normal"?g==="italic"?"italic":"normal":F!=700&&F!=="bold"||g!=="normal"?(F==700?"bold":F)+""+g:"bold"),g};m.advancedAPI=function(g){var F=b===x.COMPAT;return F&&S.call(this),typeof g!="function"||(g(this),F&&L.call(this)),this},m.compatAPI=function(g){var F=b===x.ADVANCED;return F&&L.call(this),typeof g!="function"||(g(this),F&&S.call(this)),this},m.isAdvancedAPI=function(){return b===x.ADVANCED};var A,N=function(g){if(b!==x.ADVANCED)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=m.roundToPrecision=m.__private__.roundToPrecision=function(g,F){var J=t||F;if(isNaN(g)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(J).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof c=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return P(g,c)}:c==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return P(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return P(g,16)};var M=m.f2=m.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return P(g,2)},E=m.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return P(g,3)},I=m.scale=m.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return b===x.COMPAT?g*Re:b===x.ADVANCED?g:void 0},Y=function(g){return b===x.COMPAT?Na()-g:b===x.ADVANCED?g:void 0},G=function(g){return I(Y(g))};m.__private__.setPrecision=m.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(t=parseInt(g,10))};var Z,X="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return X},$=m.__private__.setFileId=function(g){return X=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(qs=new Oo(p.userPermissions,p.userPassword,p.ownerPassword,X)),X};m.setFileId=function(g){return $(g),this},m.getFileId=function(){return q()};var ee=m.__private__.convertDateToPDFDate=function(g){var F=g.getTimezoneOffset(),J=F<0?"+":"-",ie=Math.floor(Math.abs(F/60)),pe=Math.abs(F%60),we=[J,V(ie),"'",V(pe),"'"].join("");return["D:",g.getFullYear(),V(g.getMonth()+1),V(g.getDate()),V(g.getHours()),V(g.getMinutes()),V(g.getSeconds()),we].join("")},te=m.__private__.convertPDFDateToDate=function(g){var F=parseInt(g.substr(2,4),10),J=parseInt(g.substr(6,2),10)-1,ie=parseInt(g.substr(8,2),10),pe=parseInt(g.substr(10,2),10),we=parseInt(g.substr(12,2),10),Ce=parseInt(g.substr(14,2),10);return new Date(F,J,ie,pe,we,Ce,0)},re=m.__private__.setCreationDate=function(g){var F;if(g===void 0&&(g=new Date),g instanceof Date)F=ee(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=g}return Z=F},D=m.__private__.getCreationDate=function(g){var F=Z;return g==="jsDate"&&(F=te(Z)),F};m.setCreationDate=function(g){return re(g),this},m.getCreationDate=function(g){return D(g)};var R,V=m.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},Q=m.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},se=0,ue=[],ae=[],xe=0,Te=[],Pe=[],De=!1,me=ae,Ne=function(){se=0,xe=0,ae=[],ue=[],Te=[],Jn=ms(),sn=ms()};m.__private__.setCustomOutputDestination=function(g){De=!0,me=g};var de=function(g){De||(me=g)};m.__private__.resetCustomOutputDestination=function(){De=!1,me=ae};var K=m.__private__.out=function(g){return g=g.toString(),xe+=g.length+1,me.push(g),me},Be=m.__private__.write=function(g){return K(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},be=m.__private__.getArrayBuffer=function(g){for(var F=g.length,J=new ArrayBuffer(F),ie=new Uint8Array(J);F--;)ie[F]=g.charCodeAt(F);return J},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ke};var Le=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(g){return Le=b===x.ADVANCED?g/Re:g,this};var Ee,Oe=m.__private__.getFontSize=m.getFontSize=function(){return b===x.COMPAT?Le:Le*Re},Ve=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(g){return Ve=g,this},m.__private__.getR2L=m.getR2L=function(){return Ve};var Qe,ot=m.__private__.setZoomMode=function(g){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Ee=g;else if(isNaN(g)){if(F.indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Ee=g}else Ee=parseInt(g,10)};m.__private__.getZoomMode=function(){return Ee};var lt,xt=m.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Qe=g};m.__private__.getPageMode=function(){return Qe};var Ct=m.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');lt=g};m.__private__.getLayoutMode=function(){return lt},m.__private__.setDisplayMode=m.setDisplayMode=function(g,F,J){return ot(g),Ct(F),xt(J),this};var Xe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(g){if(Object.keys(Xe).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xe[g]},m.__private__.getDocumentProperties=function(){return Xe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(g){for(var F in Xe)Xe.hasOwnProperty(F)&&g[F]&&(Xe[F]=g[F]);return this},m.__private__.setDocumentProperty=function(g,F){if(Object.keys(Xe).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xe[g]=F};var ct,Re,Us,bt,Zr,Pt={},qt={},An=[],Nt={},hi={},Xt={},en={},Kn=null,Qt=0,et=[],jt=new p1(m),mi=e.hotfixes||[],Os={},Cn={},Tn=[],Ke=function g(F,J,ie,pe,we,Ce){if(!(this instanceof g))return new g(F,J,ie,pe,we,Ce);isNaN(F)&&(F=1),isNaN(J)&&(J=0),isNaN(ie)&&(ie=0),isNaN(pe)&&(pe=1),isNaN(we)&&(we=0),isNaN(Ce)&&(Ce=0),this._matrix=[F,J,ie,pe,we,Ce]};Object.defineProperty(Ke.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(Ke.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(Ke.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(Ke.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(Ke.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(Ke.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(Ke.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(Ke.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(Ke.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(Ke.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(Ke.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(Ke.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(Ke.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ke.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ke.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ke.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ke.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(g)},Ke.prototype.multiply=function(g){var F=g.sx*this.sx+g.shy*this.shx,J=g.sx*this.shy+g.shy*this.sy,ie=g.shx*this.sx+g.sy*this.shx,pe=g.shx*this.shy+g.sy*this.sy,we=g.tx*this.sx+g.ty*this.shx+this.tx,Ce=g.tx*this.shy+g.ty*this.sy+this.ty;return new Ke(F,J,ie,pe,we,Ce)},Ke.prototype.decompose=function(){var g=this.sx,F=this.shy,J=this.shx,ie=this.sy,pe=this.tx,we=this.ty,Ce=Math.sqrt(g*g+F*F),$e=(g/=Ce)*J+(F/=Ce)*ie;J-=g*$e,ie-=F*$e;var We=Math.sqrt(J*J+ie*ie);return $e/=We,g*(ie/=We)<F*(J/=We)&&(g=-g,F=-F,$e=-$e,Ce=-Ce),{scale:new Ke(Ce,0,0,We,0,0),translate:new Ke(1,0,0,1,pe,we),rotate:new Ke(g,F,-F,g,0,0),skew:new Ke(1,0,$e,1,0,0)}},Ke.prototype.toString=function(g){return this.join(" ")},Ke.prototype.inversed=function(){var g=this.sx,F=this.shy,J=this.shx,ie=this.sy,pe=this.tx,we=this.ty,Ce=1/(g*ie-F*J),$e=ie*Ce,We=-F*Ce,rt=-J*Ce,tt=g*Ce;return new Ke($e,We,rt,tt,-$e*pe-rt*we,-We*pe-tt*we)},Ke.prototype.applyToPoint=function(g){var F=g.x*this.sx+g.y*this.shx+this.tx,J=g.x*this.shy+g.y*this.sy+this.ty;return new lo(F,J)},Ke.prototype.applyToRectangle=function(g){var F=this.applyToPoint(g),J=this.applyToPoint(new lo(g.x+g.w,g.y+g.h));return new Il(F.x,F.y,J.x-F.x,J.y-F.y)},Ke.prototype.clone=function(){var g=this.sx,F=this.shy,J=this.shx,ie=this.sy,pe=this.tx,we=this.ty;return new Ke(g,F,J,ie,pe,we)},m.Matrix=Ke;var tn=m.matrixMult=function(g,F){return F.multiply(g)},Pn=new Ke(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Pn;var cr=function(g,F){if(!hi[g]){var J=(F instanceof Ei?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);F.id=J,hi[g]=J,Nt[J]=F,jt.publish("addPattern",F)}};m.ShadingPattern=Ei,m.TilingPattern=Ko,m.addShadingPattern=function(g,F){return N("addShadingPattern()"),cr(g,F),this},m.beginTilingPattern=function(g){N("beginTilingPattern()"),jd(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},m.endTilingPattern=function(g,F){N("endTilingPattern()"),F.stream=Pe[R].join(`
`),cr(g,F),jt.publish("endTilingPattern",F),Tn.pop().restore()};var ys=m.__private__.newObject=function(){var g=ms();return _r(g,!0),g},ms=m.__private__.newObjectDeferred=function(){return se++,ue[se]=function(){return xe},se},_r=function(g,F){return F=typeof F=="boolean"&&F,ue[g]=xe,F&&K(g+" 0 obj"),g},Ki=m.__private__.newAdditionalObject=function(){var g={objId:ms(),content:""};return Te.push(g),g},Jn=ms(),sn=ms(),rn=m.__private__.decodeColorString=function(g){var F=g.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var J=parseFloat(F[0]);F=[J,J,J,"r"]}for(var ie="#",pe=0;pe<3;pe++)ie+=("0"+Math.floor(255*parseFloat(F[pe])).toString(16)).slice(-2);return ie},nn=m.__private__.encodeColorString=function(g){var F;typeof g=="string"&&(g={ch1:g});var J=g.ch1,ie=g.ch2,pe=g.ch3,we=g.ch4,Ce=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var $e=new $b(J);if($e.ok)J=$e.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var We=parseInt(J.substr(1),16);J=We>>16&255,ie=We>>8&255,pe=255&We}if(ie===void 0||we===void 0&&J===ie&&ie===pe)if(typeof J=="string")F=J+" "+Ce[0];else switch(g.precision){case 2:F=M(J/255)+" "+Ce[0];break;case 3:default:F=E(J/255)+" "+Ce[0]}else if(we===void 0||kt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return F=["1.","1.","1.",Ce[1]].join(" ");if(typeof J=="string")F=[J,ie,pe,Ce[1]].join(" ");else switch(g.precision){case 2:F=[M(J/255),M(ie/255),M(pe/255),Ce[1]].join(" ");break;default:case 3:F=[E(J/255),E(ie/255),E(pe/255),Ce[1]].join(" ")}}else if(typeof J=="string")F=[J,ie,pe,we,Ce[2]].join(" ");else switch(g.precision){case 2:F=[M(J),M(ie),M(pe),M(we),Ce[2]].join(" ");break;case 3:default:F=[E(J),E(ie),E(pe),E(we),Ce[2]].join(" ")}return F},Ln=m.__private__.getFilters=function(){return o},Fr=m.__private__.putStream=function(g){var F=(g=g||{}).data||"",J=g.filters||Ln(),ie=g.alreadyAppliedFilters||[],pe=g.addLength1||!1,we=F.length,Ce=g.objectId,$e=function(zs){return zs};if(p!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&($e=qs.encryptor(Ce,0));var We={};J===!0&&(J=["FlateEncode"]);var rt=g.additionalKeyValues||[],tt=(We=Ye.API.processDataByFilters!==void 0?Ye.API.processDataByFilters(F,J):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(We.data.length!==0&&(rt.push({key:"Length",value:We.data.length}),pe===!0&&rt.push({key:"Length1",value:we})),tt.length!=0)if(tt.split("/").length-1==1)rt.push({key:"Filter",value:tt});else{rt.push({key:"Filter",value:"["+tt+"]"});for(var pt=0;pt<rt.length;pt+=1)if(rt[pt].key==="DecodeParms"){for(var Vt=[],Zt=0;Zt<We.reverseChain.split("/").length-1;Zt+=1)Vt.push("null");Vt.push(rt[pt].value),rt[pt].value="["+Vt.join(" ")+"]"}}K("<<");for(var fs=0;fs<rt.length;fs++)K("/"+rt[fs].key+" "+rt[fs].value);K(">>"),We.data.length!==0&&(K("stream"),K($e(We.data)),K("endstream"))},En=m.__private__.putPage=function(g){var F=g.number,J=g.data,ie=g.objId,pe=g.contentsObjId;_r(ie,!0),K("<</Type /Page"),K("/Parent "+g.rootDictionaryObjId+" 0 R"),K("/Resources "+g.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(A(g.mediaBox.bottomLeftX))+" "+parseFloat(A(g.mediaBox.bottomLeftY))+" "+A(g.mediaBox.topRightX)+" "+A(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&K("/CropBox ["+A(g.cropBox.bottomLeftX)+" "+A(g.cropBox.bottomLeftY)+" "+A(g.cropBox.topRightX)+" "+A(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&K("/BleedBox ["+A(g.bleedBox.bottomLeftX)+" "+A(g.bleedBox.bottomLeftY)+" "+A(g.bleedBox.topRightX)+" "+A(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&K("/TrimBox ["+A(g.trimBox.bottomLeftX)+" "+A(g.trimBox.bottomLeftY)+" "+A(g.trimBox.topRightX)+" "+A(g.trimBox.topRightY)+"]"),g.artBox!==null&&K("/ArtBox ["+A(g.artBox.bottomLeftX)+" "+A(g.artBox.bottomLeftY)+" "+A(g.artBox.topRightX)+" "+A(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&K("/UserUnit "+g.userUnit),jt.publish("putPage",{objId:ie,pageContext:et[F],pageNumber:F,page:J}),K("/Contents "+pe+" 0 R"),K(">>"),K("endobj");var we=J.join(`
`);return b===x.ADVANCED&&(we+=`
Q`),_r(pe,!0),Fr({data:we,filters:Ln(),objectId:pe}),K("endobj"),ie},fi=m.__private__.putPages=function(){var g,F,J=[];for(g=1;g<=Qt;g++)et[g].objId=ms(),et[g].contentsObjId=ms();for(g=1;g<=Qt;g++)J.push(En({number:g,data:Pe[g],objId:et[g].objId,contentsObjId:et[g].contentsObjId,mediaBox:et[g].mediaBox,cropBox:et[g].cropBox,bleedBox:et[g].bleedBox,trimBox:et[g].trimBox,artBox:et[g].artBox,userUnit:et[g].userUnit,rootDictionaryObjId:Jn,resourceDictionaryObjId:sn}));_r(Jn,!0),K("<</Type /Pages");var ie="/Kids [";for(F=0;F<Qt;F++)ie+=J[F]+" 0 R ";K(ie+"]"),K("/Count "+Qt),K(">>"),K("endobj"),jt.publish("postPutPages")},Ji=function(g){jt.publish("putFont",{font:g,out:K,newObject:ys,putStream:Fr}),g.isAlreadyPutted!==!0&&(g.objectNumber=ys(),K("<<"),K("/Type /Font"),K("/BaseFont /"+Fo(g.postScriptName)),K("/Subtype /Type1"),typeof g.encoding=="string"&&K("/Encoding /"+g.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},Xi=function(){for(var g in Pt)Pt.hasOwnProperty(g)&&(f===!1||f===!0&&j.hasOwnProperty(g))&&Ji(Pt[g])},Qi=function(g){g.objectNumber=ys();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[A(g.x),A(g.y),A(g.x+g.width),A(g.y+g.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var J=g.pages[1].join(`
`);Fr({data:J,additionalKeyValues:F,objectId:g.objectNumber}),K("endobj")},Zi=function(){for(var g in Os)Os.hasOwnProperty(g)&&Qi(Os[g])},ad=function(g,F){var J,ie=[],pe=1/(F-1);for(J=0;J<1;J+=pe)ie.push(J);if(ie.push(1),g[0].offset!=0){var we={offset:0,color:g[0].color};g.unshift(we)}if(g[g.length-1].offset!=1){var Ce={offset:1,color:g[g.length-1].color};g.push(Ce)}for(var $e="",We=0,rt=0;rt<ie.length;rt++){for(J=ie[rt];J>g[We+1].offset;)We++;var tt=g[We].offset,pt=(J-tt)/(g[We+1].offset-tt),Vt=g[We].color,Zt=g[We+1].color;$e+=Q(Math.round((1-pt)*Vt[0]+pt*Zt[0]).toString(16))+Q(Math.round((1-pt)*Vt[1]+pt*Zt[1]).toString(16))+Q(Math.round((1-pt)*Vt[2]+pt*Zt[2]).toString(16))}return $e.trim()},Wh=function(g,F){F||(F=21);var J=ys(),ie=ad(g.colors,F),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+F+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fr({data:ie,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),K("endobj"),g.objectNumber=ys(),K("<< /ShadingType "+g.type),K("/ColorSpace /DeviceRGB");var we="/Coords ["+A(parseFloat(g.coords[0]))+" "+A(parseFloat(g.coords[1]))+" ";g.type===2?we+=A(parseFloat(g.coords[2]))+" "+A(parseFloat(g.coords[3])):we+=A(parseFloat(g.coords[2]))+" "+A(parseFloat(g.coords[3]))+" "+A(parseFloat(g.coords[4]))+" "+A(parseFloat(g.coords[5])),K(we+="]"),g.matrix&&K("/Matrix ["+g.matrix.toString()+"]"),K("/Function "+J+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},Gh=function(g,F){var J=ms(),ie=ys();F.push({resourcesOid:J,objectOid:ie}),g.objectNumber=ie;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+g.boundingBox.map(A).join(" ")+"]"}),pe.push({key:"XStep",value:A(g.xStep)}),pe.push({key:"YStep",value:A(g.yStep)}),pe.push({key:"Resources",value:J+" 0 R"}),g.matrix&&pe.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Fr({data:g.stream,additionalKeyValues:pe,objectId:g.objectNumber}),K("endobj")},eo=function(g){var F;for(F in Nt)Nt.hasOwnProperty(F)&&(Nt[F]instanceof Ei?Wh(Nt[F]):Nt[F]instanceof Ko&&Gh(Nt[F],g))},id=function(g){for(var F in g.objectNumber=ys(),K("<<"),g)switch(F){case"opacity":K("/ca "+M(g[F]));break;case"stroke-opacity":K("/CA "+M(g[F]))}K(">>"),K("endobj")},Yh=function(){var g;for(g in Xt)Xt.hasOwnProperty(g)&&id(Xt[g])},jl=function(){for(var g in K("/XObject <<"),Os)Os.hasOwnProperty(g)&&Os[g].objectNumber>=0&&K("/"+g+" "+Os[g].objectNumber+" 0 R");jt.publish("putXobjectDict"),K(">>")},Kh=function(){qs.oid=ys(),K("<<"),K("/Filter /Standard"),K("/V "+qs.v),K("/R "+qs.r),K("/U <"+qs.toHexString(qs.U)+">"),K("/O <"+qs.toHexString(qs.O)+">"),K("/P "+qs.P),K(">>"),K("endobj")},od=function(){for(var g in K("/Font <<"),Pt)Pt.hasOwnProperty(g)&&(f===!1||f===!0&&j.hasOwnProperty(g))&&K("/"+g+" "+Pt[g].objectNumber+" 0 R");K(">>")},Jh=function(){if(Object.keys(Nt).length>0){for(var g in K("/Shading <<"),Nt)Nt.hasOwnProperty(g)&&Nt[g]instanceof Ei&&Nt[g].objectNumber>=0&&K("/"+g+" "+Nt[g].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),K(">>")}},to=function(g){if(Object.keys(Nt).length>0){for(var F in K("/Pattern <<"),Nt)Nt.hasOwnProperty(F)&&Nt[F]instanceof m.TilingPattern&&Nt[F].objectNumber>=0&&Nt[F].objectNumber<g&&K("/"+F+" "+Nt[F].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),K(">>")}},Xh=function(){if(Object.keys(Xt).length>0){var g;for(g in K("/ExtGState <<"),Xt)Xt.hasOwnProperty(g)&&Xt[g].objectNumber>=0&&K("/"+g+" "+Xt[g].objectNumber+" 0 R");jt.publish("putGStateDict"),K(">>")}},as=function(g){_r(g.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),od(),Jh(),to(g.objectOid),Xh(),jl(),K(">>"),K("endobj")},ld=function(){var g=[];Xi(),Yh(),Zi(),eo(g),jt.publish("putResources"),g.forEach(as),as({resourcesOid:sn,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources")},cd=function(){jt.publish("putAdditionalObjects");for(var g=0;g<Te.length;g++){var F=Te[g];_r(F.objId,!0),K(F.content),K("endobj")}jt.publish("postPutAdditionalObjects")},dd=function(g){qt[g.fontName]=qt[g.fontName]||{},qt[g.fontName][g.fontStyle]=g.id},_l=function(g,F,J,ie,pe){var we={id:"F"+(Object.keys(Pt).length+1).toString(10),postScriptName:g,fontName:F,fontStyle:J,encoding:ie,isStandardFont:pe||!1,metadata:{}};return jt.publish("addFont",{font:we,instance:this}),Pt[we.id]=we,dd(we),we.id},Qh=function(g){for(var F=0,J=ke.length;F<J;F++){var ie=_l.call(this,g[F][0],g[F][1],g[F][2],ke[F][3],!0);f===!1&&(j[ie]=!0);var pe=g[F][0].split("-");dd({id:ie,fontName:pe[0],fontStyle:pe[1]||""})}jt.publish("addFonts",{fonts:Pt,dictionary:qt})},an=function(g){return g.foo=function(){try{return g.apply(this,arguments)}catch(ie){var F=ie.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var J="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ie.message;if(!Je.console)throw new Error(J);Je.console.error(J,ie),Je.alert&&alert(J)}},g.foo.bar=g,g.foo},so=function(g,F){var J,ie,pe,we,Ce,$e,We,rt,tt;if(pe=(F=F||{}).sourceEncoding||"Unicode",Ce=F.outputEncoding,(F.autoencode||Ce)&&Pt[ct].metadata&&Pt[ct].metadata[pe]&&Pt[ct].metadata[pe].encoding&&(we=Pt[ct].metadata[pe].encoding,!Ce&&Pt[ct].encoding&&(Ce=Pt[ct].encoding),!Ce&&we.codePages&&(Ce=we.codePages[0]),typeof Ce=="string"&&(Ce=we[Ce]),Ce)){for(We=!1,$e=[],J=0,ie=g.length;J<ie;J++)(rt=Ce[g.charCodeAt(J)])?$e.push(String.fromCharCode(rt)):$e.push(g[J]),$e[J].charCodeAt(0)>>8&&(We=!0);g=$e.join("")}for(J=g.length;We===void 0&&J!==0;)g.charCodeAt(J-1)>>8&&(We=!0),J--;if(!We)return g;for($e=F.noBOM?[]:[254,255],J=0,ie=g.length;J<ie;J++){if((tt=(rt=g.charCodeAt(J))>>8)>>8)throw new Error("Character at position "+J+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(tt),$e.push(rt-(tt<<8))}return String.fromCharCode.apply(void 0,$e)},dr=m.__private__.pdfEscape=m.pdfEscape=function(g,F){return so(g,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sl=m.__private__.beginPage=function(g){Pe[++Qt]=[],et[Qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},hd(Qt),de(Pe[R])},ud=function(g,F){var J,ie,pe;switch(r=F||r,typeof g=="string"&&(J=v(g.toLowerCase()),Array.isArray(J)&&(ie=J[0],pe=J[1])),Array.isArray(g)&&(ie=g[0]*Re,pe=g[1]*Re),isNaN(ie)&&(ie=a[0],pe=a[1]),(ie>14400||pe>14400)&&(Et.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),pe=Math.min(14400,pe)),a=[ie,pe],r.substr(0,1)){case"l":pe>ie&&(a=[pe,ie]);break;case"p":ie>pe&&(a=[pe,ie])}Sl(a),vd(Tl),K(on),Ll!==0&&K(Ll+" J"),El!==0&&K(El+" j"),jt.publish("addPage",{pageNumber:Qt})},Zh=function(g){g>0&&g<=Qt&&(Pe.splice(g,1),et.splice(g,1),Qt--,R>Qt&&(R=Qt),this.setPage(R))},hd=function(g){g>0&&g<=Qt&&(R=g)},em=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Pe.length-1},md=function(g,F,J){var ie,pe=void 0;return J=J||{},g=g!==void 0?g:Pt[ct].fontName,F=F!==void 0?F:Pt[ct].fontStyle,ie=g.toLowerCase(),qt[ie]!==void 0&&qt[ie][F]!==void 0?pe=qt[ie][F]:qt[g]!==void 0&&qt[g][F]!==void 0?pe=qt[g][F]:J.disableWarning===!1&&Et.warn("Unable to look up font label for font '"+g+"', '"+F+"'. Refer to getFontList() for available fonts."),pe||J.noFallback||(pe=qt.times[F])==null&&(pe=qt.times.normal),pe},tm=m.__private__.putInfo=function(){var g=ys(),F=function(ie){return ie};for(var J in p!==null&&(F=qs.encryptor(g,0)),K("<<"),K("/Producer ("+dr(F("jsPDF "+Ye.version))+")"),Xe)Xe.hasOwnProperty(J)&&Xe[J]&&K("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+dr(F(Xe[J]))+")");K("/CreationDate ("+dr(F(Z))+")"),K(">>"),K("endobj")},kl=m.__private__.putCatalog=function(g){var F=(g=g||{}).rootDictionaryObjId||Jn;switch(ys(),K("<<"),K("/Type /Catalog"),K("/Pages "+F+" 0 R"),Ee||(Ee="fullwidth"),Ee){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+Ee;J.substr(J.length-1)==="%"&&(Ee=parseInt(Ee)/100),typeof Ee=="number"&&K("/OpenAction [3 0 R /XYZ null null "+M(Ee)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}Qe&&K("/PageMode /"+Qe),jt.publish("putCatalog"),K(">>"),K("endobj")},sm=m.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(se+1)),K("/Root "+se+" 0 R"),K("/Info "+(se-1)+" 0 R"),p!==null&&K("/Encrypt "+qs.oid+" 0 R"),K("/ID [ <"+X+"> <"+X+"> ]"),K(">>")},rm=m.__private__.putHeader=function(){K("%PDF-"+y),K("%")},nm=m.__private__.putXRef=function(){var g="0000000000";K("xref"),K("0 "+(se+1)),K("0000000000 65535 f ");for(var F=1;F<=se;F++)typeof ue[F]=="function"?K((g+ue[F]()).slice(-10)+" 00000 n "):ue[F]!==void 0?K((g+ue[F]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},Xn=m.__private__.buildDocument=function(){Ne(),de(ae),jt.publish("buildDocument"),rm(),fi(),cd(),ld(),p!==null&&Kh(),tm(),kl();var g=xe;return nm(),sm(),K("startxref"),K(""+g),K("%%EOF"),de(Pe[R]),ae.join(`
`)},ro=m.__private__.getBlob=function(g){return new Blob([be(g)],{type:"application/pdf"})},no=m.output=m.__private__.output=an(function(g,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",g){case void 0:return Xn();case"save":m.save(F.filename);break;case"arraybuffer":return be(Xn());case"blob":return ro(Xn());case"bloburi":case"bloburl":if(Je.URL!==void 0&&typeof Je.URL.createObjectURL=="function")return Je.URL&&Je.URL.createObjectURL(ro(Xn()))||void 0;Et.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ie=Xn();try{J=O0(ie)}catch{J=O0(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+F.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(pe=F.pdfObjectUrl,we="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",$e=Je.open();return $e!==null&&$e.document.write(Ce),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Je)==="[object Window]"){var We='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',rt=Je.open();if(rt!==null){rt.document.write(We);var tt=this;rt.document.documentElement.querySelector("#pdfViewer").onload=function(){rt.document.title=F.filename,rt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tt.output("bloburl"))}}return rt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Je)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Vt=Je.open();if(Vt!==null&&(Vt.document.write(pt),Vt.document.title=F.filename),Vt||typeof safari>"u")return Vt;break;case"datauri":case"dataurl":return Je.document.location.href=this.output("datauristring",F);default:return null}}),fd=function(g){return Array.isArray(mi)===!0&&mi.indexOf(g)>-1};switch(n){case"pt":Re=1;break;case"mm":Re=72/25.4;break;case"cm":Re=72/2.54;break;case"in":Re=72;break;case"px":Re=fd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Re=12;break;case"ex":Re=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Re=n}var qs=null;re(),$();var am=function(g){return p!==null?qs.encryptor(g,0):function(F){return F}},pd=m.__private__.getPageInfo=m.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:et[g].objId,pageNumber:g,pageContext:et[g]}},Ze=m.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in et)if(et[F].objId===g)break;return pd(F)},im=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:et[R].objId,pageNumber:R,pageContext:et[R]}};m.addPage=function(){return ud.apply(this,arguments),this},m.setPage=function(){return hd.apply(this,arguments),de.call(this,Pe[R]),this},m.insertPage=function(g){return this.addPage(),this.movePage(R,g),this},m.movePage=function(g,F){var J,ie;if(g>F){J=Pe[g],ie=et[g];for(var pe=g;pe>F;pe--)Pe[pe]=Pe[pe-1],et[pe]=et[pe-1];Pe[F]=J,et[F]=ie,this.setPage(F)}else if(g<F){J=Pe[g],ie=et[g];for(var we=g;we<F;we++)Pe[we]=Pe[we+1],et[we]=et[we+1];Pe[F]=J,et[F]=ie,this.setPage(F)}return this},m.deletePage=function(){return Zh.apply(this,arguments),this},m.__private__.text=m.text=function(g,F,J,ie,pe){var we,Ce,$e,We,rt,tt,pt,Vt,Zt,fs=(ie=ie||{}).scope||this;if(typeof g=="number"&&typeof F=="number"&&(typeof J=="string"||Array.isArray(J))){var zs=J;J=F,F=g,g=zs}if(arguments[3]instanceof Ke?(N("The transform parameter of text() with a Matrix value"),Zt=pe):($e=arguments[4],We=arguments[5],kt(pt=arguments[3])==="object"&&pt!==null||(typeof $e=="string"&&(We=$e,$e=null),typeof pt=="string"&&(We=pt,pt=null),typeof pt=="number"&&($e=pt,pt=null),ie={flags:pt,angle:$e,align:We})),isNaN(F)||isNaN(J)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return fs;var Cs="",ln=!1,Sr=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:xi,On=fs.internal.scaleFactor;function _d(Dt){return Dt=Dt.split("	").join(Array(ie.TabLen||9).join(" ")),dr(Dt,pt)}function Ml(Dt){for(var Ot,os=Dt.concat(),ws=[],sa=os.length;sa--;)typeof(Ot=os.shift())=="string"?ws.push(Ot):Array.isArray(Dt)&&(Ot.length===1||Ot[1]===void 0&&Ot[2]===void 0)?ws.push(Ot[0]):ws.push([Ot[0],Ot[1],Ot[2]]);return ws}function Rl(Dt,Ot){var os;if(typeof Dt=="string")os=Ot(Dt)[0];else if(Array.isArray(Dt)){for(var ws,sa,Wl=Dt.concat(),yo=[],Td=Wl.length;Td--;)typeof(ws=Wl.shift())=="string"?yo.push(Ot(ws)[0]):Array.isArray(ws)&&typeof ws[0]=="string"&&(sa=Ot(ws[0],ws[1],ws[2]),yo.push([sa[0],sa[1],sa[2]]));os=yo}return os}var uo=!1,$l=!0;if(typeof g=="string")uo=!0;else if(Array.isArray(g)){var Bl=g.concat();Ce=[];for(var ho,Fs=Bl.length;Fs--;)(typeof(ho=Bl.shift())!="string"||Array.isArray(ho)&&typeof ho[0]!="string")&&($l=!1);uo=$l}if(uo===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var mo=Le/fs.internal.scaleFactor,fo=mo*(Sr-1);switch(ie.baseline){case"bottom":J-=fo;break;case"top":J+=mo-fo;break;case"hanging":J+=mo-2*fo;break;case"middle":J+=mo/2-fo}if((tt=ie.maxWidth||0)>0&&(typeof g=="string"?g=fs.splitTextToSize(g,tt):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(Dt,Ot){return Dt.concat(fs.splitTextToSize(Ot,tt))},[]))),we={text:g,x:F,y:J,options:ie,mutex:{pdfEscape:dr,activeFontKey:ct,fonts:Pt,activeFontSize:Le}},jt.publish("preProcessText",we),g=we.text,$e=(ie=we.options).angle,!(Zt instanceof Ke)&&$e&&typeof $e=="number"){$e*=Math.PI/180,ie.rotationDirection===0&&($e=-$e),b===x.ADVANCED&&($e=-$e);var po=Math.cos($e),Ul=Math.sin($e);Zt=new Ke(po,Ul,-Ul,po,0,0)}else $e&&$e instanceof Ke&&(Zt=$e);b!==x.ADVANCED||Zt||(Zt=Pn),(rt=ie.charSpace||oo)!==void 0&&(Cs+=A(I(rt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Vt=ie.horizontalScale)!==void 0&&(Cs+=A(100*Vt)+` Tz
`),ie.lang;var ur=-1,xm=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,ql=fs.internal.getCurrentPageInfo().pageContext;switch(xm){case 0:case!1:case"fill":ur=0;break;case 1:case!0:case"stroke":ur=1;break;case 2:case"fillThenStroke":ur=2;break;case 3:case"invisible":ur=3;break;case 4:case"fillAndAddForClipping":ur=4;break;case 5:case"strokeAndAddPathForClipping":ur=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ur=6;break;case 7:case"addToPathForClipping":ur=7}var Sd=ql.usedRenderingMode!==void 0?ql.usedRenderingMode:-1;ur!==-1?Cs+=ur+` Tr
`:Sd!==-1&&(Cs+=`0 Tr
`),ur!==-1&&(ql.usedRenderingMode=ur),We=ie.align||"left";var Mr,xo=Le*Sr,kd=fs.internal.pageSize.getWidth(),Ad=Pt[ct];rt=ie.charSpace||oo,tt=ie.maxWidth||0,pt=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var ja=[],bi=function(Dt){return fs.getStringUnitWidth(Dt,{font:Ad,charSpace:rt,fontSize:Le,doKerning:!1})*Le/On};if(Object.prototype.toString.call(g)==="[object Array]"){var hr;Ce=Ml(g),We!=="left"&&(Mr=Ce.map(bi));var er,_a=0;if(We==="right"){F-=Mr[0],g=[],Fs=Ce.length;for(var Zn=0;Zn<Fs;Zn++)Zn===0?(er=Dn(F),hr=Qn(J)):(er=I(_a-Mr[Zn]),hr=-xo),g.push([Ce[Zn],er,hr]),_a=Mr[Zn]}else if(We==="center"){F-=Mr[0]/2,g=[],Fs=Ce.length;for(var ea=0;ea<Fs;ea++)ea===0?(er=Dn(F),hr=Qn(J)):(er=I((_a-Mr[ea])/2),hr=-xo),g.push([Ce[ea],er,hr]),_a=Mr[ea]}else if(We==="left"){g=[],Fs=Ce.length;for(var go=0;go<Fs;go++)g.push(Ce[go])}else if(We==="justify"&&Ad.encoding==="Identity-H"){g=[],Fs=Ce.length,tt=tt!==0?tt:kd;for(var ta=0,is=0;is<Fs;is++)if(hr=is===0?Qn(J):-xo,er=is===0?Dn(F):ta,is<Fs-1){var zl=I((tt-Mr[is])/(Ce[is].split(" ").length-1)),tr=Ce[is].split(" ");g.push([tr[0]+" ",er,hr]),ta=0;for(var Rr=1;Rr<tr.length;Rr++){var vo=(bi(tr[Rr-1]+" "+tr[Rr])-bi(tr[Rr]))*On+zl;Rr==tr.length-1?g.push([tr[Rr],vo,0]):g.push([tr[Rr]+" ",vo,0]),ta-=vo}}else g.push([Ce[is],er,hr]);g.push(["",ta,0])}else{if(We!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(g=[],Fs=Ce.length,tt=tt!==0?tt:kd,is=0;is<Fs;is++)hr=is===0?Qn(J):-xo,er=is===0?Dn(F):0,is<Fs-1?ja.push(A(I((tt-Mr[is])/(Ce[is].split(" ").length-1)))):ja.push(0),g.push([Ce[is],er,hr])}}var Cd=typeof ie.R2L=="boolean"?ie.R2L:Ve;Cd===!0&&(g=Rl(g,function(Dt,Ot,os){return[Dt.split("").reverse().join(""),Ot,os]})),we={text:g,x:F,y:J,options:ie,mutex:{pdfEscape:dr,activeFontKey:ct,fonts:Pt,activeFontSize:Le}},jt.publish("postProcessText",we),g=we.text,ln=we.mutex.isHex||!1;var Hl=Pt[ct].encoding;Hl!=="WinAnsiEncoding"&&Hl!=="StandardEncoding"||(g=Rl(g,function(Dt,Ot,os){return[_d(Dt),Ot,os]})),Ce=Ml(g),g=[];for(var yi,wi,Sa,Ni=0,bo=1,ji=Array.isArray(Ce[0])?bo:Ni,ka="",Vl=function(Dt,Ot,os){var ws="";return os instanceof Ke?(os=typeof ie.angle=="number"?tn(os,new Ke(1,0,0,1,Dt,Ot)):tn(new Ke(1,0,0,1,Dt,Ot),os),b===x.ADVANCED&&(os=tn(new Ke(1,0,0,-1,0,0),os)),ws=os.join(" ")+` Tm
`):ws=A(Dt)+" "+A(Ot)+` Td
`,ws},$r=0;$r<Ce.length;$r++){switch(ka="",ji){case bo:Sa=(ln?"<":"(")+Ce[$r][0]+(ln?">":")"),yi=parseFloat(Ce[$r][1]),wi=parseFloat(Ce[$r][2]);break;case Ni:Sa=(ln?"<":"(")+Ce[$r]+(ln?">":")"),yi=Dn(F),wi=Qn(J)}ja!==void 0&&ja[$r]!==void 0&&(ka=ja[$r]+` Tw
`),$r===0?g.push(ka+Vl(yi,wi,Zt)+Sa):ji===Ni?g.push(ka+Sa):ji===bo&&g.push(ka+Vl(yi,wi,Zt)+Sa)}g=ji===Ni?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Br=`BT
/`;return Br+=ct+" "+Le+` Tf
`,Br+=A(Le*Sr)+` TL
`,Br+=gi+`
`,Br+=Cs,Br+=g,K(Br+="ET"),j[ct]=!0,fs};var om=m.__private__.clip=m.clip=function(g){return K(g==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return om("evenodd")},m.__private__.discardPath=m.discardPath=function(){return K("n"),this};var In=m.__private__.isValidStyle=function(g){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(F=!0),F};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(g){return In(g)&&(u=g),this};var xd=m.__private__.getStyle=m.getStyle=function(g){var F=u;switch(g){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=g}return F},gd=m.close=function(){return K("h"),this};m.stroke=function(){return K("S"),this},m.fill=function(g){return ao("f",g),this},m.fillEvenOdd=function(g){return ao("f*",g),this},m.fillStroke=function(g){return ao("B",g),this},m.fillStrokeEvenOdd=function(g){return ao("B*",g),this};var ao=function(g,F){kt(F)==="object"?cm(F,g):K(g)},Al=function(g){g===null||b===x.ADVANCED&&g===void 0||(g=xd(g),K(g))};function lm(g,F,J,ie,pe){var we=new Ko(F||this.boundingBox,J||this.xStep,ie||this.yStep,this.gState,pe||this.matrix);we.stream=this.stream;var Ce=g+"$$"+this.cloneIndex+++"$$";return cr(Ce,we),we}var cm=function(g,F){var J=hi[g.key],ie=Nt[J];if(ie instanceof Ei)K("q"),K(dm(F)),ie.gState&&m.setGState(ie.gState),K(g.matrix.toString()+" cm"),K("/"+J+" sh"),K("Q");else if(ie instanceof Ko){var pe=new Ke(1,0,0,-1,0,Na());g.matrix&&(pe=pe.multiply(g.matrix||Pn),J=lm.call(ie,g.key,g.boundingBox,g.xStep,g.yStep,pe).id),K("q"),K("/Pattern cs"),K("/"+J+" scn"),ie.gState&&m.setGState(ie.gState),K(F),K("Q")}},dm=function(g){switch(g){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cl=m.moveTo=function(g,F){return K(A(I(g))+" "+A(G(F))+" m"),this},pi=m.lineTo=function(g,F){return K(A(I(g))+" "+A(G(F))+" l"),this},ya=m.curveTo=function(g,F,J,ie,pe,we){return K([A(I(g)),A(G(F)),A(I(J)),A(G(ie)),A(I(pe)),A(G(we)),"c"].join(" ")),this};m.__private__.line=m.line=function(g,F,J,ie,pe){if(isNaN(g)||isNaN(F)||isNaN(J)||isNaN(ie)||!In(pe))throw new Error("Invalid arguments passed to jsPDF.line");return b===x.COMPAT?this.lines([[J-g,ie-F]],g,F,[1,1],pe||"S"):this.lines([[J-g,ie-F]],g,F,[1,1]).stroke()},m.__private__.lines=m.lines=function(g,F,J,ie,pe,we){var Ce,$e,We,rt,tt,pt,Vt,Zt,fs,zs,Cs,ln;if(typeof g=="number"&&(ln=J,J=F,F=g,g=ln),ie=ie||[1,1],we=we||!1,isNaN(F)||isNaN(J)||!Array.isArray(g)||!Array.isArray(ie)||!In(pe)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cl(F,J),Ce=ie[0],$e=ie[1],rt=g.length,zs=F,Cs=J,We=0;We<rt;We++)(tt=g[We]).length===2?(zs=tt[0]*Ce+zs,Cs=tt[1]*$e+Cs,pi(zs,Cs)):(pt=tt[0]*Ce+zs,Vt=tt[1]*$e+Cs,Zt=tt[2]*Ce+zs,fs=tt[3]*$e+Cs,zs=tt[4]*Ce+zs,Cs=tt[5]*$e+Cs,ya(pt,Vt,Zt,fs,zs,Cs));return we&&gd(),Al(pe),this},m.path=function(g){for(var F=0;F<g.length;F++){var J=g[F],ie=J.c;switch(J.op){case"m":Cl(ie[0],ie[1]);break;case"l":pi(ie[0],ie[1]);break;case"c":ya.apply(this,ie);break;case"h":gd()}}return this},m.__private__.rect=m.rect=function(g,F,J,ie,pe){if(isNaN(g)||isNaN(F)||isNaN(J)||isNaN(ie)||!In(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return b===x.COMPAT&&(ie=-ie),K([A(I(g)),A(G(F)),A(I(J)),A(I(ie)),"re"].join(" ")),Al(pe),this},m.__private__.triangle=m.triangle=function(g,F,J,ie,pe,we,Ce){if(isNaN(g)||isNaN(F)||isNaN(J)||isNaN(ie)||isNaN(pe)||isNaN(we)||!In(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-g,ie-F],[pe-J,we-ie],[g-pe,F-we]],g,F,[1,1],Ce,!0),this},m.__private__.roundedRect=m.roundedRect=function(g,F,J,ie,pe,we,Ce){if(isNaN(g)||isNaN(F)||isNaN(J)||isNaN(ie)||isNaN(pe)||isNaN(we)||!In(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*J),we=Math.min(we,.5*ie),this.lines([[J-2*pe,0],[pe*$e,0,pe,we-we*$e,pe,we],[0,ie-2*we],[0,we*$e,-pe*$e,we,-pe,we],[2*pe-J,0],[-pe*$e,0,-pe,-we*$e,-pe,-we],[0,2*we-ie],[0,-we*$e,pe*$e,-we,pe,-we]],g+pe,F,[1,1],Ce,!0),this},m.__private__.ellipse=m.ellipse=function(g,F,J,ie,pe){if(isNaN(g)||isNaN(F)||isNaN(J)||isNaN(ie)||!In(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*J,Ce=4/3*(Math.SQRT2-1)*ie;return Cl(g+J,F),ya(g+J,F-Ce,g+we,F-ie,g,F-ie),ya(g-we,F-ie,g-J,F-Ce,g-J,F),ya(g-J,F+Ce,g-we,F+ie,g,F+ie),ya(g+we,F+ie,g+J,F+Ce,g+J,F),Al(pe),this},m.__private__.circle=m.circle=function(g,F,J,ie){if(isNaN(g)||isNaN(F)||isNaN(J)||!In(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,F,J,J,ie)},m.setFont=function(g,F,J){return J&&(F=T(F,J)),ct=md(g,F,{disableWarning:!1}),this};var um=m.__private__.getFont=m.getFont=function(){return Pt[md.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var g,F,J={};for(g in qt)if(qt.hasOwnProperty(g))for(F in J[g]=[],qt[g])qt[g].hasOwnProperty(F)&&J[g].push(F);return J},m.addFont=function(g,F,J,ie,pe){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(J=T(J,ie)),pe=pe||"Identity-H",_l.call(this,g,F,J,pe)};var xi,Tl=e.lineWidth||.200025,io=m.__private__.getLineWidth=m.getLineWidth=function(){return Tl},vd=m.__private__.setLineWidth=m.setLineWidth=function(g){return Tl=g,K(A(I(g))+" w"),this};m.__private__.setLineDash=Ye.API.setLineDash=Ye.API.setLineDashPattern=function(g,F){if(g=g||[],F=F||0,isNaN(F)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(J){return A(I(J))}).join(" "),F=A(I(F)),K("["+g+"] "+F+" d"),this};var bd=m.__private__.getLineHeight=m.getLineHeight=function(){return Le*xi};m.__private__.getLineHeight=m.getLineHeight=function(){return Le*xi};var yd=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(xi=g),this},wd=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return xi};yd(e.lineHeight);var Dn=m.__private__.getHorizontalCoordinate=function(g){return I(g)},Qn=m.__private__.getVerticalCoordinate=function(g){return b===x.ADVANCED?g:et[R].mediaBox.topRightY-et[R].mediaBox.bottomLeftY-I(g)},hm=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(g){return A(Dn(g))},wa=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(g){return A(Qn(g))},on=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return rn(on)},m.__private__.setStrokeColor=m.setDrawColor=function(g,F,J,ie){return on=nn({ch1:g,ch2:F,ch3:J,ch4:ie,pdfColorType:"draw",precision:2}),K(on),this};var Pl=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return rn(Pl)},m.__private__.setFillColor=m.setFillColor=function(g,F,J,ie){return Pl=nn({ch1:g,ch2:F,ch3:J,ch4:ie,pdfColorType:"fill",precision:2}),K(Pl),this};var gi=e.textColor||"0 g",mm=m.__private__.getTextColor=m.getTextColor=function(){return rn(gi)};m.__private__.setTextColor=m.setTextColor=function(g,F,J,ie){return gi=nn({ch1:g,ch2:F,ch3:J,ch4:ie,pdfColorType:"text",precision:3}),this};var oo=e.charSpace,fm=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(oo||0)};m.__private__.setCharSpace=m.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oo=g,this};var Ll=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(g){var F=m.CapJoinStyles[g];if(F===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ll=F,K(F+" J"),this};var El=0;m.__private__.setLineJoin=m.setLineJoin=function(g){var F=m.CapJoinStyles[g];if(F===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return El=F,K(F+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(A(I(g))+" M"),this},m.GState=xh,m.setGState=function(g){(g=typeof g=="string"?Xt[en[g]]:Nd(null,g)).equals(Kn)||(K("/"+g.id+" gs"),Kn=g)};var Nd=function(g,F){if(!g||!en[g]){var J=!1;for(var ie in Xt)if(Xt.hasOwnProperty(ie)&&Xt[ie].equals(F)){J=!0;break}if(J)F=Xt[ie];else{var pe="GS"+(Object.keys(Xt).length+1).toString(10);Xt[pe]=F,F.id=pe}return g&&(en[g]=F.id),jt.publish("addGState",F),F}};m.addGState=function(g,F){return Nd(g,F),this},m.saveGraphicsState=function(){return K("q"),An.push({key:ct,size:Le,color:gi}),this},m.restoreGraphicsState=function(){K("Q");var g=An.pop();return ct=g.key,Le=g.size,gi=g.color,Kn=null,this},m.setCurrentTransformationMatrix=function(g){return K(g.toString()+" cm"),this},m.comment=function(g){return K("#"+g),this};var lo=function(g,F){var J=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(we){isNaN(we)||(J=parseFloat(we))}});var ie=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(we){isNaN(we)||(ie=parseFloat(we))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(we){pe=we.toString()}}),this},Il=function(g,F,J,ie){lo.call(this,g,F),this.type="rect";var pe=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Ce){isNaN(Ce)||(pe=parseFloat(Ce))}});var we=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ce){isNaN(Ce)||(we=parseFloat(Ce))}}),this},Dl=function(){this.page=Qt,this.currentPage=R,this.pages=Pe.slice(0),this.pagesContext=et.slice(0),this.x=Us,this.y=bt,this.matrix=Zr,this.width=vi(R),this.height=Na(R),this.outputDestination=me,this.id="",this.objectNumber=-1};Dl.prototype.restore=function(){Qt=this.page,R=this.currentPage,et=this.pagesContext,Pe=this.pages,Us=this.x,bt=this.y,Zr=this.matrix,Ol(R,this.width),Fl(R,this.height),me=this.outputDestination};var jd=function(g,F,J,ie,pe){Tn.push(new Dl),Qt=R=0,Pe=[],Us=g,bt=F,Zr=pe,Sl([J,ie])},pm=function(g){if(Cn[g])Tn.pop().restore();else{var F=new Dl,J="Xo"+(Object.keys(Os).length+1).toString(10);F.id=J,Cn[g]=J,Os[J]=F,jt.publish("addFormObject",F),Tn.pop().restore()}};for(var co in m.beginFormObject=function(g,F,J,ie,pe){return jd(g,F,J,ie,pe),this},m.endFormObject=function(g){return pm(g),this},m.doFormObject=function(g,F){var J=Os[Cn[g]];return K("q"),K(F.toString()+" cm"),K("/"+J.id+" Do"),K("Q"),this},m.getFormObject=function(g){var F=Os[Cn[g]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},m.save=function(g,F){return g=g||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Pi(ro(Xn()),g),typeof Pi.unload=="function"&&Je.setTimeout&&setTimeout(Pi.unload,911),this):new Promise(function(J,ie){try{var pe=Pi(ro(Xn()),g);typeof Pi.unload=="function"&&Je.setTimeout&&setTimeout(Pi.unload,911),J(pe)}catch(we){ie(we.message)}})},Ye.API)Ye.API.hasOwnProperty(co)&&(co==="events"&&Ye.API.events.length?function(g,F){var J,ie,pe;for(pe=F.length-1;pe!==-1;pe--)J=F[pe][0],ie=F[pe][1],g.subscribe.apply(g,[J].concat(typeof ie=="function"?[ie]:ie))}(jt,Ye.API.events):m[co]=Ye.API[co]);var vi=m.getPageWidth=function(g){return(et[g=g||R].mediaBox.topRightX-et[g].mediaBox.bottomLeftX)/Re},Ol=m.setPageWidth=function(g,F){et[g].mediaBox.topRightX=F*Re+et[g].mediaBox.bottomLeftX},Na=m.getPageHeight=function(g){return(et[g=g||R].mediaBox.topRightY-et[g].mediaBox.bottomLeftY)/Re},Fl=m.setPageHeight=function(g,F){et[g].mediaBox.topRightY=F*Re+et[g].mediaBox.bottomLeftY};return m.internal={pdfEscape:dr,getStyle:xd,getFont:um,getFontSize:Oe,getCharSpace:fm,getTextColor:mm,getLineHeight:bd,getLineHeightFactor:wd,getLineWidth:io,write:Be,getHorizontalCoordinate:Dn,getVerticalCoordinate:Qn,getCoordinateString:hm,getVerticalCoordinateString:wa,collections:{},newObject:ys,newAdditionalObject:Ki,newObjectDeferred:ms,newObjectDeferredBegin:_r,getFilters:Ln,putStream:Fr,events:jt,scaleFactor:Re,pageSize:{getWidth:function(){return vi(R)},setWidth:function(g){Ol(R,g)},getHeight:function(){return Na(R)},setHeight:function(g){Fl(R,g)}},encryptionOptions:p,encryption:qs,getEncryptor:am,output:no,getNumberOfPages:em,pages:Pe,out:K,f2:M,f3:E,getPageInfo:pd,getPageInfoByObjId:Ze,getCurrentPageInfo:im,getPDFVersion:_,Point:lo,Rectangle:Il,Matrix:Ke,hasHotfix:fd},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return vi(R)},set:function(g){Ol(R,g)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Na(R)},set:function(g){Fl(R,g)},enumerable:!0,configurable:!0}),Qh.call(m,ke),ct="F1",ud(a,r),jt.publish("initialized"),m}Oo.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Oo.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Oo.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Oo.prototype.processOwnerPassword=function(e,t){return M0(F0(t).substr(0,5),e)},Oo.prototype.encryptor=function(e,t){var r=F0(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return M0(r,n)}},xh.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||kt(e)!==kt(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ye.API={events:[]},Ye.version="3.0.1";var ts=Ye.API,Qp=1,Yi=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Lo=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},st=function(e){return e.toFixed(2)},Ma=function(e){return e.toFixed(5)};ts.__acroform__={};var jr=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},x1=function(e){return e*Qp},Rn=function(e){var t=new zb,r=ze.internal.getHeight(e)||0,n=ze.internal.getWidth(e)||0;return t.BBox=[0,0,Number(st(n)),Number(st(r))],t},T6=ts.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},P6=ts.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},L6=ts.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},cs=ts.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return L6(e,t-1)},ds=ts.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return T6(e,t-1)},us=ts.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return P6(e,t-1)},E6=ts.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(st(c.lowerLeft_X)),Number(st(c.lowerLeft_Y)),Number(st(c.upperRight_X)),Number(st(c.upperRight_Y))]},I6=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=R0(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+st(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Rn(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},R0=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=r,o=ze.internal.getHeight(e)||0;o=o<0?-o:o;var l=ze.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,I,Y){if(E+1<a.length){var G=I+" "+a[E+1][0];return gu(G,e,Y).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,p,f=gu("3",e,i).height,j=e.multiline?o-i:(o-f)/2,m=j+=2,y=0,_=0,k=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+gu(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",x=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var S=!1;if(a[b].length!==1&&k!==a[b].length-1){if((f+2)*(x+2)+2>o)continue e;v+=a[b][k],S=!0,_=b,b--}else{v=(v+=a[b][k]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var L=parseInt(b),T=c(L,v,i),A=b>=a.length-1;if(T&&!A){v+=" ",k=0;continue}if(T||A){if(A)_=L;else if(e.multiline&&(f+2)*(x+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(x+2)+2>o)continue e;_=L}}for(var N="",P=y;P<=_;P++){var M=a[P];if(e.multiline){if(P===_){N+=M[k]+" ",k=(k+1)%M.length;continue}if(P===y){N+=M[M.length-1]+" ";continue}}N+=M[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,p=gu(N,e,i).width,e.textAlign){case"right":u=l-p-2;break;case"center":u=(l-p)/2;break;case"left":default:u=2}t+=st(u)+" "+st(m)+` Td
`,t+="("+Yi(N)+`) Tj
`,t+=-st(u)+` 0 Td
`,m=-(i+2),p=0,y=S?_:_+1,x++,v=""}break}return n.text=t,n.fontSize=i,n},gu=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},D6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},O6=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},F6=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),kt(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},M6=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Sn.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(D6)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qp=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Hb,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&O6(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=E6(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ze.createDefaultAppearanceStream(l),kt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var p=I6(l);c.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(l.appearanceStreamContent){var f="";for(var j in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(j)){var m=l.appearanceStreamContent[j];if(f+="/"+j+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var y=m[o];typeof y=="function"&&(y=y.call(a,l)),f+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=m)=="function"&&(y=y.call(a,l)),f+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&F6(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},qb=ts.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),kt(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Yi(n(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nf=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Yi(n(e))+")"},qn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qn.prototype.toString=function(){return this.objId+" 0 R"},qn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},qn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:qb(a,this.objId,this.scope)}):a instanceof qn?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var zb=function(){qn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};jr(zb,qn);var Hb=function(){qn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Yi(r(e))+")"}},set:function(r){e=r}})};jr(Hb,qn);var Sn=function e(){qn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cs(t,3)},set:function(v){v?this.F=ds(t,3):this.F=us(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof gh)return;i="FieldObject"+e.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Yi(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Qp:u},set:function(v){u=v}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){p=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof gh||this instanceof Ri))return Nf(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var j=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(j)return this instanceof Es?j:Nf(j,this.objId,this.scope)},set:function(v){v=v.toString(),j=this instanceof Es?v:v.substr(0,1)==="("?Lo(v.substr(1,v.length-2)):Lo(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Es?Lo(j.substr(1,j.length-1)):j},set:function(v){v=v.toString(),j=this instanceof Es?"/"+v:v}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Es?m:Nf(m,this.objId,this.scope)},set:function(v){v=v.toString(),m=this instanceof Es?v:v.substr(0,1)==="("?Lo(v.substr(1,v.length-2)):Lo(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Es?Lo(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Es?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(v){v=!!v,_=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(v){y=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,1)},set:function(v){v?this.Ff=ds(this.Ff,1):this.Ff=us(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,2)},set:function(v){v?this.Ff=ds(this.Ff,2):this.Ff=us(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,3)},set:function(v){v?this.Ff=ds(this.Ff,3):this.Ff=us(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');k=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(k){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};jr(Sn,qn);var sl=function(){Sn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return qb(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,18)},set:function(r){r?this.Ff=ds(this.Ff,18):this.Ff=us(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ds(this.Ff,19):this.Ff=us(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,20)},set:function(r){r?(this.Ff=ds(this.Ff,20),t.sort()):this.Ff=us(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,22)},set:function(r){r?this.Ff=ds(this.Ff,22):this.Ff=us(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,23)},set:function(r){r?this.Ff=ds(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,27)},set:function(r){r?this.Ff=ds(this.Ff,27):this.Ff=us(this.Ff,27)}}),this.hasAppearanceStream=!1};jr(sl,Sn);var rl=function(){sl.call(this),this.fontName="helvetica",this.combo=!1};jr(rl,sl);var nl=function(){rl.call(this),this.combo=!0};jr(nl,rl);var Du=function(){nl.call(this),this.edit=!0};jr(Du,nl);var Es=function(){Sn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,15)},set:function(r){r?this.Ff=ds(this.Ff,15):this.Ff=us(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,16)},set:function(r){r?this.Ff=ds(this.Ff,16):this.Ff=us(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,17)},set:function(r){r?this.Ff=ds(this.Ff,17):this.Ff=us(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,26)},set:function(r){r?this.Ff=ds(this.Ff,26):this.Ff=us(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Yi(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){kt(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};jr(Es,Sn);var Ou=function(){Es.call(this),this.pushButton=!0};jr(Ou,Es);var al=function(){Es.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};jr(al,Es);var gh=function(){var e,t;Sn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Yi(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){kt(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ze.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jr(gh,Sn),al.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},al.prototype.createOption=function(e){var t=new gh;return t.Parent=this,t.optionName=e,this.Kids.push(t),R6.call(this.scope,t),t};var Fu=function(){Es.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ze.CheckBox.createAppearanceStream()};jr(Fu,Es);var Ri=function(){Sn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,13)},set:function(t){t?this.Ff=ds(this.Ff,13):this.Ff=us(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,21)},set:function(t){t?this.Ff=ds(this.Ff,21):this.Ff=us(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,23)},set:function(t){t?this.Ff=ds(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,24)},set:function(t){t?this.Ff=ds(this.Ff,24):this.Ff=us(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,25)},set:function(t){t?this.Ff=ds(this.Ff,25):this.Ff=us(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,26)},set:function(t){t?this.Ff=ds(this.Ff,26):this.Ff=us(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jr(Ri,Sn);var Mu=function(){Ri.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cs(this.Ff,14)},set:function(e){e?this.Ff=ds(this.Ff,14):this.Ff=us(this.Ff,14)}}),this.password=!0};jr(Mu,Ri);var ze={CheckBox:{createAppearanceStream:function(){return{N:{On:ze.CheckBox.YesNormal},D:{On:ze.CheckBox.YesPushDown,Off:ze.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=R0(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+st(ze.internal.getWidth(e))+" "+st(ze.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+st(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Rn(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=ze.internal.getHeight(e),o=ze.internal.getWidth(e),l=R0(e,e.caption);return a.push("1 g"),a.push("0 0 "+st(o)+" "+st(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+st(o-1)+" "+st(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+st(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+st(ze.internal.getWidth(e))+" "+st(ze.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ze.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ze.RadioButton.Circle.YesNormal,t.D[e]=ze.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Rn(e);t.scope=e.scope;var r=[],n=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=ze.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ma(ze.internal.getWidth(e)/2)+" "+Ma(ze.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=[],n=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ze.internal.Bezier_C).toFixed(5)),o=Number((n*ze.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ma(ze.internal.getWidth(e)/2)+" "+Ma(ze.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ma(ze.internal.getWidth(e)/2)+" "+Ma(ze.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=[],n=ze.internal.getWidth(e)<=ze.internal.getHeight(e)?ze.internal.getWidth(e)/4:ze.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ze.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ma(ze.internal.getWidth(e)/2)+" "+Ma(ze.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ze.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ze.RadioButton.Cross.YesNormal,t.D[e]=ze.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Rn(e);t.scope=e.scope;var r=[],n=ze.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+st(ze.internal.getWidth(e)-2)+" "+st(ze.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(st(n.x1.x)+" "+st(n.x1.y)+" m"),r.push(st(n.x2.x)+" "+st(n.x2.y)+" l"),r.push(st(n.x4.x)+" "+st(n.x4.y)+" m"),r.push(st(n.x3.x)+" "+st(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=ze.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+st(ze.internal.getWidth(e))+" "+st(ze.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+st(ze.internal.getWidth(e)-2)+" "+st(ze.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(st(r.x1.x)+" "+st(r.x1.y)+" m"),n.push(st(r.x2.x)+" "+st(r.x2.y)+" l"),n.push(st(r.x4.x)+" "+st(r.x4.y)+" m"),n.push(st(r.x3.x)+" "+st(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Rn(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+st(ze.internal.getWidth(e))+" "+st(ze.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ze.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ze.internal.getWidth(e),r=ze.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ze.internal.getWidth=function(e){var t=0;return kt(e)==="object"&&(t=x1(e.Rect[2])),t},ze.internal.getHeight=function(e){var t=0;return kt(e)==="object"&&(t=x1(e.Rect[3])),t};var R6=ts.addField=function(e){if(M6(this,e),!(e instanceof Sn))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ts.AcroFormChoiceField=sl,ts.AcroFormListBox=rl,ts.AcroFormComboBox=nl,ts.AcroFormEditBox=Du,ts.AcroFormButton=Es,ts.AcroFormPushButton=Ou,ts.AcroFormRadioButton=al,ts.AcroFormCheckBox=Fu,ts.AcroFormTextField=Ri,ts.AcroFormPasswordField=Mu,ts.AcroFormAppearance=ze,ts.AcroForm={ChoiceField:sl,ListBox:rl,ComboBox:nl,EditBox:Du,Button:Es,PushButton:Ou,RadioButton:al,CheckBox:Fu,TextField:Ri,PasswordField:Mu,Appearance:ze},Ye.AcroForm={ChoiceField:sl,ListBox:rl,ComboBox:nl,EditBox:Du,Button:Es,PushButton:Ou,RadioButton:al,CheckBox:Fu,TextField:Ri,PasswordField:Mu,Appearance:ze};function Vb(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(E,I){var Y,G,Z,X,q,$=t;if((I=I||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(T(E))for(q in r)for(Z=r[q],Y=0;Y<Z.length;Y+=1){for(X=!0,G=0;G<Z[Y].length;G+=1)if(Z[Y][G]!==void 0&&Z[Y][G]!==E[G]){X=!1;break}if(X===!0){$=q;break}}else for(q in r)for(Z=r[q],Y=0;Y<Z.length;Y+=1){for(X=!0,G=0;G<Z[Y].length;G+=1)if(Z[Y][G]!==void 0&&Z[Y][G]!==E.charCodeAt(G)){X=!1;break}if(X===!0){$=q;break}}return $===t&&I!==t&&($=I),$},a=function E(I){for(var Y=this.internal.write,G=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:I.width}),X.push({key:"Height",value:I.height}),I.colorSpace===k.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===k.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var q="",$=0,ee=I.transparency.length;$<ee;$++)q+=I.transparency[$]+" "+I.transparency[$]+" ";X.push({key:"Mask",value:"["+q+"]"})}I.sMask!==void 0&&X.push({key:"SMask",value:I.objectId+1+" 0 R"});var te=I.filter!==void 0?["/"+I.filter]:void 0;if(G({data:I.data,additionalKeyValues:X,alreadyAppliedFilters:te,objectId:I.objectId}),Y("endobj"),"sMask"in I&&I.sMask!==void 0){var re="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,D={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:re,data:I.sMask};"filter"in I&&(D.filter=I.filter),E.call(this,D)}if(I.colorSpace===k.INDEXED){var R=this.internal.newObject();G({data:N(new Uint8Array(I.palette)),objectId:R}),Y("endobj")}},i=function(){var E=this.internal.collections.addImage_images;for(var I in E)a.call(this,E[I])},o=function(){var E,I=this.internal.collections.addImage_images,Y=this.internal.write;for(var G in I)Y("/I"+(E=I[G]).index,E.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var E=this.internal.collections.addImage_images;return l.call(this),E},u=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(E){return typeof e["process"+E.toUpperCase()]=="function"},f=function(E){return kt(E)==="object"&&E.nodeType===1},j=function(E,I){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var Y=""+E.getAttribute("src");if(Y.indexOf("data:image/")===0)return Tc(unescape(Y).split("base64,").pop());var G=e.loadFile(Y,!0);if(G!==void 0)return G}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var Z;switch(I){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Tc(E.toDataURL(Z,1).split("base64,").pop())}},m=function(E){var I=this.internal.collections.addImage_images;if(I){for(var Y in I)if(E===I[Y].alias)return I[Y]}},y=function(E,I,Y){return E||I||(E=-96,I=-96),E<0&&(E=-1*Y.width*72/E/this.internal.scaleFactor),I<0&&(I=-1*Y.height*72/I/this.internal.scaleFactor),E===0&&(E=I*Y.width/Y.height),I===0&&(I=E*Y.height/Y.width),[E,I]},_=function(E,I,Y,G,Z,X){var q=y.call(this,Y,G,Z),$=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,te=c.call(this);if(Y=q[0],G=q[1],te[Z.index]=Z,X){X*=Math.PI/180;var re=Math.cos(X),D=Math.sin(X),R=function(Q){return Q.toFixed(4)},V=[R(re),R(D),R(-1*D),R(re),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,$(E),ee(I+G),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([$(Y),"0","0",$(G),"0","0","cm"].join(" "))):this.internal.write([$(Y),"0","0",$(G),$(E),ee(I+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},k=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(E){var I,Y,G=0;if(typeof E=="string")for(Y=E.length,I=0;I<Y;I++)G=(G<<5)-G+E.charCodeAt(I),G|=0;else if(T(E))for(Y=E.byteLength/2,I=0;I<Y;I++)G=(G<<5)-G+E[I],G|=0;return G},b=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var I=!0;return E.length===0&&(I=!1),E.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(I=!1),I},S=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var I=E.indexOf(",");return I<0?null:E.substring(0,I).trim().endsWith("base64")?E.substring(I+1):null},L=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(E){return L()&&E instanceof ArrayBuffer};var T=e.__addimage__.isArrayBufferView=function(E){return L()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},A=e.__addimage__.binaryStringToUint8Array=function(E){for(var I=E.length,Y=new Uint8Array(I),G=0;G<I;G++)Y[G]=E.charCodeAt(G);return Y},N=e.__addimage__.arrayBufferToBinaryString=function(E){for(var I="",Y=T(E)?E:new Uint8Array(E),G=0;G<Y.length;G+=8192)I+=String.fromCharCode.apply(null,Y.subarray(G,G+8192));return I};e.addImage=function(){var E,I,Y,G,Z,X,q,$,ee;if(typeof arguments[1]=="number"?(I=t,Y=arguments[1],G=arguments[2],Z=arguments[3],X=arguments[4],q=arguments[5],$=arguments[6],ee=arguments[7]):(I=arguments[1],Y=arguments[2],G=arguments[3],Z=arguments[4],X=arguments[5],q=arguments[6],$=arguments[7],ee=arguments[8]),kt(E=arguments[0])==="object"&&!f(E)&&"imageData"in E){var te=E;E=te.imageData,I=te.format||I||t,Y=te.x||Y||0,G=te.y||G||0,Z=te.w||te.width||Z,X=te.h||te.height||X,q=te.alias||q,$=te.compression||$,ee=te.rotation||te.angle||ee}var re=this.internal.getFilters();if($===void 0&&re.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(Y)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var D=P.call(this,E,I,q,$);return _.call(this,Y,G,Z,X,D,ee),this};var P=function(E,I,Y,G){var Z,X,q;if(typeof E=="string"&&n(E)===t){E=unescape(E);var $=M(E,!1);($!==""||($=e.loadFile(E,!0))!==void 0)&&(E=$)}if(f(E)&&(E=j(E,I)),I=n(E,I),!p(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((q=Y)==null||q.length===0)&&(Y=function(ee){return typeof ee=="string"||T(ee)?x(ee):T(ee.data)?x(ee.data):null}(E)),(Z=m.call(this,Y))||(L()&&(E instanceof Uint8Array||I==="RGBA"||(X=E,E=A(E))),Z=this["process"+I.toUpperCase()](E,u.call(this),Y,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in e.image_compression?ee:v.NONE}(G),X)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},M=e.__addimage__.convertBase64ToBinaryString=function(E,I){I=typeof I!="boolean"||I;var Y,G="";if(typeof E=="string"){var Z;Y=(Z=S(E))!==null&&Z!==void 0?Z:E;try{G=Tc(Y)}catch(X){if(I)throw b(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(E){var I,Y,G="";if(f(E)&&(E=j(E)),typeof E=="string"&&n(E)===t&&((G=M(E,!1))===""&&(G=e.loadFile(E)||""),E=G),Y=n(E),!p(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(!L()||E instanceof Uint8Array||(E=A(E)),!(I=this["process"+Y.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=Y,I}})(Ye.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ye.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,p=!1,f=0;f<u.length&&!p;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var j=0;j<u.length;j++){n=u[j];var m=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(_.objId),x=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(v(n.contents))+")",i+=" /Popup "+k.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(v(x))+") >>",_.content=i;var b=_.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",k.content=i,this.internal.write(_.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var L=this.annotations._nameMap[n.options.name];n.options.pageNumber=L.page,n.options.top=L.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var T=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+T+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var p=this.splitTextToSize(r,l).length;o=Math.ceil(u*p)}else l=c,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Ye.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(_){return t[_.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},l=e.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&i(_)&&t[_.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&a.indexOf(_.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&i(_)&&t[_.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&i(_)&&t[_.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&i(_)&&t[_.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&i(_)&&t[_.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(_){var k=0,v=r,x="",b=0;for(k=0;k<_.length;k+=1)v[_.charCodeAt(k)]!==void 0?(b++,typeof(v=v[_.charCodeAt(k)])=="number"&&(x+=String.fromCharCode(v),v=r,b=0),k===_.length-1&&(v=r,x+=_.charAt(k-(b-1)),k-=b-1,b=0)):(v=r,x+=_.charAt(k-b),k-=b,b=0);return x};e.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&n[_.charCodeAt(0)]!==void 0};var j=e.__arabicParser__.getCorrectForm=function(_,k,v){return o(_)?i(_)===!1?-1:!u(_)||!o(k)&&!o(v)||!o(v)&&l(k)||l(_)&&!o(k)||l(_)&&c(k)||l(_)&&l(k)?0:p(_)&&o(k)&&!l(k)&&o(v)&&u(v)?3:l(_)||!o(v)?1:2:-1},m=function(_){var k=0,v=0,x=0,b="",S="",L="",T=(_=_||"").split("\\s+"),A=[];for(k=0;k<T.length;k+=1){for(A.push(""),v=0;v<T[k].length;v+=1)b=T[k][v],S=T[k][v-1],L=T[k][v+1],o(b)?(x=j(b,S,L),A[k]+=x!==-1?String.fromCharCode(t[b.charCodeAt(0)][x]):b):A[k]+=b;A[k]=f(A[k])}return A.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var _,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(k)){var x=0;for(v=[],x=0;x<k.length;x+=1)Array.isArray(k[x])?v.push([m(k[x][0]),k[x][1],k[x][2]]):v.push([m(k[x])]);_=v}else _=m(k);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};e.events.push(["preProcessText",y])}(Ye.API),Ye.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ye.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var j=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return j},set:function(_){j=_}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(_){y=_}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var p=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),j=u.scaleFactor||this.internal.scaleFactor,m=0,y=0,_=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,S){return b.concat(k.splitTextToSize(S,v))},[])):c=Array.isArray(c)?c:[c];for(var x=0;x<c.length;x++)m<(_=this.getStringUnitWidth(c[x],{font:f})*p)&&(m=_);return m!==0&&(y=c.length),{w:m/=j,h:Math.max((y*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/j,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,j=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&j&&(this.printHeaderRow(c.lineNumber,!0),c.y+=j[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-p,c.y+p,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+p,{align:"center",baseline:"top",maxWidth:c.width-p-p}):this.text(c.text,c.x+p,c.y+p,{align:"left",baseline:"top",maxWidth:c.width-p-p})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,p,f,j){if(n.call(this),!p)throw new Error("No data for PDF table.");var m,y,_,k,v=[],x=[],b=[],S={},L={},T=[],A=[],N=(j=j||{}).autoSize||!1,P=j.printHeaders!==!1,M=j.css&&j.css["font-size"]!==void 0?16*j.css["font-size"]:j.fontSize||12,E=j.margins||Object.assign({width:this.getPageWidth()},t),I=typeof j.padding=="number"?j.padding:3,Y=j.headerBackgroundColor||"#c8c8c8",G=j.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=Y,this.internal.__cell__.headerTextColor=G,this.setFontSize(M),f==null)x=v=Object.keys(p[0]),b=v.map(function(){return"left"});else if(Array.isArray(f)&&kt(f[0])==="object")for(v=f.map(function(te){return te.name}),x=f.map(function(te){return te.prompt||te.name||""}),b=f.map(function(te){return te.align||"left"}),m=0;m<f.length;m+=1)L[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(x=v=f,b=v.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<v.length;m+=1){for(S[k=v[m]]=p.map(function(te){return te[k]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(x[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=S[k],this.setFont(void 0,"normal"),_=0;_<y.length;_+=1)T.push(this.getTextDimensions(y[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[k]=Math.max.apply(null,T)+I+I,T=[]}if(P){var Z={};for(m=0;m<v.length;m+=1)Z[v[m]]={},Z[v[m]].text=x[m],Z[v[m]].align=b[m];var X=l.call(this,Z,L);A=v.map(function(te){return new i(c,u,L[te],X,Z[te].text,void 0,Z[te].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var q=f.reduce(function(te,re){return te[re.name]=re.align,te},{});for(m=0;m<p.length;m+=1){"rowStart"in j&&j.rowStart instanceof Function&&j.rowStart({row:m,data:p[m]},this);var $=l.call(this,p[m],L);for(_=0;_<v.length;_+=1){var ee=p[m][v[_]];"cellStart"in j&&j.cellStart instanceof Function&&j.cellStart({row:m,col:_,data:ee},this),o.call(this,new i(c,u,L[v[_]],$,ee,m+2,q[v[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var p=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,j=this.internal.scaleFactor;return Object.keys(c).map(function(m){var y=c[m];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[m]-p-p)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/j+p+p},this).reduce(function(m,y){return Math.max(m,y)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var j=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){p=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(p.y=this.internal.__cell__.margins.top||0,j.push(p)),p.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(y)}j.length>0&&this.setTableHeaderRow(j),this.setFont(void 0,"normal"),r=!1}}(Ye.API);var Wb={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Gb=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$0=Vb(Gb),Yb=[100,200,300,400,500,600,700,800,900],$6=Vb(Yb);function B0(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return Wb[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof $0[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function g1(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var B6={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},v1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function b1(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function U6(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},B6,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=B0(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+b1(i)+"' and default family '"+n+"'.");if(o=function(c,u){if(u[c])return u[c];var p=$0[c],f=p<=$0.normal?-1:1,j=g1(u,Gb,p,f);if(!j)throw new Error("Could not find a matching font-stretch value for "+c);return j}(i.stretch,o),o=function(c,u){if(u[c])return u[c];for(var p=Wb[c],f=0;f<p.length;++f)if(u[p[f]])return u[p[f]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var p=$6[c],f=g1(u,Yb,p,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+b1(i)+"'.");return o}function y1(e){return e.trimLeft()}function q6(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function z6(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var vu,w1,N1,jf=["times"];(function(e){var t,r,n,a,i,o,l,c,u,p=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new c,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new p}]);var f=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=D;Object.defineProperty(this,"pdf",{get:function(){return R}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(de){V=!!de}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(de){Q=!!de}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(de){isNaN(de)||(se=de)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(de){isNaN(de)||(ue=de)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(de){var K;typeof de=="number"?K=[de,de,de,de]:((K=new Array(4))[0]=de[0],K[1]=de.length>=2?de[1]:K[0],K[2]=de.length>=3?de[2]:K[0],K[3]=de.length>=4?de[3]:K[1]),u.margin=K}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(de){ae=de}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(de){xe=de}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(de){Te=de}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(de){de instanceof p&&(u=de)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(de){u.path=de}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(de){Pe=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var K;K=j(de),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var K=j(de);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var De=null;function me(de,K){if(De===null){var Be=function(be){var ke=[];return Object.keys(be).forEach(function(Le){be[Le].forEach(function(Ee){var Oe=null;switch(Ee){case"bold":Oe={family:Le,weight:"bold"};break;case"italic":Oe={family:Le,style:"italic"};break;case"bolditalic":Oe={family:Le,weight:"bold",style:"italic"};break;case"":case"normal":Oe={family:Le}}Oe!==null&&(Oe.ref={name:Le,style:Ee},ke.push(Oe))})}),ke}(de.getFontList());De=function(be){for(var ke={},Le=0;Le<be.length;++Le){var Ee=B0(be[Le]),Oe=Ee.family,Ve=Ee.stretch,Qe=Ee.style,ot=Ee.weight;ke[Oe]=ke[Oe]||{},ke[Oe][Ve]=ke[Oe][Ve]||{},ke[Oe][Ve][Qe]=ke[Oe][Ve][Qe]||{},ke[Oe][Ve][Qe][ot]=Ee}return ke}(Be.concat(K))}return De}var Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(de){De=null,Ne=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var K;if(this.ctx.font=de,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(de))!==null){var Be=K[1];K[2];var be=K[3],ke=K[4];K[5];var Le=K[6],Ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Ee==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Ee==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Oe=function(Xe){var ct,Re,Us=[],bt=Xe.trim();if(bt==="")return jf;if(bt in v1)return[v1[bt]];for(;bt!=="";){switch(Re=null,ct=(bt=y1(bt)).charAt(0)){case'"':case"'":Re=q6(bt.substring(1),ct);break;default:Re=z6(bt)}if(Re===null||(Us.push(Re[0]),(bt=y1(Re[1]))!==""&&bt.charAt(0)!==","))return jf;bt=bt.replace(/^,/,"")}return Us}(Le);if(this.fontFaces){var Ve=U6(me(this.pdf,this.fontFaces),Oe.map(function(Xe){return{family:Xe,stretch:"normal",weight:be,style:Be}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Qe="";(be==="bold"||parseInt(be,10)>=700||Be==="bold")&&(Qe="bold"),Be==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var ot="",lt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xt=0;xt<Oe.length;xt++){if(this.pdf.internal.getFont(Oe[xt],Qe,{noFallback:!0,disableWarning:!0})!==void 0){ot=Oe[xt];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Oe[xt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Oe[xt],Qe="bold";else if(this.pdf.internal.getFont(Oe[xt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Oe[xt],Qe="normal";break}}if(ot===""){for(var Ct=0;Ct<Oe.length;Ct++)if(lt[Oe[Ct]]){ot=lt[Oe[Ct]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};f.prototype.setLineDash=function(D){this.lineDash=D},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){S.call(this,"fill",!1)},f.prototype.stroke=function(){S.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(D,R){if(isNaN(D)||isNaN(R))throw Et.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(D,R));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(D,R)},f.prototype.closePath=function(){var D=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&kt(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){D=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},f.prototype.lineTo=function(D,R){if(isNaN(D)||isNaN(R))throw Et.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(D,R));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},f.prototype.quadraticCurveTo=function(D,R,V,Q){if(isNaN(V)||isNaN(Q)||isNaN(D)||isNaN(R))throw Et.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(V,Q)),ue=this.ctx.transform.applyToPoint(new o(D,R));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},f.prototype.bezierCurveTo=function(D,R,V,Q,se,ue){if(isNaN(se)||isNaN(ue)||isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q))throw Et.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new o(se,ue)),xe=this.ctx.transform.applyToPoint(new o(D,R)),Te=this.ctx.transform.applyToPoint(new o(V,Q));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Te.x,y2:Te.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},f.prototype.arc=function(D,R,V,Q,se,ue){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(se))throw Et.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new o(D,R));D=ae.x,R=ae.y;var xe=this.ctx.transform.applyToPoint(new o(0,V)),Te=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(xe.x-Te.x,2)+Math.pow(xe.y-Te.y,2))}Math.abs(se-Q)>=2*Math.PI&&(Q=0,se=2*Math.PI),this.path.push({type:"arc",x:D,y:R,radius:V,startAngle:Q,endAngle:se,counterclockwise:ue})},f.prototype.arcTo=function(D,R,V,Q,se){throw new Error("arcTo not implemented.")},f.prototype.rect=function(D,R,V,Q){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q))throw Et.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,R),this.lineTo(D+V,R),this.lineTo(D+V,R+Q),this.lineTo(D,R+Q),this.lineTo(D,R),this.lineTo(D+V,R),this.lineTo(D,R)},f.prototype.fillRect=function(D,R,V,Q){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q))throw Et.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,R,V,Q),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},f.prototype.strokeRect=function(D,R,V,Q){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q))throw Et.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(D,R,V,Q),this.stroke())},f.prototype.clearRect=function(D,R,V,Q){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q))throw Et.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,R,V,Q))},f.prototype.save=function(D){D=typeof D!="boolean"||D;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},f.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(R),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var j=function(D){var R,V,Q,se;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))R=0,V=0,Q=0,se=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(ue!==null)R=parseInt(ue[1]),V=parseInt(ue[2]),Q=parseInt(ue[3]),se=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)R=parseInt(ue[1]),V=parseInt(ue[2]),Q=parseInt(ue[3]),se=parseFloat(ue[4]);else{if(se=1,typeof D=="string"&&D.charAt(0)!=="#"){var ae=new $b(D);D=ae.ok?ae.toHex():"#000000"}D.length===4?(R=D.substring(1,2),R+=R,V=D.substring(2,3),V+=V,Q=D.substring(3,4),Q+=Q):(R=D.substring(1,3),V=D.substring(3,5),Q=D.substring(5,7)),R=parseInt(R,16),V=parseInt(V,16),Q=parseInt(Q,16)}}return{r:R,g:V,b:Q,a:se,style:D}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(D,R,V,Q){if(isNaN(R)||isNaN(V)||typeof D!="string")throw Et.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!m.call(this)){var se=$(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;I.call(this,{text:D,x:R,y:V,scale:ue,angle:se,align:this.textAlign,maxWidth:Q})}},f.prototype.strokeText=function(D,R,V,Q){if(isNaN(R)||isNaN(V)||typeof D!="string")throw Et.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Q=isNaN(Q)?void 0:Q;var se=$(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;I.call(this,{text:D,x:R,y:V,scale:ue,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:Q})}},f.prototype.measureText=function(D){if(typeof D!="string")throw Et.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,V=this.pdf.internal.scaleFactor,Q=R.internal.getFontSize(),se=R.getStringUnitWidth(D)*Q/R.internal.scaleFactor,ue=function(ae){var xe=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new ue({width:se*=Math.round(96*V/72*1e4)/1e4})},f.prototype.scale=function(D,R){if(isNaN(D)||isNaN(R))throw Et.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(D,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.rotate=function(D){if(isNaN(D))throw Et.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.translate=function(D,R){if(isNaN(D)||isNaN(R))throw Et.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,D,R);this.ctx.transform=this.ctx.transform.multiply(V)},f.prototype.transform=function(D,R,V,Q,se,ue){if(isNaN(D)||isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(se)||isNaN(ue))throw Et.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new c(D,R,V,Q,se,ue);this.ctx.transform=this.ctx.transform.multiply(ae)},f.prototype.setTransform=function(D,R,V,Q,se,ue){D=isNaN(D)?1:D,R=isNaN(R)?0:R,V=isNaN(V)?0:V,Q=isNaN(Q)?1:Q,se=isNaN(se)?0:se,ue=isNaN(ue)?0:ue,this.ctx.transform=new c(D,R,V,Q,se,ue)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(D,R,V,Q,se,ue,ae,xe,Te){var Pe=this.pdf.getImageProperties(D),De=1,me=1,Ne=1,de=1;Q!==void 0&&xe!==void 0&&(Ne=xe/Q,de=Te/se,De=Pe.width/Q*xe/Q,me=Pe.height/se*Te/se),ue===void 0&&(ue=R,ae=V,R=0,V=0),Q!==void 0&&xe===void 0&&(xe=Q,Te=se),Q===void 0&&xe===void 0&&(xe=Pe.width,Te=Pe.height);for(var K,Be=this.ctx.transform.decompose(),be=$(Be.rotate.shx),ke=new c,Le=(ke=(ke=(ke=ke.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale)).applyToRectangle(new l(ue-R*Ne,ae-V*de,Q*De,se*me)),Ee=k.call(this,Le),Oe=[],Ve=0;Ve<Ee.length;Ve+=1)Oe.indexOf(Ee[Ve])===-1&&Oe.push(Ee[Ve]);if(b(Oe),this.autoPaging)for(var Qe=Oe[0],ot=Oe[Oe.length-1],lt=Qe;lt<ot+1;lt++){this.pdf.setPage(lt);var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=lt===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Re=lt===1?0:Xe+(lt-2)*ct;if(this.ctx.clip_path.length!==0){var Us=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(K,this.posX+this.margin[3],-Re+Ct+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Us}var bt=JSON.parse(JSON.stringify(Le));bt=x([bt],this.posX+this.margin[3],-Re+Ct+this.ctx.prevPageLastElemOffset)[0];var Zr=(lt>Qe||lt<ot)&&_.call(this);Zr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,ct,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,be),Zr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,be)};var k=function(D,R,V){var Q=[];R=R||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":Q.push(Math.floor((D.y+se)/V)+1);break;case"arc":Q.push(Math.floor((D.y+se-D.radius)/V)+1),Q.push(Math.floor((D.y+se+D.radius)/V)+1);break;case"qct":var ue=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);Q.push(Math.floor((ue.y+se)/V)+1),Q.push(Math.floor((ue.y+ue.h+se)/V)+1);break;case"bct":var ae=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);Q.push(Math.floor((ae.y+se)/V)+1),Q.push(Math.floor((ae.y+ae.h+se)/V)+1);break;case"rect":Q.push(Math.floor((D.y+se)/V)+1),Q.push(Math.floor((D.y+D.h+se)/V)+1)}for(var xe=0;xe<Q.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[xe];)v.call(this);return Q},v=function(){var D=this.fillStyle,R=this.strokeStyle,V=this.font,Q=this.lineCap,se=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=R,this.font=V,this.lineCap=Q,this.lineWidth=se,this.lineJoin=ue},x=function(D,R,V){for(var Q=0;Q<D.length;Q++)switch(D[Q].type){case"bct":D[Q].x2+=R,D[Q].y2+=V;case"qct":D[Q].x1+=R,D[Q].y1+=V;case"mt":case"lt":case"arc":default:D[Q].x+=R,D[Q].y+=V}return D},b=function(D){return D.sort(function(R,V){return R-V})},S=function(D,R){for(var V,Q,se=this.fillStyle,ue=this.strokeStyle,ae=this.lineCap,xe=this.lineWidth,Te=Math.abs(xe*this.ctx.transform.scaleX),Pe=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),me=JSON.parse(JSON.stringify(this.path)),Ne=[],de=0;de<me.length;de++)if(me[de].x!==void 0)for(var K=k.call(this,me[de]),Be=0;Be<K.length;Be+=1)Ne.indexOf(K[Be])===-1&&Ne.push(K[Be]);for(var be=0;be<Ne.length;be++)for(;this.pdf.internal.getNumberOfPages()<Ne[be];)v.call(this);if(b(Ne),this.autoPaging)for(var ke=Ne[0],Le=Ne[Ne.length-1],Ee=ke;Ee<Le+1;Ee++){this.pdf.setPage(Ee),this.fillStyle=se,this.strokeStyle=ue,this.lineCap=ae,this.lineWidth=Te,this.lineJoin=Pe;var Oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Ee===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=Ee===1?0:Qe+(Ee-2)*ot;if(this.ctx.clip_path.length!==0){var xt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(V,this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset),L.call(this,D,!0),this.path=xt}if(Q=JSON.parse(JSON.stringify(De)),this.path=x(Q,this.posX+this.margin[3],-lt+Ve+this.ctx.prevPageLastElemOffset),R===!1||Ee===0){var Ct=(Ee>ke||Ee<Le)&&_.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,ot,null).clip().discardPath()),L.call(this,D,R),Ct&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Te,L.call(this,D,R),this.lineWidth=xe;this.path=De},L=function(D,R){if((D!=="stroke"||R||!y.call(this))&&(D==="stroke"||R||!m.call(this))){for(var V,Q,se=[],ue=this.path,ae=0;ae<ue.length;ae++){var xe=ue[ae];switch(xe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:xe,deltas:[],abs:[]});break;case"lt":var Te=se.length;if(ue[ae-1]&&!isNaN(ue[ae-1].x)&&(V=[xe.x-ue[ae-1].x,xe.y-ue[ae-1].y],Te>0)){for(;Te>=0;Te--)if(se[Te-1].close!==!0&&se[Te-1].begin!==!0){se[Te-1].deltas.push(V),se[Te-1].abs.push(xe);break}}break;case"bct":V=[xe.x1-ue[ae-1].x,xe.y1-ue[ae-1].y,xe.x2-ue[ae-1].x,xe.y2-ue[ae-1].y,xe.x-ue[ae-1].x,xe.y-ue[ae-1].y],se[se.length-1].deltas.push(V);break;case"qct":var Pe=ue[ae-1].x+2/3*(xe.x1-ue[ae-1].x),De=ue[ae-1].y+2/3*(xe.y1-ue[ae-1].y),me=xe.x+2/3*(xe.x1-xe.x),Ne=xe.y+2/3*(xe.y1-xe.y),de=xe.x,K=xe.y;V=[Pe-ue[ae-1].x,De-ue[ae-1].y,me-ue[ae-1].x,Ne-ue[ae-1].y,de-ue[ae-1].x,K-ue[ae-1].y],se[se.length-1].deltas.push(V);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(xe)}}Q=R?null:D==="stroke"?"stroke":"fill";for(var Be=!1,be=0;be<se.length;be++)if(se[be].arc)for(var ke=se[be].abs,Le=0;Le<ke.length;Le++){var Ee=ke[Le];Ee.type==="arc"?N.call(this,Ee.x,Ee.y,Ee.radius,Ee.startAngle,Ee.endAngle,Ee.counterclockwise,void 0,R,!Be):Y.call(this,Ee.x,Ee.y),Be=!0}else if(se[be].close===!0)this.pdf.internal.out("h"),Be=!1;else if(se[be].begin!==!0){var Oe=se[be].start.x,Ve=se[be].start.y;G.call(this,se[be].deltas,Oe,Ve),Be=!0}Q&&P.call(this,Q),R&&M.call(this)}},T=function(D){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-V;case"top":return D+R-V;case"hanging":return D+R-2*V;case"middle":return D+R/2-V;case"ideographic":return D;case"alphabetic":default:return D}},A=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(R,V){this.colorStops.push([R,V])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(D,R,V,Q,se,ue,ae,xe,Te){for(var Pe=X.call(this,V,Q,se,ue),De=0;De<Pe.length;De++){var me=Pe[De];De===0&&(Te?E.call(this,me.x1+D,me.y1+R):Y.call(this,me.x1+D,me.y1+R)),Z.call(this,D,R,me.x2,me.y2,me.x3,me.y3,me.x4,me.y4)}xe?M.call(this):P.call(this,ae)},P=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(D,R){this.pdf.internal.out(r(D)+" "+n(R)+" m")},I=function(D){var R;switch(D.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var V=this.pdf.getTextDimensions(D.text),Q=T.call(this,D.y),se=A.call(this,Q)-V.h,ue=this.ctx.transform.applyToPoint(new o(D.x,Q)),ae=this.ctx.transform.decompose(),xe=new c;xe=(xe=(xe=xe.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var Te,Pe,De,me=this.ctx.transform.applyToRectangle(new l(D.x,Q,V.w,V.h)),Ne=xe.applyToRectangle(new l(D.x,se,V.w,V.h)),de=k.call(this,Ne),K=[],Be=0;Be<de.length;Be+=1)K.indexOf(de[Be])===-1&&K.push(de[Be]);if(b(K),this.autoPaging)for(var be=K[0],ke=K[K.length-1],Le=be;Le<ke+1;Le++){this.pdf.setPage(Le);var Ee=Le===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ve-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],lt=ot-this.margin[3],xt=Le===1?0:Oe+(Le-2)*Qe;if(this.ctx.clip_path.length!==0){var Ct=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Te,this.posX+this.margin[3],-1*xt+Ee),L.call(this,"fill",!0),this.path=Ct}var Xe=x([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-xt+Ee+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*D.scale),De=this.lineWidth,this.lineWidth=De*D.scale);var ct=this.autoPaging!=="text";if(ct||Xe.y+Xe.h<=Ve){if(ct||Xe.y>=Ee&&Xe.x<=ot){var Re=ct?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||ot-Xe.x)[0],Us=x([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-xt+Ee+this.ctx.prevPageLastElemOffset)[0],bt=ct&&(Le>be||Le<ke)&&_.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Qe,null).clip().discardPath()),this.pdf.text(Re,Us.x,Us.y,{angle:D.angle,align:R,renderingMode:D.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Xe.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-Xe.y);D.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=De)}else D.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*D.scale),De=this.lineWidth,this.lineWidth=De*D.scale),this.pdf.text(D.text,ue.x+this.posX,ue.y+this.posY,{angle:D.angle,align:R,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=De)},Y=function(D,R,V,Q){V=V||0,Q=Q||0,this.pdf.internal.out(r(D+V)+" "+n(R+Q)+" l")},G=function(D,R,V){return this.pdf.lines(D,R,V,null,null)},Z=function(D,R,V,Q,se,ue,ae,xe){this.pdf.internal.out([t(a(V+D)),t(i(Q+R)),t(a(se+D)),t(i(ue+R)),t(a(ae+D)),t(i(xe+R)),"c"].join(" "))},X=function(D,R,V,Q){for(var se=2*Math.PI,ue=Math.PI/2;R>V;)R-=se;var ae=Math.abs(V-R);ae<se&&Q&&(ae=se-ae);for(var xe=[],Te=Q?-1:1,Pe=R;ae>1e-5;){var De=Pe+Te*Math.min(ae,ue);xe.push(q.call(this,D,Pe,De)),ae-=Math.abs(De-Pe),Pe=De}return xe},q=function(D,R,V){var Q=(V-R)/2,se=D*Math.cos(Q),ue=D*Math.sin(Q),ae=se,xe=-ue,Te=ae*ae+xe*xe,Pe=Te+ae*se+xe*ue,De=4/3*(Math.sqrt(2*Te*Pe)-Pe)/(ae*ue-xe*se),me=ae-De*xe,Ne=xe+De*ae,de=me,K=-Ne,Be=Q+R,be=Math.cos(Be),ke=Math.sin(Be);return{x1:D*Math.cos(R),y1:D*Math.sin(R),x2:me*be-Ne*ke,y2:me*ke+Ne*be,x3:de*be-K*ke,y3:de*ke+K*be,x4:D*Math.cos(V),y4:D*Math.sin(V)}},$=function(D){return 180*D/Math.PI},ee=function(D,R,V,Q,se,ue){var ae=D+.5*(V-D),xe=R+.5*(Q-R),Te=se+.5*(V-se),Pe=ue+.5*(Q-ue),De=Math.min(D,se,ae,Te),me=Math.max(D,se,ae,Te),Ne=Math.min(R,ue,xe,Pe),de=Math.max(R,ue,xe,Pe);return new l(De,Ne,me-De,de-Ne)},te=function(D,R,V,Q,se,ue,ae,xe){var Te,Pe,De,me,Ne,de,K,Be,be,ke,Le,Ee,Oe,Ve,Qe=V-D,ot=Q-R,lt=se-V,xt=ue-Q,Ct=ae-se,Xe=xe-ue;for(Pe=0;Pe<41;Pe++)be=(K=(De=D+(Te=Pe/40)*Qe)+Te*((Ne=V+Te*lt)-De))+Te*(Ne+Te*(se+Te*Ct-Ne)-K),ke=(Be=(me=R+Te*ot)+Te*((de=Q+Te*xt)-me))+Te*(de+Te*(ue+Te*Xe-de)-Be),Pe==0?(Le=be,Ee=ke,Oe=be,Ve=ke):(Le=Math.min(Le,be),Ee=Math.min(Ee,ke),Oe=Math.max(Oe,be),Ve=Math.max(Ve,ke));return new l(Math.round(Le),Math.round(Ee),Math.round(Oe-Le),Math.round(Ve-Ee))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,R,V=(D=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:R}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Ye.API),function(e){var t=function(i){var o,l,c,u,p,f,j,m,y,_;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(p=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(p=((p=((p=((p=(p-(_=p%85))/85)-(y=p%85))/85)-(m=p%85))/85)-(j=p%85))/85)%85,l.push(f+33,j+33,m+33,y+33,_+33)):l.push(122);return function(k,v){for(var x=v;x>0;x--)k.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,p,f=String,j="length",m=255,y="charCodeAt",_="slice",k="replace";for(i[_](-2),i=i[_](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],u=0,p=(i+=o="uuuuu"[_](i[j]%5||5))[j];p>u;u+=5)l=52200625*(i[y](u)-33)+614125*(i[y](u+1)-33)+7225*(i[y](u+2)-33)+85*(i[y](u+3)-33)+(i[y](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(v,x){for(var b=x;b>0;b--)v.pop()}(c,o[j]),f.fromCharCode.apply(f,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=D0(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Ye.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,p){var f=new XMLHttpRequest,j=0,m=function(y){var _=y.length,k=[],v=String.fromCharCode;for(j=0;j<_;j+=1)k.push(v(255&y.charCodeAt(j)));return k.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?p(m(this.responseText)):p(void 0)}),f.send(null),u&&f.status===200)return m(f.responseText)}(a,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(Ye.API),function(e){function t(){return(Je.html2canvas?Promise.resolve(Je.html2canvas):ri(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Je.DOMPurify?Promise.resolve(Je.DOMPurify):ri(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=kt(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,p){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),j=u.firstChild;j;j=j.nextSibling)p!==!0&&j.nodeType===1&&j.nodeName==="SCRIPT"||f.appendChild(c(j,p));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var j=0;j<u.length;++j){var m=u[j],y=m.src.find(function(_){return _.format==="truetype"});y&&c.addFont(y.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Ye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,p){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,p).then(function(f){return c.updateProgress(1),f})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),p=c.call(u,o,l);return i.convert(p,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ye.getPageSize=function(o,l,c){if(kt(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var p,f=(""+c).toLowerCase(),j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}var m,y=0,_=0;if(j.hasOwnProperty(f))y=j[f][1]/p,_=j[f][0]/p;else try{y=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>y&&(m=_,_=y,y=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>_&&(m=_,_=y,y=m)}return{width:_,height:y,unit:l,k:p,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(B0):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Ye.API),Ye.API.addJS=function(e){return N1=e,this.internal.events.subscribe("postPutResources",function(){vu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),w1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+N1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vu!==void 0&&w1!==void 0&&this.internal.out("/Names <</JavaScript "+vu+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,p=[];for(i=0;i<u;i++){var f=r.internal.newObject();p.push(f);var j=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+j.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<p.length;i++)r.internal.write("(page_"+(i+1)+")"+p[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Ye.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var c,u=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var j,m=256*f.charCodeAt(4)+f.charCodeAt(5),y=f.length,_={width:0,height:0,numcomponents:1},k=4;k<y;k+=2){if(k+=m,t.indexOf(f.charCodeAt(k+1))!==-1){j=256*f.charCodeAt(k+5)+f.charCodeAt(k+6),_={width:256*f.charCodeAt(k+7)+f.charCodeAt(k+8),height:j,numcomponents:f.charCodeAt(k+9)};break}m=256*f.charCodeAt(k+2)+f.charCodeAt(k+3)}return _}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}p={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return p}}(Ye.API);var Eo,bu,j1,_1,S1,H6=function(){var e,t,r;function n(i){var o,l,c,u,p,f,j,m,y,_,k,v,x,b;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),y=(function(){var S,L;for(L=[],S=0;S<4;++S)L.push(String.fromCharCode(this.data[this.pos++]));return L}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*p/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(f!=null?f.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(x=0;0<=_?x<_:x>_;0<=_?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":j=(k=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,j)),this.text[m]=String.fromCharCode.apply(String,k.slice(j+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function p(f,j,m,y){var _,k,v,x,b,S,L,T,A,N,P,M,E,I,Y,G,Z,X,q,$,ee,te=Math.ceil((u.width-f)/m),re=Math.ceil((u.height-j)/y),D=u.width==te&&u.height==re;for(I=o*te,M=D?l:new Uint8Array(I*re),S=i.length,E=0,k=0;E<re&&c<S;){switch(i[c++]){case 0:for(x=Z=0;Z<I;x=Z+=1)M[k++]=i[c++];break;case 1:for(x=X=0;X<I;x=X+=1)_=i[c++],b=x<o?0:M[k-o],M[k++]=(_+b)%256;break;case 2:for(x=q=0;q<I;x=q+=1)_=i[c++],v=(x-x%o)/o,Y=E&&M[(E-1)*I+v*o+x%o],M[k++]=(Y+_)%256;break;case 3:for(x=$=0;$<I;x=$+=1)_=i[c++],v=(x-x%o)/o,b=x<o?0:M[k-o],Y=E&&M[(E-1)*I+v*o+x%o],M[k++]=(_+Math.floor((b+Y)/2))%256;break;case 4:for(x=ee=0;ee<I;x=ee+=1)_=i[c++],v=(x-x%o)/o,b=x<o?0:M[k-o],E===0?Y=G=0:(Y=M[(E-1)*I+v*o+x%o],G=v&&M[(E-1)*I+(v-1)*o+x%o]),L=b+Y-G,T=Math.abs(L-b),N=Math.abs(L-Y),P=Math.abs(L-G),A=T<=N&&T<=P?b:N<=P?Y:G,M[k++]=(_+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!D){var R=((j+E*y)*u.width+f)*o,V=E*I;for(x=0;x<te;x+=1){for(var Q=0;Q<o;Q+=1)l[R++]=M[V++];R+=(m-1)*o}}E++}}return i=N6(i),u.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,u,p,f,j,m;for(l=this.palette,p=this.transparency.indexed||[],u=new Uint8Array((p.length||0)+l.length),c=0,i=0,o=f=0,j=l.length;f<j;o=f+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(m=p[i++])!=null?m:255;return u},n.prototype.copyToImageData=function(i,o){var l,c,u,p,f,j,m,y,_,k,v;if(c=this.colors,_=null,l=this.hasAlphaChannel,this.palette.length&&(_=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(u=i.data||i).length,f=_||o,p=j=0,c===1)for(;p<y;)m=_?4*o[p/4]:j,k=f[m++],u[p++]=k,u[p++]=k,u[p++]=k,u[p++]=l?f[m++]:255,j=m;else for(;p<y;)m=_?4*o[p/4]:j,u[p++]=f[m++],u[p++]=f[m++],u[p++]=f[m++],u[p++]=l?f[m++]:255,j=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Je)==="[object Window]"){try{t=Je.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,u,p,f,j,m;if(this.animation){for(m=[],l=p=0,f=(j=this.animation.frames).length;p<f;l=++p)o=j[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,m.push(o.image=e(c));return m}},n.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,u,p,f,j=this;return l=0,f=this.animation,u=f.numFrames,c=f.frames,p=f.numPlays,(o=function(){var m,y;if(m=l++%u,y=c[m],j.renderFrame(i,m),u>1&&l/u<p)return j.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function V6(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,p=[],f=0,j=null,m=0,y=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var _=e[t++];f=e[t++]|e[t++]<<8,j=e[t++],!(1&_)&&(j=null),m=_>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,S=e[t++],L=S>>6&1,T=1<<(7&S)+1,A=l,N=c,P=!1;S>>7&&(P=!0,A=t,N=T,t+=3*T);var M=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}p.push({x:k,y:v,width:x,height:b,has_local_palette:P,palette_offset:A,palette_size:N,data_offset:M,data_length:t-M,transparent_index:j,interlaced:!!L,delay:f,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return y},this.frameInfo=function(I){if(I<0||I>=p.length)throw new Error("Frame index out of range.");return p[I]},this.decodeAndBlitFrameBGRA=function(I,Y){var G=this.frameInfo(I),Z=G.width*G.height,X=new Uint8Array(Z);k1(e,G.data_offset,X,Z);var q=G.palette_offset,$=G.transparent_index;$===null&&($=256);var ee=G.width,te=r-ee,re=ee,D=4*(G.y*r+G.x),R=4*((G.y+G.height)*r+G.x),V=D,Q=4*te;G.interlaced===!0&&(Q+=4*r*7);for(var se=8,ue=0,ae=X.length;ue<ae;++ue){var xe=X[ue];if(re===0&&(re=ee,(V+=Q)>=R&&(Q=4*te+4*r*(se-1),V=D+(ee+te)*(se<<1),se>>=1)),xe===$)V+=4;else{var Te=e[q+3*xe],Pe=e[q+3*xe+1],De=e[q+3*xe+2];Y[V++]=De,Y[V++]=Pe,Y[V++]=Te,Y[V++]=255}--re}},this.decodeAndBlitFrameRGBA=function(I,Y){var G=this.frameInfo(I),Z=G.width*G.height,X=new Uint8Array(Z);k1(e,G.data_offset,X,Z);var q=G.palette_offset,$=G.transparent_index;$===null&&($=256);var ee=G.width,te=r-ee,re=ee,D=4*(G.y*r+G.x),R=4*((G.y+G.height)*r+G.x),V=D,Q=4*te;G.interlaced===!0&&(Q+=4*r*7);for(var se=8,ue=0,ae=X.length;ue<ae;++ue){var xe=X[ue];if(re===0&&(re=ee,(V+=Q)>=R&&(Q=4*te+4*r*(se-1),V=D+(ee+te)*(se<<1),se>>=1)),xe===$)V+=4;else{var Te=e[q+3*xe],Pe=e[q+3*xe+1],De=e[q+3*xe+2];Y[V++]=Te,Y[V++]=Pe,Y[V++]=De,Y[V++]=255}--re}}}function k1(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,u=(1<<c)-1,p=0,f=0,j=0,m=e[t++],y=new Int32Array(4096),_=null;;){for(;p<16&&m!==0;)f|=e[t++]<<p,p+=8,m===1?m=e[t++]:--m;if(p<c)break;var k=f&u;if(f>>=c,p-=c,k!==i){if(k===o)break;for(var v=k<l?k:_,x=0,b=v;b>i;)b=y[b]>>8,++x;var S=b;if(j+x+(v!==k?1:0)>n)return void Et.log("Warning, gif stream longer than expected.");r[j++]=S;var L=j+=x;for(v!==k&&(r[j++]=S),b=v;x--;)b=y[b],r[--L]=255&b,b>>=8;_!==null&&l<4096&&(y[l++]=_<<8|S,l>=u+1&&c<12&&(++c,u=u<<1|1)),_=k}else l=o+1,u=(1<<(c=a+1))-1,_=null}return j!==n&&Et.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _f(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),p=new Array(64),f=new Array(65535),j=new Array(65535),m=new Array(64),y=new Array(64),_=[],k=0,v=7,x=new Array(64),b=new Array(64),S=new Array(64),L=new Array(256),T=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(D,R){for(var V=0,Q=0,se=new Array,ue=1;ue<=16;ue++){for(var ae=1;ae<=D[ue];ae++)se[R[Q]]=[],se[R[Q]][0]=V,se[R[Q]][1]=ue,Q++,V++;V*=2}return se}function q(D){for(var R=D[0],V=D[1]-1;V>=0;)R&1<<V&&(k|=1<<v),V--,--v<0&&(k==255?($(255),$(0)):$(k),v=7,k=0)}function $(D){_.push(D)}function ee(D){$(D>>8&255),$(255&D)}function te(D,R,V,Q,se){for(var ue,ae=se[0],xe=se[240],Te=function(ke,Le){var Ee,Oe,Ve,Qe,ot,lt,xt,Ct,Xe,ct,Re=0;for(Xe=0;Xe<8;++Xe){Ee=ke[Re],Oe=ke[Re+1],Ve=ke[Re+2],Qe=ke[Re+3],ot=ke[Re+4],lt=ke[Re+5],xt=ke[Re+6];var Us=Ee+(Ct=ke[Re+7]),bt=Ee-Ct,Zr=Oe+xt,Pt=Oe-xt,qt=Ve+lt,An=Ve-lt,Nt=Qe+ot,hi=Qe-ot,Xt=Us+Nt,en=Us-Nt,Kn=Zr+qt,Qt=Zr-qt;ke[Re]=Xt+Kn,ke[Re+4]=Xt-Kn;var et=.707106781*(Qt+en);ke[Re+2]=en+et,ke[Re+6]=en-et;var jt=.382683433*((Xt=hi+An)-(Qt=Pt+bt)),mi=.5411961*Xt+jt,Os=1.306562965*Qt+jt,Cn=.707106781*(Kn=An+Pt),Tn=bt+Cn,Ke=bt-Cn;ke[Re+5]=Ke+mi,ke[Re+3]=Ke-mi,ke[Re+1]=Tn+Os,ke[Re+7]=Tn-Os,Re+=8}for(Re=0,Xe=0;Xe<8;++Xe){Ee=ke[Re],Oe=ke[Re+8],Ve=ke[Re+16],Qe=ke[Re+24],ot=ke[Re+32],lt=ke[Re+40],xt=ke[Re+48];var tn=Ee+(Ct=ke[Re+56]),Pn=Ee-Ct,cr=Oe+xt,ys=Oe-xt,ms=Ve+lt,_r=Ve-lt,Ki=Qe+ot,Jn=Qe-ot,sn=tn+Ki,rn=tn-Ki,nn=cr+ms,Ln=cr-ms;ke[Re]=sn+nn,ke[Re+32]=sn-nn;var Fr=.707106781*(Ln+rn);ke[Re+16]=rn+Fr,ke[Re+48]=rn-Fr;var En=.382683433*((sn=Jn+_r)-(Ln=ys+Pn)),fi=.5411961*sn+En,Ji=1.306562965*Ln+En,Xi=.707106781*(nn=_r+ys),Qi=Pn+Xi,Zi=Pn-Xi;ke[Re+40]=Zi+fi,ke[Re+24]=Zi-fi,ke[Re+8]=Qi+Ji,ke[Re+56]=Qi-Ji,Re++}for(Xe=0;Xe<64;++Xe)ct=ke[Xe]*Le[Xe],m[Xe]=ct>0?ct+.5|0:ct-.5|0;return m}(D,R),Pe=0;Pe<64;++Pe)y[A[Pe]]=Te[Pe];var De=y[0]-V;V=y[0],De==0?q(Q[0]):(q(Q[j[ue=32767+De]]),q(f[ue]));for(var me=63;me>0&&y[me]==0;)me--;if(me==0)return q(ae),V;for(var Ne,de=1;de<=me;){for(var K=de;y[de]==0&&de<=me;)++de;var Be=de-K;if(Be>=16){Ne=Be>>4;for(var be=1;be<=Ne;++be)q(xe);Be&=15}ue=32767+y[de],q(se[(Be<<4)+j[ue]]),q(f[ue]),de++}return me!=63&&q(ae),V}function re(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(R){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var se=o((V[Q]*R+50)/100);se=Math.min(Math.max(se,1),255),l[A[Q]]=se}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var xe=o((ue[ae]*R+50)/100);xe=Math.min(Math.max(xe,1),255),c[A[ae]]=xe}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,De=0;De<8;De++)for(var me=0;me<8;me++)u[Pe]=1/(l[A[Pe]]*Te[De]*Te[me]*8),p[Pe]=1/(c[A[Pe]]*Te[De]*Te[me]*8),Pe++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,R){R&&re(R),_=new Array,k=0,v=7,ee(65496),ee(65504),ee(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),ee(1),ee(1),$(0),$(0),function(){ee(65499),ee(132),$(0);for(var Oe=0;Oe<64;Oe++)$(l[Oe]);$(1);for(var Ve=0;Ve<64;Ve++)$(c[Ve])}(),function(Oe,Ve){ee(65472),ee(17),$(8),ee(Ve),ee(Oe),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(D.width,D.height),function(){ee(65476),ee(418),$(0);for(var Oe=0;Oe<16;Oe++)$(N[Oe+1]);for(var Ve=0;Ve<=11;Ve++)$(P[Ve]);$(16);for(var Qe=0;Qe<16;Qe++)$(M[Qe+1]);for(var ot=0;ot<=161;ot++)$(E[ot]);$(1);for(var lt=0;lt<16;lt++)$(I[lt+1]);for(var xt=0;xt<=11;xt++)$(Y[xt]);$(17);for(var Ct=0;Ct<16;Ct++)$(G[Ct+1]);for(var Xe=0;Xe<=161;Xe++)$(Z[Xe])}(),ee(65498),ee(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var V=0,Q=0,se=0;k=0,v=7,this.encode.displayName="_encode_";for(var ue,ae,xe,Te,Pe,De,me,Ne,de,K=D.data,Be=D.width,be=D.height,ke=4*Be,Le=0;Le<be;){for(ue=0;ue<ke;){for(Pe=ke*Le+ue,me=-1,Ne=0,de=0;de<64;de++)De=Pe+(Ne=de>>3)*ke+(me=4*(7&de)),Le+Ne>=be&&(De-=ke*(Le+1+Ne-be)),ue+me>=ke&&(De-=ue+me-ke+4),ae=K[De++],xe=K[De++],Te=K[De++],x[de]=(T[ae]+T[xe+256>>0]+T[Te+512>>0]>>16)-128,b[de]=(T[ae+768>>0]+T[xe+1024>>0]+T[Te+1280>>0]>>16)-128,S[de]=(T[ae+1280>>0]+T[xe+1536>>0]+T[Te+1792>>0]>>16)-128;V=te(x,u,V,t,n),Q=te(b,p,Q,r,a),se=te(S,p,se,r,a),ue+=32}Le+=8}if(v>=0){var Ee=[];Ee[1]=v+1,Ee[0]=(1<<v+1)-1,q(Ee)}return ee(65497),new Uint8Array(_)},e=e||50,function(){for(var D=String.fromCharCode,R=0;R<256;R++)L[R]=D(R)}(),t=X(N,P),r=X(I,Y),n=X(M,E),a=X(G,Z),function(){for(var D=1,R=2,V=1;V<=15;V++){for(var Q=D;Q<R;Q++)j[32767+Q]=V,f[32767+Q]=[],f[32767+Q][1]=V,f[32767+Q][0]=Q;for(var se=-(R-1);se<=-D;se++)j[32767+se]=V,f[32767+se]=[],f[32767+se][1]=V,f[32767+se][0]=R-1+se;D<<=1,R<<=1}}(),function(){for(var D=0;D<256;D++)T[D]=19595*D,T[D+256>>0]=38470*D,T[D+512>>0]=7471*D+32768,T[D+768>>0]=-11059*D,T[D+1024>>0]=-21709*D,T[D+1280>>0]=32768*D+8421375,T[D+1536>>0]=-27439*D,T[D+1792>>0]=-5329*D}(),re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function mn(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function A1(e){function t(N){if(!N)throw Error("assert :P")}function r(N,P,M){for(var E=0;4>E;E++)if(N[P+E]!=M.charCodeAt(E))return!0;return!1}function n(N,P,M,E,I){for(var Y=0;Y<I;Y++)N[P+Y]=M[E+Y]}function a(N,P,M,E){for(var I=0;I<E;I++)N[P+I]=M}function i(N){return new Int32Array(N)}function o(N,P){for(var M=[],E=0;E<N;E++)M.push(new P);return M}function l(N,P){var M=[];return function E(I,Y,G){for(var Z=G[Y],X=0;X<Z&&(I.push(G.length>Y+1?[]:new P),!(G.length<Y+1));X++)E(I[X],Y+1,G)}(M,0,N),M}var c=function(){var N=this;function P(d,h){for(var w=1<<h-1>>>0;d&w;)w>>>=1;return w?(d&w-1)+w:d}function M(d,h,w,C,O){t(!(C%w));do d[h+(C-=w)]=O;while(0<C)}function E(d,h,w,C,O){if(t(2328>=O),512>=O)var B=i(512);else if((B=i(O))==null)return 0;return function(U,z,H,W,oe,ge){var ve,he,Se=z,ye=1<<H,le=i(16),ce=i(16);for(t(oe!=0),t(W!=null),t(U!=null),t(0<H),he=0;he<oe;++he){if(15<W[he])return 0;++le[W[he]]}if(le[0]==oe)return 0;for(ce[1]=0,ve=1;15>ve;++ve){if(le[ve]>1<<ve)return 0;ce[ve+1]=ce[ve]+le[ve]}for(he=0;he<oe;++he)ve=W[he],0<W[he]&&(ge[ce[ve]++]=he);if(ce[15]==1)return(W=new I).g=0,W.value=ge[0],M(U,Se,1,ye,W),ye;var je,Ae=-1,_e=ye-1,Ue=0,Fe=1,Ge=1,Me=1<<H;for(he=0,ve=1,oe=2;ve<=H;++ve,oe<<=1){if(Fe+=Ge<<=1,0>(Ge-=le[ve]))return 0;for(;0<le[ve];--le[ve])(W=new I).g=ve,W.value=ge[he++],M(U,Se+Ue,oe,Me,W),Ue=P(Ue,ve)}for(ve=H+1,oe=2;15>=ve;++ve,oe<<=1){if(Fe+=Ge<<=1,0>(Ge-=le[ve]))return 0;for(;0<le[ve];--le[ve]){if(W=new I,(Ue&_e)!=Ae){for(Se+=Me,je=1<<(Ae=ve)-H;15>Ae&&!(0>=(je-=le[Ae]));)++Ae,je<<=1;ye+=Me=1<<(je=Ae-H),U[z+(Ae=Ue&_e)].g=je+H,U[z+Ae].value=Se-z-Ae}W.g=ve-H,W.value=ge[he++],M(U,Se+(Ue>>H),oe,Me,W),Ue=P(Ue,ve)}}return Fe!=2*ce[15]-1?0:ye}(d,h,w,C,O,B)}function I(){this.value=this.g=0}function Y(){this.value=this.g=0}function G(){this.G=o(5,I),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Fs,Y)}function Z(d,h,w,C){t(d!=null),t(h!=null),t(2147483648>C),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=h,d.pa=w,d.Jd=h,d.Yc=w+C,d.Zc=4<=C?w+C-4+1:w,ue(d)}function X(d,h){for(var w=0;0<h--;)w|=xe(d,128)<<h;return w}function q(d,h){var w=X(d,h);return ae(d)?-w:w}function $(d,h,w,C){var O,B=0;for(t(d!=null),t(h!=null),t(4294967288>C),d.Sb=C,d.Ra=0,d.u=0,d.h=0,4<C&&(C=4),O=0;O<C;++O)B+=h[w+O]<<8*O;d.Ra=B,d.bb=C,d.oa=h,d.pa=w}function ee(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<po-8>>>0,++d.bb,d.u-=8;V(d)&&(d.h=1,d.u=0)}function te(d,h){if(t(0<=h),!d.h&&h<=fo){var w=R(d)&mo[h];return d.u+=h,ee(d),w}return d.h=1,d.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(d){return d.Ra>>>(d.u&po-1)>>>0}function V(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>po}function Q(d,h){d.u=h,d.h=V(d)}function se(d){d.u>=Ul&&(t(d.u>=Ul),ee(d))}function ue(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ae(d){return X(d,1)}function xe(d,h){var w=d.Ca;0>d.b&&ue(d);var C=d.b,O=w*h>>>8,B=(d.I>>>C>O)+0;for(B?(w-=O,d.I-=O+1<<C>>>0):w=O+1,C=w,O=0;256<=C;)O+=8,C>>=8;return C=7^O+ur[C],d.b-=C,d.Ca=(w<<C)-1,B}function Te(d,h,w){d[h+0]=w>>24&255,d[h+1]=w>>16&255,d[h+2]=w>>8&255,d[h+3]=w>>0&255}function Pe(d,h){return d[h+0]<<0|d[h+1]<<8}function De(d,h){return Pe(d,h)|d[h+2]<<16}function me(d,h){return Pe(d,h)|Pe(d,h+2)<<16}function Ne(d,h){var w=1<<h;return t(d!=null),t(0<h),d.X=i(w),d.X==null?0:(d.Mb=32-h,d.Xa=h,1)}function de(d,h){t(d!=null),t(h!=null),t(d.Xa==h.Xa),n(h.X,0,d.X,0,1<<h.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function Be(d,h,w,C){t(w!=null),t(C!=null);var O=w[0],B=C[0];return O==0&&(O=(d*B+h/2)/h),B==0&&(B=(h*O+d/2)/d),0>=O||0>=B?0:(w[0]=O,C[0]=B,1)}function be(d,h){return d+(1<<h)-1>>>h}function ke(d,h){return((4278255360&d)+(4278255360&h)>>>0&4278255360)+((16711935&d)+(16711935&h)>>>0&16711935)>>>0}function Le(d,h){N[h]=function(w,C,O,B,U,z,H){var W;for(W=0;W<U;++W){var oe=N[d](z[H+W-1],O,B+W);z[H+W]=ke(w[C+W],oe)}}}function Ee(){this.ud=this.hd=this.jd=0}function Oe(d,h){return((4278124286&(d^h))>>>1)+(d&h)>>>0}function Ve(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Qe(d,h){return Ve(d+(d-h+.5>>1))}function ot(d,h,w){return Math.abs(h-w)-Math.abs(d-w)}function lt(d,h,w,C,O,B,U){for(C=B[U-1],w=0;w<O;++w)B[U+w]=C=ke(d[h+w],C)}function xt(d,h,w,C,O){var B;for(B=0;B<w;++B){var U=d[h+B],z=U>>8&255,H=16711935&(H=(H=16711935&U)+((z<<16)+z));C[O+B]=(4278255360&U)+H>>>0}}function Ct(d,h){h.jd=d>>0&255,h.hd=d>>8&255,h.ud=d>>16&255}function Xe(d,h,w,C,O,B){var U;for(U=0;U<C;++U){var z=h[w+U],H=z>>>8,W=z,oe=255&(oe=(oe=z>>>16)+((d.jd<<24>>24)*(H<<24>>24)>>>5));W=255&(W=(W=W+((d.hd<<24>>24)*(H<<24>>24)>>>5))+((d.ud<<24>>24)*(oe<<24>>24)>>>5)),O[B+U]=(4278255360&z)+(oe<<16)+W}}function ct(d,h,w,C,O){N[h]=function(B,U,z,H,W,oe,ge,ve,he){for(H=ge;H<ve;++H)for(ge=0;ge<he;++ge)W[oe++]=O(z[C(B[U++])])},N[d]=function(B,U,z,H,W,oe,ge){var ve=8>>B.b,he=B.Ea,Se=B.K[0],ye=B.w;if(8>ve)for(B=(1<<B.b)-1,ye=(1<<ve)-1;U<z;++U){var le,ce=0;for(le=0;le<he;++le)le&B||(ce=C(H[W++])),oe[ge++]=O(Se[ce&ye]),ce>>=ve}else N["VP8LMapColor"+w](H,W,Se,ye,oe,ge,U,z,he)}}function Re(d,h,w,C,O){for(w=h+w;h<w;){var B=d[h++];C[O++]=B>>16&255,C[O++]=B>>8&255,C[O++]=B>>0&255}}function Us(d,h,w,C,O){for(w=h+w;h<w;){var B=d[h++];C[O++]=B>>16&255,C[O++]=B>>8&255,C[O++]=B>>0&255,C[O++]=B>>24&255}}function bt(d,h,w,C,O){for(w=h+w;h<w;){var B=(U=d[h++])>>16&240|U>>12&15,U=U>>0&240|U>>28&15;C[O++]=B,C[O++]=U}}function Zr(d,h,w,C,O){for(w=h+w;h<w;){var B=(U=d[h++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;C[O++]=B,C[O++]=U}}function Pt(d,h,w,C,O){for(w=h+w;h<w;){var B=d[h++];C[O++]=B>>0&255,C[O++]=B>>8&255,C[O++]=B>>16&255}}function qt(d,h,w,C,O,B){if(B==0)for(w=h+w;h<w;)Te(C,((B=d[h++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),O+=32;else n(C,O,d,h,w)}function An(d,h){N[h][0]=N[d+"0"],N[h][1]=N[d+"1"],N[h][2]=N[d+"2"],N[h][3]=N[d+"3"],N[h][4]=N[d+"4"],N[h][5]=N[d+"5"],N[h][6]=N[d+"6"],N[h][7]=N[d+"7"],N[h][8]=N[d+"8"],N[h][9]=N[d+"9"],N[h][10]=N[d+"10"],N[h][11]=N[d+"11"],N[h][12]=N[d+"12"],N[h][13]=N[d+"13"],N[h][14]=N[d+"0"],N[h][15]=N[d+"0"]}function Nt(d){return d==bm||d==ym||d==Od||d==wm}function hi(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function en(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hi,this.f.kb=new Xt,this.sd=null}function Kn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function et(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function jt(d,h){var w=d.T,C=h.ba.f.RGBA,O=C.eb,B=C.fb+d.ka*C.A,U=qr[h.ba.S],z=d.y,H=d.O,W=d.f,oe=d.N,ge=d.ea,ve=d.W,he=h.cc,Se=h.dc,ye=h.Mc,le=h.Nc,ce=d.ka,je=d.ka+d.T,Ae=d.U,_e=Ae+1>>1;for(ce==0?U(z,H,null,null,W,oe,ge,ve,W,oe,ge,ve,O,B,null,null,Ae):(U(h.ec,h.fc,z,H,he,Se,ye,le,W,oe,ge,ve,O,B-C.A,O,B,Ae),++w);ce+2<je;ce+=2)he=W,Se=oe,ye=ge,le=ve,oe+=d.Rc,ve+=d.Rc,B+=2*C.A,U(z,(H+=2*d.fa)-d.fa,z,H,he,Se,ye,le,W,oe,ge,ve,O,B-C.A,O,B,Ae);return H+=d.fa,d.j+je<d.o?(n(h.ec,h.fc,z,H,Ae),n(h.cc,h.dc,W,oe,_e),n(h.Mc,h.Nc,ge,ve,_e),w--):1&je||U(z,H,null,null,W,oe,ge,ve,W,oe,ge,ve,O,B+C.A,null,null,Ae),w}function mi(d,h,w){var C=d.F,O=[d.J];if(C!=null){var B=d.U,U=h.ba.S,z=U==Dd||U==Od;h=h.ba.f.RGBA;var H=[0],W=d.ka;H[0]=d.T,d.Kb&&(W==0?--H[0]:(--W,O[0]-=d.width),d.j+d.ka+d.T==d.o&&(H[0]=d.o-d.j-W));var oe=h.eb;W=h.fb+W*h.A,d=Ot(C,O[0],d.width,B,H,oe,W+(z?0:3),h.A),t(w==H),d&&Nt(U)&&Br(oe,W,z,B,H,h.A)}return 0}function Os(d){var h=d.ma,w=h.ba.S,C=11>w,O=w==Ed||w==Id||w==Dd||w==vm||w==12||Nt(w);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!$l(h.Oa,d,O?11:12))return 0;if(O&&Nt(w)&&Ce(),d.da)alert("todo:use_scaling");else{if(C){if(h.Ib=et,d.Kb){if(w=d.U+1>>1,h.memory=i(d.U+2*w),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+d.U,h.Mc=h.cc,h.Nc=h.dc+w,h.Ib=jt,Ce()}}else alert("todo:EmitYUV");O&&(h.Jb=mi,C&&pe())}if(C&&!ux){for(d=0;256>d;++d)gy[d]=89858*(d-128)+Md>>Fd,yy[d]=-22014*(d-128)+Md,by[d]=-45773*(d-128),vy[d]=113618*(d-128)+Md>>Fd;for(d=Yl;d<_m;++d)h=76283*(d-16)+Md>>Fd,wy[d-Yl]=Sr(h,255),Ny[d-Yl]=Sr(h+8>>4,15);ux=1}return 1}function Cn(d){var h=d.ma,w=d.U,C=d.T;return t(!(1&d.ka)),0>=w||0>=C?0:(w=h.Ib(d,h),h.Jb!=null&&h.Jb(d,h,w),h.Dc+=w,1)}function Tn(d){d.ma.memory=null}function Ke(d,h,w,C){return te(d,8)!=47?0:(h[0]=te(d,14)+1,w[0]=te(d,14)+1,C[0]=te(d,1),te(d,3)!=0?0:!d.h)}function tn(d,h){if(4>d)return d+1;var w=d-2>>1;return(2+(1&d)<<w)+te(h,w)+1}function Pn(d,h){return 120<h?h-120:1<=(w=((w=ry[h-1])>>4)*d+(8-(15&w)))?w:1;var w}function cr(d,h,w){var C=R(w),O=d[h+=255&C].g-8;return 0<O&&(Q(w,w.u+8),C=R(w),h+=d[h].value,h+=C&(1<<O)-1),Q(w,w.u+d[h].g),d[h].value}function ys(d,h,w){return w.g+=d.g,w.value+=d.value<<h>>>0,t(8>=w.g),d.g}function ms(d,h,w){var C=d.xc;return t((h=C==0?0:d.vc[d.md*(w>>C)+(h>>C)])<d.Wb),d.Ya[h]}function _r(d,h,w,C){var O=d.ab,B=d.c*h,U=d.C;h=U+h;var z=w,H=C;for(C=d.Ta,w=d.Ua;0<O--;){var W=d.gc[O],oe=U,ge=h,ve=z,he=H,Se=(H=C,z=w,W.Ea);switch(t(oe<ge),t(ge<=W.nc),W.hc){case 2:Sd(ve,he,(ge-oe)*Se,H,z);break;case 0:var ye=oe,le=ge,ce=H,je=z,Ae=(Me=W).Ea;ye==0&&(xm(ve,he,null,null,1,ce,je),lt(ve,he+1,0,0,Ae-1,ce,je+1),he+=Ae,je+=Ae,++ye);for(var _e=1<<Me.b,Ue=_e-1,Fe=be(Ae,Me.b),Ge=Me.K,Me=Me.w+(ye>>Me.b)*Fe;ye<le;){var yt=Ge,_t=Me,gt=1;for(ql(ve,he,ce,je-Ae,1,ce,je);gt<Ae;){var mt=(gt&~Ue)+_e;mt>Ae&&(mt=Ae),(0,ja[yt[_t++]>>8&15])(ve,he+ +gt,ce,je+gt-Ae,mt-gt,ce,je+gt),gt=mt}he+=Ae,je+=Ae,++ye&Ue||(Me+=Fe)}ge!=W.nc&&n(H,z-Se,H,z+(ge-oe-1)*Se,Se);break;case 1:for(Se=ve,le=he,Ae=(ve=W.Ea)-(je=ve&~(ce=(he=1<<W.b)-1)),ye=be(ve,W.b),_e=W.K,W=W.w+(oe>>W.b)*ye;oe<ge;){for(Ue=_e,Fe=W,Ge=new Ee,Me=le+je,yt=le+ve;le<Me;)Ct(Ue[Fe++],Ge),bi(Ge,Se,le,he,H,z),le+=he,z+=he;le<yt&&(Ct(Ue[Fe++],Ge),bi(Ge,Se,le,Ae,H,z),le+=Ae,z+=Ae),++oe&ce||(W+=ye)}break;case 3:if(ve==H&&he==z&&0<W.b){for(le=H,ve=Se=z+(ge-oe)*Se-(je=(ge-oe)*be(W.Ea,W.b)),he=H,ce=z,ye=[],je=(Ae=je)-1;0<=je;--je)ye[je]=he[ce+je];for(je=Ae-1;0<=je;--je)le[ve+je]=ye[je];Mr(W,oe,ge,H,Se,H,z)}else Mr(W,oe,ge,ve,he,H,z)}z=C,H=w}H!=w&&n(C,w,z,H,B)}function Ki(d,h){var w=d.V,C=d.Ba+d.c*d.C,O=h-d.C;if(t(h<=d.l.o),t(16>=O),0<O){var B=d.l,U=d.Ta,z=d.Ua,H=B.width;if(_r(d,O,w,C),O=z=[z],t((w=d.C)<(C=h)),t(B.v<B.va),C>B.o&&(C=B.o),w<B.j){var W=B.j-w;w=B.j,O[0]+=W*H}if(w>=C?w=0:(O[0]+=4*B.v,B.ka=w-B.j,B.U=B.va-B.v,B.T=C-w,w=1),w){if(z=z[0],11>(w=d.ca).S){var oe=w.f.RGBA,ge=(C=w.S,O=B.U,B=B.T,W=oe.eb,oe.A),ve=B;for(oe=oe.fb+d.Ma*oe.A;0<ve--;){var he=U,Se=z,ye=O,le=W,ce=oe;switch(C){case Ld:hr(he,Se,ye,le,ce);break;case Ed:er(he,Se,ye,le,ce);break;case bm:er(he,Se,ye,le,ce),Br(le,ce,0,ye,1,0);break;case tx:ea(he,Se,ye,le,ce);break;case Id:qt(he,Se,ye,le,ce,1);break;case ym:qt(he,Se,ye,le,ce,1),Br(le,ce,0,ye,1,0);break;case Dd:qt(he,Se,ye,le,ce,0);break;case Od:qt(he,Se,ye,le,ce,0),Br(le,ce,1,ye,1,0);break;case vm:_a(he,Se,ye,le,ce);break;case wm:_a(he,Se,ye,le,ce),Dt(le,ce,ye,1,0);break;case sx:Zn(he,Se,ye,le,ce);break;default:t(0)}z+=H,oe+=ge}d.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=w.height)}}d.C=h,t(d.C<=d.i)}function Jn(d){var h;if(0<d.ua)return 0;for(h=0;h<d.Wb;++h){var w=d.Ya[h].G,C=d.Ya[h].H;if(0<w[1][C[1]+0].g||0<w[2][C[2]+0].g||0<w[3][C[3]+0].g)return 0}return 1}function sn(d,h,w,C,O,B){if(d.Z!=0){var U=d.qd,z=d.rd;for(t(Ca[d.Z]!=null);h<w;++h)Ca[d.Z](U,z,C,O,C,O,B),U=C,z=O,O+=B;d.qd=U,d.rd=z}}function rn(d,h){var w=d.l.ma,C=w.Z==0||w.Z==1?d.l.j:d.C;if(C=d.C<C?C:d.C,t(h<=d.l.o),h>C){var O=d.l.width,B=w.ca,U=w.tb+O*C,z=d.V,H=d.Ba+d.c*C,W=d.gc;t(d.ab==1),t(W[0].hc==3),kd(W[0],C,h,z,H,B,U),sn(w,C,h,B,U,O)}d.C=d.Ma=h}function nn(d,h,w,C,O,B,U){var z=d.$/C,H=d.$%C,W=d.m,oe=d.s,ge=w+d.$,ve=ge;O=w+C*O;var he=w+C*B,Se=280+oe.ua,ye=d.Pb?z:16777216,le=0<oe.ua?oe.Wa:null,ce=oe.wc,je=ge<he?ms(oe,H,z):null;t(d.C<B),t(he<=O);var Ae=!1;e:for(;;){for(;Ae||ge<he;){var _e=0;if(z>=ye){var Ue=ge-w;t((ye=d).Pb),ye.wd=ye.m,ye.xd=Ue,0<ye.s.ua&&de(ye.s.Wa,ye.s.vb),ye=z+ay}if(H&ce||(je=ms(oe,H,z)),t(je!=null),je.Qb&&(h[ge]=je.qb,Ae=!0),!Ae)if(se(W),je.jc){_e=W,Ue=h;var Fe=ge,Ge=je.pd[R(_e)&Fs-1];t(je.jc),256>Ge.g?(Q(_e,_e.u+Ge.g),Ue[Fe]=Ge.value,_e=0):(Q(_e,_e.u+Ge.g-256),t(256<=Ge.value),_e=Ge.value),_e==0&&(Ae=!0)}else _e=cr(je.G[0],je.H[0],W);if(W.h)break;if(Ae||256>_e){if(!Ae)if(je.nd)h[ge]=(je.qb|_e<<8)>>>0;else{if(se(W),Ae=cr(je.G[1],je.H[1],W),se(W),Ue=cr(je.G[2],je.H[2],W),Fe=cr(je.G[3],je.H[3],W),W.h)break;h[ge]=(Fe<<24|Ae<<16|_e<<8|Ue)>>>0}if(Ae=!1,++ge,++H>=C&&(H=0,++z,U!=null&&z<=B&&!(z%16)&&U(d,z),le!=null))for(;ve<ge;)_e=h[ve++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e}else if(280>_e){if(_e=tn(_e-256,W),Ue=cr(je.G[4],je.H[4],W),se(W),Ue=Pn(C,Ue=tn(Ue,W)),W.h)break;if(ge-w<Ue||O-ge<_e)break e;for(Fe=0;Fe<_e;++Fe)h[ge+Fe]=h[ge+Fe-Ue];for(ge+=_e,H+=_e;H>=C;)H-=C,++z,U!=null&&z<=B&&!(z%16)&&U(d,z);if(t(ge<=O),H&ce&&(je=ms(oe,H,z)),le!=null)for(;ve<ge;)_e=h[ve++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e}else{if(!(_e<Se))break e;for(Ae=_e-280,t(le!=null);ve<ge;)_e=h[ve++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e;_e=ge,t(!(Ae>>>(Ue=le).Xa)),h[_e]=Ue.X[Ae],Ae=!0}Ae||t(W.h==V(W))}if(d.Pb&&W.h&&ge<O)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&de(d.s.vb,d.s.Wa);else{if(W.h)break e;U!=null&&U(d,z>B?B:z),d.a=0,d.$=ge-w}return 1}return d.a=3,0}function Ln(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var h=d.Wa;h!=null&&(h.X=null),d.vb=null,t(d!=null)}function Fr(){var d=new pm;return d==null?null:(d.a=0,d.xb=ax,An("Predictor","VP8LPredictors"),An("Predictor","VP8LPredictors_C"),An("PredictorAdd","VP8LPredictorsAdd"),An("PredictorAdd","VP8LPredictorsAdd_C"),Sd=xt,bi=Xe,hr=Re,er=Us,_a=bt,Zn=Zr,ea=Pt,N.VP8LMapColor32b=xo,N.VP8LMapColor8b=Ad,d)}function En(d,h,w,C,O){var B=1,U=[d],z=[h],H=C.m,W=C.s,oe=null,ge=0;e:for(;;){if(w)for(;B&&te(H,1);){var ve=U,he=z,Se=C,ye=1,le=Se.m,ce=Se.gc[Se.ab],je=te(le,2);if(Se.Oc&1<<je)B=0;else{switch(Se.Oc|=1<<je,ce.hc=je,ce.Ea=ve[0],ce.nc=he[0],ce.K=[null],++Se.ab,t(4>=Se.ab),je){case 0:case 1:ce.b=te(le,3)+2,ye=En(be(ce.Ea,ce.b),be(ce.nc,ce.b),0,Se,ce.K),ce.K=ce.K[0];break;case 3:var Ae,_e=te(le,8)+1,Ue=16<_e?0:4<_e?1:2<_e?2:3;if(ve[0]=be(ce.Ea,Ue),ce.b=Ue,Ae=ye=En(_e,1,0,Se,ce.K)){var Fe,Ge=_e,Me=ce,yt=1<<(8>>Me.b),_t=i(yt);if(_t==null)Ae=0;else{var gt=Me.K[0],mt=Me.w;for(_t[0]=Me.K[0][0],Fe=1;Fe<1*Ge;++Fe)_t[Fe]=ke(gt[mt+Fe],_t[Fe-1]);for(;Fe<4*yt;++Fe)_t[Fe]=0;Me.K[0]=null,Me.K[0]=_t,Ae=1}}ye=Ae;break;case 2:break;default:t(0)}B=ye}}if(U=U[0],z=z[0],B&&te(H,1)&&!(B=1<=(ge=te(H,4))&&11>=ge)){C.a=3;break e}var Lt;if(Lt=B)t:{var Tt,at,ps,mr=C,xs=U,fr=z,St=ge,Ar=w,Cr=mr.m,Ts=mr.s,Ms=[null],sr=1,zr=0,Fn=ny[St];s:for(;;){if(Ar&&te(Cr,1)){var Ps=te(Cr,3)+2,na=be(xs,Ps),_i=be(fr,Ps),wo=na*_i;if(!En(na,_i,0,mr,Ms))break s;for(Ms=Ms[0],Ts.xc=Ps,Tt=0;Tt<wo;++Tt){var Ta=Ms[Tt]>>8&65535;Ms[Tt]=Ta,Ta>=sr&&(sr=Ta+1)}}if(Cr.h)break s;for(at=0;5>at;++at){var es=rx[at];!at&&0<St&&(es+=1<<St),zr<es&&(zr=es)}var Sm=o(sr*Fn,I),fx=sr,px=o(fx,G);if(px==null)var $d=null;else t(65536>=fx),$d=px;var Kl=i(zr);if($d==null||Kl==null||Sm==null){mr.a=1;break s}var Bd=Sm;for(Tt=ps=0;Tt<sr;++Tt){var dn=$d[Tt],No=dn.G,jo=dn.H,xx=0,Ud=1,gx=0;for(at=0;5>at;++at){es=rx[at],No[at]=Bd,jo[at]=ps,!at&&0<St&&(es+=1<<St);n:{var qd,km=es,zd=mr,Jl=Kl,Sy=Bd,ky=ps,Am=0,Pa=zd.m,Ay=te(Pa,1);if(a(Jl,0,0,km),Ay){var Cy=te(Pa,1)+1,Ty=te(Pa,1),vx=te(Pa,Ty==0?1:8);Jl[vx]=1,Cy==2&&(Jl[vx=te(Pa,8)]=1);var Hd=1}else{var bx=i(19),yx=te(Pa,4)+4;if(19<yx){zd.a=3;var Vd=0;break n}for(qd=0;qd<yx;++qd)bx[sy[qd]]=te(Pa,3);var Cm=void 0,Xl=void 0,wx=zd,Py=bx,Wd=km,Nx=Jl,Tm=0,La=wx.m,jx=8,_x=o(128,I);r:for(;E(_x,0,7,Py,19);){if(te(La,1)){var Ly=2+2*te(La,3);if((Cm=2+te(La,Ly))>Wd)break r}else Cm=Wd;for(Xl=0;Xl<Wd&&Cm--;){se(La);var Sx=_x[0+(127&R(La))];Q(La,La.u+Sx.g);var _o=Sx.value;if(16>_o)Nx[Xl++]=_o,_o!=0&&(jx=_o);else{var Ey=_o==16,kx=_o-16,Iy=ey[kx],Ax=te(La,Zb[kx])+Iy;if(Xl+Ax>Wd)break r;for(var Dy=Ey?jx:0;0<Ax--;)Nx[Xl++]=Dy}}Tm=1;break r}Tm||(wx.a=3),Hd=Tm}(Hd=Hd&&!Pa.h)&&(Am=E(Sy,ky,8,Jl,km)),Hd&&Am!=0?Vd=Am:(zd.a=3,Vd=0)}if(Vd==0)break s;if(Ud&&ty[at]==1&&(Ud=Bd[ps].g==0),xx+=Bd[ps].g,ps+=Vd,3>=at){var Ql,Pm=Kl[0];for(Ql=1;Ql<es;++Ql)Kl[Ql]>Pm&&(Pm=Kl[Ql]);gx+=Pm}}if(dn.nd=Ud,dn.Qb=0,Ud&&(dn.qb=(No[3][jo[3]+0].value<<24|No[1][jo[1]+0].value<<16|No[2][jo[2]+0].value)>>>0,xx==0&&256>No[0][jo[0]+0].value&&(dn.Qb=1,dn.qb+=No[0][jo[0]+0].value<<8)),dn.jc=!dn.Qb&&6>gx,dn.jc){var Gd,aa=dn;for(Gd=0;Gd<Fs;++Gd){var Ea=Gd,Ia=aa.pd[Ea],Yd=aa.G[0][aa.H[0]+Ea];256<=Yd.value?(Ia.g=Yd.g+256,Ia.value=Yd.value):(Ia.g=0,Ia.value=0,Ea>>=ys(Yd,8,Ia),Ea>>=ys(aa.G[1][aa.H[1]+Ea],16,Ia),Ea>>=ys(aa.G[2][aa.H[2]+Ea],0,Ia),ys(aa.G[3][aa.H[3]+Ea],24,Ia))}}}Ts.vc=Ms,Ts.Wb=sr,Ts.Ya=$d,Ts.yc=Sm,Lt=1;break t}Lt=0}if(!(B=Lt)){C.a=3;break e}if(0<ge){if(W.ua=1<<ge,!Ne(W.Wa,ge)){C.a=1,B=0;break e}}else W.ua=0;var Lm=C,Cx=U,Oy=z,Em=Lm.s,Im=Em.xc;if(Lm.c=Cx,Lm.i=Oy,Em.md=be(Cx,Im),Em.wc=Im==0?-1:(1<<Im)-1,w){C.xb=hy;break e}if((oe=i(U*z))==null){C.a=1,B=0;break e}B=(B=nn(C,oe,0,U,z,z,null))&&!H.h;break e}return B?(O!=null?O[0]=oe:(t(oe==null),t(w)),C.$=0,w||Ln(W)):Ln(W),B}function fi(d,h){var w=d.c*d.i,C=w+h+16*h;return t(d.c<=h),d.V=i(C),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+w+h,1)}function Ji(d,h){var w=d.C,C=h-w,O=d.V,B=d.Ba+d.c*w;for(t(h<=d.l.o);0<C;){var U=16<C?16:C,z=d.l.ma,H=d.l.width,W=H*U,oe=z.ca,ge=z.tb+H*w,ve=d.Ta,he=d.Ua;_r(d,U,O,B),os(ve,he,oe,ge,W),sn(z,w,w+U,oe,ge,H),C-=U,O+=U*d.c,w+=U}t(w==h),d.C=d.Ma=h}function Xi(){this.ub=this.yd=this.td=this.Rb=0}function Qi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zi(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ad(){this.Yb=function(){var d=[];return function h(w,C,O){for(var B=O[C],U=0;U<B&&(w.push(O.length>C+1?[]:0),!(O.length<C+1));U++)h(w[U],C+1,O)}(d,0,[3,11]),d}()}function Wh(){this.jb=i(3),this.Wc=l([4,8],ad),this.Xc=l([4,17],ad)}function Gh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function eo(){this.ld=this.La=this.dd=this.tc=0}function id(){this.Na=this.la=0}function Yh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function jl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kh(){this.uc=this.M=this.Nb=0,this.wa=Array(new eo),this.Y=0,this.ya=Array(new jl),this.aa=0,this.l=new to}function od(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Jh(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new Xi,this.Kc=new Qi,this.ed=new Gh,this.Qa=new Zi,this.Ic=this.$c=this.Aa=0,this.D=new Kh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,re),this.ia=0,this.pb=o(4,Yh),this.Pa=new Wh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new od),this.Hd=0,this.rb=Array(new id),this.sb=0,this.wa=Array(new eo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new jl),this.L=this.aa=0,this.gd=l([4,2],eo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function to(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Xh(){var d=new Jh;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Gl||(Gl=dd)),d}function as(d,h,w){return d.a==0&&(d.a=h,d.sc=w,d.cb=0),0}function ld(d,h,w){return 3<=w&&d[h+0]==157&&d[h+1]==1&&d[h+2]==42}function cd(d,h){if(d==null)return 0;if(d.a=0,d.sc="OK",h==null)return as(d,2,"null VP8Io passed to VP8GetHeaders()");var w=h.data,C=h.w,O=h.ha;if(4>O)return as(d,7,"Truncated header.");var B=w[C+0]|w[C+1]<<8|w[C+2]<<16,U=d.Od;if(U.Rb=!(1&B),U.td=B>>1&7,U.yd=B>>4&1,U.ub=B>>5,3<U.td)return as(d,3,"Incorrect keyframe parameters.");if(!U.yd)return as(d,4,"Frame not displayable.");C+=3,O-=3;var z=d.Kc;if(U.Rb){if(7>O)return as(d,7,"cannot parse picture header");if(!ld(w,C,O))return as(d,3,"Bad code word");z.c=16383&(w[C+4]<<8|w[C+3]),z.Td=w[C+4]>>6,z.i=16383&(w[C+6]<<8|w[C+5]),z.Ud=w[C+6]>>6,C+=7,O-=7,d.za=z.c+15>>4,d.Ub=z.i+15>>4,h.width=z.c,h.height=z.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,a((B=d.Pa).jb,0,255,B.jb.length),t((B=d.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,a(B.Zb,0,0,B.Zb.length),a(B.Lb,0,0,B.Lb)}if(U.ub>O)return as(d,7,"bad partition length");Z(B=d.m,w,C,U.ub),C+=U.ub,O-=U.ub,U.Rb&&(z.Ld=ae(B),z.Kd=ae(B)),z=d.Qa;var H,W=d.Pa;if(t(B!=null),t(z!=null),z.Cb=ae(B),z.Cb){if(z.Bb=ae(B),ae(B)){for(z.Fb=ae(B),H=0;4>H;++H)z.Zb[H]=ae(B)?q(B,7):0;for(H=0;4>H;++H)z.Lb[H]=ae(B)?q(B,6):0}if(z.Bb)for(H=0;3>H;++H)W.jb[H]=ae(B)?X(B,8):255}else z.Bb=0;if(B.Ka)return as(d,3,"cannot parse segment header");if((z=d.ed).zd=ae(B),z.Tb=X(B,6),z.wb=X(B,3),z.Pc=ae(B),z.Pc&&ae(B)){for(W=0;4>W;++W)ae(B)&&(z.vd[W]=q(B,6));for(W=0;4>W;++W)ae(B)&&(z.od[W]=q(B,6))}if(d.L=z.Tb==0?0:z.zd?1:2,B.Ka)return as(d,3,"cannot parse filter header");var oe=O;if(O=H=C,C=H+oe,z=oe,d.Xb=(1<<X(d.m,2))-1,oe<3*(W=d.Xb))w=7;else{for(H+=3*W,z-=3*W,oe=0;oe<W;++oe){var ge=w[O+0]|w[O+1]<<8|w[O+2]<<16;ge>z&&(ge=z),Z(d.Jc[+oe],w,H,ge),H+=ge,z-=ge,O+=3}Z(d.Jc[+W],w,H,z),w=H<C?0:5}if(w!=0)return as(d,w,"cannot parse partitions");for(w=X(H=d.m,7),O=ae(H)?q(H,4):0,C=ae(H)?q(H,4):0,z=ae(H)?q(H,4):0,W=ae(H)?q(H,4):0,H=ae(H)?q(H,4):0,oe=d.Qa,ge=0;4>ge;++ge){if(oe.Cb){var ve=oe.Zb[ge];oe.Fb||(ve+=w)}else{if(0<ge){d.pb[ge]=d.pb[0];continue}ve=w}var he=d.pb[ge];he.Sc[0]=Nm[Sr(ve+O,127)],he.Sc[1]=jm[Sr(ve+0,127)],he.Eb[0]=2*Nm[Sr(ve+C,127)],he.Eb[1]=101581*jm[Sr(ve+z,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=Nm[Sr(ve+W,117)],he.Qc[1]=jm[Sr(ve+H,127)],he.lc=ve+H}if(!U.Rb)return as(d,4,"Not a key frame.");for(ae(B),U=d.Pa,w=0;4>w;++w){for(O=0;8>O;++O)for(C=0;3>C;++C)for(z=0;11>z;++z)W=xe(B,dy[w][O][C][z])?X(B,8):ly[w][O][C][z],U.Wc[w][O].Yb[C][z]=W;for(O=0;17>O;++O)U.Xc[w][O]=U.Wc[w][uy[O]]}return d.kc=ae(B),d.kc&&(d.Bd=X(B,8)),d.cb=1}function dd(d,h,w,C,O,B,U){var z=h[O].Yb[w];for(w=0;16>O;++O){if(!xe(d,z[w+0]))return O;for(;!xe(d,z[w+1]);)if(z=h[++O].Yb[0],w=0,O==16)return 16;var H=h[O+1].Yb;if(xe(d,z[w+2])){var W=d,oe=0;if(xe(W,(ve=z)[(ge=w)+3]))if(xe(W,ve[ge+6])){for(z=0,ge=2*(oe=xe(W,ve[ge+8]))+(ve=xe(W,ve[ge+9+oe])),oe=0,ve=iy[ge];ve[z];++z)oe+=oe+xe(W,ve[z]);oe+=3+(8<<ge)}else xe(W,ve[ge+7])?(oe=7+2*xe(W,165),oe+=xe(W,145)):oe=5+xe(W,159);else oe=xe(W,ve[ge+4])?3+xe(W,ve[ge+5]):2;z=H[2]}else oe=1,z=H[1];H=U+oy[O],0>(W=d).b&&ue(W);var ge,ve=W.b,he=(ge=W.Ca>>1)-(W.I>>ve)>>31;--W.b,W.Ca+=he,W.Ca|=1,W.I-=(ge+1&he)<<ve,B[H]=((oe^he)-he)*C[(0<O)+0]}return 16}function _l(d){var h=d.rb[d.sb-1];h.la=0,h.Na=0,a(d.zc,0,0,d.zc.length),d.ja=0}function Qh(d,h){if(d==null)return 0;if(h==null)return as(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!cd(d,h))return 0;if(t(d.cb),h.ac==null||h.ac(h)){h.ob&&(d.L=0);var w=Rd[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=h.v-w>>4,d.zb=h.j-w>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=h.o+15+w>>4,d.Hb=h.va+15+w>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var C=d.ed;for(w=0;4>w;++w){var O;if(d.Qa.Cb){var B=d.Qa.Lb[w];d.Qa.Fb||(B+=C.Tb)}else B=C.Tb;for(O=0;1>=O;++O){var U=d.gd[w][O],z=B;if(C.Pc&&(z+=C.vd[0],O&&(z+=C.od[0])),0<(z=0>z?0:63<z?63:z)){var H=z;0<C.wb&&(H=4<C.wb?H>>2:H>>1)>9-C.wb&&(H=9-C.wb),1>H&&(H=1),U.dd=H,U.tc=2*z+H,U.ld=40<=z?2:15<=z?1:0}else U.tc=0;U.La=O}}}w=0}else as(d,6,"Frame setup failed"),w=d.a;if(w=w==0){if(w){d.$c=0,0<d.Aa||(d.Ic=_y);e:{w=d.Ic,C=4*(H=d.za);var W=32*H,oe=H+1,ge=0<d.L?H*(0<d.Aa?2:1):0,ve=(d.Aa==2?2:1)*H;if((U=C+832+(O=3*(16*w+Rd[d.L])/2*W)+(B=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=U)w=0;else{if(U>d.Vb){if(d.Vb=0,d.Ec=i(U),d.Fc=0,d.Ec==null){w=as(d,1,"no memory during frame initialization.");break e}d.Vb=U}U=d.Ec,z=d.Fc,d.Ac=U,d.Bc=z,z+=C,d.Gd=o(W,od),d.Hd=0,d.rb=o(oe+1,id),d.sb=1,d.wa=ge?o(ge,eo):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=H),t(!0),d.oc=U,d.pc=z,z+=832,d.ya=o(ve,jl),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=H),d.R=16*H,d.B=8*H,H=(W=Rd[d.L])*d.R,W=W/2*d.B,d.sa=U,d.ta=z+H,d.qa=d.sa,d.ra=d.ta+16*w*d.R+W,d.Ha=d.qa,d.Ia=d.ra+8*w*d.B+W,d.$c=0,z+=O,d.mb=B?U:null,d.nb=B?z:null,t(z+B<=d.Fc+d.Vb),_l(d),a(d.Ac,d.Bc,0,C),w=1}}if(w){if(h.ka=0,h.y=d.sa,h.O=d.ta,h.f=d.qa,h.N=d.ra,h.ea=d.Ha,h.Vd=d.Ia,h.fa=d.R,h.Rc=d.B,h.F=null,h.J=0,!Td){for(w=-255;255>=w;++w)ws[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)sa[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)Wl[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)yo[255+w]=0>w?0:255<w?255:w;Td=1}go=tm,ta=Zh,zl=hd,tr=em,Rr=md,is=ud,vo=Pl,Cd=gi,Hl=fm,yi=Ll,wi=mm,Sa=oo,Ni=El,bo=Nd,ji=wd,ka=Dn,Vl=Qn,$r=hm,cn[0]=In,cn[1]=sm,cn[2]=im,cn[3]=om,cn[4]=xd,cn[5]=ao,cn[6]=gd,cn[7]=Al,cn[8]=cm,cn[9]=lm,Aa[0]=fd,Aa[1]=nm,Aa[2]=Xn,Aa[3]=ro,Aa[4]=qs,Aa[5]=am,Aa[6]=pd,ra[0]=ya,ra[1]=rm,ra[2]=dm,ra[3]=Cl,ra[4]=xi,ra[5]=um,ra[6]=Tl,w=1}else w=0}w&&(w=function(he,Se){for(he.M=0;he.M<he.Va;++he.M){var ye,le=he.Jc[he.M&he.Xb],ce=he.m,je=he;for(ye=0;ye<je.za;++ye){var Ae=ce,_e=je,Ue=_e.Ac,Fe=_e.Bc+4*ye,Ge=_e.zc,Me=_e.ya[_e.aa+ye];if(_e.Qa.Bb?Me.$b=xe(Ae,_e.Pa.jb[0])?2+xe(Ae,_e.Pa.jb[2]):xe(Ae,_e.Pa.jb[1]):Me.$b=0,_e.kc&&(Me.Ad=xe(Ae,_e.Bd)),Me.Za=!xe(Ae,145)+0,Me.Za){var yt=Me.Ob,_t=0;for(_e=0;4>_e;++_e){var gt,mt=Ge[0+_e];for(gt=0;4>gt;++gt){mt=cy[Ue[Fe+gt]][mt];for(var Lt=nx[xe(Ae,mt[0])];0<Lt;)Lt=nx[2*Lt+xe(Ae,mt[Lt])];mt=-Lt,Ue[Fe+gt]=mt}n(yt,_t,Ue,Fe,4),_t+=4,Ge[0+_e]=mt}}else mt=xe(Ae,156)?xe(Ae,128)?1:3:xe(Ae,163)?2:0,Me.Ob[0]=mt,a(Ue,Fe,mt,4),a(Ge,0,mt,4);Me.Dd=xe(Ae,142)?xe(Ae,114)?xe(Ae,183)?1:3:2:0}if(je.m.Ka)return as(he,7,"Premature end-of-partition0 encountered.");for(;he.ja<he.za;++he.ja){if(je=le,Ae=(ce=he).rb[ce.sb-1],Ue=ce.rb[ce.sb+ce.ja],ye=ce.ya[ce.aa+ce.ja],Fe=ce.kc?ye.Ad:0)Ae.la=Ue.la=0,ye.Za||(Ae.Na=Ue.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var Tt,at;if(Ae=Ue,Ue=je,Fe=ce.Pa.Xc,Ge=ce.ya[ce.aa+ce.ja],Me=ce.pb[Ge.$b],_e=Ge.ad,yt=0,_t=ce.rb[ce.sb-1],mt=gt=0,a(_e,yt,0,384),Ge.Za)var ps=0,mr=Fe[3];else{Lt=i(16);var xs=Ae.Na+_t.Na;if(xs=Gl(Ue,Fe[1],xs,Me.Eb,0,Lt,0),Ae.Na=_t.Na=(0<xs)+0,1<xs)go(Lt,0,_e,yt);else{var fr=Lt[0]+3>>3;for(Lt=0;256>Lt;Lt+=16)_e[yt+Lt]=fr}ps=1,mr=Fe[0]}var St=15&Ae.la,Ar=15&_t.la;for(Lt=0;4>Lt;++Lt){var Cr=1&Ar;for(fr=at=0;4>fr;++fr)St=St>>1|(Cr=(xs=Gl(Ue,mr,xs=Cr+(1&St),Me.Sc,ps,_e,yt))>ps)<<7,at=at<<2|(3<xs?3:1<xs?2:_e[yt+0]!=0),yt+=16;St>>=4,Ar=Ar>>1|Cr<<7,gt=(gt<<8|at)>>>0}for(mr=St,ps=Ar>>4,Tt=0;4>Tt;Tt+=2){for(at=0,St=Ae.la>>4+Tt,Ar=_t.la>>4+Tt,Lt=0;2>Lt;++Lt){for(Cr=1&Ar,fr=0;2>fr;++fr)xs=Cr+(1&St),St=St>>1|(Cr=0<(xs=Gl(Ue,Fe[2],xs,Me.Qc,0,_e,yt)))<<3,at=at<<2|(3<xs?3:1<xs?2:_e[yt+0]!=0),yt+=16;St>>=2,Ar=Ar>>1|Cr<<5}mt|=at<<4*Tt,mr|=St<<4<<Tt,ps|=(240&Ar)<<Tt}Ae.la=mr,_t.la=ps,Ge.Hc=gt,Ge.Gc=mt,Ge.ia=43690&mt?0:Me.ia,Fe=!(gt|mt)}if(0<ce.L&&(ce.wa[ce.Y+ce.ja]=ce.gd[ye.$b][ye.Za],ce.wa[ce.Y+ce.ja].La|=!Fe),je.Ka)return as(he,7,"Premature end-of-file encountered.")}if(_l(he),ce=Se,je=1,ye=(le=he).D,Ae=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(ye.M=le.M,ye.uc=Ae,Rl(le,ye),je=1,ye=(at=le.D).Nb,Ae=(mt=Rd[le.L])*le.R,Ue=mt/2*le.B,Lt=16*ye*le.R,fr=8*ye*le.B,Fe=le.sa,Ge=le.ta-Ae+Lt,Me=le.qa,_e=le.ra-Ue+fr,yt=le.Ha,_t=le.Ia-Ue+fr,Ar=(St=at.M)==0,gt=St>=le.Va-1,le.Aa==2&&Rl(le,at),at.uc)for(Cr=(xs=le).D.M,t(xs.D.uc),at=xs.yb;at<xs.Hb;++at){ps=at,mr=Cr;var Ts=(Ms=(es=xs).D).Nb;Tt=es.R;var Ms=Ms.wa[Ms.Y+ps],sr=es.sa,zr=es.ta+16*Ts*Tt+16*ps,Fn=Ms.dd,Ps=Ms.tc;if(Ps!=0)if(t(3<=Ps),es.L==1)0<ps&&ka(sr,zr,Tt,Ps+4),Ms.La&&$r(sr,zr,Tt,Ps),0<mr&&ji(sr,zr,Tt,Ps+4),Ms.La&&Vl(sr,zr,Tt,Ps);else{var na=es.B,_i=es.qa,wo=es.ra+8*Ts*na+8*ps,Ta=es.Ha,es=es.Ia+8*Ts*na+8*ps;Ts=Ms.ld,0<ps&&(Cd(sr,zr,Tt,Ps+4,Fn,Ts),yi(_i,wo,Ta,es,na,Ps+4,Fn,Ts)),Ms.La&&(Sa(sr,zr,Tt,Ps,Fn,Ts),bo(_i,wo,Ta,es,na,Ps,Fn,Ts)),0<mr&&(vo(sr,zr,Tt,Ps+4,Fn,Ts),Hl(_i,wo,Ta,es,na,Ps+4,Fn,Ts)),Ms.La&&(wi(sr,zr,Tt,Ps,Fn,Ts),Ni(_i,wo,Ta,es,na,Ps,Fn,Ts))}}if(le.ia&&alert("todo:DitherRow"),ce.put!=null){if(at=16*St,St=16*(St+1),Ar?(ce.y=le.sa,ce.O=le.ta+Lt,ce.f=le.qa,ce.N=le.ra+fr,ce.ea=le.Ha,ce.W=le.Ia+fr):(at-=mt,ce.y=Fe,ce.O=Ge,ce.f=Me,ce.N=_e,ce.ea=yt,ce.W=_t),gt||(St-=mt),St>ce.o&&(St=ce.o),ce.F=null,ce.J=null,le.Fa!=null&&0<le.Fa.length&&at<St&&(ce.J=Fl(le,ce,at,St-at),ce.F=le.mb,ce.F==null&&ce.F.length==0)){je=as(le,3,"Could not decode alpha data.");break e}at<ce.j&&(mt=ce.j-at,at=ce.j,t(!(1&mt)),ce.O+=le.R*mt,ce.N+=le.B*(mt>>1),ce.W+=le.B*(mt>>1),ce.F!=null&&(ce.J+=ce.width*mt)),at<St&&(ce.O+=ce.v,ce.N+=ce.v>>1,ce.W+=ce.v>>1,ce.F!=null&&(ce.J+=ce.v),ce.ka=at-ce.j,ce.U=ce.va-ce.v,ce.T=St-at,je=ce.put(ce))}ye+1!=le.Ic||gt||(n(le.sa,le.ta-Ae,Fe,Ge+16*le.R,Ae),n(le.qa,le.ra-Ue,Me,_e+8*le.B,Ue),n(le.Ha,le.Ia-Ue,yt,_t+8*le.B,Ue))}if(!je)return as(he,6,"Output aborted.")}return 1}(d,h)),h.bc!=null&&h.bc(h),w&=1}return w?(d.cb=0,w):0}function an(d,h,w,C,O){O=d[h+w+32*C]+(O>>3),d[h+w+32*C]=-256&O?0>O?0:255:O}function so(d,h,w,C,O,B){an(d,h,0,w,C+O),an(d,h,1,w,C+B),an(d,h,2,w,C-B),an(d,h,3,w,C-O)}function dr(d){return(20091*d>>16)+d}function Sl(d,h,w,C){var O,B=0,U=i(16);for(O=0;4>O;++O){var z=d[h+0]+d[h+8],H=d[h+0]-d[h+8],W=(35468*d[h+4]>>16)-dr(d[h+12]),oe=dr(d[h+4])+(35468*d[h+12]>>16);U[B+0]=z+oe,U[B+1]=H+W,U[B+2]=H-W,U[B+3]=z-oe,B+=4,h++}for(O=B=0;4>O;++O)z=(d=U[B+0]+4)+U[B+8],H=d-U[B+8],W=(35468*U[B+4]>>16)-dr(U[B+12]),an(w,C,0,0,z+(oe=dr(U[B+4])+(35468*U[B+12]>>16))),an(w,C,1,0,H+W),an(w,C,2,0,H-W),an(w,C,3,0,z-oe),B++,C+=32}function ud(d,h,w,C){var O=d[h+0]+4,B=35468*d[h+4]>>16,U=dr(d[h+4]),z=35468*d[h+1]>>16;so(w,C,0,O+U,d=dr(d[h+1]),z),so(w,C,1,O+B,d,z),so(w,C,2,O-B,d,z),so(w,C,3,O-U,d,z)}function Zh(d,h,w,C,O){Sl(d,h,w,C),O&&Sl(d,h+16,w,C+4)}function hd(d,h,w,C){ta(d,h+0,w,C,1),ta(d,h+32,w,C+128,1)}function em(d,h,w,C){var O;for(d=d[h+0]+4,O=0;4>O;++O)for(h=0;4>h;++h)an(w,C,h,O,d)}function md(d,h,w,C){d[h+0]&&tr(d,h+0,w,C),d[h+16]&&tr(d,h+16,w,C+4),d[h+32]&&tr(d,h+32,w,C+128),d[h+48]&&tr(d,h+48,w,C+128+4)}function tm(d,h,w,C){var O,B=i(16);for(O=0;4>O;++O){var U=d[h+0+O]+d[h+12+O],z=d[h+4+O]+d[h+8+O],H=d[h+4+O]-d[h+8+O],W=d[h+0+O]-d[h+12+O];B[0+O]=U+z,B[8+O]=U-z,B[4+O]=W+H,B[12+O]=W-H}for(O=0;4>O;++O)U=(d=B[0+4*O]+3)+B[3+4*O],z=B[1+4*O]+B[2+4*O],H=B[1+4*O]-B[2+4*O],W=d-B[3+4*O],w[C+0]=U+z>>3,w[C+16]=W+H>>3,w[C+32]=U-z>>3,w[C+48]=W-H>>3,C+=64}function kl(d,h,w){var C,O=h-32,B=kr,U=255-d[O-1];for(C=0;C<w;++C){var z,H=B,W=U+d[h-1];for(z=0;z<w;++z)d[h+z]=H[W+d[O+z]];h+=32}}function sm(d,h){kl(d,h,4)}function rm(d,h){kl(d,h,8)}function nm(d,h){kl(d,h,16)}function Xn(d,h){var w;for(w=0;16>w;++w)n(d,h+32*w,d,h-32,16)}function ro(d,h){var w;for(w=16;0<w;--w)a(d,h,d[h-1],16),h+=32}function no(d,h,w){var C;for(C=0;16>C;++C)a(h,w+32*C,d,16)}function fd(d,h){var w,C=16;for(w=0;16>w;++w)C+=d[h-1+32*w]+d[h+w-32];no(C>>5,d,h)}function qs(d,h){var w,C=8;for(w=0;16>w;++w)C+=d[h-1+32*w];no(C>>4,d,h)}function am(d,h){var w,C=8;for(w=0;16>w;++w)C+=d[h+w-32];no(C>>4,d,h)}function pd(d,h){no(128,d,h)}function Ze(d,h,w){return d+2*h+w+2>>2}function im(d,h){var w,C=h-32;for(C=new Uint8Array([Ze(d[C-1],d[C+0],d[C+1]),Ze(d[C+0],d[C+1],d[C+2]),Ze(d[C+1],d[C+2],d[C+3]),Ze(d[C+2],d[C+3],d[C+4])]),w=0;4>w;++w)n(d,h+32*w,C,0,C.length)}function om(d,h){var w=d[h-1],C=d[h-1+32],O=d[h-1+64],B=d[h-1+96];Te(d,h+0,16843009*Ze(d[h-1-32],w,C)),Te(d,h+32,16843009*Ze(w,C,O)),Te(d,h+64,16843009*Ze(C,O,B)),Te(d,h+96,16843009*Ze(O,B,B))}function In(d,h){var w,C=4;for(w=0;4>w;++w)C+=d[h+w-32]+d[h-1+32*w];for(C>>=3,w=0;4>w;++w)a(d,h+32*w,C,4)}function xd(d,h){var w=d[h-1+0],C=d[h-1+32],O=d[h-1+64],B=d[h-1-32],U=d[h+0-32],z=d[h+1-32],H=d[h+2-32],W=d[h+3-32];d[h+0+96]=Ze(C,O,d[h-1+96]),d[h+1+96]=d[h+0+64]=Ze(w,C,O),d[h+2+96]=d[h+1+64]=d[h+0+32]=Ze(B,w,C),d[h+3+96]=d[h+2+64]=d[h+1+32]=d[h+0+0]=Ze(U,B,w),d[h+3+64]=d[h+2+32]=d[h+1+0]=Ze(z,U,B),d[h+3+32]=d[h+2+0]=Ze(H,z,U),d[h+3+0]=Ze(W,H,z)}function gd(d,h){var w=d[h+1-32],C=d[h+2-32],O=d[h+3-32],B=d[h+4-32],U=d[h+5-32],z=d[h+6-32],H=d[h+7-32];d[h+0+0]=Ze(d[h+0-32],w,C),d[h+1+0]=d[h+0+32]=Ze(w,C,O),d[h+2+0]=d[h+1+32]=d[h+0+64]=Ze(C,O,B),d[h+3+0]=d[h+2+32]=d[h+1+64]=d[h+0+96]=Ze(O,B,U),d[h+3+32]=d[h+2+64]=d[h+1+96]=Ze(B,U,z),d[h+3+64]=d[h+2+96]=Ze(U,z,H),d[h+3+96]=Ze(z,H,H)}function ao(d,h){var w=d[h-1+0],C=d[h-1+32],O=d[h-1+64],B=d[h-1-32],U=d[h+0-32],z=d[h+1-32],H=d[h+2-32],W=d[h+3-32];d[h+0+0]=d[h+1+64]=B+U+1>>1,d[h+1+0]=d[h+2+64]=U+z+1>>1,d[h+2+0]=d[h+3+64]=z+H+1>>1,d[h+3+0]=H+W+1>>1,d[h+0+96]=Ze(O,C,w),d[h+0+64]=Ze(C,w,B),d[h+0+32]=d[h+1+96]=Ze(w,B,U),d[h+1+32]=d[h+2+96]=Ze(B,U,z),d[h+2+32]=d[h+3+96]=Ze(U,z,H),d[h+3+32]=Ze(z,H,W)}function Al(d,h){var w=d[h+0-32],C=d[h+1-32],O=d[h+2-32],B=d[h+3-32],U=d[h+4-32],z=d[h+5-32],H=d[h+6-32],W=d[h+7-32];d[h+0+0]=w+C+1>>1,d[h+1+0]=d[h+0+64]=C+O+1>>1,d[h+2+0]=d[h+1+64]=O+B+1>>1,d[h+3+0]=d[h+2+64]=B+U+1>>1,d[h+0+32]=Ze(w,C,O),d[h+1+32]=d[h+0+96]=Ze(C,O,B),d[h+2+32]=d[h+1+96]=Ze(O,B,U),d[h+3+32]=d[h+2+96]=Ze(B,U,z),d[h+3+64]=Ze(U,z,H),d[h+3+96]=Ze(z,H,W)}function lm(d,h){var w=d[h-1+0],C=d[h-1+32],O=d[h-1+64],B=d[h-1+96];d[h+0+0]=w+C+1>>1,d[h+2+0]=d[h+0+32]=C+O+1>>1,d[h+2+32]=d[h+0+64]=O+B+1>>1,d[h+1+0]=Ze(w,C,O),d[h+3+0]=d[h+1+32]=Ze(C,O,B),d[h+3+32]=d[h+1+64]=Ze(O,B,B),d[h+3+64]=d[h+2+64]=d[h+0+96]=d[h+1+96]=d[h+2+96]=d[h+3+96]=B}function cm(d,h){var w=d[h-1+0],C=d[h-1+32],O=d[h-1+64],B=d[h-1+96],U=d[h-1-32],z=d[h+0-32],H=d[h+1-32],W=d[h+2-32];d[h+0+0]=d[h+2+32]=w+U+1>>1,d[h+0+32]=d[h+2+64]=C+w+1>>1,d[h+0+64]=d[h+2+96]=O+C+1>>1,d[h+0+96]=B+O+1>>1,d[h+3+0]=Ze(z,H,W),d[h+2+0]=Ze(U,z,H),d[h+1+0]=d[h+3+32]=Ze(w,U,z),d[h+1+32]=d[h+3+64]=Ze(C,w,U),d[h+1+64]=d[h+3+96]=Ze(O,C,w),d[h+1+96]=Ze(B,O,C)}function dm(d,h){var w;for(w=0;8>w;++w)n(d,h+32*w,d,h-32,8)}function Cl(d,h){var w;for(w=0;8>w;++w)a(d,h,d[h-1],8),h+=32}function pi(d,h,w){var C;for(C=0;8>C;++C)a(h,w+32*C,d,8)}function ya(d,h){var w,C=8;for(w=0;8>w;++w)C+=d[h+w-32]+d[h-1+32*w];pi(C>>4,d,h)}function um(d,h){var w,C=4;for(w=0;8>w;++w)C+=d[h+w-32];pi(C>>3,d,h)}function xi(d,h){var w,C=4;for(w=0;8>w;++w)C+=d[h-1+32*w];pi(C>>3,d,h)}function Tl(d,h){pi(128,d,h)}function io(d,h,w){var C=d[h-w],O=d[h+0],B=3*(O-C)+gm[1020+d[h-2*w]-d[h+w]],U=Pd[112+(B+4>>3)];d[h-w]=kr[255+C+Pd[112+(B+3>>3)]],d[h+0]=kr[255+O-U]}function vd(d,h,w,C){var O=d[h+0],B=d[h+w];return Ur[255+d[h-2*w]-d[h-w]]>C||Ur[255+B-O]>C}function bd(d,h,w,C){return 4*Ur[255+d[h-w]-d[h+0]]+Ur[255+d[h-2*w]-d[h+w]]<=C}function yd(d,h,w,C,O){var B=d[h-3*w],U=d[h-2*w],z=d[h-w],H=d[h+0],W=d[h+w],oe=d[h+2*w],ge=d[h+3*w];return 4*Ur[255+z-H]+Ur[255+U-W]>C?0:Ur[255+d[h-4*w]-B]<=O&&Ur[255+B-U]<=O&&Ur[255+U-z]<=O&&Ur[255+ge-oe]<=O&&Ur[255+oe-W]<=O&&Ur[255+W-H]<=O}function wd(d,h,w,C){var O=2*C+1;for(C=0;16>C;++C)bd(d,h+C,w,O)&&io(d,h+C,w)}function Dn(d,h,w,C){var O=2*C+1;for(C=0;16>C;++C)bd(d,h+C*w,1,O)&&io(d,h+C*w,1)}function Qn(d,h,w,C){var O;for(O=3;0<O;--O)wd(d,h+=4*w,w,C)}function hm(d,h,w,C){var O;for(O=3;0<O;--O)Dn(d,h+=4,w,C)}function wa(d,h,w,C,O,B,U,z){for(B=2*B+1;0<O--;){if(yd(d,h,w,B,U))if(vd(d,h,w,z))io(d,h,w);else{var H=d,W=h,oe=w,ge=H[W-2*oe],ve=H[W-oe],he=H[W+0],Se=H[W+oe],ye=H[W+2*oe],le=27*(je=gm[1020+3*(he-ve)+gm[1020+ge-Se]])+63>>7,ce=18*je+63>>7,je=9*je+63>>7;H[W-3*oe]=kr[255+H[W-3*oe]+je],H[W-2*oe]=kr[255+ge+ce],H[W-oe]=kr[255+ve+le],H[W+0]=kr[255+he-le],H[W+oe]=kr[255+Se-ce],H[W+2*oe]=kr[255+ye-je]}h+=C}}function on(d,h,w,C,O,B,U,z){for(B=2*B+1;0<O--;){if(yd(d,h,w,B,U))if(vd(d,h,w,z))io(d,h,w);else{var H=d,W=h,oe=w,ge=H[W-oe],ve=H[W+0],he=H[W+oe],Se=Pd[112+((ye=3*(ve-ge))+4>>3)],ye=Pd[112+(ye+3>>3)],le=Se+1>>1;H[W-2*oe]=kr[255+H[W-2*oe]+le],H[W-oe]=kr[255+ge+ye],H[W+0]=kr[255+ve-Se],H[W+oe]=kr[255+he-le]}h+=C}}function Pl(d,h,w,C,O,B){wa(d,h,w,1,16,C,O,B)}function gi(d,h,w,C,O,B){wa(d,h,1,w,16,C,O,B)}function mm(d,h,w,C,O,B){var U;for(U=3;0<U;--U)on(d,h+=4*w,w,1,16,C,O,B)}function oo(d,h,w,C,O,B){var U;for(U=3;0<U;--U)on(d,h+=4,1,w,16,C,O,B)}function fm(d,h,w,C,O,B,U,z){wa(d,h,O,1,8,B,U,z),wa(w,C,O,1,8,B,U,z)}function Ll(d,h,w,C,O,B,U,z){wa(d,h,1,O,8,B,U,z),wa(w,C,1,O,8,B,U,z)}function El(d,h,w,C,O,B,U,z){on(d,h+4*O,O,1,8,B,U,z),on(w,C+4*O,O,1,8,B,U,z)}function Nd(d,h,w,C,O,B,U,z){on(d,h+4,1,O,8,B,U,z),on(w,C+4,1,O,8,B,U,z)}function lo(){this.ba=new en,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Il(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Dl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jd(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new I}function pm(){this.xb=this.a=0,this.l=new to,this.ca=new en,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jd,this.ab=0,this.gc=o(4,Dl),this.Oc=0}function co(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new to,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vi(d,h,w,C,O,B,U){for(d=d==null?0:d[h+0],h=0;h<U;++h)O[B+h]=d+w[C+h]&255,d=O[B+h]}function Ol(d,h,w,C,O,B,U){var z;if(d==null)vi(null,null,w,C,O,B,U);else for(z=0;z<U;++z)O[B+z]=d[h+z]+w[C+z]&255}function Na(d,h,w,C,O,B,U){if(d==null)vi(null,null,w,C,O,B,U);else{var z,H=d[h+0],W=H,oe=H;for(z=0;z<U;++z)W=oe+(H=d[h+z])-W,oe=w[C+z]+(-256&W?0>W?0:255:W)&255,W=H,O[B+z]=oe}}function Fl(d,h,w,C){var O=h.width,B=h.o;if(t(d!=null&&h!=null),0>w||0>=C||w+C>B)return null;if(!d.Cc){if(d.ga==null){var U;if(d.ga=new co,(U=d.ga==null)||(U=h.width*h.o,t(d.Gb.length==0),d.Gb=i(U),d.Uc=0,d.Gb==null?U=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,U=1),U=!U),!U){U=d.ga;var z=d.Fa,H=d.P,W=d.qc,oe=d.mb,ge=d.nb,ve=H+1,he=W-1,Se=U.l;if(t(z!=null&&oe!=null&&h!=null),Ca[0]=null,Ca[1]=vi,Ca[2]=Ol,Ca[3]=Na,U.ca=oe,U.tb=ge,U.c=h.width,U.i=h.height,t(0<U.c&&0<U.i),1>=W)h=0;else if(U.$a=z[H+0]>>0&3,U.Z=z[H+0]>>2&3,U.Lc=z[H+0]>>4&3,H=z[H+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||H)h=0;else if(Se.put=Cn,Se.ac=Os,Se.bc=Tn,Se.ma=U,Se.width=h.width,Se.height=h.height,Se.Da=h.Da,Se.v=h.v,Se.va=h.va,Se.j=h.j,Se.o=h.o,U.$a)e:{t(U.$a==1),h=Fr();t:for(;;){if(h==null){h=0;break e}if(t(U!=null),U.mc=h,h.c=U.c,h.i=U.i,h.l=U.l,h.l.ma=U,h.l.width=U.c,h.l.height=U.i,h.a=0,$(h.m,z,ve,he),!En(U.c,U.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&Jn(h.s)?(U.ic=1,z=h.c*h.i,h.Ta=null,h.Ua=0,h.V=i(z),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(U.ic=0,h=fi(h,U.c)),!h))break t;h=1;break e}U.mc=null,h=0}else h=he>=U.c*U.i;U=!h}if(U)return null;d.ga.Lc!=1?d.Ga=0:C=B-w}t(d.ga!=null),t(w+C<=B);e:{if(h=(z=d.ga).c,B=z.l.o,z.$a==0){if(ve=d.rc,he=d.Vc,Se=d.Fa,H=d.P+1+w*h,W=d.mb,oe=d.nb+w*h,t(H<=d.P+d.qc),z.Z!=0)for(t(Ca[z.Z]!=null),U=0;U<C;++U)Ca[z.Z](ve,he,Se,H,W,oe,h),ve=W,he=oe,oe+=h,H+=h;else for(U=0;U<C;++U)n(W,oe,Se,H,h),ve=W,he=oe,oe+=h,H+=h;d.rc=ve,d.Vc=he}else{if(t(z.mc!=null),h=w+C,t((U=z.mc)!=null),t(h<=U.i),U.C>=h)h=1;else if(z.ic||pe(),z.ic){z=U.V,ve=U.Ba,he=U.c;var ye=U.i,le=(Se=1,H=U.$/he,W=U.$%he,oe=U.m,ge=U.s,U.$),ce=he*ye,je=he*h,Ae=ge.wc,_e=le<je?ms(ge,W,H):null;t(le<=ce),t(h<=ye),t(Jn(ge));t:for(;;){for(;!oe.h&&le<je;){if(W&Ae||(_e=ms(ge,W,H)),t(_e!=null),se(oe),256>(ye=cr(_e.G[0],_e.H[0],oe)))z[ve+le]=ye,++le,++W>=he&&(W=0,++H<=h&&!(H%16)&&rn(U,H));else{if(!(280>ye)){Se=0;break t}ye=tn(ye-256,oe);var Ue,Fe=cr(_e.G[4],_e.H[4],oe);if(se(oe),!(le>=(Fe=Pn(he,Fe=tn(Fe,oe)))&&ce-le>=ye)){Se=0;break t}for(Ue=0;Ue<ye;++Ue)z[ve+le+Ue]=z[ve+le+Ue-Fe];for(le+=ye,W+=ye;W>=he;)W-=he,++H<=h&&!(H%16)&&rn(U,H);le<je&&W&Ae&&(_e=ms(ge,W,H))}t(oe.h==V(oe))}rn(U,H>h?h:H);break t}!Se||oe.h&&le<ce?(Se=0,U.a=oe.h?5:3):U.$=le,h=Se}else h=nn(U,U.V,U.Ba,U.c,U.i,h,Ji);if(!h){C=0;break e}}w+C>=B&&(d.Cc=1),C=1}if(!C)return null;if(d.Cc&&((C=d.ga)!=null&&(C.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+w*O}function g(d,h,w,C,O,B){for(;0<O--;){var U,z=d,H=h+(w?1:0),W=d,oe=h+(w?0:3);for(U=0;U<C;++U){var ge=W[oe+4*U];ge!=255&&(ge*=32897,z[H+4*U+0]=z[H+4*U+0]*ge>>23,z[H+4*U+1]=z[H+4*U+1]*ge>>23,z[H+4*U+2]=z[H+4*U+2]*ge>>23)}h+=B}}function F(d,h,w,C,O){for(;0<C--;){var B;for(B=0;B<w;++B){var U=d[h+2*B+0],z=15&(W=d[h+2*B+1]),H=4369*z,W=(240&W|W>>4)*H>>16;d[h+2*B+0]=(240&U|U>>4)*H>>16&240|(15&U|U<<4)*H>>16>>4&15,d[h+2*B+1]=240&W|z}h+=O}}function J(d,h,w,C,O,B,U,z){var H,W,oe=255;for(W=0;W<O;++W){for(H=0;H<C;++H){var ge=d[h+H];B[U+4*H]=ge,oe&=ge}h+=w,U+=z}return oe!=255}function ie(d,h,w,C,O){var B;for(B=0;B<O;++B)w[C+B]=d[h+B]>>8}function pe(){Br=g,Dt=F,Ot=J,os=ie}function we(d,h,w){N[d]=function(C,O,B,U,z,H,W,oe,ge,ve,he,Se,ye,le,ce,je,Ae){var _e,Ue=Ae-1>>1,Fe=z[H+0]|W[oe+0]<<16,Ge=ge[ve+0]|he[Se+0]<<16;t(C!=null);var Me=3*Fe+Ge+131074>>2;for(h(C[O+0],255&Me,Me>>16,ye,le),B!=null&&(Me=3*Ge+Fe+131074>>2,h(B[U+0],255&Me,Me>>16,ce,je)),_e=1;_e<=Ue;++_e){var yt=z[H+_e]|W[oe+_e]<<16,_t=ge[ve+_e]|he[Se+_e]<<16,gt=Fe+yt+Ge+_t+524296,mt=gt+2*(yt+Ge)>>3;Me=mt+Fe>>1,Fe=(gt=gt+2*(Fe+_t)>>3)+yt>>1,h(C[O+2*_e-1],255&Me,Me>>16,ye,le+(2*_e-1)*w),h(C[O+2*_e-0],255&Fe,Fe>>16,ye,le+(2*_e-0)*w),B!=null&&(Me=gt+Ge>>1,Fe=mt+_t>>1,h(B[U+2*_e-1],255&Me,Me>>16,ce,je+(2*_e-1)*w),h(B[U+2*_e+0],255&Fe,Fe>>16,ce,je+(2*_e+0)*w)),Fe=yt,Ge=_t}1&Ae||(Me=3*Fe+Ge+131074>>2,h(C[O+Ae-1],255&Me,Me>>16,ye,le+(Ae-1)*w),B!=null&&(Me=3*Ge+Fe+131074>>2,h(B[U+Ae-1],255&Me,Me>>16,ce,je+(Ae-1)*w)))}}function Ce(){qr[Ld]=my,qr[Ed]=ix,qr[tx]=fy,qr[Id]=ox,qr[Dd]=lx,qr[vm]=cx,qr[sx]=py,qr[bm]=ix,qr[ym]=ox,qr[Od]=lx,qr[wm]=cx}function $e(d){return d&~xy?0>d?0:255:d>>dx}function We(d,h){return $e((19077*d>>8)+(26149*h>>8)-14234)}function rt(d,h,w){return $e((19077*d>>8)-(6419*h>>8)-(13320*w>>8)+8708)}function tt(d,h){return $e((19077*d>>8)+(33050*h>>8)-17685)}function pt(d,h,w,C,O){C[O+0]=We(d,w),C[O+1]=rt(d,h,w),C[O+2]=tt(d,h)}function Vt(d,h,w,C,O){C[O+0]=tt(d,h),C[O+1]=rt(d,h,w),C[O+2]=We(d,w)}function Zt(d,h,w,C,O){var B=rt(d,h,w);h=B<<3&224|tt(d,h)>>3,C[O+0]=248&We(d,w)|B>>5,C[O+1]=h}function fs(d,h,w,C,O){var B=240&tt(d,h)|15;C[O+0]=240&We(d,w)|rt(d,h,w)>>4,C[O+1]=B}function zs(d,h,w,C,O){C[O+0]=255,pt(d,h,w,C,O+1)}function Cs(d,h,w,C,O){Vt(d,h,w,C,O),C[O+3]=255}function ln(d,h,w,C,O){pt(d,h,w,C,O),C[O+3]=255}function Sr(d,h){return 0>d?0:d>h?h:d}function On(d,h,w){N[d]=function(C,O,B,U,z,H,W,oe,ge){for(var ve=oe+(-2&ge)*w;oe!=ve;)h(C[O+0],B[U+0],z[H+0],W,oe),h(C[O+1],B[U+0],z[H+0],W,oe+w),O+=2,++U,++H,oe+=2*w;1&ge&&h(C[O+0],B[U+0],z[H+0],W,oe)}}function _d(d,h,w){return w==0?d==0?h==0?6:5:h==0?4:0:w}function Ml(d,h,w,C,O){switch(d>>>30){case 3:ta(h,w,C,O,0);break;case 2:is(h,w,C,O);break;case 1:tr(h,w,C,O)}}function Rl(d,h){var w,C,O=h.M,B=h.Nb,U=d.oc,z=d.pc+40,H=d.oc,W=d.pc+584,oe=d.oc,ge=d.pc+600;for(w=0;16>w;++w)U[z+32*w-1]=129;for(w=0;8>w;++w)H[W+32*w-1]=129,oe[ge+32*w-1]=129;for(0<O?U[z-1-32]=H[W-1-32]=oe[ge-1-32]=129:(a(U,z-32-1,127,21),a(H,W-32-1,127,9),a(oe,ge-32-1,127,9)),C=0;C<d.za;++C){var ve=h.ya[h.aa+C];if(0<C){for(w=-1;16>w;++w)n(U,z+32*w-4,U,z+32*w+12,4);for(w=-1;8>w;++w)n(H,W+32*w-4,H,W+32*w+4,4),n(oe,ge+32*w-4,oe,ge+32*w+4,4)}var he=d.Gd,Se=d.Hd+C,ye=ve.ad,le=ve.Hc;if(0<O&&(n(U,z-32,he[Se].y,0,16),n(H,W-32,he[Se].f,0,8),n(oe,ge-32,he[Se].ea,0,8)),ve.Za){var ce=U,je=z-32+16;for(0<O&&(C>=d.za-1?a(ce,je,he[Se].y[15],4):n(ce,je,he[Se+1].y,0,4)),w=0;4>w;w++)ce[je+128+w]=ce[je+256+w]=ce[je+384+w]=ce[je+0+w];for(w=0;16>w;++w,le<<=2)ce=U,je=z+hx[w],cn[ve.Ob[w]](ce,je),Ml(le,ye,16*+w,ce,je)}else if(ce=_d(C,O,ve.Ob[0]),Aa[ce](U,z),le!=0)for(w=0;16>w;++w,le<<=2)Ml(le,ye,16*+w,U,z+hx[w]);for(w=ve.Gc,ce=_d(C,O,ve.Dd),ra[ce](H,W),ra[ce](oe,ge),le=ye,ce=H,je=W,255&(ve=w>>0)&&(170&ve?zl(le,256,ce,je):Rr(le,256,ce,je)),ve=oe,le=ge,255&(w>>=8)&&(170&w?zl(ye,320,ve,le):Rr(ye,320,ve,le)),O<d.Ub-1&&(n(he[Se].y,0,U,z+480,16),n(he[Se].f,0,H,W+224,8),n(he[Se].ea,0,oe,ge+224,8)),w=8*B*d.B,he=d.sa,Se=d.ta+16*C+16*B*d.R,ye=d.qa,ve=d.ra+8*C+w,le=d.Ha,ce=d.Ia+8*C+w,w=0;16>w;++w)n(he,Se+w*d.R,U,z+32*w,16);for(w=0;8>w;++w)n(ye,ve+w*d.B,H,W+32*w,8),n(le,ce+w*d.B,oe,ge+32*w,8)}}function uo(d,h,w,C,O,B,U,z,H){var W=[0],oe=[0],ge=0,ve=H!=null?H.kd:0,he=H??new Il;if(d==null||12>w)return 7;he.data=d,he.w=h,he.ha=w,h=[h],w=[w],he.gb=[he.gb];e:{var Se=h,ye=w,le=he.gb;if(t(d!=null),t(ye!=null),t(le!=null),le[0]=0,12<=ye[0]&&!r(d,Se[0],"RIFF")){if(r(d,Se[0]+8,"WEBP")){le=3;break e}var ce=me(d,Se[0]+4);if(12>ce||4294967286<ce){le=3;break e}if(ve&&ce>ye[0]-8){le=7;break e}le[0]=ce,Se[0]+=12,ye[0]-=12}le=0}if(le!=0)return le;for(ce=0<he.gb[0],w=w[0];;){e:{var je=d;ye=h,le=w;var Ae=W,_e=oe,Ue=Se=[0];if((Me=ge=[ge])[0]=0,8>le[0])le=7;else{if(!r(je,ye[0],"VP8X")){if(me(je,ye[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var Fe=me(je,ye[0]+8),Ge=1+De(je,ye[0]+12);if(2147483648<=Ge*(je=1+De(je,ye[0]+15))){le=3;break e}Ue!=null&&(Ue[0]=Fe),Ae!=null&&(Ae[0]=Ge),_e!=null&&(_e[0]=je),ye[0]+=18,le[0]-=18,Me[0]=1}le=0}}if(ge=ge[0],Se=Se[0],le!=0)return le;if(ye=!!(2&Se),!ce&&ge)return 3;if(B!=null&&(B[0]=!!(16&Se)),U!=null&&(U[0]=ye),z!=null&&(z[0]=0),U=W[0],Se=oe[0],ge&&ye&&H==null){le=0;break}if(4>w){le=7;break}if(ce&&ge||!ce&&!ge&&!r(d,h[0],"ALPH")){w=[w],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{Fe=d,le=h,ce=w;var Me=he.gb;Ae=he.na,_e=he.P,Ue=he.Sa,Ge=22,t(Fe!=null),t(ce!=null),je=le[0];var yt=ce[0];for(t(Ae!=null),t(Ue!=null),Ae[0]=null,_e[0]=null,Ue[0]=0;;){if(le[0]=je,ce[0]=yt,8>yt){le=7;break e}var _t=me(Fe,je+4);if(4294967286<_t){le=3;break e}var gt=8+_t+1&-2;if(Ge+=gt,0<Me&&Ge>Me){le=3;break e}if(!r(Fe,je,"VP8 ")||!r(Fe,je,"VP8L")){le=0;break e}if(yt[0]<gt){le=7;break e}r(Fe,je,"ALPH")||(Ae[0]=Fe,_e[0]=je+8,Ue[0]=_t),je+=gt,yt-=gt}}if(w=w[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],le!=0)break}w=[w],he.Ja=[he.Ja],he.xa=[he.xa];e:if(Me=d,le=h,ce=w,Ae=he.gb[0],_e=he.Ja,Ue=he.xa,Fe=le[0],je=!r(Me,Fe,"VP8 "),Ge=!r(Me,Fe,"VP8L"),t(Me!=null),t(ce!=null),t(_e!=null),t(Ue!=null),8>ce[0])le=7;else{if(je||Ge){if(Me=me(Me,Fe+4),12<=Ae&&Me>Ae-12){le=3;break e}if(ve&&Me>ce[0]-8){le=7;break e}_e[0]=Me,le[0]+=8,ce[0]-=8,Ue[0]=Ge}else Ue[0]=5<=ce[0]&&Me[Fe+0]==47&&!(Me[Fe+4]>>5),_e[0]=ce[0];le=0}if(w=w[0],he.Ja=he.Ja[0],he.xa=he.xa[0],h=h[0],le!=0)break;if(4294967286<he.Ja)return 3;if(z==null||ye||(z[0]=he.xa?2:1),U=[U],Se=[Se],he.xa){if(5>w){le=7;break}z=U,ve=Se,ye=B,d==null||5>w?d=0:5<=w&&d[h+0]==47&&!(d[h+4]>>5)?(ce=[0],Me=[0],Ae=[0],$(_e=new D,d,h,w),Ke(_e,ce,Me,Ae)?(z!=null&&(z[0]=ce[0]),ve!=null&&(ve[0]=Me[0]),ye!=null&&(ye[0]=Ae[0]),d=1):d=0):d=0}else{if(10>w){le=7;break}z=Se,d==null||10>w||!ld(d,h+3,w-3)?d=0:(ve=d[h+0]|d[h+1]<<8|d[h+2]<<16,ye=16383&(d[h+7]<<8|d[h+6]),d=16383&(d[h+9]<<8|d[h+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=he.Ja||!ye||!d?d=0:(U&&(U[0]=ye),z&&(z[0]=d),d=1))}if(!d||(U=U[0],Se=Se[0],ge&&(W[0]!=U||oe[0]!=Se)))return 3;H!=null&&(H[0]=he,H.offset=h-H.w,t(4294967286>h-H.w),t(H.offset==H.ha-w));break}return le==0||le==7&&ge&&H==null?(B!=null&&(B[0]|=he.na!=null&&0<he.na.length),C!=null&&(C[0]=U),O!=null&&(O[0]=Se),0):le}function $l(d,h,w){var C=h.width,O=h.height,B=0,U=0,z=C,H=O;if(h.Da=d!=null&&0<d.Da,h.Da&&(z=d.cd,H=d.bd,B=d.v,U=d.j,11>w||(B&=-2,U&=-2),0>B||0>U||0>=z||0>=H||B+z>C||U+H>O))return 0;if(h.v=B,h.j=U,h.va=B+z,h.o=U+H,h.U=z,h.T=H,h.da=d!=null&&0<d.da,h.da){if(!Be(z,H,w=[d.ib],B=[d.hb]))return 0;h.ib=w[0],h.hb=B[0]}return h.ob=d!=null&&d.ob,h.Kb=d==null||!d.Sd,h.da&&(h.ob=h.ib<3*C/4&&h.hb<3*O/4,h.Kb=0),1}function Bl(d){if(d==null)return 2;if(11>d.S){var h=d.f.RGBA;h.fb+=(d.height-1)*h.A,h.A=-h.A}else h=d.f.kb,d=d.height,h.O+=(d-1)*h.fa,h.fa=-h.fa,h.N+=(d-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(d-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(d-1)*h.lb,h.lb=-h.lb);return 0}function ho(d,h,w,C){if(C==null||0>=d||0>=h)return 2;if(w!=null){if(w.Da){var O=w.cd,B=w.bd,U=-2&w.v,z=-2&w.j;if(0>U||0>z||0>=O||0>=B||U+O>d||z+B>h)return 2;d=O,h=B}if(w.da){if(!Be(d,h,O=[w.ib],B=[w.hb]))return 2;d=O[0],h=B[0]}}C.width=d,C.height=h;e:{var H=C.width,W=C.height;if(d=C.S,0>=H||0>=W||!(d>=Ld&&13>d))d=2;else{if(0>=C.Rd&&C.sd==null){U=B=O=h=0;var oe=(z=H*mx[d])*W;if(11>d||(B=(W+1)/2*(h=(H+1)/2),d==12&&(U=(O=H)*W)),(W=i(oe+2*B+U))==null){d=1;break e}C.sd=W,11>d?((H=C.f.RGBA).eb=W,H.fb=0,H.A=z,H.size=oe):((H=C.f.kb).y=W,H.O=0,H.fa=z,H.Fd=oe,H.f=W,H.N=0+oe,H.Ab=h,H.Cd=B,H.ea=W,H.W=0+oe+B,H.Db=h,H.Ed=B,d==12&&(H.F=W,H.J=0+oe+2*B),H.Tc=U,H.lb=O)}if(h=1,O=C.S,B=C.width,U=C.height,O>=Ld&&13>O)if(11>O)d=C.f.RGBA,h&=(z=Math.abs(d.A))*(U-1)+B<=d.size,h&=z>=B*mx[O],h&=d.eb!=null;else{d=C.f.kb,z=(B+1)/2,oe=(U+1)/2,H=Math.abs(d.fa),W=Math.abs(d.Ab);var ge=Math.abs(d.Db),ve=Math.abs(d.lb),he=ve*(U-1)+B;h&=H*(U-1)+B<=d.Fd,h&=W*(oe-1)+z<=d.Cd,h=(h&=ge*(oe-1)+z<=d.Ed)&H>=B&W>=z&ge>=z,h&=d.y!=null,h&=d.f!=null,h&=d.ea!=null,O==12&&(h&=ve>=B,h&=he<=d.Tc,h&=d.F!=null)}else h=0;d=h?0:2}}return d!=0||w!=null&&w.fd&&(d=Bl(C)),d}var Fs=64,mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fo=24,po=32,Ul=8,ur=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Le("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(d){return d},N.Predictor2=function(d,h,w){return h[w+0]},N.Predictor3=function(d,h,w){return h[w+1]},N.Predictor4=function(d,h,w){return h[w-1]},N.Predictor5=function(d,h,w){return Oe(Oe(d,h[w+1]),h[w+0])},N.Predictor6=function(d,h,w){return Oe(d,h[w-1])},N.Predictor7=function(d,h,w){return Oe(d,h[w+0])},N.Predictor8=function(d,h,w){return Oe(h[w-1],h[w+0])},N.Predictor9=function(d,h,w){return Oe(h[w+0],h[w+1])},N.Predictor10=function(d,h,w){return Oe(Oe(d,h[w-1]),Oe(h[w+0],h[w+1]))},N.Predictor11=function(d,h,w){var C=h[w+0];return 0>=ot(C>>24&255,d>>24&255,(h=h[w-1])>>24&255)+ot(C>>16&255,d>>16&255,h>>16&255)+ot(C>>8&255,d>>8&255,h>>8&255)+ot(255&C,255&d,255&h)?C:d},N.Predictor12=function(d,h,w){var C=h[w+0];return(Ve((d>>24&255)+(C>>24&255)-((h=h[w-1])>>24&255))<<24|Ve((d>>16&255)+(C>>16&255)-(h>>16&255))<<16|Ve((d>>8&255)+(C>>8&255)-(h>>8&255))<<8|Ve((255&d)+(255&C)-(255&h)))>>>0},N.Predictor13=function(d,h,w){var C=h[w-1];return(Qe((d=Oe(d,h[w+0]))>>24&255,C>>24&255)<<24|Qe(d>>16&255,C>>16&255)<<16|Qe(d>>8&255,C>>8&255)<<8|Qe(d>>0&255,C>>0&255))>>>0};var xm=N.PredictorAdd0;N.PredictorAdd1=lt,Le("Predictor2","PredictorAdd2"),Le("Predictor3","PredictorAdd3"),Le("Predictor4","PredictorAdd4"),Le("Predictor5","PredictorAdd5"),Le("Predictor6","PredictorAdd6"),Le("Predictor7","PredictorAdd7"),Le("Predictor8","PredictorAdd8"),Le("Predictor9","PredictorAdd9"),Le("Predictor10","PredictorAdd10"),Le("Predictor11","PredictorAdd11"),Le("Predictor12","PredictorAdd12"),Le("Predictor13","PredictorAdd13");var ql=N.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Sd,Mr=N.ColorIndexInverseTransform,xo=N.MapARGB,kd=N.VP8LColorIndexInverseTransformAlpha,Ad=N.MapAlpha,ja=N.VP8LPredictorsAdd=[];ja.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var bi,hr,er,_a,Zn,ea,go,ta,is,zl,tr,Rr,vo,Cd,Hl,yi,wi,Sa,Ni,bo,ji,ka,Vl,$r,Br,Dt,Ot,os,ws=i(511),sa=i(2041),Wl=i(225),yo=i(767),Td=0,gm=sa,Pd=Wl,kr=yo,Ur=ws,Ld=0,Ed=1,tx=2,Id=3,Dd=4,vm=5,sx=6,bm=7,ym=8,Od=9,wm=10,Zb=[2,3,7],ey=[3,3,11],rx=[280,256,256,256,40],ty=[0,1,1,1,0],sy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ry=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ny=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ay=8,Nm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gl=null,iy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ly=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],cy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],dy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],uy=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Aa=[],cn=[],ra=[],hy=1,ax=2,Ca=[],qr=[];we("UpsampleRgbLinePair",pt,3),we("UpsampleBgrLinePair",Vt,3),we("UpsampleRgbaLinePair",ln,4),we("UpsampleBgraLinePair",Cs,4),we("UpsampleArgbLinePair",zs,4),we("UpsampleRgba4444LinePair",fs,2),we("UpsampleRgb565LinePair",Zt,2);var my=N.UpsampleRgbLinePair,fy=N.UpsampleBgrLinePair,ix=N.UpsampleRgbaLinePair,ox=N.UpsampleBgraLinePair,lx=N.UpsampleArgbLinePair,cx=N.UpsampleRgba4444LinePair,py=N.UpsampleRgb565LinePair,Fd=16,Md=1<<Fd-1,Yl=-227,_m=482,dx=6,xy=(256<<dx)-1,ux=0,gy=i(256),vy=i(256),by=i(256),yy=i(256),wy=i(_m-Yl),Ny=i(_m-Yl);On("YuvToRgbRow",pt,3),On("YuvToBgrRow",Vt,3),On("YuvToRgbaRow",ln,4),On("YuvToBgraRow",Cs,4),On("YuvToArgbRow",zs,4),On("YuvToRgba4444Row",fs,2),On("YuvToRgb565Row",Zt,2);var hx=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Rd=[0,2,8],jy=[8,7,6,4,4,2,2,2,1,1,1,1],_y=1;this.WebPDecodeRGBA=function(d,h,w,C,O){var B=Ed,U=new lo,z=new en;U.ba=z,z.S=B,z.width=[z.width],z.height=[z.height];var H=z.width,W=z.height,oe=new Kn;if(oe==null||d==null)var ge=2;else t(oe!=null),ge=uo(d,h,w,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(ge!=0?H=0:(H!=null&&(H[0]=oe.width[0]),W!=null&&(W[0]=oe.height[0]),H=1),H){z.width=z.width[0],z.height=z.height[0],C!=null&&(C[0]=z.width),O!=null&&(O[0]=z.height);e:{if(C=new to,(O=new Il).data=d,O.w=h,O.ha=w,O.kd=1,h=[0],t(O!=null),((d=uo(O.data,O.w,O.ha,null,null,null,h,null,O))==0||d==7)&&h[0]&&(d=4),(h=d)==0){if(t(U!=null),C.data=O.data,C.w=O.w+O.offset,C.ha=O.ha-O.offset,C.put=Cn,C.ac=Os,C.bc=Tn,C.ma=U,O.xa){if((d=Fr())==null){U=1;break e}if(function(ve,he){var Se=[0],ye=[0],le=[0];t:for(;;){if(ve==null)return 0;if(he==null)return ve.a=2,0;if(ve.l=he,ve.a=0,$(ve.m,he.data,he.w,he.ha),!Ke(ve.m,Se,ye,le)){ve.a=3;break t}if(ve.xb=ax,he.width=Se[0],he.height=ye[0],!En(Se[0],ye[0],1,ve,null))break t;return 1}return t(ve.a!=0),0}(d,C)){if(C=(h=ho(C.width,C.height,U.Oa,U.ba))==0){t:{C=d;s:for(;;){if(C==null){C=0;break t}if(t(C.s.yc!=null),t(C.s.Ya!=null),t(0<C.s.Wb),t((w=C.l)!=null),t((O=w.ma)!=null),C.xb!=0){if(C.ca=O.ba,C.tb=O.tb,t(C.ca!=null),!$l(O.Oa,w,Id)){C.a=2;break s}if(!fi(C,w.width)||w.da)break s;if((w.da||Nt(C.ca.S))&&pe(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&pe()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!Ne(C.s.vb,C.s.Wa.Xa)){C.a=1;break s}C.xb=0}if(!nn(C,C.V,C.Ba,C.c,C.i,w.o,Ki))break s;O.Dc=C.Ma,C=1;break t}t(C.a!=0),C=0}C=!C}C&&(h=d.a)}else h=d.a}else{if((d=new Xh)==null){U=1;break e}if(d.Fa=O.na,d.P=O.P,d.qc=O.Sa,cd(d,C)){if((h=ho(C.width,C.height,U.Oa,U.ba))==0){if(d.Aa=0,w=U.Oa,t((O=d)!=null),w!=null){if(0<(H=0>(H=w.Md)?0:100<H?255:255*H/100)){for(W=oe=0;4>W;++W)12>(ge=O.pb[W]).lc&&(ge.ia=H*jy[0>ge.lc?0:ge.lc]>>3),oe|=ge.ia;oe&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=w.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}Qh(d,C)||(h=d.a)}}else h=d.a}h==0&&U.Oa!=null&&U.Oa.fd&&(h=Bl(U.ba))}U=h}B=U!=0?null:11>B?z.f.RGBA.eb:z.f.kb.y}else B=null;return B};var mx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,P){for(var M="",E=0;E<4;E++)M+=String.fromCharCode(N[P++]);return M}function p(N,P){return(N[P+0]<<0|N[P+1]<<8|N[P+2]<<16)>>>0}function f(N,P){return(N[P+0]<<0|N[P+1]<<8|N[P+2]<<16|N[P+3]<<24)>>>0}new c;var j=[0],m=[0],y=[],_=new c,k=e,v=function(N,P){var M={},E=0,I=!1,Y=0,G=0;if(M.frames=[],!function(R,V,Q,se){for(var ue=0;ue<se;ue++)if(R[V+ue]!=Q.charCodeAt(ue))return!0;return!1}(N,P,"RIFF",4)){for(f(N,P+=4),P+=8;P<N.length;){var Z=u(N,P),X=f(N,P+=4);P+=4;var q=X+(1&X);switch(Z){case"VP8 ":case"VP8L":M.frames[E]===void 0&&(M.frames[E]={}),(te=M.frames[E]).src_off=I?G:P-8,te.src_size=Y+X+8,E++,I&&(I=!1,Y=0,G=0);break;case"VP8X":(te=M.header={}).feature_flags=N[P];var $=P+4;te.canvas_width=1+p(N,$),$+=3,te.canvas_height=1+p(N,$),$+=3;break;case"ALPH":I=!0,Y=q+8,G=P-8;break;case"ANIM":(te=M.header).bgcolor=f(N,P),$=P+4,te.loop_count=(re=N)[(D=$)+0]<<0|re[D+1]<<8,$+=2;break;case"ANMF":var ee,te;(te=M.frames[E]={}).offset_x=2*p(N,P),P+=3,te.offset_y=2*p(N,P),P+=3,te.width=1+p(N,P),P+=3,te.height=1+p(N,P),P+=3,te.duration=p(N,P),P+=3,ee=N[P++],te.dispose=1&ee,te.blend=ee>>1&1}Z!="ANMF"&&(P+=q)}var re,D;return M}}(k,0);v.response=k,v.rgbaoutput=!0,v.dataurl=!1;var x=v.header?v.header:null,b=v.frames?v.frames:null;if(x){x.loop_counter=x.loop_count,j=[x.canvas_height],m=[x.canvas_width];for(var S=0;S<b.length&&b[S].blend!=0;S++);}var L=b[0],T=_.WebPDecodeRGBA(k,L.src_off,L.src_size,m,j);L.rgba=T,L.imgwidth=m[0],L.imgheight=j[0];for(var A=0;A<m[0]*j[0]*4;A++)y[A]=T[A];return this.width=m,this.height=j,this.data=y,this}(function(e){var t=function(){return typeof D0=="function"},r=function(j,m,y,_){var k=4,v=o;switch(_){case e.image_compression.FAST:k=1,v=i;break;case e.image_compression.MEDIUM:k=6,v=l;break;case e.image_compression.SLOW:k=9,v=c}j=n(j,m,y,v);var x=D0(j,{level:k});return e.__addimage__.arrayBufferToBinaryString(x)},n=function(j,m,y,_){for(var k,v,x,b=j.length/m,S=new Uint8Array(j.length+b),L=p(),T=0;T<b;T+=1){if(x=T*m,k=j.subarray(x,x+m),_)S.set(_(k,y,v),x+T);else{for(var A,N=L.length,P=[];A<N;A+=1)P[A]=L[A](k,y,v);var M=f(P.concat());S.set(P[M],x+T)}v=k}return S},a=function(j){var m=Array.apply([],j);return m.unshift(0),m},i=function(j,m){var y,_=[],k=j.length;_[0]=1;for(var v=0;v<k;v+=1)y=j[v-m]||0,_[v+1]=j[v]-y+256&255;return _},o=function(j,m,y){var _,k=[],v=j.length;k[0]=2;for(var x=0;x<v;x+=1)_=y&&y[x]||0,k[x+1]=j[x]-_+256&255;return k},l=function(j,m,y){var _,k,v=[],x=j.length;v[0]=3;for(var b=0;b<x;b+=1)_=j[b-m]||0,k=y&&y[b]||0,v[b+1]=j[b]+256-(_+k>>>1)&255;return v},c=function(j,m,y){var _,k,v,x,b=[],S=j.length;b[0]=4;for(var L=0;L<S;L+=1)_=j[L-m]||0,k=y&&y[L]||0,v=y&&y[L-m]||0,x=u(_,k,v),b[L+1]=j[L]-x+256&255;return b},u=function(j,m,y){if(j===m&&m===y)return j;var _=Math.abs(m-y),k=Math.abs(j-y),v=Math.abs(j+m-y-y);return _<=k&&_<=v?j:k<=v?m:y},p=function(){return[a,i,o,l,c]},f=function(j){var m=j.map(function(y){return y.reduce(function(_,k){return _+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(j,m,y,_){var k,v,x,b,S,L,T,A,N,P,M,E,I,Y,G,Z=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(j)&&(j=new Uint8Array(j)),this.__addimage__.isArrayBufferView(j)){if(j=(x=new H6(j)).imgData,v=x.bits,k=x.colorSpace,S=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){N=(A=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,M=new Uint8Array(N*x.colors),P=new Uint8Array(N);var q,$=x.pixelBitlength-x.bits;for(Y=0,G=0;Y<N;Y++){for(I=A[Y],q=0;q<$;)M[G++]=I>>>q&255,q+=x.bits;P[Y]=I>>>q&255}}if(x.bits===16){N=(A=new Uint32Array(x.decodePixels().buffer)).length,M=new Uint8Array(N*(32/x.pixelBitlength)*x.colors),P=new Uint8Array(N*(32/x.pixelBitlength)),E=x.colors>1,Y=0,G=0;for(var ee=0;Y<N;)I=A[Y++],M[G++]=I>>>0&255,E&&(M[G++]=I>>>16&255,I=A[Y++],M[G++]=I>>>0&255),P[ee++]=I>>>16&255;v=8}_!==e.image_compression.NONE&&t()?(j=r(M,x.width*x.colors,x.colors,_),T=r(P,x.width,1,_)):(j=M,T=P,Z=void 0)}if(x.colorType===3&&(k=this.color_spaces.INDEXED,L=x.palette,x.transparency.indexed)){var te=x.transparency.indexed,re=0;for(Y=0,N=te.length;Y<N;++Y)re+=te[Y];if((re/=255)===N-1&&te.indexOf(0)!==-1)b=[te.indexOf(0)];else if(re!==N){for(A=x.decodePixels(),P=new Uint8Array(A.length),Y=0,N=A.length;Y<N;Y++)P[Y]=te[A[Y]];T=r(P,x.width,1)}}var D=function(R){var V;switch(R){case e.image_compression.FAST:V=11;break;case e.image_compression.MEDIUM:V=13;break;case e.image_compression.SLOW:V=14;break;default:V=12}return V}(_);return Z===this.decode.FLATE_DECODE&&(X="/Predictor "+D+" "),X+="/Colors "+S+" /BitsPerComponent "+v+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(j)||this.__addimage__.isArrayBufferView(j))&&(j=this.__addimage__.arrayBufferToBinaryString(j)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:y,data:j,index:m,filter:Z,decodeParameters:X,transparency:b,palette:L,sMask:T,predictor:D,width:x.width,height:x.height,bitsPerComponent:v,colorSpace:k}}}})(Ye.API),function(e){e.processGIF89A=function(t,r,n,a){var i=new V6(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},p=new _f(100).encode(u,100);return e.processJPEG.call(this,p,r,n,a)},e.processGIF87A=e.processGIF89A}(Ye.API),mn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mn.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Et.log("bit decode error:"+r)}},mn.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},mn.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},mn.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},mn.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,p=n*this.width*4+4*a;this.data[p]=c,this.data[p+1]=l,this.data[p+2]=o,this.data[p+3]=u}this.pos+=e}},mn.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,p=a*this.width*4+4*i;this.data[p]=u,this.data[p+1]=c,this.data[p+2]=l,this.data[p+3]=255}this.pos+=e}},mn.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},mn.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},mn.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new mn(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new _f(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ye.API),A1.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new A1(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new _f(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(Ye.API),Ye.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var p=n[u],f=n[u+1],j=n[u+2],m=n[u+3];i[l++]=p,i[l++]=f,i[l++]=j,o[c++]=m}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ye.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Eo=Ye.API,bu=Eo.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,p=u.fof?u.fof:1,f=t.doKerning!==!1,j=0,m=e.length,y=0,_=l[0]||c,k=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(j=f&&kt(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/p:0,k.push((l[n]||_)/c+j)),y=n;return k},j1=Eo.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Eo.processArabic&&(e=Eo.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:bu.apply(this,arguments).reduce(function(i,o){return i+o},0)},_1=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},S1=function(e,t,r){r||(r={});var n,a,i,o,l,c,u,p=[],f=[p],j=r.textIndent||0,m=0,y=0,_=e.split(" "),k=bu.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?_[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),x=[];_.map(function(S){(S=S.split(/\s*\n/)).length>1?x=x.concat(S.map(function(L,T){return(T&&L.length?`
`:"")+L})):x.push(S[0])}),_=x,c=j1.apply(this,[v,r])}for(i=0,o=_.length;i<o;i++){var b=0;if(n=_[i],c&&n[0]==`
`&&(n=n.substr(1),b=1),j+m+(y=(a=bu.apply(this,[n,r])).reduce(function(S,L){return S+L},0))>t||b){if(y>t){for(l=_1.apply(this,[n,a,t-(j+m),t]),p.push(l.shift()),p=[l.pop()];l.length;)f.push([l.shift()]);y=a.slice(n.length-(p[0]?p[0].length:0)).reduce(function(S,L){return S+L},0)}else p=[n];f.push(p),j=y+c,m=k}else p.push(n),j+=m+y,m=k}return u=c?function(S,L){return(L?v:"")+S.join(" ")}:function(S){return S.join(" ")},f.map(u)},Eo.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var f=this.internal.getFont(p.fontName,p.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(S1.apply(this,[n[l],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var j,m,y,_,k=["{"];for(var v in f){if(j=f[v],isNaN(parseInt(v,10))?m="'"+v+"'":(v=parseInt(v,10),m=(m=i(v).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof j=="number")j<0?(y=i(j).slice(3),_="-"):(y=i(j).slice(2),_=""),y=_+y.slice(0,-1)+n[y.slice(-1)];else{if(kt(j)!=="object")throw new Error("Don't know what to do with value type "+kt(j)+".");y=o(j)}k.push(m+y)}return k.push("}"),k.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var j,m,y,_,k={},v=1,x=k,b=[],S="",L="",T=f.length-1,A=1;A<T;A+=1)(_=f[A])=="'"?j?(y=j.join(""),j=void 0):j=[]:j?j.push(_):_=="{"?(b.push([x,y]),x={},y=void 0):_=="}"?((m=b.pop())[0][m[1]]=x,y=void 0,x=m[0]):_=="-"?v=-1:y===void 0?r.hasOwnProperty(_)?(S+=r[_],y=parseInt(S,16)*v,v=1,S=""):S+=_:r.hasOwnProperty(_)?(L+=r[_],x[y]=parseInt(L,16)*v,v=1,y=void 0,L=""):L+=_;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},p={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var j=f.font,m=p.Unicode[j.postScriptName];m&&(j.metadata.Unicode={},j.metadata.Unicode.widths=m.widths,j.metadata.Unicode.kerning=m.kerning);var y=u.Unicode[j.postScriptName];y&&(j.metadata.Unicode.encoding=y,j.encoding=y.codePages[0])}])}(Ye.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Tc(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(Ye),function(e){function t(){return(Je.canvg?Promise.resolve(Je.canvg):ri(()=>import("./index.es-jUhCLH-a.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Ye.API.addSvgAsImage=function(r,n,a,i,o,l,c,u){if(isNaN(n)||isNaN(a))throw Et.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Et.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=i,p.height=o;var f=p.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,p.width,p.height);var j={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(y){return y.fromString(f,r,j)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(j)}).then(function(){m.addImage(p.toDataURL("image/jpeg",1),n,a,i,o,c,u)})}}(),Ye.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Ye.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,p=0,f=0;function j(y,_){var k,v=!1;for(k=0;k<y.length;k+=1)y[k]===_&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(kt(e)==="object"){for(a in e)if(i=e[a],j(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&j(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(p=0;p<i[u].length;p+=1)typeof i[u][p]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,_=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?_.push("/"+y+" /"+r[y].value):_.push("/"+y+" "+r[y].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Ye.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],p=[""],f=0,j=i.length;f<j;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return p.join("");l=l.toString(16),p.push(u[4-l.length],l)}return p.join("")},n=function(i){var o,l,c,u,p,f,j;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,j=(l=Object.keys(i).sort(function(m,y){return m-y})).length;f<j;f++)o=l[f],c.length>=100&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(p+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,j=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",y=0;y<j.length;y++)m+=String.fromCharCode(j[y]);var _=u();p({data:m,addLength1:!0,objectId:_}),c("endobj");var k=u();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Fo(l.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var x=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Fo(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+Fo(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+x+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,p=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,j="",m=0;m<f.length;m++)j+=String.fromCharCode(f[m]);var y=u();p({data:j,addLength1:!0,objectId:y}),c("endobj");var _=u();p({data:n(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var k=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Fo(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Fo(l.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,u=i.y,p=i.options||{},f=i.mutex||{},j=f.pdfEscape,m=f.activeFontKey,y=f.fonts,_=m,k="",v=0,x="",b=y[_].encoding;if(y[_].encoding!=="Identity-H")return{text:l,x:c,y:u,options:p,mutex:f};for(x=l,_=m,Array.isArray(l)&&(x=l[0]),v=0;v<x.length;v+=1)y[_].metadata.hasOwnProperty("cmap")&&(o=y[_].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&y[_].metadata.hasOwnProperty("Unicode")?k+=x[v]:k+="";var S="";return parseInt(_.slice(1))<14||b==="WinAnsiEncoding"?S=j(k,_).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(S=r(k,y[_])),f.isHex=!0,{text:S,x:c,y:u,options:p,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Ye),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Ye.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,c,u,p,f=t,j=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,b=0;this.__bidiEngine__={};var S=function(E){var I=E.charCodeAt(),Y=I>>8,G=_[Y];return G!==void 0?f[256*G+(255&I)]:Y===252||Y===253?"AL":v.test(Y)?"L":Y===8?"R":"N"},L=function(E){for(var I,Y=0;Y<E.length;Y++){if((I=S(E.charAt(Y)))==="L")return!1;if(I==="R")return!0}return!1},T=function(E,I,Y,G){var Z,X,q,$,ee=I[G];switch(ee){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(ee="AN");break;case"AL":x=!0,ee="R";break;case"WS":ee="N";break;case"CS":G<1||G+1>=I.length||(Z=Y[G-1])!=="EN"&&Z!=="AN"||(X=I[G+1])!=="EN"&&X!=="AN"?ee="N":x&&(X="AN"),ee=X===Z?X:"N";break;case"ES":ee=(Z=G>0?Y[G-1]:"B")==="EN"&&G+1<I.length&&I[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&Y[G-1]==="EN"){ee="EN";break}if(x){ee="N";break}for(q=G+1,$=I.length;q<$&&I[q]==="ET";)q++;ee=q<$&&I[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for($=I.length,q=G+1;q<$&&I[q]==="NSM";)q++;if(q<$){var te=E[G],re=te>=1425&&te<=2303||te===64286;if(Z=I[q],re&&(Z==="R"||Z==="AL")){ee="R";break}}}ee=G<1||(Z=I[G-1])==="B"?"N":Y[G-1];break;case"B":x=!1,a=!0,ee=b;break;case"S":i=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":ee="N"}return ee},A=function(E,I,Y){var G=E.split("");return Y&&N(G,Y,{hiLevel:b}),G.reverse(),I&&I.reverse(),G.join("")},N=function(E,I,Y){var G,Z,X,q,$,ee=-1,te=E.length,re=0,D=[],R=b?m:j,V=[];for(x=!1,a=!1,i=!1,Z=0;Z<te;Z++)V[Z]=S(E[Z]);for(X=0;X<te;X++){if($=re,D[X]=T(E,V,D,X),G=240&(re=R[$][y[D[X]]]),re&=15,I[X]=q=R[re][5],G>0)if(G===16){for(Z=ee;Z<X;Z++)I[Z]=1;ee=-1}else ee=-1;if(R[re][6])ee===-1&&(ee=X);else if(ee>-1){for(Z=ee;Z<X;Z++)I[Z]=q;ee=-1}V[X]==="B"&&(I[X]=0),Y.hiLevel|=q}i&&function(Q,se,ue){for(var ae=0;ae<ue;ae++)if(Q[ae]==="S"){se[ae]=b;for(var xe=ae-1;xe>=0&&Q[xe]==="WS";xe--)se[xe]=b}}(V,I,te)},P=function(E,I,Y,G,Z){if(!(Z.hiLevel<E)){if(E===1&&b===1&&!a)return I.reverse(),void(Y&&Y.reverse());for(var X,q,$,ee,te=I.length,re=0;re<te;){if(G[re]>=E){for($=re+1;$<te&&G[$]>=E;)$++;for(ee=re,q=$-1;ee<q;ee++,q--)X=I[ee],I[ee]=I[q],I[q]=X,Y&&(X=Y[ee],Y[ee]=Y[q],Y[q]=X);re=$}re++}}},M=function(E,I,Y){var G=E.split(""),Z={hiLevel:b};return Y||(Y=[]),N(G,Y,Z),function(X,q,$){if($.hiLevel!==0&&p)for(var ee,te=0;te<X.length;te++)q[te]===1&&(ee=k.indexOf(X[te]))>=0&&(X[te]=k[ee+1])}(G,Y,Z),P(2,G,I,Y,Z),P(1,G,I,Y,Z),G.join("")};return this.__bidiEngine__.doBidiReorder=function(E,I,Y){if(function(Z,X){if(X)for(var q=0;q<Z.length;q++)X[q]=q;l===void 0&&(l=L(Z)),u===void 0&&(u=L(Z))}(E,I),o||!c||u)if(o&&c&&l^u)b=l?1:0,E=A(E,I,Y);else if(!o&&c&&u)b=l?1:0,E=M(E,I,Y),E=A(E,I);else if(!o||l||c||u){if(o&&!c&&l^u)E=A(E,I),l?(b=0,E=M(E,I,Y)):(b=1,E=M(E,I,Y),E=A(E,I));else if(o&&l&&!c&&u)b=1,E=M(E,I,Y),E=A(E,I);else if(!o&&!c&&l^u){var G=p;l?(b=1,E=M(E,I,Y),b=0,p=!1,E=M(E,I,Y),p=G):(b=0,E=M(E,I,Y),E=A(E,I),b=1,p=!1,E=M(E,I,Y),p=G,E=A(E,I))}}else b=0,E=M(E,I,Y);else b=l?1:0,E=M(E,I,Y);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,u=E.isOutputRtl,p=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Ye),Ye.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new oi(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new i_(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new W6(this.contents),this.head=new Y6(this),this.name=new Z6(this),this.cmap=new Kb(this),this.toUnicode={},this.hhea=new K6(this),this.maxp=new e_(this),this.hmtx=new t_(this),this.post=new X6(this),this.os2=new J6(this),this.loca=new a_(this),this.glyf=new s_(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var kn,oi=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),W6=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,c,u,p,f,j,m,y,_;for(_ in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),p=16*m-f,(a=new oi).writeInt(this.scalarType),a.writeShort(m),a.writeShort(f),a.writeShort(o),a.writeShort(p),i=16*m,u=a.pos+i,l=null,y=[],r)for(j=r[_],a.writeString(_),a.writeInt(e(j)),a.writeInt(u),a.writeInt(j.length),y=y.concat(j),_==="head"&&(l=u),u+=j.length;u%4;)y.push(0),u++;return a.write(y),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=Jb.call(r);r.length%4;)r.push(0);for(i=new oi(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),G6={}.hasOwnProperty,Yn=function(e,t){for(var r in t)G6.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};kn=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Y6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new oi).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),C1=function(){function e(t,r){var n,a,i,o,l,c,u,p,f,j,m,y,_,k,v,x,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),j=m/2,t.pos+=6,i=function(){var S,L;for(L=[],c=S=0;0<=j?S<j:S>j;c=0<=j?++S:--S)L.push(t.readUInt16());return L}(),t.pos+=2,_=function(){var S,L;for(L=[],c=S=0;0<=j?S<j:S>j;c=0<=j?++S:--S)L.push(t.readUInt16());return L}(),u=function(){var S,L;for(L=[],c=S=0;0<=j?S<j:S>j;c=0<=j?++S:--S)L.push(t.readUInt16());return L}(),p=function(){var S,L;for(L=[],c=S=0;0<=j?S<j:S>j;c=0<=j?++S:--S)L.push(t.readUInt16());return L}(),a=(this.length-t.pos+this.offset)/2,l=function(){var S,L;for(L=[],c=S=0;0<=a?S<a:S>a;c=0<=a?++S:--S)L.push(t.readUInt16());return L}(),c=v=0,b=i.length;v<b;c=++v)for(k=i[c],n=x=y=_[c];y<=k?x<=k:x>=k;n=y<=k?++x:--x)p[c]===0?o=n+u[c]:(o=l[p[c]/2+(n-y)-(j-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=f}return e.encode=function(t,r){var n,a,i,o,l,c,u,p,f,j,m,y,_,k,v,x,b,S,L,T,A,N,P,M,E,I,Y,G,Z,X,q,$,ee,te,re,D,R,V,Q,se,ue,ae,xe,Te,Pe,De;switch(G=new oi,o=Object.keys(t).sort(function(me,Ne){return me-Ne}),r){case"macroman":for(_=0,k=function(){var me=[];for(y=0;y<256;++y)me.push(0);return me}(),x={0:0},i={},Z=0,ee=o.length;Z<ee;Z++)x[xe=t[a=o[Z]]]==null&&(x[xe]=++_),i[a]={old:t[a],new:x[t[a]]},k[a]=x[t[a]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(k),{charMap:i,subtable:G.data,maxGlyphID:_+1};case"unicode":for(I=[],f=[],b=0,x={},n={},v=u=null,X=0,te=o.length;X<te;X++)x[L=t[a=o[X]]]==null&&(x[L]=++b),n[a]={old:L,new:x[L]},l=x[L]-a,v!=null&&l===u||(v&&f.push(v),I.push(a),u=l),v=a;for(v&&f.push(v),f.push(65535),I.push(65535),M=2*(P=I.length),N=2*Math.pow(Math.log(P)/Math.LN2,2),j=Math.log(N/2)/Math.LN2,A=2*P-N,c=[],T=[],m=[],y=q=0,re=I.length;q<re;y=++q){if(E=I[y],p=f[y],E===65535){c.push(0),T.push(0);break}if(E-(Y=n[E].new)>=32768)for(c.push(0),T.push(2*(m.length+P-y)),a=$=E;E<=p?$<=p:$>=p;a=E<=p?++$:--$)m.push(n[a].new);else c.push(Y-E),T.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*P+2*m.length),G.writeUInt16(0),G.writeUInt16(M),G.writeUInt16(N),G.writeUInt16(j),G.writeUInt16(A),ue=0,D=f.length;ue<D;ue++)a=f[ue],G.writeUInt16(a);for(G.writeUInt16(0),ae=0,R=I.length;ae<R;ae++)a=I[ae],G.writeUInt16(a);for(Te=0,V=c.length;Te<V;Te++)l=c[Te],G.writeUInt16(l);for(Pe=0,Q=T.length;Pe<Q;Pe++)S=T[Pe],G.writeUInt16(S);for(De=0,se=m.length;De<se;De++)_=m[De],G.writeUInt16(_);return{charMap:n,subtable:G.data,maxGlyphID:b+1}}},e}(),Kb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new C1(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=C1.encode(r,n),(i=new oi).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),K6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),J6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),X6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(a=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),Q6=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Z6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,i,o,l,c,u,p,f,j,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=f=0,j=a.length;f<j;o=++f)i=a[o],r.pos=i.offset,p=r.readString(i.length),l=new Q6(p,i),u[m=i.nameID]==null&&(u[m]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),e_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),t_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,f;for(f=[],n=p=0;0<=i?p<i:p>i;n=0<=i?++p:--p)f.push(r.readInt16());return f}(),this.widths=(function(){var p,f,j,m;for(m=[],p=0,f=(j=this.metrics).length;p<f;p++)o=j[p],m.push(o.advance);return m}).call(this),a=this.widths[this.widths.length-1],u=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Jb=[].slice,s_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,i,o,l,c,u,p,f,j;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,a=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,l=(c=new oi(n.read(i))).readShort(),p=c.readShort(),j=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new n_(c,p,j,u,f):new r_(c,l,p,j,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var i,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),r_=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),n_=function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new oi(Jb.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),a_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Yn(t,kn),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<n.length&&n[o]==l){++o,a[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var p=new Array(4*a.length),f=0;f<a.length;++f)p[4*f+3]=255&a[f],p[4*f+2]=(65280&a[f])>>8,p[4*f+1]=(16711680&a[f])>>16,p[4*f]=(4278190080&a[f])>>24;return p},t}(),i_=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,c,u,p,f,j,m,y,_,k,v;for(a in n=Kb.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},v=n.charMap)m[(c=v[a]).old]=c.new;for(y in j=n.maxGlyphID,o)y in m||(m[y]=j++);return p=function(x){var b,S;for(b in S={},x)S[x[b]]=b;return S}(m),f=Object.keys(p).sort(function(x,b){return x-b}),_=function(){var x,b,S;for(S=[],x=0,b=f.length;x<b;x++)l=f[x],S.push(p[l]);return S}(),i=this.font.glyf.encode(o,_,m),u=this.font.loca.encode(i.offsets,_),k={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e}();Ye.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const o_=({client:e,onClose:t})=>{const{state:r,getLatestItinerary:n}=It(),{hotels:a,sightseeings:i,activities:o,entryTickets:l,meals:c,transportations:u}=r,[p,f]=ne.useState(!1),[j,m]=ne.useState(!1);ne.useState(!1);const y=n(e.id),_=il.useMemo(()=>y?rd(y.client,y.dayPlans,a,i,o,l,c,u):0,[y,a,i,o,l,c,u]),k=_+((y==null?void 0:y.profitMargin)||0);ne.useEffect(()=>{const T=setInterval(()=>{const A=n(e.id);A&&A.version!==(y==null?void 0:y.version)&&(window.location.reload=window.location.reload)},5e3);return()=>clearInterval(T)},[e.id,y==null?void 0:y.version,n]);const v=T=>{const A=i.filter(I=>T.sightseeing.includes(I.id)),N=T.activities.map(I=>{const Y=o.find(Z=>Z.id===I.activityId),G=Y==null?void 0:Y.options.find(Z=>Z.id===I.optionId);return{activity:Y,option:G}}).filter(I=>I.activity&&I.option),P=l.filter(I=>T.entryTickets.includes(I.id)),M=c.filter(I=>T.meals.includes(I.id));let E=null;if(T.hotel){const I=a.find(G=>G.id===T.hotel.hotelId),Y=I==null?void 0:I.roomTypes.find(G=>G.id===T.hotel.roomTypeId);I&&Y&&(E={hotel:I,roomType:Y})}return{sightseeing:A,activities:N,tickets:P,meals:M,hotel:E}},x=()=>{if(!y)return"";const T=e.numberOfPax.adults+e.numberOfPax.children;let A=` TRAVEL ITINERARY 

`;A+=` CLIENT DETAILS:
`,A+=` Client: ${e.name}
`,A+=` Contact: ${e.countryCode} ${e.whatsapp}
`,A+=` Duration: ${e.numberOfDays} days
`,A+=` Passengers: ${T} pax (${e.numberOfPax.adults} adults, ${e.numberOfPax.children} children)
`,A+=` Transportation: ${e.transportationMode}

`,A+=` DAY-BY-DAY ITINERARY:

`,y.dayPlans.forEach(P=>{const M=v(P);A+=` DAY ${P.day}:
`,M.sightseeing.length>0&&(A+=` SIGHTSEEING:
`,M.sightseeing.forEach(E=>{A+=`    ${E.name}
`})),M.hotel&&(A+=` ACCOMMODATION:
`,A+=`    ${M.hotel.hotel.name} - ${M.hotel.roomType.name}
`,A+=`    Location: ${M.hotel.hotel.place}
`),M.activities.length>0&&(A+=` ACTIVITIES:
`,M.activities.forEach(E=>{var I,Y;A+=`    ${(I=E.activity)==null?void 0:I.name} - ${(Y=E.option)==null?void 0:Y.name}
`})),M.tickets.length>0&&(A+=` ENTRY TICKETS:
`,M.tickets.forEach(E=>{A+=`    ${E.name}
`})),M.meals.length>0&&(A+=` MEALS:
`,M.meals.forEach(E=>{A+=`    ${E.type.charAt(0).toUpperCase()+E.type.slice(1)} at ${E.place}
`})),A+=`
`}),A+=` PRICING:
`,A+=` Total Package Price: $${k.toFixed(2)}
`,A+=` Total Package Price (INR): ${(k*((y==null?void 0:y.exchangeRate)||83)).toLocaleString("en-IN")}
`,A+=` Exchange Rate: 1 USD = ${(y==null?void 0:y.exchangeRate)||83}

`;const N=new Map;return y.dayPlans.forEach(P=>{if(P.hotel){const M=a.find(I=>I.id===P.hotel.hotelId),E=M==null?void 0:M.roomTypes.find(I=>I.id===P.hotel.roomTypeId);if(M&&E){const I=`${M.id}-${E.id}`;N.has(I)?N.get(I).nights+=1:N.set(I,{hotel:M,roomType:E,nights:1})}}}),A+=` INCLUSIONS:
`,A+=` ${e.numberOfDays} days ${e.transportationMode} transportation
`,N.size>0&&N.forEach(({hotel:P,roomType:M,nights:E})=>{A+=` ${E} night${E>1?"s":""} stay ${P.name} in ${M.name}
`}),y.dayPlans.some(P=>P.sightseeing.length>0)&&(A+=` Sightseeing tours as mentioned
`),y.dayPlans.some(P=>P.activities.length>0)&&(A+=` Activities and experiences as listed
`),y.dayPlans.some(P=>P.entryTickets.length>0)&&(A+=` Entry tickets to attractions
`),y.dayPlans.some(P=>P.meals.length>0)&&(A+=` Meals as specified in itinerary
`),A+=` Professional travel planning service
`,A+=` 24/7 customer support during travel

`,A+=` EXCLUSIONS:
`,A+=` International/domestic flights
`,A+=` Travel insurance
`,A+=` Personal expenses and shopping
`,A+=` Tips and gratuities
`,A+=` Any meals not mentioned in inclusions
`,A+=` Additional activities not listed
`,A+=` Visa fees and documentation
`,A+=` Emergency medical expenses

`,A+=` CONTACT:
`,A+=`Nomadller Solutions - Travel Agency Management
`,A+=`Professional Travel Planning Services

`,A+=`Generated on: ${new Date().toLocaleDateString()}
`,A+=`Package ID: ${e.id}
`,A},b=()=>{const T=x();navigator.clipboard.writeText(T).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)}).catch(()=>{alert(" Failed to copy itinerary. Please try again.")})},S=()=>{const T=x(),A=encodeURIComponent(T),N=`https://wa.me/${e.countryCode.replace("+","")}${e.whatsapp}?text=${A}`;window.open(N,"_blank"),m(!0),setTimeout(()=>m(!1),2e3)},L=()=>{if(!y)return;const T=new Ye,A=T.internal.pageSize.width,N=20;let P=N;T.setFontSize(20),T.setFont("helvetica","bold"),T.text("Travel Itinerary",A/2,P,{align:"center"}),P+=15,T.setFontSize(12),T.setFont("helvetica","normal"),T.text(`Client: ${e.name}`,N,P),P+=8,T.text(`Contact: ${e.countryCode} ${e.whatsapp}`,N,P),P+=8,T.text(`Duration: ${e.numberOfDays} days`,N,P),P+=8,T.text(`Passengers: ${e.numberOfPax.adults+e.numberOfPax.children} pax`,N,P),P+=15,T.setFont("helvetica","bold"),T.text("Day-by-Day Itinerary:",N,P),P+=10,y.dayPlans.forEach(M=>{if(P>250&&(T.addPage(),P=N),T.setFont("helvetica","bold"),T.text(`Day ${M.day}:`,N,P),P+=8,T.setFont("helvetica","normal"),M.sightseeing.length>0){const E=M.sightseeing.map(I=>{const Y=i.find(G=>G.id===I);return Y?Y.name:"Unknown"}).join(", ");T.text(` Sightseeing: ${E}`,N+5,P),P+=6}if(M.hotel){const E=a.find(Y=>Y.id===M.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===M.hotel.roomTypeId);E&&I&&(T.text(` Hotel: ${E.name} - ${I.name}`,N+5,P),P+=6)}P+=5}),P>220&&(T.addPage(),P=N),T.setFont("helvetica","bold"),T.text("Pricing Summary:",N,P),P+=10,T.setFont("helvetica","normal"),T.text(`Total Price: $${y.finalPrice.toFixed(2)}`,N,P),P+=8,T.text(`Total Price (INR): ${(y.finalPrice*y.exchangeRate).toLocaleString("en-IN")}`,N,P),T.save(`${e.name}-itinerary.pdf`)};return y?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Latest Itinerary - ",e.name]}),s.jsxs("p",{className:"text-slate-500 text-sm",children:["Created on ",new Date(e.createdAt).toLocaleDateString()]})]}),s.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(Is,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-slate-50 rounded-lg",children:[s.jsx("button",{onClick:b,className:`inline-flex items-center px-4 py-2 rounded-lg transition-all ${p?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:p?s.jsxs(s.Fragment,{children:[s.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(ni,{className:"h-4 w-4 mr-2"}),"Copy Itinerary"]})}),s.jsx("button",{onClick:S,className:`inline-flex items-center px-4 py-2 rounded-lg transition-all ${j?"bg-green-600 text-white":"bg-green-600 text-white hover:bg-green-700"}`,children:j?s.jsxs(s.Fragment,{children:[s.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Sent!"]}):s.jsxs(s.Fragment,{children:[s.jsx(xb,{className:"h-4 w-4 mr-2"}),"Send to WhatsApp"]})}),s.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(Uh,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wn,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Contact:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.countryCode," ",e.whatsapp]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(rs,{className:"h-5 w-5 mr-2 text-green-600"}),"Package Pricing"]}),_!==(y==null?void 0:y.totalBaseCost)&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($4,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-sm text-yellow-800 font-medium",children:"Pricing updated based on latest itinerary changes"})]})}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Total Package Price"}),s.jsxs("div",{className:"text-3xl font-bold mb-2",children:["$",k.toFixed(2)]}),s.jsxs("div",{className:"text-xl font-bold text-green-100",children:["",(k*((y==null?void 0:y.exchangeRate)||83)).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-xs text-green-100 mt-2",children:["Exchange Rate: 1 USD = ",(y==null?void 0:y.exchangeRate)||83]}),_!==(y==null?void 0:y.totalBaseCost)&&s.jsx("div",{className:"mt-3 pt-3 border-t border-green-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs text-green-100 space-y-1",children:[s.jsxs("div",{children:["Updated Base Cost: $",_.toFixed(2)]}),s.jsxs("div",{children:["Profit Margin: $",((y==null?void 0:y.profitMargin)||0).toFixed(2)]})]})})]})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:y.dayPlans.map(T=>{const A=v(T);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-6",children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",T.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[A.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.sightseeing.map(N=>s.jsxs("li",{children:[" ",N.name]},N.id))})]}),A.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.activities.map((N,P)=>{var M,E;return s.jsxs("li",{children:[" ",(M=N.activity)==null?void 0:M.name," - ",(E=N.option)==null?void 0:E.name]},P)})})]}),A.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.tickets.map(N=>s.jsxs("li",{children:[" ",N.name]},N.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[A.hotel&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",A.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[A.hotel.roomType.name," - ",A.hotel.hotel.place]})]})]}),A.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.meals.map(N=>s.jsxs("li",{className:"capitalize",children:[" ",N.type," at ",N.place]},N.id))})]})]})]})]},T.day)})})]})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:[s.jsx("div",{className:"bg-slate-100 p-4 rounded-lg mb-4 inline-block",children:s.jsx(Gt,{className:"h-8 w-8 text-slate-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Itinerary Found"}),s.jsxs("p",{className:"text-slate-600 mb-6",children:["No itinerary has been created for ",e.name," yet."]}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})})},Sf=e=>({id:e.id,name:e.name,whatsapp:e.whatsapp,countryCode:e.country_code,travelDates:{startDate:e.travel_date,endDate:"",isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:e.number_of_adults,children:e.number_of_children},numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,createdAt:e.created_at,createdBy:e.sales_person_id,followUpStatus:e.current_follow_up_status?{status:e.current_follow_up_status,updatedAt:e.updated_at,remarks:"",nextFollowUpDate:e.next_follow_up_date,nextFollowUpTime:e.next_follow_up_time}:void 0,nextFollowUpDate:e.next_follow_up_date,nextFollowUpTime:e.next_follow_up_time}),l_=()=>{var D;const{state:e,signUp:t}=Ht(),{state:r,updateClientData:n,refreshAllData:a}=It(),{clients:i}=r,[o,l]=ne.useState([]),[c,u]=ne.useState([]),[p,f]=ne.useState(null),[j,m]=ne.useState("overview"),[y,_]=ne.useState(!1),[k,v]=ne.useState(!1),[x,b]=ne.useState(null),[S,L]=ne.useState(!1),[T,A]=ne.useState(null),[N,P]=ne.useState({fullName:"",email:"",password:"",companyName:""}),M=new Date().toISOString().split("T")[0];ne.useEffect(()=>{const R=setInterval(async()=>{try{await a(),console.log("Auto-refreshed data")}catch(V){console.error("Auto-refresh failed:",V)}},3e4);return()=>clearInterval(R)},[a]),ne.useEffect(()=>{const R=async()=>{try{if(_s()){console.log("Fetching sales clients from Supabase...");const Q=await Q3();console.log("Loaded sales clients from Supabase:",Q),u(Q)}}catch(Q){console.error("Error loading sales clients:",Q)}};R();const V=setInterval(()=>{R()},5e3);return()=>clearInterval(V)},[]),ne.useEffect(()=>{const R=async()=>{try{let Q=[];_s()&&(console.log("Fetching sales persons from Supabase..."),Q=await S3(),console.log("Loaded sales persons from Supabase:",Q),(!Q||Q.length===0)&&console.log("No sales persons found in database"));const se=Q.map(ue=>{const ae=c.filter(De=>De.sales_person_id===ue.id),xe=ae.filter(De=>new Date(De.created_at).toISOString().split("T")[0]===M),Te=ae.filter(De=>De.next_follow_up_date===M),Pe=ae.filter(De=>De.current_follow_up_status==="advance-paid-confirmed");return{...ue,todayLeads:xe.length,todayFollowups:Te.length,confirmedLeads:Pe.length,totalLeads:ae.length}});console.log("Sales team with metrics:",se),l(se)}catch(Q){console.error("Error loading sales team:",Q),console.error("Error details:",Q.message,Q.hint),A({type:"error",text:`Failed to load sales team: ${Q.message||"Unknown error"}`})}};R();const V=setInterval(()=>{R()},5e3);return()=>clearInterval(V)},[c,M]);const E=R=>{b(R),v(!0)},I=async()=>{if(!N.fullName||!N.email||!N.password){A({type:"error",text:"Please fill in all required fields"});return}if(!e.user){A({type:"error",text:"You must be logged in to create a sales person"});return}L(!0),A(null);try{if(_s()){const R=await C3(N.password),V=await k3({email:N.email,full_name:N.fullName,password_hash:R,company_name:N.companyName||null,is_active:!0,created_by:e.user.id,raw_password:N.password});V&&l([...o,{...V,todayLeads:0,todayFollowups:0,confirmedLeads:0,totalLeads:0}])}A({type:"success",text:`Sales person created successfully!

Login Credentials:
Email: ${N.email}
Password: ${N.password}

They can now login to the sales portal.`}),P({fullName:"",email:"",password:"",companyName:""}),_(!1),setTimeout(()=>A(null),3e3)}catch(R){A({type:"error",text:R.message||"Failed to create sales person. Please try again."})}finally{L(!1)}},Y=async R=>{const V=o.find(Q=>Q.id===R);if(V){if(V.is_active){const Q=i.filter(se=>se.createdBy===R);if(Q.length>0){const se=o.filter(ue=>ue.id!==R&&ue.is_active);if(se.length===0){alert("Cannot suspend this sales person. No other active sales persons available to receive clients.");return}if(!confirm(`Are you sure you want to suspend ${V.full_name}? Their ${Q.length} client(s) will be automatically redistributed to other active sales persons.`))return;try{for(const ae of Q){const xe=se[Math.floor(Math.random()*se.length)];await n({...ae,createdBy:xe.id})}_s()&&await l1({id:R,is_active:!1});const ue=o.map(ae=>ae.id===R?{...ae,is_active:!1}:ae);l(ue),_s(),A({type:"success",text:`${V.full_name} suspended and ${Q.length} client(s) redistributed successfully`}),setTimeout(()=>A(null),3e3)}catch(ue){console.error("Error suspending sales person:",ue),A({type:"error",text:"Failed to suspend sales person"}),setTimeout(()=>A(null),3e3)}return}}if(confirm(`Are you sure you want to ${V.is_active?"suspend":"activate"} ${V.full_name}?`))try{_s()&&await l1({id:R,is_active:!V.is_active});const Q=o.map(se=>se.id===R?{...se,is_active:!se.is_active}:se);l(Q),_s(),A({type:"success",text:`Sales person ${V.is_active?"suspended":"activated"} successfully`}),setTimeout(()=>A(null),3e3)}catch(Q){console.error("Error updating sales person:",Q),A({type:"error",text:"Failed to update sales person status"}),setTimeout(()=>A(null),3e3)}}},G=async(R,V)=>{if(confirm(`Are you sure you want to permanently delete sales person "${V}"? This action cannot be undone.`))try{_s()&&await A3(R);const Q=o.filter(se=>se.id!==R);l(Q),_s()}catch(Q){console.error("Error deleting sales person:",Q),alert("Failed to delete sales person")}},Z=R=>c.filter(V=>V.sales_person_id===R).map(Sf),X=R=>c.filter(V=>V.sales_person_id===R&&V.next_follow_up_date===M).map(Sf),q=R=>c.filter(V=>V.sales_person_id===R&&V.current_follow_up_status==="advance-paid-confirmed").map(Sf),$=R=>{const V=c.filter(ue=>ue.sales_person_id===R),Q=V.filter(ue=>new Date(ue.created_at).toISOString().split("T")[0]===M),se=V.filter(ue=>{var ae;return(ae=ue.followUpHistory)==null?void 0:ae.some(xe=>new Date(xe.updatedAt).toISOString().split("T")[0]===M)});return{newLeads:Q,updatedFollowups:se,totalActivity:Q.length+se.length}},ee=R=>{switch(R){case"advance-paid-confirmed":return"bg-green-100 text-green-800";case"dead":return"bg-red-100 text-red-800";case"itinerary-sent":return"bg-blue-100 text-blue-800";case"itinerary-edited":return"bg-purple-100 text-purple-800";default:return"bg-yellow-100 text-yellow-800"}},te=R=>{switch(R){case"itinerary-created":return"Itinerary Created";case"itinerary-sent":return"Itinerary Sent";case"1st-follow-up":return"1st Follow Up";case"2nd-follow-up":return"2nd Follow Up";case"3rd-follow-up":return"3rd Follow Up";case"4th-follow-up":return"4th Follow Up";case"itinerary-edited":return"Itinerary Edited";case"updated-itinerary-sent":return"Updated Itinerary Sent";case"advance-paid-confirmed":return"Advance Paid & Confirmed";case"dead":return"Dead";default:return"New Lead"}},re=()=>{if(!p)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ut,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"Select a Sales Person"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Choose a sales person from the list to view their details and performance."})]});const R=o.find(ae=>ae.id===p);if(!R)return null;const V=Z(p),Q=X(p),se=q(p),ue=$(p);switch(j){case"overview":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Sales Person Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900 mb-3",children:"Personal Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Name:"}),s.jsx("p",{className:"text-slate-900",children:R.full_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Email:"}),s.jsx("p",{className:"text-slate-900",children:R.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Company:"}),s.jsx("p",{className:"text-slate-900",children:R.company_name||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Status:"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_active?"Active":"Suspended"})]})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900 mb-3",children:"Performance Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:R.totalLeads}),s.jsx("div",{className:"text-sm text-slate-600",children:"Total Leads"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.confirmedLeads}),s.jsx("div",{className:"text-sm text-slate-600",children:"Confirmed"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:R.todayFollowups}),s.jsx("div",{className:"text-sm text-slate-600",children:"Today's Follow-ups"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[R.totalLeads>0?(R.confirmedLeads/R.totalLeads*100).toFixed(1):0,"%"]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Conversion Rate"})]})]})]})]})]})});case"performance":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Today's Performance - ",R.full_name]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:ue.newLeads.length}),s.jsx("div",{className:"text-sm text-slate-600",children:"New Leads Today"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:ue.updatedFollowups.length}),s.jsx("div",{className:"text-sm text-slate-600",children:"Follow-ups Updated"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:ue.totalActivity}),s.jsx("div",{className:"text-sm text-slate-600",children:"Total Activity"})]})]})]}),ue.newLeads.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h5",{className:"font-semibold text-slate-900",children:"New Leads Added Today"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:ue.newLeads.map(ae=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:ae.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[ae.numberOfDays," days  ",ae.numberOfPax.adults+ae.numberOfPax.children," pax"]})]}),s.jsx("div",{className:"text-sm text-slate-500",children:new Date(ae.createdAt).toLocaleTimeString()})]},ae.id))})})]}),ue.updatedFollowups.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("h5",{className:"font-semibold text-slate-900",children:"Follow-ups Updated Today"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:ue.updatedFollowups.map(ae=>{var xe,Te,Pe;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:ae.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:["Latest: ",te((xe=ae.followUpStatus)==null?void 0:xe.status)]})]}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee((Te=ae.followUpStatus)==null?void 0:Te.status)}`,children:te((Pe=ae.followUpStatus)==null?void 0:Pe.status)})]},ae.id)})})})]})]});case"clients":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["All Clients - ",R.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Complete client list with latest itinerary and follow-up status"})]}),V.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ut,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No clients yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"This sales person hasn't created any client leads yet."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Contact Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Travel Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Follow-up Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Latest Itinerary"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:V.map(ae=>{var xe,Te;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:ae.name}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Created: ",new Date(ae.createdAt).toLocaleDateString()]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(Wn,{className:"h-4 w-4 mr-1"}),ae.countryCode," ",ae.whatsapp]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[ae.numberOfDays," days  ",ae.numberOfPax.adults+ae.numberOfPax.children," pax"]}),s.jsx("div",{className:"text-slate-500",children:ae.transportationMode})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee((xe=ae.followUpStatus)==null?void 0:xe.status)}`,children:te((Te=ae.followUpStatus)==null?void 0:Te.status)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("button",{onClick:()=>E(ae),className:"inline-flex items-center px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm",children:[s.jsx(Gt,{className:"h-4 w-4 mr-1"}),"View Itinerary"]})})]},ae.id)})})]})})]});case"followups":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["Today's Follow-ups - ",R.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Clients scheduled for follow-up today"})]}),Q.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Zs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No follow-ups scheduled for today"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"This sales person has no follow-ups scheduled for today."})]}):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:Q.map(ae=>{var xe,Te;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:ae.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[ae.numberOfDays," days  ",ae.numberOfPax.adults+ae.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Follow-up time: ",ae.nextFollowUpTime||"Not specified"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee((xe=ae.followUpStatus)==null?void 0:xe.status)}`,children:te((Te=ae.followUpStatus)==null?void 0:Te.status)}),s.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[ae.countryCode," ",ae.whatsapp]})]})]},ae.id)})})})]});case"confirmed":return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsxs("h5",{className:"font-semibold text-slate-900",children:["Confirmed Leads - ",R.full_name]}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Successfully converted clients with confirmed bookings"})]}),se.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Rt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No confirmed leads yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Confirmed bookings will appear here when clients pay advance."})]}):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:se.map(ae=>{var xe;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:ae.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:[ae.numberOfDays," days  ",ae.numberOfPax.adults+ae.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Confirmed: ",(xe=ae.followUpStatus)!=null&&xe.updatedAt?new Date(ae.followUpStatus.updatedAt).toLocaleDateString():"Unknown"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Confirmed"]}),s.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:[ae.countryCode," ",ae.whatsapp]})]})]},ae.id)})})})]});default:return null}};return s.jsxs(Kt,{title:"Sales Management",subtitle:"Manage sales team, performance, and client relationships",hideHeader:!0,children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sales Team Management"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Create and manage sales team members"})]}),s.jsxs("button",{onClick:()=>_(!y),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Sales Person"]})]})}),y&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-purple-50",children:[T&&s.jsxs("div",{className:`mb-4 p-4 rounded-lg flex items-center space-x-3 ${T.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[T.type==="success"?s.jsx(Rt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}):s.jsx(va,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:`text-sm ${T.type==="success"?"text-green-700":"text-red-700"}`,children:T.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name *"}),s.jsxs("div",{className:"relative",children:[s.jsx(gl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:N.fullName,onChange:R=>P({...N,fullName:R.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter full name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ai,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"email",value:N.email,onChange:R=>P({...N,email:R.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter email address"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pl,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"password",value:N.password,onChange:R=>P({...N,password:R.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Create password"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(wt,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",value:N.companyName,onChange:R=>P({...N,companyName:R.target.value}),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter company name (optional)"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:I,disabled:S,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[S?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(bs,{className:"h-4 w-4 mr-2"}),S?"Creating...":"Create Sales Person"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Sales Team"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.length})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Active Sales People"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.filter(R=>R.isActive).length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Leads"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.reduce((R,V)=>R+V.totalLeads,0)})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Confirmed Sales"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.reduce((R,V)=>R+V.confirmedLeads,0)})]}),s.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-emerald-600"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Sales Team"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Select a sales person to view details"})]}),s.jsx("button",{onClick:async()=>{try{await a(),A({type:"success",text:"Data refreshed successfully"}),setTimeout(()=>A(null),2e3)}catch(R){console.error("Error refreshing data:",R),A({type:"error",text:"Failed to refresh data"}),setTimeout(()=>A(null),3e3)}},className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",title:"Refresh Data",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),o.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(wr,{className:"h-8 w-8 text-slate-400 mx-auto mb-3"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No sales team members yet"}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Create your first sales person to get started."})]}):s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-2",children:o.map(R=>s.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${p===R.id?"border-purple-300 bg-purple-50":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>f(R.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:R.full_name}),s.jsx("div",{className:"text-sm text-slate-500",children:R.email}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("span",{className:"text-xs text-slate-600",children:[R.totalLeads," leads"]}),s.jsxs("span",{className:"text-xs text-slate-600",children:[R.confirmedLeads," confirmed"]})]})]}),s.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_active?"Active":"Suspended"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:V=>{V.stopPropagation(),Y(R.id)},className:`p-1 rounded transition-colors ${R.is_active?"text-red-600 hover:bg-red-100":"text-green-600 hover:bg-green-100"}`,title:R.is_active?"Suspend":"Activate",children:R.is_active?s.jsx(L4,{className:"h-4 w-4"}):s.jsx(Bh,{className:"h-4 w-4"})}),s.jsx("button",{onClick:V=>{V.stopPropagation(),G(R.id,R.full_name||"Unknown")},className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Delete",children:s.jsx(ir,{className:"h-4 w-4"})})]})]})]})},R.id))})})]}),s.jsxs("div",{className:"lg:col-span-2",children:[p&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[(D=o.find(R=>R.id===p))==null?void 0:D.full_name," - Details"]}),s.jsxs("div",{className:"flex items-center space-x-1 bg-slate-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>m("overview"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${j==="overview"?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Overview"}),s.jsx("button",{onClick:()=>m("performance"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${j==="performance"?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Today's Performance"}),s.jsx("button",{onClick:()=>m("clients"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${j==="clients"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"All Clients"}),s.jsx("button",{onClick:()=>m("followups"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${j==="followups"?"bg-white text-orange-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Today's Follow-ups"}),s.jsx("button",{onClick:()=>m("confirmed"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${j==="confirmed"?"bg-white text-green-600 shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:"Confirmed Leads"})]})]})}),s.jsx("div",{className:"p-6",children:re()})]}),!p&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(wr,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"Select a Sales Person"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Choose a sales team member from the list to view their performance and client details."})]})]})]})]}),k&&x&&s.jsx(o_,{client:x,onClose:()=>v(!1)})]})},c_=()=>{const{state:e}=Ht(),[t,r]=ne.useState([]),[n,a]=ne.useState(""),[i,o]=ne.useState(null),[l,c]=ne.useState({}),[u,p]=ne.useState(!1),[f,j]=ne.useState({email:"",full_name:"",password:"",phone_number:"",company_name:""}),[m,y]=ne.useState(!0),[_,k]=ne.useState(null);ne.useEffect(()=>{v()},[]);const v=async()=>{try{y(!0);const N=await D3();console.log("Fetched operations persons:",N),r(N||[])}catch(N){console.error("Error fetching operations persons:",N);const P=N.message||N.hint||"Failed to load operations persons";k({type:"error",text:`Error: ${P}`})}finally{y(!1)}},x=async()=>{if(!f.email||!f.full_name||!f.password){k({type:"error",text:"Please fill in all required fields"});return}try{await I3({email:f.email,full_name:f.full_name,phone_number:f.phone_number||null,company_name:f.company_name||null,is_active:!0,created_by:e.user.id,raw_password:f.password})&&(k({type:"success",text:"Operations person added successfully! They can now login with their email and password."}),j({email:"",full_name:"",password:"",phone_number:"",company_name:""}),p(!1),v())}catch(N){console.error("Error adding operations person:",N),k({type:"error",text:N.message||"Failed to add operations person"})}},b=N=>{o(N.id),c(N)},S=async()=>{if(!i||!l.email||!l.full_name){k({type:"error",text:"Please fill in all required fields"});return}try{const{error:N}=await fe.from("operations_persons").update({email:l.email,full_name:l.full_name,phone_number:l.phone_number,company_name:l.company_name,updated_at:new Date().toISOString()}).eq("id",i);if(N)throw N;k({type:"success",text:"Operations person updated successfully"}),o(null),c({}),v()}catch(N){console.error("Error updating operations person:",N),k({type:"error",text:N.message||"Failed to update operations person"})}},L=async(N,P)=>{try{const{error:M}=await fe.from("operations_persons").update({is_active:!P,updated_at:new Date().toISOString()}).eq("id",N);if(M)throw M;k({type:"success",text:`Operations person ${P?"deactivated":"activated"} successfully`}),v()}catch(M){console.error("Error toggling status:",M),k({type:"error",text:"Failed to update status"})}},T=async N=>{if(confirm("Are you sure you want to delete this operations person?"))try{const{error:P}=await fe.from("operations_persons").delete().eq("id",N);if(P)throw P;k({type:"success",text:"Operations person deleted successfully"}),v()}catch(P){console.error("Error deleting operations person:",P),k({type:"error",text:"Failed to delete operations person"})}},A=t.filter(N=>N.full_name.toLowerCase().includes(n.toLowerCase())||N.email.toLowerCase().includes(n.toLowerCase())||N.company_name&&N.company_name.toLowerCase().includes(n.toLowerCase()));return s.jsx(Kt,{title:"Operations Management",subtitle:"Manage operations team members",hideHeader:!0,children:s.jsxs("div",{className:"space-y-6",children:[_&&s.jsx("div",{className:`p-4 rounded-lg ${_.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${_.type==="success"?"text-green-700":"text-red-700"}`,children:_.text})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search operations persons...",value:n,onChange:N=>a(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("button",{onClick:()=>p(!u),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(vs,{className:"h-5 w-5 mr-2"}),"Add Operations Person"]})]})}),u&&s.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Add New Operations Person"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:f.full_name,onChange:N=>j({...f,full_name:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:f.email,onChange:N=>j({...f,email:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",value:f.password,onChange:N=>j({...f,password:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",value:f.phone_number,onChange:N=>j({...f,phone_number:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter phone number"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsx("input",{type:"text",value:f.company_name,onChange:N=>j({...f,company_name:N.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter company name"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsx("button",{onClick:()=>{p(!1),j({email:"",full_name:"",password:"",phone_number:"",company_name:""})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Operations Person"]})]})]}),m?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading operations persons..."})]}):A.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ut,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:"No operations persons found"}),s.jsx("p",{className:"text-slate-500 mt-1",children:n?"Try adjusting your search":"Add your first operations person to get started"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Company"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:A.map(N=>s.jsx("tr",{className:"hover:bg-slate-50",children:i===N.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:l.full_name||"",onChange:P=>c({...l,full_name:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"email",value:l.email||"",onChange:P=>c({...l,email:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"tel",value:l.phone_number||"",onChange:P=>c({...l,phone_number:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:l.company_name||"",onChange:P=>c({...l,company_name:P.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:S,className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:s.jsx(bs,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{o(null),c({})},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Is,{className:"h-4 w-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm font-medium text-slate-900",children:N.full_name})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-slate-900",children:N.email})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-slate-900",children:N.phone_number||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-slate-900",children:N.company_name||"-"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>L(N.id,N.is_active),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors ${N.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:N.is_active?s.jsxs(s.Fragment,{children:[s.jsx(B4,{className:"h-3 w-3 mr-1"}),"Active"]}):s.jsxs(s.Fragment,{children:[s.jsx(U4,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>b(N),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(N.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:s.jsx(ir,{className:"h-4 w-4"})})]})})]})},N.id))})]})})]})]})})},T1=({onNext:e,onClose:t})=>{const{state:r}=It(),{state:n}=Ht(),{transportations:a}=r,[i,o]=ne.useState({name:"",numberOfDays:5,transportationMode:""}),[l,c]=ne.useState({}),u=()=>{const f={};return i.name.trim()||(f.name="Template name is required"),(i.numberOfDays<1||i.numberOfDays>30)&&(f.numberOfDays="Number of days must be between 1 and 30"),i.transportationMode||(f.transportationMode="Transportation mode is required"),c(f),Object.keys(f).length===0},p=f=>{var m;if(f.preventDefault(),!u())return;const j={id:`template-${Date.now()}`,name:i.name,whatsapp:"",countryCode:"",travelDates:{startDate:"",endDate:"",isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:2,children:0},numberOfDays:i.numberOfDays,transportationMode:i.transportationMode,createdAt:new Date().toISOString(),createdBy:(m=n.user)==null?void 0:m.id};e(j)};return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-teal-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Gt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Information"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 1 of 4 - Define your itinerary template"})]})]})}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(Gt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name *"}),s.jsx("input",{type:"text",value:i.name,onChange:f=>{o({...i,name:f.target.value}),l.name&&c({...l,name:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${l.name?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,placeholder:"e.g., Bali Highlights - 5 Days, Cultural Experience Package"}),l.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.name}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"This will be the display name for your fixed itinerary template"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ft,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Days *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",max:"30",value:i.numberOfDays,onChange:f=>{o({...i,numberOfDays:parseInt(f.target.value)||1}),l.numberOfDays&&c({...l,numberOfDays:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${l.numberOfDays?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`}),s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),l.numberOfDays&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.numberOfDays})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:i.transportationMode,onChange:f=>{o({...i,transportationMode:f.target.value}),l.transportationMode&&c({...l,transportationMode:""})},className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition-colors ${l.transportationMode?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-blue-500"}`,children:[s.jsx("option",{value:"",children:"Select transportation"}),a.map(f=>s.jsxs("option",{value:f.vehicleName,children:[f.vehicleName," (",f.type.replace("-"," "),")"]},f.id))]}),l.transportationMode&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.transportationMode})]})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:s.jsx(Gt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-900",children:"Creating Template"}),s.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"You're creating a reusable itinerary template. In the next steps, you'll plan the day-by-day activities, set inclusions/exclusions, and define the base cost. This template can be used for similar client requests."})]})]})}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsxs("button",{type:"button",onClick:t,className:"inline-flex items-center px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(Is,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Next: Plan Days",s.jsx(ft,{className:"ml-2 h-5 w-5"})]})]})]})]})},nd=({client:e,onNext:t,onBack:r,isAgent:n=!1,isFixedItinerary:a=!1,initialDayPlans:i})=>{const{state:o}=It(),{hotels:l,sightseeings:c,activities:u,entryTickets:p,meals:f}=o,[j,m]=ne.useState([]),[y,_]=ne.useState(1),[k,v]=ne.useState("sightseeing"),[x,b]=ne.useState([]),[S,L]=ne.useState({sightseeing:"",hotel:"",activities:"",tickets:"",meals:""});ne.useEffect(()=>{if(i&&i.length>0)m(i);else{const me=Array.from({length:e.numberOfDays},(Ne,de)=>({day:de+1,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:[]}));m(me)}},[e.numberOfDays,i]);const T=c.filter(me=>{const Ne=e.transportationMode.toLowerCase();return Ne.includes("cab")?me.transportationMode==="cab":Ne.includes("car")?me.transportationMode==="self-drive-car":Ne.includes("scooter")?me.transportationMode==="self-drive-scooter":!0}),A=(me,Ne)=>{L(de=>({...de,[me]:Ne}))},N=me=>{L(Ne=>({...Ne,[me]:""}))},P=me=>{const Ne=j.slice(0,me),de=new Set;Ne.forEach(be=>{be.sightseeing.forEach(ke=>de.add(ke))});const K=new Set;Ne.forEach(be=>{be.activities.forEach(ke=>K.add(ke.activityId))});const Be=new Set;return Ne.forEach(be=>{be.entryTickets.forEach(ke=>Be.add(ke))}),{availableSightseeing:T.filter(be=>!de.has(be.id)),selectedActivityIds:K,selectedTicketIds:Be}},M=me=>{const{availableSightseeing:Ne}=P(me),de=S.sightseeing.toLowerCase();return Ne.filter(K=>K.name.toLowerCase().includes(de)||K.description.toLowerCase().includes(de))},E=me=>{const{selectedActivityIds:Ne}=P(me),de=S.activities.toLowerCase();return u.filter(K=>!Ne.has(K.id)&&(K.name.toLowerCase().includes(de)||K.location.toLowerCase().includes(de)))},I=(me,Ne)=>{const{selectedTicketIds:de}=P(me),K=S.tickets.toLowerCase();return p.filter(Be=>Ne.includes(Be.sightseeingId)&&!de.has(Be.id)&&Be.name.toLowerCase().includes(K))},Y=me=>{const Ne=S.meals.toLowerCase();return f.filter(de=>de.type===me&&de.place.toLowerCase().includes(Ne))},G=me=>{const Ne=S.hotel.toLowerCase();return q(me).filter(de=>de.name.toLowerCase().includes(Ne))},Z=[...new Set(l.map(me=>me.place))],X=(me,Ne,de)=>{const K=[...j];K[me]={...K[me],[Ne]:de},m(K)},q=me=>l.filter(Ne=>Ne.place===me),$=me=>{const Ne=l.find(de=>de.id===me);return Ne?Ne.roomTypes:[]},ee=(me,Ne)=>{const de=j[me].activities;if(de.find(Be=>Be.activityId===Ne)){const Be=de.filter(be=>be.activityId!==Ne);X(me,"activities",Be)}else{const Be=u.find(be=>be.id===Ne);if(Be){const be=[...de,{activityId:Ne,optionId:Be.options&&Be.options.length>0?Be.options[0].id:""}];X(me,"activities",be)}}},te=(me,Ne,de)=>{const K=[...j[me].activities],Be=K.findIndex(be=>be.activityId===Ne);Be!==-1&&(K[Be].optionId=de,X(me,"activities",K))},re=me=>{switch(me){case"sightseeing":return s.jsx(ft,{className:"h-5 w-5"});case"hotel":return s.jsx(wt,{className:"h-5 w-5"});case"activities":return s.jsx(hs,{className:"h-5 w-5"});case"tickets":return s.jsx(As,{className:"h-5 w-5"});case"meals":return s.jsx(ns,{className:"h-5 w-5"})}},D=me=>{switch(me){case"sightseeing":return"Select Sightseeing Spots";case"hotel":return"Choose Hotel Accommodation";case"activities":return"Add Activities & Experiences";case"tickets":return"Select Entry Tickets";case"meals":return"Choose Meals"}},R=me=>{switch(me){case"sightseeing":return"blue";case"hotel":return"purple";case"activities":return"green";case"tickets":return"orange";case"meals":return"red"}},V=(me,Ne)=>{const de=j[me];if(!de)return!1;switch(Ne){case"sightseeing":return de.sightseeing.length>0;case"hotel":return de.hotel!==null;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},Q=(me,Ne)=>{var de;switch(Ne){case"sightseeing":return((de=j[me])==null?void 0:de.sightseeing.length)>0;case"hotel":return!0;case"activities":return!0;case"tickets":return!0;case"meals":return!0}},se=me=>{const Ne=["sightseeing","hotel","activities","tickets","meals"],de=Ne.indexOf(me);return de<Ne.length-1?Ne[de+1]:null},ue=me=>{const Ne=["sightseeing","hotel","activities","tickets","meals"],de=Ne.indexOf(me);return de>0?Ne[de-1]:null},ae=()=>{const me=se(k);me?v(me):(b(Ne=>[...Ne,y]),y<e.numberOfDays&&(_(y+1),v("sightseeing")))},xe=()=>{const me=ue(k);me?v(me):y>1&&(_(y-1),v("meals"))},Te=()=>{y<e.numberOfDays&&(b(me=>[...me,y]),_(y+1),v("sightseeing"))},Pe=()=>{if(!j.every(Ne=>Ne.sightseeing.length>0)){alert("Please select at least one sightseeing spot for each day before proceeding to review.");return}t(j)},De=()=>{var de,K,Be;const me=j[y-1],Ne=y-1;if(!me)return null;switch(k){case"sightseeing":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Select Sightseeing Spots"}),s.jsxs("p",{className:"text-blue-700 text-sm",children:["Choose the places you want to visit on Day ",y,". You can select multiple locations."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search sightseeing spots...",value:S.sightseeing,onChange:be=>A("sightseeing",be.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),S.sightseeing&&s.jsx("button",{onClick:()=>N("sightseeing"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:M(Ne).map(be=>s.jsxs("label",{className:"flex items-start space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:me.sightseeing.includes(be.id),onChange:ke=>{const Le=me.sightseeing,Ee=ke.target.checked?[...Le,be.id]:Le.filter(Oe=>Oe!==be.id);X(Ne,"sightseeing",Ee)},className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:be.name}),s.jsx("div",{className:"text-sm text-slate-600 mt-1",children:be.description}),s.jsxs("div",{className:"text-xs text-blue-600 mt-2 capitalize",children:["Transportation: ",be.transportationMode.replace("-"," ")]})]})]},be.id))}),M(Ne).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ft,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:S.sightseeing?"No sightseeing spots match your search.":"All available sightseeing spots for this transportation mode have been selected in previous days."})]})]});case"hotel":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Choose Hotel Accommodation"}),s.jsxs("p",{className:"text-purple-700 text-sm",children:["Select where you want to stay on Day ",y,". You can skip this if no accommodation is needed."]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Place/Location"}),s.jsxs("select",{value:((de=me.hotel)==null?void 0:de.place)||"",onChange:be=>{const ke=be.target.value;ke?X(Ne,"hotel",{place:ke,hotelId:"",roomTypeId:""}):X(Ne,"hotel",null)},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"No hotel needed"}),Z.map(be=>s.jsx("option",{value:be,children:be},be))]})]}),((K=me.hotel)==null?void 0:K.place)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Hotel Name"}),me.hotel.place&&s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Wr,{className:"h-4 w-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search hotels...",value:S.hotel,onChange:be=>A("hotel",be.target.value),className:"w-full pl-9 pr-9 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),S.hotel&&s.jsx("button",{onClick:()=>N("hotel"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(Is,{className:"h-4 w-4"})})]}),s.jsxs("select",{value:me.hotel.hotelId,onChange:be=>{X(Ne,"hotel",{...me.hotel,hotelId:be.target.value,roomTypeId:""})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select hotel"}),G(me.hotel.place).map(be=>s.jsx("option",{value:be.id,children:be.name},be.id))]})]}),((Be=me.hotel)==null?void 0:Be.hotelId)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Room Type"}),s.jsxs("select",{value:me.hotel.roomTypeId,onChange:be=>{X(Ne,"hotel",{...me.hotel,roomTypeId:be.target.value})},className:"w-full p-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsx("option",{value:"",children:"Select room type"}),$(me.hotel.hotelId).map(be=>s.jsx("option",{value:be.id,children:be.name},be.id))]})]})]})]});case"activities":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Add Activities & Experiences"}),s.jsxs("p",{className:"text-green-700 text-sm",children:["Select activities for Day ",y,". These are optional but add value to the experience."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search activities...",value:S.activities,onChange:be=>A("activities",be.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),S.activities&&s.jsx("button",{onClick:()=>N("activities"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:E(Ne).map(be=>{const ke=me.activities.some(Ee=>Ee.activityId===be.id),Le=me.activities.find(Ee=>Ee.activityId===be.id);return s.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-4 hover:border-green-300 transition-all",children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ke,onChange:()=>ee(Ne,be.id),className:"h-5 w-5 text-green-600 focus:ring-green-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:be.name}),s.jsx("div",{className:"text-sm text-slate-600",children:be.location})]})]}),ke&&be.options&&be.options.length>0&&s.jsxs("div",{className:"mt-3 ml-8",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Choose Option:"}),s.jsx("select",{value:(Le==null?void 0:Le.optionId)||"",onChange:Ee=>te(Ne,be.id,Ee.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:be.options.map(Ee=>s.jsx("option",{value:Ee.id,children:n||a?`${Ee.name} (for ${Ee.costForHowMany} ${Ee.costForHowMany===1?"person":"people"})`:`${Ee.name} - $${Ee.cost} (for ${Ee.costForHowMany} ${Ee.costForHowMany===1?"person":"people"})`},Ee.id))})]})]},be.id)})}),E(Ne).length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(hs,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:S.activities?"No activities match your search.":"All available activities have been used in previous days."})]})]});case"tickets":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Select Entry Tickets"}),s.jsxs("p",{className:"text-orange-700 text-sm",children:["Choose entry tickets for the sightseeing spots selected for Day ",y,"."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search entry tickets...",value:S.tickets,onChange:be=>A("tickets",be.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),S.tickets&&s.jsx("button",{onClick:()=>N("tickets"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"space-y-3",children:I(Ne,me.sightseeing).map(be=>s.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-slate-200 rounded-lg hover:bg-orange-50 hover:border-orange-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:me.entryTickets.includes(be.id),onChange:ke=>{const Le=me.entryTickets,Ee=ke.target.checked?[...Le,be.id]:Le.filter(Oe=>Oe!==be.id);X(Ne,"entryTickets",Ee)},className:"h-5 w-5 text-orange-600 focus:ring-orange-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:be.name}),!n&&!a&&s.jsxs("div",{className:"text-sm text-slate-600",children:["$",be.cost," per person"]})]})]},be.id))}),I(Ne,me.sightseeing).length===0&&me.sightseeing.length>0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(As,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:S.tickets?"No entry tickets match your search.":"All available entry tickets for selected sightseeing spots have been used in previous days."})]}),me.sightseeing.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(As,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"Select sightseeing spots first to see available entry tickets"})]})]});case"meals":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Choose Meals"}),s.jsxs("p",{className:"text-red-700 text-sm",children:["Select meal options for Day ",y,". You can choose multiple meals for different times of the day."]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search restaurants/places...",value:S.meals,onChange:be=>A("meals",be.target.value),className:"w-full pl-10 pr-10 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"}),S.meals&&s.jsx("button",{onClick:()=>N("meals"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[["breakfast","lunch","dinner"].map(be=>{const ke=Y(be);return s.jsxs("div",{children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-3 capitalize flex items-center",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-red-600"}),be]}),s.jsx("div",{className:"space-y-2",children:ke.map(Le=>s.jsxs("label",{className:"flex items-start space-x-3 p-3 border-2 border-slate-200 rounded-lg hover:bg-red-50 hover:border-red-300 cursor-pointer transition-all",children:[s.jsx("input",{type:"checkbox",checked:me.meals.includes(Le.id),onChange:Ee=>{const Oe=me.meals,Ve=Ee.target.checked?[...Oe,Le.id]:Oe.filter(Qe=>Qe!==Le.id);X(Ne,"meals",Ve)},className:"mt-1 h-5 w-5 text-red-600 focus:ring-red-500 border-slate-300 rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:Le.place}),!n&&!a&&s.jsxs("div",{className:"text-sm text-slate-600",children:["$",Le.cost," per person"]})]})]},Le.id))})]},be)}),S.meals&&["breakfast","lunch","dinner"].every(be=>Y(be).length===0)&&s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(ns,{className:"h-8 w-8 mx-auto mb-2 text-slate-400"}),s.jsx("p",{children:"No restaurants match your search."})]})]})]});default:return null}};return s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(nt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Day-by-Day Planning"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 3 of 5 - Build Your Itinerary"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Day ",y," of ",e.numberOfDays," for ",e.name]}),s.jsxs("p",{className:"text-slate-600 mt-1",children:["Current Step: ",D(k)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-slate-600",children:"Progress"}),s.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:[x.length," / ",e.numberOfDays," days completed"]})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Select Day to Edit"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Click any day number to jump directly to it"})]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:Array.from({length:e.numberOfDays},(me,Ne)=>{const de=Ne+1,K=x.includes(de),Be=de===y,be=i?!0:de<=y||K;return s.jsx("button",{onClick:()=>{be&&(_(de),v("sightseeing"))},disabled:!be,className:`
                      flex items-center justify-center w-12 h-12 rounded-full font-semibold text-sm transition-all hover:scale-110
                      ${Be?"bg-blue-600 text-white ring-2 ring-blue-200":K?"bg-green-500 text-white":be?"bg-slate-200 text-slate-700 hover:bg-slate-300 cursor-pointer":"bg-slate-100 text-slate-400 cursor-not-allowed"}
                    `,title:`${be?"Jump to":"Complete previous days to unlock"} Day ${de}`,children:K?"":de},de)})}),i&&s.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Quick Jump:"}),s.jsx("select",{value:y,onChange:me=>{_(parseInt(me.target.value)),v("sightseeing")},className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:Array.from({length:e.numberOfDays},(me,Ne)=>{const de=Ne+1;return s.jsxs("option",{value:de,children:["Day ",de]},de)})}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Currently editing: Day ",y]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3",children:["Day ",y," Planning Steps"]}),s.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:["sightseeing","hotel","activities","tickets","meals"].map((me,Ne)=>{const de=me===k,K=V(y-1,me),Be=R(me);return s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`
                        flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm transition-all
                        ${de?`bg-${Be}-600 text-white ring-2 ring-${Be}-200`:K?"bg-green-500 text-white":"bg-slate-200 text-slate-500"}
                      `,children:K?s.jsx(Bh,{className:"h-5 w-5"}):re(me)}),s.jsx("div",{className:"ml-2 min-w-0",children:s.jsx("div",{className:`text-xs font-medium ${de?"text-slate-900":"text-slate-500"}`,children:me.charAt(0).toUpperCase()+me.slice(1)})}),Ne<4&&s.jsx(Eu,{className:"h-4 w-4 text-slate-400 mx-2"})]},me)})})]})}),s.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden mb-6",children:[s.jsx("div",{className:`bg-gradient-to-r from-${R(k)}-50 to-${R(k)}-100 px-6 py-4`,children:s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 flex items-center",children:[re(k),s.jsx("span",{className:"ml-2",children:D(k)})]})}),s.jsx("div",{className:"p-6 bg-white",children:De()})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),(k!=="sightseeing"||y>1)&&s.jsxs("button",{onClick:xe,className:"px-6 py-3 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50 transition-colors",children:[s.jsx(D4,{className:"h-4 w-4 mr-2 inline"}),"Previous"]})]}),s.jsx("div",{className:"flex gap-3",children:k!=="meals"?s.jsxs("button",{onClick:ae,disabled:!Q(y-1,k),className:`inline-flex items-center px-6 py-3 font-semibold rounded-lg transition-all duration-200 ${Q(y-1,k)?`bg-gradient-to-r from-${R(k)}-600 to-${R(k)}-700 text-white hover:from-${R(k)}-700 hover:to-${R(k)}-800 transform hover:scale-105`:"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:["Next",s.jsx(Eu,{className:"ml-2 h-4 w-4"})]}):s.jsx(s.Fragment,{children:y<e.numberOfDays?s.jsxs("button",{onClick:Te,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Day ",y+1,s.jsx(Eu,{className:"ml-2 h-4 w-4"})]}):s.jsxs("button",{onClick:Pe,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Review Itinerary",s.jsx(nt,{className:"ml-2 h-5 w-5"})]})})})]})]})]})})},d_=({client:e,dayPlans:t,onNext:r,onBack:n})=>{const{state:a}=It(),{hotels:i,sightseeings:o,activities:l,entryTickets:c,meals:u,transportations:p}=a,[f,j]=ne.useState(` ${e.numberOfDays} days ${e.transportationMode} transportation
 Accommodation in selected hotels
 Sightseeing tours as mentioned
 Activities and experiences as listed
 Entry tickets to attractions
 Professional travel planning service
 24/7 customer support during travel`),[m,y]=ne.useState(` International/domestic flights
 Travel insurance
 Personal expenses and shopping
 Tips and gratuities
 Any meals not mentioned in inclusions
 Additional activities not listed
 Visa fees and documentation
 Emergency medical expenses`),[_,k]=ne.useState({}),v=rd(e,t,i,o,l,c,u,p),x=()=>{const L={};return f.trim()||(L.inclusions="Inclusions are required"),m.trim()||(L.exclusions="Exclusions are required"),k(L),Object.keys(L).length===0},b=()=>{x()&&r({baseCost:v,inclusions:f,exclusions:m})},S=L=>{const T=o.filter(E=>L.sightseeing.includes(E.id)),A=L.activities.map(E=>{const I=l.find(G=>G.id===E.activityId),Y=I==null?void 0:I.options.find(G=>G.id===E.optionId);return{activity:I,option:Y}}).filter(E=>E.activity&&E.option),N=c.filter(E=>L.entryTickets.includes(E.id)),P=u.filter(E=>L.meals.includes(E.id));let M=null;if(L.hotel){const E=i.find(Y=>Y.id===L.hotel.hotelId),I=E==null?void 0:E.roomTypes.find(Y=>Y.id===L.hotel.roomTypeId);E&&I&&(M={hotel:E,roomType:I})}return{sightseeing:T,activities:A,tickets:N,meals:P,hotel:M}};return s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Review & Details"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 3 of 4 - Define inclusions, exclusions, and pricing"})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Gt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Template Name:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transportation:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.transportationMode})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Base Cost:"}),s.jsxs("div",{className:"text-base text-green-600 font-semibold",children:["$",v.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Detailed Itinerary Preview"}),s.jsx("div",{className:"space-y-4",children:t.map(L=>{const T=S(L);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",L.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[T.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.sightseeing.map(A=>s.jsxs("li",{children:[" ",A.name]},A.id))})]}),T.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.activities.map((A,N)=>{var P,M;return s.jsxs("li",{children:[" ",(P=A.activity)==null?void 0:P.name," - ",(M=A.option)==null?void 0:M.name]},N)})})]}),T.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.tickets.map(A=>s.jsxs("li",{children:[" ",A.name]},A.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[T.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",T.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[T.hotel.roomType.name," - ",T.hotel.hotel.place]})]})]}),T.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:T.meals.map(A=>s.jsxs("li",{className:"capitalize",children:[" ",A.type," at ",A.place]},A.id))})]})]})]})]},L.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx(Rt,{className:"h-4 w-4 mr-2 text-green-600"}),"Inclusions *"]}),s.jsx("textarea",{value:f,onChange:L=>{j(L.target.value),_.inclusions&&k({..._,inclusions:""})},rows:10,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 transition-colors resize-none ${_.inclusions?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-green-500"}`,placeholder:` Transportation as mentioned
 Accommodation in selected hotels
 Entry tickets to attractions
 Professional guide service`}),_.inclusions&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:_.inclusions}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"List what's included in this package template"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2 flex items-center",children:[s.jsx(Iu,{className:"h-4 w-4 mr-2 text-red-600"}),"Exclusions *"]}),s.jsx("textarea",{value:m,onChange:L=>{y(L.target.value),_.exclusions&&k({..._,exclusions:""})},rows:10,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-red-500 transition-colors resize-none ${_.exclusions?"border-red-300 focus:border-red-500":"border-slate-300 focus:border-red-500"}`,placeholder:` International/domestic flights
 Travel insurance
 Personal expenses
 Tips and gratuities`}),_.exclusions&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:_.exclusions}),s.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"List what's not included in this package template"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 border border-green-200",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(rs,{className:"h-5 w-5 mr-2 text-green-600"}),"Calculated Template Cost"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Base Template Cost"}),s.jsxs("div",{className:"text-3xl font-bold mb-2",children:["$",v.toFixed(2)]}),s.jsx("div",{className:"text-green-100 text-sm",children:"Calculated from selected services for 2 adults (default)"})]})}),s.jsx("p",{className:"text-slate-600 text-sm mt-4 text-center",children:"This cost will be used as the base price for this template. Individual client quotes may vary based on passenger count and seasonal pricing."})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:n,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:b,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Review Template",s.jsx(Gt,{className:"ml-2 h-5 w-5"})]})]})]})]})},u_=({client:e,dayPlans:t,templateData:r,onSave:n,onBack:a})=>{const{state:i}=It(),{hotels:o,sightseeings:l,activities:c,entryTickets:u,meals:p}=i,[f,j]=ne.useState(!1),[m,y]=ne.useState(!1),_=async()=>{j(!0),setTimeout(()=>{n(),y(!0),j(!1),setTimeout(()=>{y(!1)},1500)},1e3)},k=x=>{const b=l.filter(N=>x.sightseeing.includes(N.id)),S=x.activities.map(N=>{const P=c.find(E=>E.id===N.activityId),M=P==null?void 0:P.options.find(E=>E.id===N.optionId);return{activity:P,option:M}}).filter(N=>N.activity&&N.option),L=u.filter(N=>x.entryTickets.includes(N.id)),T=p.filter(N=>x.meals.includes(N.id));let A=null;if(x.hotel){const N=o.find(M=>M.id===x.hotel.hotelId),P=N==null?void 0:N.roomTypes.find(M=>M.id===x.hotel.roomTypeId);N&&P&&(A={hotel:N,roomType:P})}return{sightseeing:b,activities:S,tickets:L,meals:T,hotel:A}},v=()=>{const x=`${e.name}

Duration: ${e.numberOfDays} days
Transportation: ${e.transportationMode}
Base Cost: $${r.baseCost}

Inclusions:
${r.inclusions}

Exclusions:
${r.exclusions}`;navigator.clipboard.writeText(x).then(()=>{alert(" Template details copied to clipboard!")}).catch(()=>{alert(" Failed to copy details. Please try again.")})};return m?s.jsx("div",{className:"max-w-3xl mx-auto text-center py-12",children:s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-8",children:[s.jsx("div",{className:"bg-green-100 p-4 rounded-full inline-block mb-4",children:s.jsx(Rt,{className:"h-12 w-12 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Template Saved Successfully!"}),s.jsxs("p",{className:"text-green-700 mb-4",children:['Your fixed itinerary template "',e.name,'" has been created and is now available for use.']}),s.jsx("div",{className:"text-sm text-green-600",children:"Closing in a moment..."})]})}):s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Template Ready to Save"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Step 4 of 4 - Final review and save your template"})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Gt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Template Overview"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.name}),s.jsx("div",{className:"text-sm text-slate-600",children:"Template Name"})]}),s.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-teal-600",children:e.numberOfDays}),s.jsx("div",{className:"text-sm text-slate-600",children:"Days"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600",children:e.transportationMode}),s.jsx("div",{className:"text-sm text-slate-600",children:"Transportation"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",r.baseCost.toFixed(0)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Base Cost"})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Complete Template Itinerary"}),s.jsx("div",{className:"space-y-4",children:t.map(x=>{const b=k(x);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",x.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[b.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:b.sightseeing.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]}),b.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:b.activities.map((S,L)=>{var T,A;return s.jsxs("li",{children:[" ",(T=S.activity)==null?void 0:T.name," - ",(A=S.option)==null?void 0:A.name]},L)})})]}),b.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:b.tickets.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[b.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",b.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[b.hotel.roomType.name," - ",b.hotel.hotel.place]})]})]}),b.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:b.meals.map(S=>s.jsxs("li",{className:"capitalize",children:[" ",S.type," at ",S.place]},S.id))})]})]})]})]},x.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:" Template Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:r.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:" Template Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:r.exclusions})})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:a,className:"inline-flex items-center px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(Nr,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:v,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(ni,{className:"mr-2 h-5 w-5"}),"Copy Template"]})]}),s.jsx("button",{onClick:_,disabled:f,className:"inline-flex items-center px-8 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 shadow-lg",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving Template..."]}):s.jsxs(s.Fragment,{children:[s.jsx(bs,{className:"mr-2 h-5 w-5"}),"Save Fixed Itinerary"]})})]})]})]})},h_=({onSave:e,onClose:t})=>{const{state:r}=Ht(),[n,a]=ne.useState(1),[i,o]=ne.useState(null),[l,c]=ne.useState([]),[u,p]=ne.useState(null),f=v=>{o(v),a(2)},j=v=>{c(v),a(3)},m=v=>{p(v),a(4)},y=()=>{var x;if(!i||!u)return;const v={id:Date.now().toString(),name:i.name,numberOfDays:i.numberOfDays,transportationMode:i.transportationMode,baseCost:u.baseCost,inclusions:u.inclusions,exclusions:u.exclusions,dayPlans:l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:((x=r.user)==null?void 0:x.id)||"admin"};e(v)},_=()=>{a(n-1)},k=()=>{switch(n){case 1:return s.jsx(T1,{onNext:f,onClose:t});case 2:return i?s.jsx(nd,{client:i,onNext:j,onBack:_,isAgent:!1,isFixedItinerary:!0}):null;case 3:return i?s.jsx(d_,{client:i,dayPlans:l,onNext:m,onBack:_}):null;case 4:return i&&u?s.jsx(u_,{client:i,dayPlans:l,templateData:u,onSave:y,onBack:_}):null;default:return s.jsx(T1,{onNext:f,onClose:t})}};return s.jsxs("div",{className:"bg-white",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(v=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                flex items-center justify-center w-10 h-10 rounded-full font-semibold text-sm
                ${v<=n?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}
              `,children:v}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsxs("div",{className:`text-sm font-medium ${v<=n?"text-slate-900":"text-slate-500"}`,children:[v===1&&"Template Details",v===2&&"Day Planning",v===3&&"Inclusions & Pricing",v===4&&"Final Review"]})}),v<4&&s.jsx("div",{className:`h-px flex-1 mx-4 ${v<n?"bg-blue-600":"bg-slate-200"}`})]},v))})}),s.jsx("div",{className:"p-6",children:k()})]})},m_=()=>{const{state:e,addFixedItinerary:t,updateFixedItineraryData:r,deleteFixedItineraryData:n}=It();Ht();const{fixedItineraries:a}=e,[i,o]=ne.useState(""),[l,c]=ne.useState(!1),[u,p]=ne.useState(null),[f,j]=ne.useState({}),[m,y]=ne.useState(!1),[_,k]=ne.useState(null),v=a.filter(P=>P.name.toLowerCase().includes(i.toLowerCase())||P.transportationMode.toLowerCase().includes(i.toLowerCase())),x=async P=>{await t(P),c(!1)},b=P=>{p(P.id),j(P)},S=async()=>{if(u&&f.id){const P={...f,updatedAt:new Date().toISOString()};await r(P),p(null),j({})}},L=async(P,M)=>{confirm(`Are you sure you want to delete the fixed itinerary "${M}"?`)&&await n(P)},T=P=>{k(P),y(!0)},A=P=>{const M=`${P.name}

Duration: ${P.numberOfDays} days
Transportation: ${P.transportationMode}
Base Cost: $${P.baseCost}

Inclusions:
${P.inclusions}

Exclusions:
${P.exclusions}`;navigator.clipboard.writeText(M).then(()=>{alert(" Itinerary details copied to clipboard!")}).catch(()=>{alert(" Failed to copy details. Please try again.")})},N=P=>{let M=` ${P.name.toUpperCase()} 

`;M+=` TEMPLATE DETAILS:
`,M+=` Template Name: ${P.name}
`,M+=` Duration: ${P.numberOfDays} days
`,M+=` Transportation: ${P.transportationMode}
`,M+=` Base Cost: $${P.baseCost}

`,P.dayPlans&&P.dayPlans.length>0&&(M+=` DAY-BY-DAY ITINERARY:

`,P.dayPlans.forEach(E=>{const I=e.sightseeings.filter(q=>E.sightseeing.includes(q.id)),Y=E.activities.map(q=>{const $=e.activities.find(te=>te.id===q.activityId),ee=$==null?void 0:$.options.find(te=>te.id===q.optionId);return{activity:$,option:ee}}).filter(q=>q.activity&&q.option),G=e.entryTickets.filter(q=>E.entryTickets.includes(q.id)),Z=e.meals.filter(q=>E.meals.includes(q.id));let X=null;if(E.hotel){const q=e.hotels.find(ee=>ee.id===E.hotel.hotelId),$=q==null?void 0:q.roomTypes.find(ee=>ee.id===E.hotel.roomTypeId);q&&$&&(X={hotel:q,roomType:$})}M+=` DAY ${E.day}:
`,I.length>0&&(M+=` SIGHTSEEING:
`,I.forEach(q=>{M+=`    ${q.name}
`,q.description&&(M+=`     ${q.description}
`)})),X&&(M+=` ACCOMMODATION:
`,M+=`    ${X.hotel.name} - ${X.roomType.name}
`,M+=`    Location: ${X.hotel.place}
`,M+=`    Category: ${X.hotel.starCategory}
`),Y.length>0&&(M+=` ACTIVITIES:
`,Y.forEach(q=>{var $,ee,te;M+=`    ${($=q.activity)==null?void 0:$.name} - ${(ee=q.option)==null?void 0:ee.name}
`,M+=`     Location: ${(te=q.activity)==null?void 0:te.location}
`})),G.length>0&&(M+=` ENTRY TICKETS:
`,G.forEach(q=>{M+=`    ${q.name} - $${q.cost} per person
`})),Z.length>0&&(M+=` MEALS:
`,Z.forEach(q=>{M+=`    ${q.type.charAt(0).toUpperCase()+q.type.slice(1)} at ${q.place} - $${q.cost} per person
`})),M+=`
`})),M+=` PRICING:
`,M+=` Base Template Cost: $${P.baseCost}
`,M+=` Transportation: ${P.transportationMode}

`,M+=` INCLUSIONS:
`,M+=`${P.inclusions}

`,M+=` EXCLUSIONS:
`,M+=`${P.exclusions}

`,M+=` CONTACT:
`,M+=`Nomadller Solutions - Travel Agency Management
`,M+=`Professional Travel Planning Services

`,M+=`Template created on: ${new Date(P.createdAt).toLocaleDateString()}
`,M+=`Template ID: ${P.id}
`,navigator.clipboard.writeText(M).then(()=>{alert(" Complete itinerary template copied to clipboard!")}).catch(()=>{alert(" Failed to copy itinerary. Please try again.")})};return s.jsxs(Kt,{title:"Fixed Itinerary Management",subtitle:"Manage pre-defined itinerary templates",hideHeader:!0,children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Fixed Itinerary Templates"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Wr,{className:"h-5 w-5 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),s.jsx("input",{type:"text",placeholder:"Search itineraries...",value:i,onChange:P=>o(P.target.value),className:"pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105 shadow-lg",children:[s.jsx(vs,{className:"h-5 w-5 mr-2"}),"Add New Itinerary"]})]})})}),s.jsx("div",{className:"space-y-4",children:v.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(Gt,{className:"h-16 w-16 text-slate-400 mx-auto mb-6"}),s.jsx("h4",{className:"text-xl font-semibold text-slate-900 mb-2",children:i?"No fixed itineraries found":"No fixed itineraries yet"}),s.jsx("p",{className:"text-slate-500 mb-6 max-w-md mx-auto",children:i?"Try adjusting your search terms to find the itinerary you're looking for.":"Create your first fixed itinerary template using our powerful itinerary builder. Templates can be reused for similar client requests."}),!i&&s.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(vs,{className:"h-5 w-5 mr-2"}),"Create Your First Template"]})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:v.map(P=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-lg transition-all duration-200",children:u===P.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Itinerary Name"}),s.jsx("input",{type:"text",value:f.name||"",onChange:M=>j({...f,name:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Days"}),s.jsx("input",{type:"number",min:"1",max:"30",value:f.numberOfDays||1,onChange:M=>j({...f,numberOfDays:parseInt(M.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cost ($)"}),s.jsx("input",{type:"number",min:"0",step:"10",value:f.baseCost||0,onChange:M=>j({...f,baseCost:parseFloat(M.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transportation"}),s.jsx("input",{type:"text",value:f.transportationMode||"",onChange:M=>j({...f,transportationMode:M.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{p(null),j({})},className:"px-4 py-2 text-slate-600 hover:text-slate-800 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:S,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-teal-100 p-3 rounded-lg",children:s.jsx(Gt,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 line-clamp-1",children:P.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[s.jsx(nt,{className:"h-3 w-3 mr-1"}),P.numberOfDays," days"]}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:[s.jsx(rs,{className:"h-3 w-3 mr-1"}),"$",P.baseCost]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>T(P),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View Details",children:s.jsx(Hi,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>A(P),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Copy Details",children:s.jsx(ni,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>b(P),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"Edit",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>L(P.id,P.name),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete",children:s.jsx(ir,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[s.jsx(ft,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"line-clamp-1",children:P.transportationMode})]}),P.dayPlans&&P.dayPlans.length>0&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Day Plans Included"}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(wt,{className:"h-3 w-3 mr-1"}),"Hotels"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(hs,{className:"h-3 w-3 mr-1"}),"Activities"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ns,{className:"h-3 w-3 mr-1"}),"Meals"]})]})]}),s.jsx("div",{className:"pt-3 border-t border-slate-200",children:s.jsxs("div",{className:"text-xs text-slate-500",children:["Created ",new Date(P.createdAt).toLocaleDateString()]})})]})]})})},P.id))})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Templates"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(Gt,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Duration"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[a.length>0?Math.round(a.reduce((P,M)=>P+M.numberOfDays,0)/a.length):0," days"]})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(nt,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Base Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",a.length>0?Math.round(a.reduce((P,M)=>P+M.baseCost,0)/a.length):0]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Most Popular"}),s.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.length>0?`${a[0].numberOfDays} Days`:"N/A"})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-purple-600"})})]})})]})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-blue-600 to-teal-600",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:s.jsx(vs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Create Fixed Itinerary Template"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"Build a reusable itinerary template"})]})]}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:s.jsx(Is,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-80px)]",children:s.jsx(h_,{onSave:x,onClose:()=>c(!1)})})]})}),m&&_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Fixed Itinerary Details"}),s.jsx("button",{onClick:()=>y(!1),className:"p-2 text-slate-400 hover:text-slate-600 rounded-lg",children:s.jsx(Is,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-4",children:_.name}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[_.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ft,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transportation:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:_.transportationMode})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(rs,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Base Cost:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:["$",_.baseCost]})]})]})]})]}),_.dayPlans&&_.dayPlans.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Complete Day-by-Day Itinerary"]}),s.jsx("div",{className:"space-y-4",children:_.dayPlans.map(P=>{const M=e.sightseeings.filter(Z=>P.sightseeing.includes(Z.id)),E=P.activities.map(Z=>{const X=e.activities.find($=>$.id===Z.activityId),q=X==null?void 0:X.options.find($=>$.id===Z.optionId);return{activity:X,option:q}}).filter(Z=>Z.activity&&Z.option),I=e.entryTickets.filter(Z=>P.entryTickets.includes(Z.id)),Y=e.meals.filter(Z=>P.meals.includes(Z.id));let G=null;if(P.hotel){const Z=e.hotels.find(q=>q.id===P.hotel.hotelId),X=Z==null?void 0:Z.roomTypes.find(q=>q.id===P.hotel.roomTypeId);Z&&X&&(G={hotel:Z,roomType:X})}return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h5",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-teal-600"}),"Day ",P.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[M.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:M.map(Z=>s.jsxs("li",{children:[" ",Z.name]},Z.id))})]}),E.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:E.map((Z,X)=>{var q,$;return s.jsxs("li",{children:[" ",(q=Z.activity)==null?void 0:q.name," - ",($=Z.option)==null?void 0:$.name]},X)})})]}),I.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:I.map(Z=>s.jsxs("li",{children:[" ",Z.name]},Z.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[G&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",G.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[G.roomType.name," - ",G.hotel.place]})]})]}),Y.length>0&&s.jsxs("div",{children:[s.jsxs("h6",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:Y.map(Z=>s.jsxs("li",{className:"capitalize",children:[" ",Z.type," at ",Z.place]},Z.id))})]})]})]})]},P.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:" Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:_.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:" Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:_.exclusions})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>N(_),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(ni,{className:"h-4 w-4 mr-2"}),"Copy Complete Itinerary"]}),s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Close"})]})]})]})})]})};function _n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const vh=({onNext:e,initialData:t})=>{var y,_,k,v,x,b;const{state:r,dispatch:n}=It(),{state:a}=Ht(),{transportations:i}=r,[o,l]=ne.useState({name:(t==null?void 0:t.name)||"",whatsapp:(t==null?void 0:t.whatsapp)||"",countryCode:(t==null?void 0:t.countryCode)||"+1",startDate:((y=t==null?void 0:t.travelDates)==null?void 0:y.startDate)||"",endDate:((_=t==null?void 0:t.travelDates)==null?void 0:_.endDate)||"",isFlexible:((k=t==null?void 0:t.travelDates)==null?void 0:k.isFlexible)||!1,flexibleMonth:((v=t==null?void 0:t.travelDates)==null?void 0:v.flexibleMonth)||"",adults:((x=t==null?void 0:t.numberOfPax)==null?void 0:x.adults)||2,children:((b=t==null?void 0:t.numberOfPax)==null?void 0:b.children)||0,numberOfDays:(t==null?void 0:t.numberOfDays)||7,transportationMode:(t==null?void 0:t.transportationMode)||"",email:(t==null?void 0:t.email)||""}),c=[{code:"+1",country:"US/CA"},{code:"+44",country:"UK"},{code:"+91",country:"IN"},{code:"+61",country:"AU"},{code:"+49",country:"DE"},{code:"+33",country:"FR"},{code:"+81",country:"JP"},{code:"+86",country:"CN"},{code:"+65",country:"SG"},{code:"+60",country:"MY"},{code:"+62",country:"ID"}],u=["January","February","March","April","May","June","July","August","September","October","November","December"],p=(S,L)=>{if(S&&L){const T=new Date(S),A=new Date(L),N=Math.abs(A.getTime()-T.getTime());return Math.ceil(N/(1e3*60*60*24))+1}return 7},f=(S,L)=>{const T={...o,[S]:L};T.startDate&&T.endDate&&(T.numberOfDays=p(T.startDate,T.endDate)),l(T)},j=()=>{const S=o.name&&o.whatsapp&&o.transportationMode,L=o.isFlexible?o.flexibleMonth:o.startDate&&o.endDate;return S&&L},m=S=>{var T;if(S.preventDefault(),!j())return;const L={id:(t==null?void 0:t.id)||_n(),name:o.name,email:o.email||void 0,whatsapp:o.whatsapp,countryCode:o.countryCode,travelDates:{startDate:o.startDate,endDate:o.endDate,isFlexible:o.isFlexible,flexibleMonth:o.flexibleMonth},numberOfPax:{adults:o.adults,children:o.children},numberOfDays:o.numberOfDays,transportationMode:o.transportationMode,createdAt:(t==null?void 0:t.createdAt)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||((T=a.user)==null?void 0:T.id)};t||n({type:"ADD_CLIENT",payload:L}),e(L)};return s.jsx("div",{className:"max-w-2xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Client Details"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Step 1 of 4 - Basic Information"})]})]})}),s.jsxs("form",{onSubmit:m,className:"p-4 md:p-8 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Personal Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Client Name *"}),s.jsx("input",{type:"text",value:o.name,onChange:S=>l({...o,name:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter client's full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Email (Optional)"}),s.jsx("input",{type:"email",value:o.email,onChange:S=>l({...o,email:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter client's email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"WhatsApp Number *"}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[s.jsx("select",{value:o.countryCode,onChange:S=>l({...o,countryCode:S.target.value}),className:"w-full sm:w-auto p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",children:c.map(({code:S,country:L})=>s.jsxs("option",{value:S,children:[S," (",L,")"]},S))}),s.jsx("input",{type:"tel",value:o.whatsapp,onChange:S=>l({...o,whatsapp:S.target.value}),className:"flex-1 p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter WhatsApp number",required:!0})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Dates"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"flexible",checked:o.isFlexible,onChange:S=>l({...o,isFlexible:S.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"flexible",className:"text-sm md:text-base font-medium text-slate-700",children:"Flexible dates (month only)"})]}),o.isFlexible?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Preferred Month"}),s.jsxs("select",{value:o.flexibleMonth,onChange:S=>l({...o,flexibleMonth:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:o.isFlexible,children:[s.jsx("option",{value:"",children:"Select a month"}),u.map(S=>s.jsx("option",{value:S,children:S},S))]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",value:o.startDate,onChange:S=>f("startDate",S.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!o.isFlexible})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"End Date *"}),s.jsx("input",{type:"date",value:o.endDate,onChange:S=>f("endDate",S.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!o.isFlexible})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Number of Passengers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Adults"}),s.jsx("input",{type:"number",min:"1",value:o.adults,onChange:S=>l({...o,adults:parseInt(S.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Children"}),s.jsx("input",{type:"number",min:"0",value:o.children,onChange:S=>l({...o,children:parseInt(S.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ft,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",value:o.numberOfDays,onChange:S=>l({...o,numberOfDays:parseInt(S.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",disabled:!o.isFlexible&&o.startDate&&o.endDate}),s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),!o.isFlexible&&o.startDate&&o.endDate&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-calculated from dates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:o.transportationMode,onChange:S=>l({...o,transportationMode:S.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!0,children:[s.jsx("option",{value:"",children:"Select transportation"}),i.map(S=>s.jsxs("option",{value:S.vehicleName,children:[S.vehicleName," (",S.type.replace("-"," "),")"]},S.id))]})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 md:pt-6 border-t border-slate-200",children:s.jsx("button",{type:"submit",disabled:!j(),className:"inline-flex items-center px-4 md:px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:"Next Step"})})]})]})})},Zp=({client:e,onNext:t,onBack:r,userType:n})=>{const{state:a}=It(),{fixedItineraries:i}=a,[o,l]=ne.useState(null),[c,u]=ne.useState(null),p=i.filter(_=>_.numberOfDays===e.numberOfDays),f=()=>{o==="new"?t("new"):o==="fixed"&&c&&t("fixed",c)},j=()=>{switch(n){case"admin":return"from-blue-600 to-teal-600";case"agent":return"from-teal-600 to-green-600";case"sales":return"from-purple-600 to-pink-600";default:return"from-blue-600 to-teal-600"}},y=(()=>{switch(n){case"admin":return"blue";case"agent":return"teal";case"sales":return"purple";default:return"blue"}})();return s.jsx("div",{className:"max-w-4xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:`bg-gradient-to-r ${j()} px-4 md:px-8 py-4 md:py-6`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Gt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Choose Itinerary Type"}),s.jsxs("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:["Step 2 of ","5"," - Select how to create your itinerary"]})]})]})}),s.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Choose Your Approach"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all ${o==="new"?`border-${y}-500 bg-${y}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>{l("new"),u(null)},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`bg-${y}-100 p-4 rounded-lg inline-block mb-4`,children:s.jsx(vs,{className:`h-8 w-8 text-${y}-600`})}),s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Create New Itinerary"}),s.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Build a completely custom itinerary from scratch with full control over every detail."}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(nt,{className:"h-4 w-4"}),s.jsx("span",{children:"Day-by-day planning"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx("span",{children:"Custom sightseeing selection"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(wt,{className:"h-4 w-4"}),s.jsx("span",{children:"Hotel & activity choices"})]})]})]})}),s.jsx("div",{className:`border-2 rounded-xl p-6 cursor-pointer transition-all ${o==="fixed"?`border-${y}-500 bg-${y}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>{l("fixed"),u(null)},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-green-100 p-4 rounded-lg inline-block mb-4",children:s.jsx(Gt,{className:"h-8 w-8 text-green-600"})}),s.jsx("h4",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Select Fixed Itinerary"}),s.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Choose from pre-designed itinerary templates that match your trip duration."}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-500",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Rt,{className:"h-4 w-4"}),s.jsx("span",{children:"Pre-planned activities"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx("span",{children:"Quick pricing setup"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(Gt,{className:"h-4 w-4"}),s.jsxs("span",{children:[p.length," templates available"]})]})]})]})})]}),o==="fixed"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-900",children:["Available ",e.numberOfDays,"-Day Itineraries"]}),p.length===0?s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[s.jsx(Gt,{className:"h-8 w-8 text-yellow-600 mx-auto mb-3"}),s.jsx("h5",{className:"text-yellow-900 font-medium mb-2",children:"No Fixed Itineraries Available"}),s.jsxs("p",{className:"text-yellow-700 text-sm mb-4",children:["No pre-designed itineraries are available for ",e.numberOfDays," days."]}),s.jsxs("button",{onClick:()=>l("new"),className:`inline-flex items-center px-4 py-2 bg-${y}-600 text-white rounded-lg hover:bg-${y}-700 transition-colors`,children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create New Instead"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(_=>s.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${(c==null?void 0:c.id)===_.id?`border-${y}-500 bg-${y}-50`:"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,onClick:()=>u(_),children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`bg-${y}-100 p-2 rounded-lg`,children:s.jsx(Gt,{className:`h-5 w-5 text-${y}-600`})}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-slate-900",children:_.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:[s.jsx(nt,{className:"h-3 w-3 mr-1"}),_.numberOfDays," days"]}),s.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:[s.jsx(rs,{className:"h-3 w-3 mr-1"}),"$",_.baseCost]})]})]})]})}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"h-4 w-4"}),s.jsx("span",{children:_.transportationMode})]}),_.dayPlans&&_.dayPlans.length>0&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 mt-3",children:[s.jsx("div",{className:"text-xs font-medium text-slate-700 mb-2",children:"Includes:"}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-slate-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(wt,{className:"h-3 w-3 mr-1"}),"Hotels"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(hs,{className:"h-3 w-3 mr-1"}),"Activities"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ns,{className:"h-3 w-3 mr-1"}),"Meals"]})]})]})]})]},_.id))})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:r,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:f,disabled:!o||o==="fixed"&&!c,className:`inline-flex items-center px-6 py-3 bg-gradient-to-r ${j()} text-white font-semibold rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105`,children:["Continue",s.jsx(P4,{className:"ml-2 h-5 w-5"})]})]})]})]})})},ex=({client:e,fixedItinerary:t,onNext:r,onBack:n,userType:a})=>{const{state:i}=It(),{hotels:o,sightseeings:l,activities:c,entryTickets:u,meals:p}=i,[f,j]=ne.useState(0),[m,y]=ne.useState(83),k=a==="admin"?t.baseCost:a==="agent"?t.baseCost+35:t.baseCost+50,v=k+f,x=()=>{switch(a){case"admin":return"from-blue-600 to-teal-600";case"agent":return"from-teal-600 to-green-600";case"sales":return"from-purple-600 to-pink-600";default:return"from-blue-600 to-teal-600"}},b=()=>{switch(a){case"admin":return"Profit Margin";case"agent":return"Agent Profit";case"sales":return"Sales Commission";default:return"Profit Margin"}},S=()=>{const T={id:_n(),client:e,dayPlans:t.dayPlans,totalBaseCost:k,profitMargin:f,finalPrice:v,exchangeRate:m,version:1,lastUpdated:new Date().toISOString(),updatedBy:a,changeLog:[{id:_n(),version:1,changeType:"created",description:`Itinerary created from fixed template: ${t.name}`,timestamp:new Date().toISOString(),updatedBy:a}]};r(T)},L=T=>{const A=l.filter(I=>T.sightseeing.includes(I.id)),N=T.activities.map(I=>{const Y=c.find(Z=>Z.id===I.activityId),G=Y==null?void 0:Y.options.find(Z=>Z.id===I.optionId);return{activity:Y,option:G}}).filter(I=>I.activity&&I.option),P=u.filter(I=>T.entryTickets.includes(I.id)),M=p.filter(I=>T.meals.includes(I.id));let E=null;if(T.hotel){const I=o.find(G=>G.id===T.hotel.hotelId),Y=I==null?void 0:I.roomTypes.find(G=>G.id===T.hotel.roomTypeId);I&&Y&&(E={hotel:I,roomType:Y})}return{sightseeing:A,activities:N,tickets:P,meals:M,hotel:E}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:`bg-gradient-to-r ${x()} px-4 md:px-8 py-4 md:py-6`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review Fixed Itinerary"}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:"Step 3 of 5 - Review template and set pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(Gt,{className:"h-5 w-5 mr-2 text-green-600"}),"Selected Template: ",t.name]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.numberOfDays}),s.jsx("div",{className:"text-sm text-slate-600",children:"Days"})]}),s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-purple-600",children:t.transportationMode}),s.jsx("div",{className:"text-sm text-slate-600",children:"Transportation"})]}),s.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",t.baseCost]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Base Template Cost"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Complete Itinerary Preview"]}),s.jsx("div",{className:"space-y-4",children:t.dayPlans.map(T=>{const A=L(T);return s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-base font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",T.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[A.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.sightseeing.map(N=>s.jsxs("li",{children:[" ",N.name]},N.id))})]}),A.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.activities.map((N,P)=>{var M,E;return s.jsxs("li",{children:[" ",(M=N.activity)==null?void 0:M.name," - ",(E=N.option)==null?void 0:E.name]},P)})})]}),A.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.tickets.map(N=>s.jsxs("li",{children:[" ",N.name]},N.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[A.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",A.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[A.hotel.roomType.name," - ",A.hotel.hotel.place]})]})]}),A.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-sm text-slate-700 space-y-1 ml-6",children:A.meals.map(N=>s.jsxs("li",{className:"capitalize",children:[" ",N.type," at ",N.place]},N.id))})]})]})]})]},T.day)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-green-600",children:" Inclusions"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:t.inclusions})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-semibold text-slate-900 mb-3 flex items-center text-red-600",children:" Exclusions"}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:s.jsx("pre",{className:"text-sm text-slate-700 whitespace-pre-wrap font-sans",children:t.exclusions})})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-6 flex items-center",children:[s.jsx(wr,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Exchange Rate (USD to INR)"}),s.jsx("input",{type:"number",min:"1",step:"0.1",value:m,onChange:T=>y(parseFloat(T.target.value)||83),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter current exchange rate"}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Current rate: 1 USD = ",m]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:a==="admin"?"Template Base Cost":"Package Cost"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["$",k.toFixed(2)]}),s.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:["",(k*m).toLocaleString("en-IN")]})]}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:a==="admin"?"Original template cost":"Includes template cost with markup"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:["Add ",b()," (USD)"]}),s.jsx("input",{type:"number",min:"0",step:a==="admin"?"50":a==="agent"?"10":"25",value:f,onChange:T=>j(parseFloat(T.target.value)||0),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:`Enter your ${b().toLowerCase()} in USD`}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Your ",b().toLowerCase()," on this package"]})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:`bg-gradient-to-r ${x().replace("from-","from-").replace("to-","to-").replace("-600","-500").replace("-600","-500")} text-white rounded-xl p-6 w-full text-center`,children:[s.jsx("h4",{className:"text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsxs("div",{className:"space-y-2 mb-2",children:[s.jsxs("div",{className:"text-3xl font-bold",children:["$",v.toFixed(2)]}),s.jsxs("div",{className:"text-2xl font-bold text-opacity-80",children:["",(v*m).toLocaleString("en-IN")]})]}),s.jsxs("p",{className:"text-opacity-80 text-sm",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-30",children:s.jsxs("div",{className:"text-sm space-y-1 text-opacity-80",children:[s.jsxs("div",{children:["Base Cost: $",k.toFixed(2)," / ",(k*m).toLocaleString("en-IN")]}),s.jsxs("div",{children:["Your ",b(),": $",f.toFixed(2)," / ",(f*m).toLocaleString("en-IN")]})]})})]})})]})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-slate-200",children:[s.jsx("button",{onClick:n,className:"px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Previous Step"}),s.jsxs("button",{onClick:S,className:`inline-flex items-center px-6 py-3 bg-gradient-to-r ${x()} text-white font-semibold rounded-lg hover:opacity-90 transition-all duration-200 transform hover:scale-105`,children:["Generate Summary",s.jsx(rs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},f_=({client:e,dayPlans:t,onNext:r,onBack:n})=>{const{state:a}=It(),{hotels:i,sightseeings:o,activities:l,entryTickets:c,meals:u,transportations:p}=a,[f,j]=ne.useState(0),m=rd(e,t,i,o,l,c,u,p),y=m+f,_=()=>{const v={id:_n(),client:e,dayPlans:t,totalBaseCost:m,profitMargin:f,finalPrice:y,exchangeRate:1,version:1,lastUpdated:new Date().toISOString(),updatedBy:"admin",changeLog:[]};r(v)},k=v=>{const x=o.filter(A=>v.sightseeing.includes(A.id)),b=v.activities.map(A=>{const N=l.find(M=>M.id===A.activityId),P=N==null?void 0:N.options.find(M=>M.id===A.optionId);return{activity:N,option:P}}).filter(A=>A.activity&&A.option),S=c.filter(A=>v.entryTickets.includes(A.id)),L=u.filter(A=>v.meals.includes(A.id));let T=null;if(v.hotel){const A=i.find(P=>P.id===v.hotel.hotelId),N=A==null?void 0:A.roomTypes.find(P=>P.id===v.hotel.roomTypeId);A&&N&&(T={hotel:A,roomType:N})}return{sightseeing:x,activities:b,tickets:S,meals:L,hotel:T}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Costing"}),s.jsx("p",{className:"text-green-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(v=>{const x=k(v);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",v.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.sightseeing.map(b=>s.jsxs("li",{children:[" ",b.name]},b.id))})]}),x.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.activities.map((b,S)=>{var L,T;return s.jsxs("li",{children:[" ",(L=b.activity)==null?void 0:L.name," - ",(T=b.option)==null?void 0:T.name]},S)})})]}),x.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.tickets.map(b=>s.jsxs("li",{children:[" ",b.name]},b.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[x.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",x.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[x.hotel.roomType.name," - ",x.hotel.hotel.place]})]})]}),x.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:x.meals.map(b=>s.jsxs("li",{className:"capitalize",children:[" ",b.type," at ",b.place]},b.id))})]})]})]})]},v.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(wr,{className:"h-5 w-5 mr-2 text-green-600"}),"Cost Breakdown & Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Total Base Cost"}),s.jsx("div",{className:"space-y-1",children:s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Yr(m)})}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Profit Margin (Rp)"}),s.jsx("input",{type:"number",min:"0",step:"100000",value:f,onChange:v=>j(parseFloat(v.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm md:text-base",placeholder:"Enter profit in IDR"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your profit margin or commission amount"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsx("div",{className:"space-y-2 mb-2",children:s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Yr(y)})}),s.jsxs("p",{className:"text-green-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-green-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Base Cost: ",Yr(m)]}),s.jsxs("div",{children:["Your Profit: ",Yr(f)]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:n,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:_,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(rs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},p_=({itinerary:e,onBack:t,onStartNew:r})=>{var v;const{state:n,dispatch:a}=It(),{state:i}=Ht(),{hotels:o,sightseeings:l,activities:c,entryTickets:u,meals:p,transportations:f}=n;il.useEffect(()=>{var S;if(!n.clients.find(L=>L.id===e.client.id)){const L={...e.client,followUpStatus:{status:"itinerary-created",updatedAt:new Date().toISOString(),remarks:"Initial itinerary created by admin",nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00"},followUpHistory:[{id:_n(),status:"itinerary-created",remarks:"Initial itinerary created by admin",updatedAt:new Date().toISOString(),nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00",updatedBy:((S=i.user)==null?void 0:S.id)||"admin"}],nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"11:00"};a({type:"ADD_CLIENT",payload:L})}const b={...e,id:_n(),version:1,lastUpdated:new Date().toISOString(),updatedBy:"admin",changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:"Initial itinerary created",timestamp:new Date().toISOString(),updatedBy:"admin"}]};a({type:"ADD_ITINERARY",payload:b})},[e,a,(v=i.user)==null?void 0:v.id,n.clients]);const j=()=>{const x=new Ye,b=x.internal.pageSize.width,S=20;let L=S;x.setFontSize(20),x.setFont("helvetica","bold"),x.text("Travel Itinerary",b/2,L,{align:"center"}),L+=15,x.setFontSize(12),x.setFont("helvetica","normal"),x.text(`Client: ${e.client.name}`,S,L),L+=8,x.text(`Contact: ${e.client.countryCode} ${e.client.whatsapp}`,S,L),L+=8,x.text(`Duration: ${e.client.numberOfDays} days`,S,L),L+=8,x.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,S,L),L+=15,x.setFont("helvetica","bold"),x.text("Day-by-Day Itinerary:",S,L),L+=10,e.dayPlans.forEach(T=>{if(L>250&&(x.addPage(),L=S),x.setFont("helvetica","bold"),x.text(`Day ${T.day}:`,S,L),L+=8,x.setFont("helvetica","normal"),T.sightseeing.length>0){const A=T.sightseeing.map(N=>{const P=l.find(M=>M.id===N);return P?P.name:"Unknown"}).join(", ");x.text(` Sightseeing: ${A}`,S+5,L),L+=6}if(T.hotel){const A=o.find(P=>P.id===T.hotel.hotelId),N=A==null?void 0:A.roomTypes.find(P=>P.id===T.hotel.roomTypeId);A&&N&&(x.text(` Hotel: ${A.name} - ${N.name}`,S+5,L),L+=6)}T.activities.length>0&&T.activities.forEach(A=>{const N=c.find(M=>M.id===A.activityId),P=N==null?void 0:N.options.find(M=>M.id===A.optionId);N&&P&&(x.text(` Activity: ${N.name} - ${P.name}`,S+5,L),L+=6)}),L+=5}),L>220&&(x.addPage(),L=S),x.setFont("helvetica","bold"),x.text("Pricing Summary:",S,L),L+=10,x.setFont("helvetica","normal"),x.text(`Base Cost: $${e.totalBaseCost.toFixed(2)}`,S,L),L+=8,x.text(`Profit Margin: $${e.profitMargin.toFixed(2)}`,S,L),L+=8,x.setFont("helvetica","bold"),x.text(`Total Price: $${e.finalPrice.toFixed(2)}`,S,L),L+=8,x.text(`Total Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,S,L),x.save(`${e.client.name}-itinerary.pdf`)},m=x=>{const b=l.filter(N=>x.sightseeing.includes(N.id)),S=x.activities.map(N=>{const P=c.find(E=>E.id===N.activityId),M=P==null?void 0:P.options.find(E=>E.id===N.optionId);return{activity:P,option:M}}).filter(N=>N.activity&&N.option),L=u.filter(N=>x.entryTickets.includes(N.id)),T=p.filter(N=>x.meals.includes(N.id));let A=null;if(x.hotel){const N=o.find(M=>M.id===x.hotel.hotelId),P=N==null?void 0:N.roomTypes.find(M=>M.id===x.hotel.roomTypeId);N&&P&&(A={hotel:N,roomType:P})}return{sightseeing:b,activities:S,tickets:L,meals:T,hotel:A}},_=(()=>{let x=0,b=0,S=0,L=0,T=0,A=0,N=[];const P=e.client.numberOfPax.adults+e.client.numberOfPax.children,M=f.find(E=>E.vehicleName===e.client.transportationMode);return M&&M.type!=="cab"&&(x=M.costPerDay*e.client.numberOfDays),e.dayPlans.forEach(E=>{let I=0,Y=0,G=0,Z=0,X=0;if(E.hotel){const ee=o.find(te=>te.id===E.hotel.hotelId);if(ee){const te=ee.roomTypes.find(re=>re.id===E.hotel.roomTypeId);if(te){const re=new Date(e.client.travelDates.startDate),D=re.getMonth()+1,R=re.getDate();let V=te.offSeasonPrice;D===12&&R>=20||D===1&&R<=5?V=te.peakSeasonPrice:(D===7||D===8)&&(V=te.seasonPrice),b+=V,I=V}}}const q=e.client.transportationMode.toLowerCase();q.includes("cab")||q==="private cab service"?E.sightseeing.forEach(ee=>{const te=l.find(re=>re.id===ee);if(te&&te.vehicleCosts){let re=0;P<=6?re=te.vehicleCosts.avanza:P<=12?re=te.vehicleCosts.hiace:P<=27?re=te.vehicleCosts.miniBus:P<=32?re=te.vehicleCosts.bus32:re=te.vehicleCosts.bus39,S+=re,Y+=re}}):E.sightseeing.forEach(ee=>{const te=l.find(re=>re.id===ee);if(te){let re=0;te.transportationMode==="self-drive-car"?re=15:te.transportationMode==="self-drive-scooter"&&(re=8),S+=re,Y+=re}}),E.activities.forEach(ee=>{const te=c.find(re=>re.id===ee.activityId);if(te){const re=te.options.find(D=>D.id===ee.optionId);if(re){let D=0;if(re.costForHowMany>=P)D=re.cost;else{const R=Math.ceil(P/re.costForHowMany);D=re.cost*R}L+=D,G+=D}}}),E.entryTickets.forEach(ee=>{const te=u.find(re=>re.id===ee);if(te){const re=te.cost*P;T+=re,Z+=re}}),E.meals.forEach(ee=>{const te=p.find(re=>re.id===ee);if(te){const re=te.cost*P;A+=re,X+=re}});const $=I+Y+G+Z+X;N.push({day:E.day,accommodation:I,sightseeing:Y,activities:G,tickets:Z,meals:X,total:$})}),{transportation:x,accommodation:b,sightseeing:S,activities:L,tickets:T,meals:A,dailyBreakdown:N}})(),k=()=>{const x=e.client.numberOfPax.adults+e.client.numberOfPax.children;let b=` TRAVEL ITINERARY 

`;b+=` CLIENT DETAILS:
`,b+=` Client: ${e.client.name}
`,b+=` Contact: ${e.client.countryCode} ${e.client.whatsapp}
`,b+=` Duration: ${e.client.numberOfDays} days
`,b+=` Passengers: ${x} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,b+=` Transportation: ${e.client.transportationMode}

`,b+=` DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(L=>{const T=m(L);b+=` DAY ${L.day}:
`,T.sightseeing.length>0&&(b+=` SIGHTSEEING:
`,T.sightseeing.forEach(A=>{b+=`    ${A.name}
`})),T.hotel&&(b+=` ACCOMMODATION:
`,b+=`    ${T.hotel.hotel.name} - ${T.hotel.roomType.name}
`,b+=`    Location: ${T.hotel.hotel.place}
`),T.activities.length>0&&(b+=` ACTIVITIES:
`,T.activities.forEach(A=>{var N,P;b+=`    ${(N=A.activity)==null?void 0:N.name} - ${(P=A.option)==null?void 0:P.name}
`})),T.tickets.length>0&&(b+=` ENTRY TICKETS:
`,T.tickets.forEach(A=>{b+=`    ${A.name}
`})),T.meals.length>0&&(b+=` MEALS:
`,T.meals.forEach(A=>{b+=`    ${A.type.charAt(0).toUpperCase()+A.type.slice(1)} at ${A.place}
`})),b+=`
`}),b+=` PRICING:
`,b+=` Total Package Price: $${e.finalPrice.toFixed(2)}
`,b+=` Total Package Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,b+=` Exchange Rate: 1 USD = ${e.exchangeRate}

`;const S=new Map;e.dayPlans.forEach(L=>{if(L.hotel){const T=o.find(N=>N.id===L.hotel.hotelId),A=T==null?void 0:T.roomTypes.find(N=>N.id===L.hotel.roomTypeId);if(T&&A){const N=`${T.id}-${A.id}`;S.has(N)?S.get(N).nights+=1:S.set(N,{hotel:T,roomType:A,nights:1})}}}),b+=` INCLUSIONS:
`,b+=` ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,S.size>0&&S.forEach(({hotel:L,roomType:T,nights:A})=>{b+=` ${A} night${A>1?"s":""} stay ${L.name} in ${T.name}
`}),e.dayPlans.some(L=>L.sightseeing.length>0)&&(b+=` Sightseeing tours as mentioned
`),e.dayPlans.some(L=>L.activities.length>0)&&(b+=` Activities and experiences as listed
`),e.dayPlans.some(L=>L.entryTickets.length>0)&&(b+=` Entry tickets to attractions
`),e.dayPlans.some(L=>L.meals.length>0)&&(b+=` Meals as specified in itinerary
`),b+=` Professional travel planning service
`,b+=` 24/7 customer support during travel

`,b+=` EXCLUSIONS:
`,b+=` International/domestic flights
`,b+=` Travel insurance
`,b+=` Personal expenses and shopping
`,b+=` Tips and gratuities
`,b+=` Any meals not mentioned in inclusions
`,b+=` Additional activities not listed
`,b+=` Visa fees and documentation
`,b+=` Emergency medical expenses

`,b+=` CONTACT:
`,b+=`Nomadller Solutions - Travel Agency Management
`,b+=`Professional Travel Planning Services

`,b+=`Generated on: ${new Date().toLocaleDateString()}
`,b+=`Package ID: ${e.client.id}
`,navigator.clipboard.writeText(b).then(()=>{alert(" Complete itinerary copied to clipboard!")}).catch(()=>{alert(" Failed to copy itinerary. Please try again.")})};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Itinerary Complete!"}),s.jsx("p",{className:"text-green-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Rt,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-green-900",children:"Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-green-700 mt-1 text-sm md:text-base",children:["Your detailed itinerary for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Client Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Client:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wn,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Contact:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.countryCode," ",e.client.whatsapp]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(x=>{const b=m(x);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",x.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[b.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.sightseeing.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]}),b.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.activities.map((S,L)=>{var T,A;return s.jsxs("li",{children:[" ",(T=S.activity)==null?void 0:T.name," - ",(A=S.option)==null?void 0:A.name]},L)})})]}),b.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.tickets.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[b.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",b.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[b.hotel.roomType.name," - ",b.hotel.hotel.place]})]})]}),b.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.meals.map(S=>s.jsxs("li",{className:"capitalize",children:[" ",S.type," at ",S.place]},S.id))})]})]})]})]},x.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Daily Cost Analysis"]}),s.jsx("p",{className:"text-slate-600 mb-4 text-sm md:text-base",children:"Detailed day-by-day cost breakdown for complete transparency"}),s.jsx("div",{className:"space-y-4",children:_.dailyBreakdown.map(x=>s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-semibold text-slate-900",children:["Day ",x.day]}),s.jsxs("div",{className:"text-lg font-bold text-indigo-600",children:["$",x.total.toFixed(2)]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 text-sm",children:[x.accommodation>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Hotel"}),s.jsxs("div",{className:"font-semibold",children:["$",x.accommodation.toFixed(2)]})]}),x.sightseeing>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Sightseeing"}),s.jsxs("div",{className:"font-semibold",children:["$",x.sightseeing.toFixed(2)]})]}),x.activities>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Activities"}),s.jsxs("div",{className:"font-semibold",children:["$",x.activities.toFixed(2)]})]}),x.tickets>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Tickets"}),s.jsxs("div",{className:"font-semibold",children:["$",x.tickets.toFixed(2)]})]}),x.meals>0&&s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-slate-600",children:"Meals"}),s.jsxs("div",{className:"font-semibold",children:["$",x.meals.toFixed(2)]})]})]})]},x.day))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(rs,{className:"h-5 w-5 mr-2 text-green-600"}),"Complete Cost Analysis & Calculations"]}),s.jsx("p",{className:"text-slate-600 mb-4 text-sm md:text-base",children:"Comprehensive breakdown of all costs with detailed calculations and pricing logic"}),s.jsxs("div",{className:"space-y-6",children:[_.transportation>0&&s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(Nn,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-semibold text-slate-900",children:"Transportation Analysis"})]}),s.jsxs("div",{className:"text-sm text-slate-600 mb-2",children:["Vehicle: ",e.client.transportationMode,"  Duration: ",e.client.numberOfDays," days"]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.transportation.toFixed(2)]}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Self-drive vehicle rental including fuel and insurance"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(wt,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Accommodation"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.accommodation.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Hotels & room charges with seasonal pricing"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[e.client.numberOfDays," night",e.client.numberOfDays!==1?"s":"","  Various locations"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(ft,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Sightseeing"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.sightseeing.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:e.client.transportationMode.toLowerCase().includes("cab")?"Vehicle costs based on group size":"Fuel & parking for self-drive tours"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(hs,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Activities"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.activities.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Adventure & experiences with group calculations"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Costs calculated per activity capacity requirements"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(As,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Entry Tickets"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.tickets.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Attraction entries calculated per person"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["$",_.tickets.toFixed(2),"  ",e.client.numberOfPax.adults+e.client.numberOfPax.children," = $",(_.tickets/(e.client.numberOfPax.adults+e.client.numberOfPax.children)).toFixed(2)," per person"]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(ns,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Meals"})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.meals.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Food & beverages calculated per person"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Various restaurants and meal types included"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center",children:[s.jsx(wr,{className:"h-5 w-5 mr-2 text-green-600"}),"Pricing Calculation Summary"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsx("div",{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Base Services Total:"}),s.jsxs("span",{className:"font-semibold",children:["$",(_.transportation+_.accommodation+_.sightseeing+_.activities+_.tickets+_.meals).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Passenger Count:"}),s.jsxs("span",{className:"font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Trip Duration:"}),s.jsxs("span",{className:"font-semibold",children:[e.client.numberOfDays," days"]})]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cost per Person:"}),s.jsxs("span",{className:"font-semibold",children:["$",(e.totalBaseCost/(e.client.numberOfPax.adults+e.client.numberOfPax.children)).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Cost per Day:"}),s.jsxs("span",{className:"font-semibold",children:["$",(e.totalBaseCost/e.client.numberOfDays).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Transportation Mode:"}),s.jsx("span",{className:"font-semibold text-xs",children:e.client.transportationMode})]})]})})]}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["$",_.meals.toFixed(2)]}),s.jsx("div",{className:"text-sm text-slate-600",children:"Food & beverages"})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700",children:"Subtotal (Base Cost):"}),s.jsxs("span",{className:"font-semibold text-slate-900",children:["$",e.totalBaseCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700",children:"Profit Margin:"}),s.jsxs("span",{className:"font-semibold text-slate-900",children:["$",e.profitMargin.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[s.jsx("span",{className:"text-slate-900",children:"Total (USD):"}),s.jsxs("span",{className:"text-green-600",children:["$",e.finalPrice.toFixed(2)]})]})]}),s.jsx("div",{className:"flex items-center justify-center mt-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl p-6 text-center",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Total Package Price"}),s.jsxs("div",{className:"text-2xl font-bold mb-1",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-lg font-semibold text-green-100",children:["",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-xs text-green-100 mt-2",children:["Exchange Rate: 1 USD = ",e.exchangeRate]})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Nr,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:j,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Uh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:k,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(ni,{className:"mr-2 h-5 w-5"}),"Copy Itinerary"]})]}),s.jsxs("button",{onClick:r,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Up,{className:"mr-2 h-5 w-5"}),"Create New Itinerary"]})]})]})]})})},x_=()=>{const[e,t]=ne.useState(1),[r,n]=ne.useState(null),[a,i]=ne.useState(null),[o,l]=ne.useState(null),[c,u]=ne.useState([]),[p,f]=ne.useState(null),j=S=>{n(S),t(2)},m=(S,L)=>{i(S),l(L),t(3)},y=S=>{u(S),t(4)},_=S=>{f(S),t(5)},k=S=>{f(S),t(5)},v=()=>{t(e-1)},x=()=>{t(1),n(null),i(null),l(null),u([]),f(null)},b=()=>{switch(e){case 1:return s.jsx(vh,{onNext:j});case 2:return r?s.jsx(Zp,{client:r,onNext:m,onBack:v,userType:"admin"}):null;case 3:return a==="fixed"&&o?s.jsx(ex,{client:r,fixedItinerary:o,onNext:k,onBack:v,userType:"admin"}):a==="new"&&r?s.jsx(nd,{client:r,onNext:y,onBack:v,isAgent:!1}):null;case 4:return r?s.jsx(f_,{client:r,dayPlans:c,onNext:_,onBack:v}):null;case 5:return p?s.jsx(p_,{itinerary:p,onBack:v,onStartNew:x}):null;default:return s.jsx(vh,{onNext:j})}};return e>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(S=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${S<=e?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:S}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${S<=e?"text-slate-900":"text-slate-500"}`,children:[S===1&&"Client Details",S===2&&"Itinerary Type",S===3&&(a==="fixed"?"Review Template":"Day Planning"),S===4&&"Review & Costing",S===5&&"Final Summary"]})}),S<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${S<e?"bg-blue-600":"bg-slate-200"}`})]},S))})})}),b()]})}):s.jsx(Kt,{title:"Itinerary Builder",subtitle:"Create detailed travel packages for your clients",children:b()})},g_=()=>{var u,p;const{logout:e,state:t}=Ht(),[r,n]=ne.useState("dashboard"),[a,i]=ne.useState(!1),o=f=>{if(n(f),i(!1),f==="agents"){const j=localStorage.getItem("registeredAgents");if(j)try{const m=JSON.parse(j);setTimeout(()=>{window.dispatchEvent(new Event("refreshAgents"))},50)}catch(m){console.error("Error loading agents:",m)}}},l=[{id:"dashboard",name:"Dashboard",icon:dh,description:"Overview & client leads"},{id:"itinerary",name:"Itinerary Builder",icon:vs,description:"Create new packages"},{id:"agents",name:"Agent Management",icon:gb,description:"Manage travel agents"},{id:"sales",name:"Sales Management",icon:wr,description:"Manage sales team & performance"},{id:"operations",name:"Operations Management",icon:r1,description:"Manage operations team & bookings"},{id:"fixedItineraries",name:"Fixed Itineraries",icon:Gt,description:"Manage itinerary templates"}],c=()=>{switch(r){case"dashboard":return s.jsx(H3,{onNavigateToSection:n});case"itinerary":return s.jsx(x_,{});case"transportation":return s.jsx(V3,{});case"hotels":return s.jsx(W3,{});case"sightseeing":return s.jsx(G3,{});case"activities":return s.jsx(K3,{});case"tickets":return s.jsx(Y3,{});case"meals":return s.jsx(J3,{});case"agents":return s.jsx(X3,{});case"sales":return s.jsx(l_,{});case"operations":return s.jsx(c_,{});case"fixedItineraries":return s.jsx(m_,{});default:return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-slate-200 max-w-md",children:[s.jsx("div",{className:"bg-blue-100 p-4 rounded-lg mb-4 inline-block",children:s.jsx(r1,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Coming Soon"}),s.jsxs("p",{className:"text-slate-600 mb-4",children:["The ",r," management module is currently under development."]}),s.jsxs("button",{onClick:()=>n("dashboard"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(dh,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})]})})})}};return s.jsx(ph,{children:s.jsxs("div",{className:"flex h-screen bg-slate-50",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${a?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 p-2 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Nomadller Solutions"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Admin Panel"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:(u=t.user)==null?void 0:u.name}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:(p=t.user)==null?void 0:p.role})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(xl,{className:"h-4 w-4"})})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:l.map(f=>s.jsxs("button",{onClick:()=>{o(f.id)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${r===f.id?"bg-gradient-to-r from-blue-600 to-teal-600 text-white font-medium shadow-md":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(f.icon,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:f.name}),s.jsx("div",{className:`text-xs ${r===f.id?"text-blue-100":"text-slate-500"}`,children:f.description})]})]},f.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 z-40 lg:hidden",onClick:()=>i(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-slate-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Bp,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 p-2 rounded-lg",children:s.jsx(ut,{className:"h-5 w-5 text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"Admin Panel"})})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(xl,{className:"h-4 w-4"})})]})}),s.jsx("main",{className:"flex-1 overflow-auto",children:c()})]})]})})},P1=()=>{var A,N,P,M,E,I,Y,G;const{state:e}=It(),{state:t,updateAgentProfile:r}=Ht(),{clients:n,itineraries:a}=e,[i,o]=ne.useState("all"),[l,c]=ne.useState(!1),[u,p]=ne.useState({companyName:((A=t.user)==null?void 0:A.companyName)||"",companyLogo:""}),[f,j]=ne.useState(!1),[m,y]=ne.useState(null),_=n.filter(Z=>!Z.whatsapp),k=a.reduce((Z,X)=>Z+X.finalPrice,0),v=a.length>0?k/a.length:0,x=()=>{switch(i){case"itineraries":return{clients:[],itineraries:a};default:return{clients:_,itineraries:a}}},{clients:b,itineraries:S}=x(),L=async()=>{var Z;if((Z=t.user)!=null&&Z.id){j(!0),y(null);try{const X=await r(t.user.id,{companyName:u.companyName,companyLogo:u.companyLogo});X.success?(y({type:"success",text:X.message}),c(!1),setTimeout(()=>y(null),3e3)):y({type:"error",text:X.message})}catch{y({type:"error",text:"Failed to update profile. Please try again."})}finally{j(!1)}}},T=Z=>{var q;const X=(q=Z.target.files)==null?void 0:q[0];if(X){const $=new FileReader;$.onload=ee=>{var te;p({...u,companyLogo:(te=ee.target)==null?void 0:te.result})},$.readAsDataURL(X)}};return s.jsxs(Kt,{title:"Agent Dashboard",subtitle:"View your travel packages and client itineraries",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 mb-8",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(wt,{className:"h-6 w-6 text-teal-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Company Profile"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your company information"})]})]}),s.jsxs("button",{onClick:()=>{var Z;c(!l),p({companyName:((Z=t.user)==null?void 0:Z.companyName)||"",companyLogo:""})},className:"inline-flex items-center px-4 py-2 text-teal-600 border border-teal-300 rounded-lg hover:bg-teal-50 transition-colors",children:[s.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),s.jsxs("div",{className:"p-6",children:[m&&s.jsx("div",{className:`mb-4 p-4 rounded-lg flex items-center space-x-3 ${m.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${m.type==="success"?"text-green-700":"text-red-700"}`,children:m.text})}),l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsx("input",{type:"text",value:u.companyName,onChange:Z=>p({...u,companyName:Z.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500",placeholder:"Enter company name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Logo"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden",id:"logo-upload"}),s.jsxs("label",{htmlFor:"logo-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[s.jsx(H4,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),u.companyLogo&&s.jsx("img",{src:u.companyLogo,alt:"Company Logo",className:"h-12 w-12 object-cover rounded-lg border border-slate-200"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsxs("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(Is,{className:"h-4 w-4 mr-2 inline"}),"Cancel"]}),s.jsxs("button",{onClick:L,disabled:f||!u.companyName,className:"inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[f?s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):s.jsx(bs,{className:"h-4 w-4 mr-2"}),f?"Updating...":"Save Changes"]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[(N=t.user)!=null&&N.company_logo?s.jsx("img",{src:t.user.company_logo,alt:"Company Logo",className:"h-16 w-16 object-cover rounded-lg border-2 border-teal-200"}):s.jsx("div",{className:"bg-gradient-to-br from-teal-100 to-teal-200 p-4 rounded-lg",children:s.jsx(wt,{className:"h-8 w-8 text-teal-700"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-2xl font-bold text-slate-900",children:((P=t.user)==null?void 0:P.company_name)||((M=t.user)==null?void 0:M.companyName)||"Your Company Name"}),s.jsx("p",{className:"text-slate-600 font-medium",children:"Travel Agency"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-slate-200",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-1",children:"Contact Person"}),s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:((E=t.user)==null?void 0:E.full_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-1",children:"Email"}),s.jsx("p",{className:"text-sm text-slate-900",children:((I=t.user)==null?void 0:I.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-1",children:"Phone"}),s.jsx("p",{className:"text-sm text-slate-900",children:((Y=t.user)==null?void 0:Y.phone_number)||"Not provided"})]})]}),((G=t.user)==null?void 0:G.address)&&s.jsxs("div",{className:"pt-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase mb-1",children:"Address"}),s.jsx("p",{className:"text-sm text-slate-900",children:t.user.address})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Trips"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.length})]}),s.jsx("div",{className:"bg-teal-100 p-3 rounded-lg",children:s.jsx(nt,{className:"h-6 w-6 text-teal-600"})})]})}),s.jsx("div",{className:`bg-white rounded-xl p-6 shadow-sm border cursor-pointer transition-all hover:shadow-md ${i==="itineraries"?"border-blue-500 ring-2 ring-blue-200":"border-slate-200"}`,onClick:()=>o(i==="itineraries"?"all":"itineraries"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Completed Itineraries"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ft,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",k.toFixed(0)]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200 cursor-pointer transition-all hover:shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Avg. Package Value"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",v.toFixed(0)]})]}),s.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:s.jsx(wr,{className:"h-6 w-6 text-amber-600"})})]})})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="all"?"bg-teal-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All Data"}),s.jsxs("button",{onClick:()=>o("itineraries"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="itineraries"?"bg-teal-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Completed Itineraries (",a.length,")"]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:i==="itineraries"?"All Completed Itineraries":"Recent Travel Packages"}),s.jsx("p",{className:"text-slate-500 text-sm",children:i==="itineraries"?"All generated itineraries and quotes":"Latest travel packages created"})]}),b.length===0&&S.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(Zs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:i==="itineraries"?"No completed itineraries yet":"No travel packages yet"}),s.jsx("p",{className:"text-slate-500 mt-1",children:i==="itineraries"?"Completed itineraries will appear here.":"Travel packages will appear here when created through the itinerary builder."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Package Details":"Trip Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Pax & Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:i==="itineraries"?"Total Cost":"Transportation"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Created"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[b.map(Z=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:Z.name}),s.jsx("div",{className:"text-slate-500 text-sm",children:"Trip Package"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-slate-400"}),Z.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",Z.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(Z.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(Z.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[Z.numberOfPax.adults+Z.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[Z.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800",children:Z.transportationMode})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(Z.createdAt).toLocaleDateString()})]},Z.id)),S.map((Z,X)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:Z.client.name}),s.jsx("div",{className:"text-slate-500 text-sm",children:"Completed Package"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-slate-400"}),Z.client.travelDates.isFlexible?s.jsxs("span",{className:"text-slate-600",children:["Flexible (",Z.client.travelDates.flexibleMonth,")"]}):s.jsxs("div",{children:[s.jsx("div",{className:"text-slate-900",children:new Date(Z.client.travelDates.startDate).toLocaleDateString()}),s.jsxs("div",{className:"text-slate-500",children:["to ",new Date(Z.client.travelDates.endDate).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900",children:[Z.client.numberOfPax.adults+Z.client.numberOfPax.children," pax"]}),s.jsxs("div",{className:"text-slate-500",children:[Z.client.numberOfDays," days"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{className:"font-medium text-green-600",children:["Rp ",Z.finalPrice.toLocaleString("id-ID")]})})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(Z.client.createdAt).toLocaleDateString()})]},X))]})]})})]})]})},L1=({onNext:e})=>{const{state:t}=It(),{state:r}=Ht(),{transportations:n}=t,[a,i]=ne.useState({name:"",startDate:"",endDate:"",isFlexible:!1,flexibleMonth:"",adults:2,children:0,numberOfDays:7,transportationMode:""}),o=["January","February","March","April","May","June","July","August","September","October","November","December"],l=(f,j)=>{if(f&&j){const m=new Date(f),y=new Date(j),_=Math.abs(y.getTime()-m.getTime());return Math.ceil(_/(1e3*60*60*24))+1}return 7},c=(f,j)=>{const m={...a,[f]:j};m.startDate&&m.endDate&&(m.numberOfDays=l(m.startDate,m.endDate)),i(m)},u=f=>{var m;f.preventDefault();const j={id:_n(),name:a.name,whatsapp:"",countryCode:"",travelDates:{startDate:a.startDate,endDate:a.endDate,isFlexible:a.isFlexible,flexibleMonth:a.flexibleMonth},numberOfPax:{adults:a.adults,children:a.children},numberOfDays:a.numberOfDays,transportationMode:a.transportationMode,createdAt:new Date().toISOString(),createdBy:(m=r.user)==null?void 0:m.id};e(j)},p=()=>{const f=a.name&&a.transportationMode,j=a.isFlexible?a.flexibleMonth:a.startDate&&a.endDate;return f&&j};return s.jsx("div",{className:"max-w-2xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-blue-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Trip Details"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 1 of 4 - Basic Information"})]})]})}),s.jsxs("form",{onSubmit:u,className:"p-4 md:p-8 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Trip Name / Client Reference *"}),s.jsx("input",{type:"text",value:a.name,onChange:f=>i({...a,name:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",placeholder:"Enter trip name or client reference",required:!0})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Travel Dates"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"flexible",checked:a.isFlexible,onChange:f=>i({...a,isFlexible:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"flexible",className:"text-sm md:text-base font-medium text-slate-700",children:"Flexible dates (month only)"})]}),a.isFlexible?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Preferred Month"}),s.jsxs("select",{value:a.flexibleMonth,onChange:f=>i({...a,flexibleMonth:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:a.isFlexible,children:[s.jsx("option",{value:"",children:"Select a month"}),o.map(f=>s.jsx("option",{value:f,children:f},f))]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",value:a.startDate,onChange:f=>c("startDate",f.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!a.isFlexible})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"End Date *"}),s.jsx("input",{type:"date",value:a.endDate,onChange:f=>c("endDate",f.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!a.isFlexible})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Number of Passengers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Adults"}),s.jsx("input",{type:"number",min:"1",value:a.adults,onChange:f=>i({...a,adults:parseInt(f.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Children"}),s.jsx("input",{type:"number",min:"0",value:a.children,onChange:f=>i({...a,children:parseInt(f.target.value)||0}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base"})]})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 flex items-center",children:[s.jsx(ft,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",min:"1",value:a.numberOfDays,onChange:f=>i({...a,numberOfDays:parseInt(f.target.value)||1}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",disabled:!a.isFlexible&&a.startDate&&a.endDate}),s.jsx(Zs,{className:"h-5 w-5 text-slate-400 absolute right-3 top-1/2 transform -translate-y-1/2"})]}),!a.isFlexible&&a.startDate&&a.endDate&&s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-calculated from dates"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-700 mb-2",children:"Transportation Mode *"}),s.jsxs("select",{value:a.transportationMode,onChange:f=>i({...a,transportationMode:f.target.value}),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm md:text-base",required:!0,children:[s.jsx("option",{value:"",children:"Select transportation"}),n.map(f=>s.jsxs("option",{value:f.vehicleName,children:[f.vehicleName," (",f.type.replace("-"," "),")"]},f.id))]})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 md:pt-6 border-t border-slate-200",children:s.jsxs("button",{type:"submit",disabled:!p(),className:"inline-flex items-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-blue-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:["Next Step",s.jsx(ft,{className:"ml-2 h-5 w-5"})]})})]})]})})},v_=({client:e,dayPlans:t,onNext:r,onBack:n})=>{const{state:a}=It(),{hotels:i,sightseeings:o,activities:l,entryTickets:c,meals:u,transportations:p}=a,[f,j]=ne.useState(0),_=rd(e,t,i,o,l,c,u,p)+56e4,k=_+f,v=()=>{const b={id:_n(),client:e,dayPlans:t,totalBaseCost:_,profitMargin:f,finalPrice:k,exchangeRate:1,version:1,lastUpdated:new Date().toISOString(),updatedBy:"agent",changeLog:[]};r(b)},x=b=>{const S=o.filter(P=>b.sightseeing.includes(P.id)),L=b.activities.map(P=>{const M=l.find(I=>I.id===P.activityId),E=M==null?void 0:M.options.find(I=>I.id===P.optionId);return{activity:M,option:E}}).filter(P=>P.activity&&P.option),T=c.filter(P=>b.entryTickets.includes(P.id)),A=u.filter(P=>b.meals.includes(P.id));let N=null;if(b.hotel){const P=i.find(E=>E.id===b.hotel.hotelId),M=P==null?void 0:P.roomTypes.find(E=>E.id===b.hotel.roomTypeId);P&&M&&(N={hotel:P,roomType:M})}return{sightseeing:S,activities:L,tickets:T,meals:A,hotel:N}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Pricing"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Agent Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(b=>{const S=x(b);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",b.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[S.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.sightseeing.map(L=>s.jsxs("li",{children:[" ",L.name]},L.id))})]}),S.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.activities.map((L,T)=>{var A,N;return s.jsxs("li",{children:[" ",(A=L.activity)==null?void 0:A.name," - ",(N=L.option)==null?void 0:N.name]},T)})})]}),S.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.tickets.map(L=>s.jsxs("li",{children:[" ",L.name]},L.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[S.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",S.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[S.hotel.roomType.name," - ",S.hotel.hotel.place]})]})]}),S.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.meals.map(L=>s.jsxs("li",{className:"capitalize",children:[" ",L.type," at ",L.place]},L.id))})]})]})]})]},b.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(wr,{className:"h-5 w-5 mr-2 text-teal-600"}),"Package Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Package Base Cost"}),s.jsx("div",{className:"space-y-1",children:s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Yr(_)})}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Your Profit Margin (Rp)"}),s.jsx("input",{type:"number",min:"0",step:"100000",value:f,onChange:b=>j(parseFloat(b.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm md:text-base",placeholder:"Enter your profit in IDR"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your commission or profit margin"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-green-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Quote Price"}),s.jsx("div",{className:"space-y-2 mb-2",children:s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Yr(k)})}),s.jsxs("p",{className:"text-teal-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-teal-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Package Cost: ",Yr(_)]}),s.jsxs("div",{children:["Your Profit: ",Yr(f)]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:n,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:v,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-green-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-green-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(rs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},b_=({itinerary:e,onBack:t,onStartNew:r})=>{var _;const{state:n,dispatch:a}=It(),{state:i}=Ht(),{hotels:o,sightseeings:l,activities:c,entryTickets:u,meals:p,transportations:f}=n;il.useEffect(()=>{var x;const k=n.clients.find(b=>b.id===e.client.id);if(e.client.whatsapp&&!k){const b={...e.client,followUpStatus:{status:"itinerary-created",updatedAt:new Date().toISOString(),remarks:"Initial itinerary created by agent",nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00"},followUpHistory:[{id:_n(),status:"itinerary-created",remarks:"Initial itinerary created by agent",updatedAt:new Date().toISOString(),nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00",updatedBy:((x=i.user)==null?void 0:x.id)||"agent"}],nextFollowUpDate:new Date(Date.now()+864e5).toISOString().split("T")[0],nextFollowUpTime:"14:00"};a({type:"ADD_CLIENT",payload:b})}const v={...e,id:_n(),version:1,lastUpdated:new Date().toISOString(),updatedBy:"agent",changeLog:[{id:Date.now().toString(),version:1,changeType:"created",description:"Initial itinerary created by agent",timestamp:new Date().toISOString(),updatedBy:"agent"}]};a({type:"ADD_ITINERARY",payload:v})},[e,a,(_=i.user)==null?void 0:_.id,n.clients]);const j=()=>{const k=e.client.numberOfPax.adults+e.client.numberOfPax.children;let v=` TRAVEL PACKAGE 

`;v+=` TRIP DETAILS:
`,v+=` Trip Name: ${e.client.name}
`,v+=` Duration: ${e.client.numberOfDays} days
`,v+=` Passengers: ${k} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,v+=` Transportation: ${e.client.transportationMode}

`,v+=` DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(b=>{const S=y(b);v+=` DAY ${b.day}:
`,S.sightseeing.length>0&&(v+=` SIGHTSEEING:
`,S.sightseeing.forEach(L=>{v+=`    ${L.name}
`})),S.hotel&&(v+=` ACCOMMODATION:
`,v+=`    ${S.hotel.hotel.name} - ${S.hotel.roomType.name}
`,v+=`    Location: ${S.hotel.hotel.place}
`),S.activities.length>0&&(v+=` ACTIVITIES:
`,S.activities.forEach(L=>{var T,A;v+=`    ${(T=L.activity)==null?void 0:T.name} - ${(A=L.option)==null?void 0:A.name}
`})),S.tickets.length>0&&(v+=` ENTRY TICKETS:
`,S.tickets.forEach(L=>{v+=`    ${L.name}
`})),S.meals.length>0&&(v+=` MEALS:
`,S.meals.forEach(L=>{v+=`    ${L.type.charAt(0).toUpperCase()+L.type.slice(1)} at ${L.place}
`})),v+=`
`}),v+=` PACKAGE PRICING:
`,v+=` Total Package Price: $${e.finalPrice.toFixed(2)}
`,v+=` Total Package Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,v+=` Exchange Rate: 1 USD = ${e.exchangeRate}

`;const x=new Map;e.dayPlans.forEach(b=>{if(b.hotel){const S=o.find(T=>T.id===b.hotel.hotelId),L=S==null?void 0:S.roomTypes.find(T=>T.id===b.hotel.roomTypeId);if(S&&L){const T=`${S.id}-${L.id}`;x.has(T)?x.get(T).nights+=1:x.set(T,{hotel:S,roomType:L,nights:1})}}}),v+=` INCLUSIONS:
`,v+=` ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,x.size>0&&x.forEach(({hotel:b,roomType:S,nights:L})=>{v+=` ${L} night${L>1?"s":""} stay ${b.name} in ${S.name}
`}),e.dayPlans.some(b=>b.sightseeing.length>0)&&(v+=` Sightseeing tours as mentioned
`),e.dayPlans.some(b=>b.activities.length>0)&&(v+=` Activities and experiences as listed
`),e.dayPlans.some(b=>b.entryTickets.length>0)&&(v+=` Entry tickets to attractions
`),e.dayPlans.some(b=>b.meals.length>0)&&(v+=` Meals as specified in itinerary
`),v+=` Professional travel planning service
`,v+=` 24/7 customer support during travel

`,v+=` EXCLUSIONS:
`,v+=` International/domestic flights
`,v+=` Travel insurance
`,v+=` Personal expenses and shopping
`,v+=` Tips and gratuities
`,v+=` Any meals not mentioned in inclusions
`,v+=` Additional activities not listed
`,v+=` Visa fees and documentation
`,v+=` Emergency medical expenses

`,v+=` CONTACT:
`,v+=`${e.client.name} Travel Package
`,v+=`Professional Travel Planning Services

`,v+=`Generated on: ${new Date().toLocaleDateString()}
`,v+=`Package ID: ${e.client.id}
`,navigator.clipboard.writeText(v).then(()=>{alert(" Complete travel package copied to clipboard!")}).catch(()=>{alert(" Failed to copy package. Please try again.")})},m=()=>{const k=new Ye,v=k.internal.pageSize.width,x=20;let b=x;k.setFontSize(20),k.setFont("helvetica","bold"),k.text("Travel Itinerary",v/2,b,{align:"center"}),b+=15,k.setFontSize(12),k.setFont("helvetica","normal"),k.text(`Client: ${e.client.name}`,x,b),b+=8,k.text(`Duration: ${e.client.numberOfDays} days`,x,b),b+=8,k.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,x,b),b+=15,k.setFont("helvetica","bold"),k.text("Day-by-Day Itinerary:",x,b),b+=10,e.dayPlans.forEach(S=>{if(b>250&&(k.addPage(),b=x),k.setFont("helvetica","bold"),k.text(`Day ${S.day}:`,x,b),b+=8,k.setFont("helvetica","normal"),S.sightseeing.length>0){const L=S.sightseeing.map(T=>{const A=l.find(N=>N.id===T);return A?A.name:"Unknown"}).join(", ");k.text(` Sightseeing: ${L}`,x+5,b),b+=6}if(S.hotel){const L=o.find(A=>A.id===S.hotel.hotelId),T=L==null?void 0:L.roomTypes.find(A=>A.id===S.hotel.roomTypeId);L&&T&&(k.text(` Hotel: ${L.name} - ${T.name}`,x+5,b),b+=6)}S.activities.length>0&&S.activities.forEach(L=>{const T=c.find(N=>N.id===L.activityId),A=T==null?void 0:T.options.find(N=>N.id===L.optionId);T&&A&&(k.text(` Activity: ${T.name} - ${A.name}`,x+5,b),b+=6)}),b+=5}),b>220&&(k.addPage(),b=x),k.setFont("helvetica","bold"),k.text("Package Pricing:",x,b),b+=10,k.setFont("helvetica","bold"),k.text(`Total Package Price: $${e.finalPrice.toFixed(2)}`,x,b),b+=8,k.text(`Total Package Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,x,b),k.save(`${e.client.name}-itinerary.pdf`)},y=k=>{const v=l.filter(T=>k.sightseeing.includes(T.id)),x=k.activities.map(T=>{const A=c.find(P=>P.id===T.activityId),N=A==null?void 0:A.options.find(P=>P.id===T.optionId);return{activity:A,option:N}}).filter(T=>T.activity&&T.option),b=u.filter(T=>k.entryTickets.includes(T.id)),S=p.filter(T=>k.meals.includes(T.id));let L=null;if(k.hotel){const T=o.find(N=>N.id===k.hotel.hotelId),A=T==null?void 0:T.roomTypes.find(N=>N.id===k.hotel.roomTypeId);T&&A&&(L={hotel:T,roomType:A})}return{sightseeing:v,activities:x,tickets:b,meals:S,hotel:L}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Package Complete!"}),s.jsx("p",{className:"text-teal-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Rt,{className:"h-6 w-6 text-green-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-green-900",children:"Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-green-700 mt-1 text-sm md:text-base",children:["Your detailed travel package for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ft,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.transportationMode})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(k=>{const v=y(k);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-teal-600"}),"Day ",k.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[v.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:v.sightseeing.map(x=>s.jsxs("li",{children:[" ",x.name]},x.id))})]}),v.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:v.activities.map((x,b)=>{var S,L;return s.jsxs("li",{children:[" ",(S=x.activity)==null?void 0:S.name," - ",(L=x.option)==null?void 0:L.name]},b)})})]}),v.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:v.tickets.map(x=>s.jsxs("li",{children:[" ",x.name]},x.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[v.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",v.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[v.hotel.roomType.name," - ",v.hotel.hotel.place]})]})]}),v.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:v.meals.map(x=>s.jsxs("li",{className:"capitalize",children:[" ",x.type," at ",x.place]},x.id))})]})]})]})]},k.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(rs,{className:"h-5 w-5 mr-2 text-teal-600"}),"Package Pricing"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-green-500 text-white rounded-xl p-6 md:p-8 text-center max-w-md",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Final Package Price"}),s.jsxs("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-teal-100 mb-4",children:["",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-teal-100 text-sm md:text-base",children:["Complete package for ",e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]}),s.jsxs("div",{className:"text-xs text-teal-100 mt-3",children:["Exchange Rate: 1 USD = ",e.exchangeRate]}),e.profitMargin>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-teal-400 border-opacity-50",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["Your Profit: $",e.profitMargin.toFixed(2)," / ",(e.profitMargin*e.exchangeRate).toLocaleString("en-IN")]})})})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Nr,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:m,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Uh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:j,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(ni,{className:"mr-2 h-5 w-5"}),"Copy Package"]})]}),s.jsxs("button",{onClick:r,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-teal-600 to-green-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-teal-700 hover:to-green-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Up,{className:"mr-2 h-5 w-5"}),"Create New Package"]})]})]})]})})},y_=()=>{const[e,t]=ne.useState(1),[r,n]=ne.useState(null),[a,i]=ne.useState(null),[o,l]=ne.useState(null),[c,u]=ne.useState([]),[p,f]=ne.useState(null),j=S=>{n(S),t(2)},m=(S,L)=>{i(S),l(L),t(3)},y=S=>{u(S),t(4)},_=S=>{f(S),t(5)},k=S=>{f(S),t(5)},v=()=>{t(e-1)},x=()=>{t(1),n(null),i(null),l(null),u([]),f(null)},b=()=>{switch(e){case 1:return s.jsx(L1,{onNext:j});case 2:return r?s.jsx(Zp,{client:r,onNext:m,onBack:v,userType:"agent"}):null;case 3:return a==="fixed"&&o?s.jsx(ex,{client:r,fixedItinerary:o,onNext:k,onBack:v,userType:"agent"}):a==="new"&&r?s.jsx(nd,{client:r,onNext:y,onBack:v,isAgent:!0}):null;case 4:return r?s.jsx(v_,{client:r,dayPlans:c,onNext:_,onBack:v}):null;case 5:return p?s.jsx(b_,{itinerary:p,onBack:v,onStartNew:x}):null;default:return s.jsx(L1,{onNext:j})}};return e>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(S=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${S<=e?"bg-teal-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:S}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${S<=e?"text-slate-900":"text-slate-500"}`,children:[S===1&&"Trip Details",S===2&&"Itinerary Type",S===3&&(a==="fixed"?"Review Template":"Day Planning"),S===4&&"Review & Pricing",S===5&&"Final Summary"]})}),S<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${S<e?"bg-teal-600":"bg-slate-200"}`})]},S))})})}),b()]})}):s.jsx(Kt,{title:"Itinerary Builder",subtitle:"Create travel packages for your clients",children:b()})},w_=()=>{var c,u,p,f,j;const{logout:e,state:t}=Ht(),[r,n]=ne.useState("dashboard"),[a,i]=ne.useState(!1),o=[{id:"dashboard",name:"Dashboard",icon:dh,description:"Overview & packages"},{id:"itinerary",name:"Itinerary Builder",icon:vs,description:"Create new packages"}],l=()=>{switch(r){case"dashboard":return s.jsx(P1,{});case"itinerary":return s.jsx(y_,{});default:return s.jsx(P1,{})}};return s.jsx(ph,{children:s.jsxs("div",{className:"flex h-screen bg-slate-50",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${a?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 p-2 rounded-lg",children:s.jsx(wt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:((c=t.user)==null?void 0:c.companyName)||"Travel Agent"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Agent Portal"})]})]}),s.jsx("button",{onClick:()=>i(!1),className:"lg:hidden p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-4 py-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:((u=t.user)==null?void 0:u.companyName)||((p=t.user)==null?void 0:p.name)}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:(f=t.user)==null?void 0:f.role})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(xl,{className:"h-4 w-4"})})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:o.map(m=>s.jsxs("button",{onClick:()=>{n(m.id),i(!1)},className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${r===m.id?"bg-gradient-to-r from-teal-600 to-green-600 text-white font-medium shadow-md":"text-slate-700 hover:bg-slate-100"}`,children:[s.jsx(m.icon,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:m.name}),s.jsx("div",{className:`text-xs ${r===m.id?"text-teal-100":"text-slate-500"}`,children:m.description})]})]},m.id))})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 z-40 lg:hidden",onClick:()=>i(!1)}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-slate-200 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>i(!0),className:"p-2 text-slate-500 hover:text-slate-700",children:s.jsx(Bp,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-teal-600 to-green-600 p-2 rounded-lg",children:s.jsx(wt,{className:"h-5 w-5 text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-lg font-bold text-slate-900",children:((j=t.user)==null?void 0:j.companyName)||"Agent Portal"})})]}),s.jsx("button",{onClick:e,className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Logout",children:s.jsx(xl,{className:"h-4 w-4"})})]})}),s.jsx("main",{className:"flex-1 overflow-auto",children:l()})]})]})})},Xb=({client:e,dayPlans:t,onNext:r,onBack:n})=>{const{state:a}=It(),{hotels:i,sightseeings:o,activities:l,entryTickets:c,meals:u,transportations:p}=a,[f,j]=ne.useState(0),_=rd(e,t,i,o,l,c,u,p)+8e5,k=_+f,v=()=>{const b={id:_n(),client:e,dayPlans:t,totalBaseCost:_,profitMargin:f,finalPrice:k,exchangeRate:1,version:1,lastUpdated:new Date().toISOString(),updatedBy:"sales",changeLog:[]};r(b)},x=b=>{const S=o.filter(P=>b.sightseeing.includes(P.id)),L=b.activities.map(P=>{const M=l.find(I=>I.id===P.activityId),E=M==null?void 0:M.options.find(I=>I.id===P.optionId);return{activity:M,option:E}}).filter(P=>P.activity&&P.option),T=c.filter(P=>b.entryTickets.includes(P.id)),A=u.filter(P=>b.meals.includes(P.id));let N=null;if(b.hotel){const P=i.find(E=>E.id===b.hotel.hotelId),M=P==null?void 0:P.roomTypes.find(E=>E.id===b.hotel.roomTypeId);P&&M&&(N={hotel:P,roomType:M})}return{sightseeing:S,activities:L,tickets:T,meals:A,hotel:N}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Review & Sales Pricing"}),s.jsx("p",{className:"text-purple-100 mt-1 text-sm md:text-base",children:"Step 3 of 4 - Final Review and Sales Pricing"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfDays," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.numberOfPax.adults+e.numberOfPax.children," pax"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.transportationMode})]})]})]}),s.jsxs("div",{className:"space-y-4 md:space-y-6 mb-6 md:mb-8",children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-slate-900",children:"Detailed Itinerary"}),t.map(b=>{const S=x(b);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Day ",b.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[S.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.sightseeing.map(L=>s.jsxs("li",{children:[" ",L.name]},L.id))})]}),S.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.activities.map((L,T)=>{var A,N;return s.jsxs("li",{children:[" ",(A=L.activity)==null?void 0:A.name," - ",(N=L.option)==null?void 0:N.name]},T)})})]}),S.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.tickets.map(L=>s.jsxs("li",{children:[" ",L.name]},L.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[S.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",S.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[S.hotel.roomType.name," - ",S.hotel.hotel.place]})]})]}),S.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:S.meals.map(L=>s.jsxs("li",{className:"capitalize",children:[" ",L.type," at ",L.place]},L.id))})]})]})]})]},b.day)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-4 md:p-6",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(wr,{className:"h-5 w-5 mr-2 text-purple-600"}),"Sales Package Pricing"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Package Base Cost"}),s.jsx("div",{className:"space-y-1",children:s.jsx("div",{className:"text-lg md:text-xl font-bold text-slate-900",children:Yr(_)})}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Includes all selected services and accommodation"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("label",{className:"block text-sm md:text-base font-semibold text-slate-900 mb-2 md:mb-3",children:"Add Sales Commission (Rp)"}),s.jsx("input",{type:"number",min:"0",step:"100000",value:f,onChange:b=>j(parseFloat(b.target.value)||0),className:"w-full p-2 md:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",placeholder:"Enter your sales commission in IDR"}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 mt-1",children:"Your sales commission or markup"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-4 md:p-6 w-full text-center",children:[s.jsx("h4",{className:"text-sm md:text-base font-semibold mb-2",children:"Final Sales Quote"}),s.jsx("div",{className:"space-y-2 mb-2",children:s.jsx("div",{className:"text-2xl md:text-3xl font-bold",children:Yr(k)})}),s.jsxs("p",{className:"text-purple-100 text-sm md:text-base",children:["Total package price for ",e.numberOfPax.adults+e.numberOfPax.children," passengers"]}),f>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-purple-400 border-opacity-50",children:s.jsxs("div",{className:"text-xs md:text-sm space-y-1",children:[s.jsxs("div",{children:["Package Cost: ",Yr(_)]}),s.jsxs("div",{children:["Your Commission: ",Yr(f)]})]})})]})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200 mt-6 md:mt-8",children:[s.jsx("button",{onClick:n,className:"px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:"Previous Step"}),s.jsxs("button",{onClick:v,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105",children:["Generate Summary",s.jsx(rs,{className:"ml-2 h-5 w-5"})]})]})]})]})})},Qb=({itinerary:e,onBack:t,onStartNew:r,onBackToDashboard:n,isViewMode:a=!1})=>{var v;const{state:i}=It(),{state:o}=Ht(),{hotels:l,sightseeings:c,activities:u,entryTickets:p,meals:f,transportations:j}=i,m=il.useRef(!1);il.useEffect(()=>{if(a){console.log("View mode - skipping save");return}if(m.current){console.log("Already saved, skipping...");return}m.current=!0,(async()=>{var b;console.log("=== SALES FINAL SUMMARY: Starting save ==="),console.log("Auth user:",o.user),console.log("Itinerary client:",e.client);try{const S=(b=o.user)==null?void 0:b.id;if(!S)throw new Error("User must be authenticated to create itinerary");const L=e.finalPrice||0,T={sales_person_id:S,name:e.client.name,country_code:e.client.countryCode||"+1",whatsapp:e.client.whatsapp,email:e.client.email,travel_date:e.client.travelDates.startDate,number_of_days:e.client.numberOfDays,number_of_adults:e.client.numberOfPax.adults,number_of_children:e.client.numberOfPax.children,transportation_mode:e.client.transportationMode,itinerary_data:e,total_cost:L,current_follow_up_status:"itinerary-created",next_follow_up_date:new Date(Date.now()+864e5).toISOString().split("T")[0],next_follow_up_time:"10:00",booking_completion_percentage:0};console.log("Creating sales client...");const A=await s6(T);A&&(console.log("Sales client created successfully!",A),console.log("Creating initial itinerary version..."),await Tb(A.id,{days:e.dayPlans},L,"Initial itinerary","itinerary-created",S),console.log("Initial version created!"),console.log("Creating booking checklist..."),await a6(A.id,e),console.log("Booking checklist created!")),console.log("=== SALES FINAL SUMMARY: Save complete ===")}catch(S){console.error("=== ERROR SAVING ITINERARY ==="),console.error("Error details:",S),console.error("Error message:",S==null?void 0:S.message),console.error("Error stack:",S==null?void 0:S.stack),alert(`Failed to save itinerary: ${(S==null?void 0:S.message)||"Unknown error"}. Check console for details.`)}})()},[e,(v=o.user)==null?void 0:v.id,a]);const y=()=>{const x=e.client.numberOfPax.adults+e.client.numberOfPax.children;let b=` PREMIUM TRAVEL PACKAGE 

`;b+=` TRIP DETAILS:
`,b+=` Trip Name: ${e.client.name}
`,b+=` Duration: ${e.client.numberOfDays} days
`,b+=` Passengers: ${x} pax (${e.client.numberOfPax.adults} adults, ${e.client.numberOfPax.children} children)
`,b+=` Transportation: ${e.client.transportationMode}

`,b+=` DAY-BY-DAY ITINERARY:

`,e.dayPlans.forEach(L=>{const T=k(L);b+=` DAY ${L.day}:
`,T.sightseeing.length>0&&(b+=` SIGHTSEEING:
`,T.sightseeing.forEach(A=>{b+=`    ${A.name}
`})),T.hotel&&(b+=` ACCOMMODATION:
`,b+=`    ${T.hotel.hotel.name} - ${T.hotel.roomType.name}
`,b+=`    Location: ${T.hotel.hotel.place}
`),T.activities.length>0&&(b+=` ACTIVITIES:
`,T.activities.forEach(A=>{var N,P;b+=`    ${(N=A.activity)==null?void 0:N.name} - ${(P=A.option)==null?void 0:P.name}
`})),T.tickets.length>0&&(b+=` ENTRY TICKETS:
`,T.tickets.forEach(A=>{b+=`    ${A.name}
`})),T.meals.length>0&&(b+=` MEALS:
`,T.meals.forEach(A=>{b+=`    ${A.type.charAt(0).toUpperCase()+A.type.slice(1)} at ${A.place}
`})),b+=`
`}),b+=` PREMIUM PACKAGE PRICING:
`,b+=` Total Package Price: $${e.finalPrice.toFixed(2)}
`,b+=` Total Package Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}
`,b+=` Exchange Rate: 1 USD = ${e.exchangeRate}

`;const S=new Map;e.dayPlans.forEach(L=>{if(L.hotel){const T=l.find(N=>N.id===L.hotel.hotelId),A=T==null?void 0:T.roomTypes.find(N=>N.id===L.hotel.roomTypeId);if(T&&A){const N=`${T.id}-${A.id}`;S.has(N)?S.get(N).nights+=1:S.set(N,{hotel:T,roomType:A,nights:1})}}}),b+=` PREMIUM INCLUSIONS:
`,b+=` ${e.client.numberOfDays} days ${e.client.transportationMode} transportation
`,S.size>0&&S.forEach(({hotel:L,roomType:T,nights:A})=>{b+=` ${A} night${A>1?"s":""} stay ${L.name} in ${T.name}
`}),e.dayPlans.some(L=>L.sightseeing.length>0)&&(b+=` Comprehensive sightseeing tours as mentioned
`),e.dayPlans.some(L=>L.activities.length>0)&&(b+=` Premium activities and experiences as listed
`),e.dayPlans.some(L=>L.entryTickets.length>0)&&(b+=` All entry tickets to attractions
`),e.dayPlans.some(L=>L.meals.length>0)&&(b+=` Meals as specified in itinerary
`),b+=` Professional travel planning service
`,b+=` 24/7 customer support during travel
`,b+=` Dedicated sales representative assistance

`,b+=` EXCLUSIONS:
`,b+=` International/domestic flights
`,b+=` Travel insurance
`,b+=` Personal expenses and shopping
`,b+=` Tips and gratuities
`,b+=` Any meals not mentioned in inclusions
`,b+=` Additional activities not listed
`,b+=` Visa fees and documentation
`,b+=` Emergency medical expenses

`,b+=` SALES CONTACT:
`,b+=`${e.client.name} Premium Travel Package
`,b+=`Nomadller Solutions - Sales Department
`,b+=`Professional Travel Planning Services

`,b+=`Generated on: ${new Date().toLocaleDateString()}
`,b+=`Package ID: ${e.client.id}
`,b+=`Sales Representative: Sales Team
`,navigator.clipboard.writeText(b).then(()=>{alert(" Complete sales package copied to clipboard!")}).catch(()=>{alert(" Failed to copy package. Please try again.")})},_=()=>{const x=new Ye,b=x.internal.pageSize.width,S=20;let L=S;x.setFontSize(20),x.setFont("helvetica","bold"),x.text("Premium Travel Package",b/2,L,{align:"center"}),L+=15,x.setFontSize(12),x.setFont("helvetica","normal"),x.text(`Client: ${e.client.name}`,S,L),L+=8,x.text(`Duration: ${e.client.numberOfDays} days`,S,L),L+=8,x.text(`Passengers: ${e.client.numberOfPax.adults+e.client.numberOfPax.children} pax`,S,L),L+=15,x.setFont("helvetica","bold"),x.text("Day-by-Day Itinerary:",S,L),L+=10,e.dayPlans.forEach(T=>{if(L>250&&(x.addPage(),L=S),x.setFont("helvetica","bold"),x.text(`Day ${T.day}:`,S,L),L+=8,x.setFont("helvetica","normal"),T.sightseeing.length>0){const A=T.sightseeing.map(N=>{const P=c.find(M=>M.id===N);return P?P.name:"Unknown"}).join(", ");x.text(` Sightseeing: ${A}`,S+5,L),L+=6}if(T.hotel){const A=l.find(P=>P.id===T.hotel.hotelId),N=A==null?void 0:A.roomTypes.find(P=>P.id===T.hotel.roomTypeId);A&&N&&(x.text(` Hotel: ${A.name} - ${N.name}`,S+5,L),L+=6)}L+=5}),L>220&&(x.addPage(),L=S),x.setFont("helvetica","bold"),x.text("Premium Package Pricing:",S,L),L+=10,x.setFont("helvetica","bold"),x.text(`Total Package Price: $${e.finalPrice.toFixed(2)}`,S,L),L+=8,x.text(`Total Package Price (INR): ${(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")}`,S,L),x.save(`${e.client.name}-sales-package.pdf`)},k=x=>{const b=c.filter(N=>x.sightseeing.includes(N.id)),S=x.activities.map(N=>{const P=u.find(E=>E.id===N.activityId),M=P==null?void 0:P.options.find(E=>E.id===N.optionId);return{activity:P,option:M}}).filter(N=>N.activity&&N.option),L=p.filter(N=>x.entryTickets.includes(N.id)),T=f.filter(N=>x.meals.includes(N.id));let A=null;if(x.hotel){const N=l.find(M=>M.id===x.hotel.hotelId),P=N==null?void 0:N.roomTypes.find(M=>M.id===x.hotel.roomTypeId);N&&P&&(A={hotel:N,roomType:P})}return{sightseeing:b,activities:S,tickets:L,meals:T,hotel:A}};return s.jsx("div",{className:"max-w-5xl mx-auto px-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-4 md:px-8 py-4 md:py-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"Sales Package Complete!"}),s.jsx("p",{className:"text-purple-100 mt-1 text-sm md:text-base",children:"Step 4 of 4 - Final Summary & Export"})]})]})}),s.jsxs("div",{className:"p-4 md:p-8",children:[s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Rt,{className:"h-6 w-6 text-purple-600 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold text-purple-900",children:"Premium Travel Package Created Successfully!"}),s.jsxs("p",{className:"text-purple-700 mt-1 text-sm md:text-base",children:["Your detailed sales package for ",e.client.name," has been generated and saved."]})]})]})}),s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Trip Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Trip Name:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Duration:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfDays," days"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Passengers:"}),s.jsxs("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:[e.client.numberOfPax.adults+e.client.numberOfPax.children," pax"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ft,{className:"h-5 w-5 text-slate-500"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-700",children:"Transport:"}),s.jsx("div",{className:"text-sm md:text-base text-slate-900 font-semibold",children:e.client.transportationMode})]})]})]})]}),s.jsxs("div",{className:"mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Complete Itinerary"]}),s.jsx("div",{className:"space-y-4",children:e.dayPlans.map(x=>{const b=k(x);return s.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 md:p-6",children:[s.jsxs("h4",{className:"text-base md:text-lg font-semibold text-slate-900 mb-3 md:mb-4 flex items-center",children:[s.jsx(nt,{className:"h-5 w-5 mr-2 text-purple-600"}),"Day ",x.day]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[b.sightseeing.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-blue-600"}),"Sightseeing"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.sightseeing.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]}),b.activities.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(hs,{className:"h-4 w-4 mr-2 text-blue-600"}),"Activities"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.activities.map((S,L)=>{var T,A;return s.jsxs("li",{children:[" ",(T=S.activity)==null?void 0:T.name," - ",(A=S.option)==null?void 0:A.name]},L)})})]}),b.tickets.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(As,{className:"h-4 w-4 mr-2 text-blue-600"}),"Entry Tickets"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.tickets.map(S=>s.jsxs("li",{children:[" ",S.name]},S.id))})]})]}),s.jsxs("div",{className:"space-y-3 md:space-y-4",children:[b.hotel&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(wt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Accommodation"]}),s.jsxs("div",{className:"text-xs md:text-sm text-slate-700 ml-6",children:[s.jsxs("div",{children:[" ",b.hotel.hotel.name]}),s.jsxs("div",{className:"text-slate-600",children:[b.hotel.roomType.name," - ",b.hotel.hotel.place]})]})]}),b.meals.length>0&&s.jsxs("div",{children:[s.jsxs("h5",{className:"text-sm md:text-base font-medium text-slate-900 flex items-center mb-2",children:[s.jsx(ns,{className:"h-4 w-4 mr-2 text-blue-600"}),"Meals"]}),s.jsx("ul",{className:"text-xs md:text-sm text-slate-700 space-y-1 ml-6",children:b.meals.map(S=>s.jsxs("li",{className:"capitalize",children:[" ",S.type," at ",S.place]},S.id))})]})]})]})]},x.day)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-4 md:p-6 mb-6 md:mb-8",children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold text-slate-900 mb-4 md:mb-6 flex items-center",children:[s.jsx(rs,{className:"h-5 w-5 mr-2 text-purple-600"}),"Premium Package Pricing"]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-6 md:p-8 text-center max-w-md",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Final Sales Package Price"}),s.jsxs("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:["$",e.finalPrice.toFixed(2)]}),s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-purple-100 mb-4",children:["",(e.finalPrice*e.exchangeRate).toLocaleString("en-IN")]}),s.jsxs("div",{className:"text-purple-100 text-sm md:text-base",children:["Premium package for ",e.client.numberOfPax.adults+e.client.numberOfPax.children," passengers"]}),s.jsxs("div",{className:"text-xs text-purple-100 mt-3",children:["Exchange Rate: 1 USD = ",e.exchangeRate]}),e.profitMargin>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-purple-400 border-opacity-50",children:s.jsx("div",{className:"text-sm",children:s.jsxs("div",{children:["Your Commission: $",e.profitMargin.toFixed(2)," / ",(e.profitMargin*e.exchangeRate).toLocaleString("en-IN")]})})})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 pt-6 md:pt-8 border-t border-slate-200",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!a&&s.jsxs("button",{onClick:t,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm md:text-base",children:[s.jsx(Nr,{className:"mr-2 h-5 w-5"}),"Back to Review"]}),s.jsxs("button",{onClick:_,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm md:text-base",children:[s.jsx(Uh,{className:"mr-2 h-5 w-5"}),"Download PDF"]}),s.jsxs("button",{onClick:y,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[s.jsx(ni,{className:"mr-2 h-5 w-5"}),"Copy Package"]})]}),!a&&s.jsxs("button",{onClick:r,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Up,{className:"mr-2 h-5 w-5"}),"Create New Package"]}),n&&s.jsxs("button",{onClick:n,className:"inline-flex items-center justify-center px-4 md:px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white text-sm md:text-base font-semibold rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-200 transform hover:scale-105",children:[s.jsx(Nr,{className:"mr-2 h-5 w-5"}),"Back to Dashboard"]})]})]})]})})},N_=({onBackToDashboard:e})=>{const[t,r]=ne.useState(1),[n,a]=ne.useState(null),[i,o]=ne.useState(null),[l,c]=ne.useState(null),[u,p]=ne.useState([]),[f,j]=ne.useState(null),m=L=>{a(L),r(2)},y=(L,T)=>{o(L),c(T),r(3)},_=L=>{p(L),r(4)},k=L=>{j(L),r(5)},v=L=>{j(L),r(5)},x=()=>{r(t-1)},b=()=>{r(1),a(null),o(null),c(null),p([]),j(null)},S=()=>{switch(t){case 1:return s.jsx(vh,{onNext:m});case 2:return n?s.jsx(Zp,{client:n,onNext:y,onBack:x,userType:"sales"}):null;case 3:return i==="fixed"&&l?s.jsx(ex,{client:n,fixedItinerary:l,onNext:v,onBack:x,userType:"sales"}):i==="new"&&n?s.jsx(nd,{client:n,onNext:_,onBack:x,isAgent:!1}):null;case 4:return n?s.jsx(Xb,{client:n,dayPlans:u,onNext:k,onBack:x}):null;case 5:return f?s.jsx(Qb,{itinerary:f,onBack:x,onStartNew:b,onBackToDashboard:e}):null;default:return s.jsx(vh,{onNext:m})}};return t>1?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-purple-50 py-4 md:py-8",children:s.jsxs("div",{className:"container mx-auto px-2 md:px-4",children:[s.jsx("div",{className:"max-w-4xl mx-auto mb-4 md:mb-8",children:s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4,5].map(L=>s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-semibold text-sm md:text-base
                      ${L<=t?"bg-purple-600 text-white":"bg-slate-200 text-slate-500"}
                    `,children:L}),s.jsx("div",{className:"ml-2 md:ml-3 flex-1",children:s.jsxs("div",{className:`text-xs md:text-sm font-medium ${L<=t?"text-slate-900":"text-slate-500"}`,children:[L===1&&"Client Details",L===2&&"Itinerary Type",L===3&&(i==="fixed"?"Review Template":"Day Planning"),L===4&&"Review & Pricing",L===5&&"Final Summary"]})}),L<5&&s.jsx("div",{className:`h-px flex-1 mx-4 ${L<t?"bg-purple-600":"bg-slate-200"}`})]},L))})})}),S()]})}):s.jsx(Kt,{title:"Sales Itinerary Builder",subtitle:"Create compelling travel packages for sales prospects",children:S()})},j_=({client:e,onBack:t})=>{var S,L,T;const{state:r}=It(),{hotels:n,sightseeings:a,activities:i,entryTickets:o,meals:l}=r,[c,u]=ne.useState([]),[p,f]=ne.useState(!0),[j,m]=ne.useState(null);ne.useEffect(()=>{y()},[e.id]);const y=async()=>{f(!0);try{const A=await i6(e.id);u(A),A.length>0&&m(A[0].version_number)}catch(A){console.error("Error loading itinerary versions:",A)}finally{f(!1)}},_=A=>{m(j===A?null:A)},k=A=>{const N={id:e.id,name:e.name,email:e.email,whatsapp:e.whatsapp,countryCode:e.country_code,travelDates:{startDate:e.travel_date,endDate:e.travel_date,isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:e.number_of_adults,children:e.number_of_children},numberOfDays:e.number_of_days,transportationMode:e.transportation_mode,createdAt:e.created_at,createdBy:e.sales_person_id},P={client:N,dayPlans:A.itinerary_data.days||[],totalBaseCost:A.total_cost,profitMargin:0,finalPrice:A.total_cost,exchangeRate:85,id:A.id,version:A.version_number,lastUpdated:A.created_at,updatedBy:A.created_by,changeLog:[]};return{client:N,itinerary:P}},v=A=>{switch(A){case"itinerary-created":return"bg-blue-100 text-blue-800";case"itinerary-sent":return"bg-purple-100 text-purple-800";case"1st-follow-up":case"2nd-follow-up":case"3rd-follow-up":case"4th-follow-up":return"bg-yellow-100 text-yellow-800";case"itinerary-edited":return"bg-indigo-100 text-indigo-800";case"updated-itinerary-sent":return"bg-cyan-100 text-cyan-800";case"advance-paid-confirmed":return"bg-green-100 text-green-800";case"dead":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},x=A=>A.split("-").map(N=>N.charAt(0).toUpperCase()+N.slice(1)).join(" "),b=()=>{if(c.length===0)return;const A=c[0],{client:N,itinerary:P}=k(A),M=e.number_of_adults+e.number_of_children;let E=` PREMIUM TRAVEL PACKAGE 

`;E+=` TRIP DETAILS:
`,E+=` Trip Name: ${e.name}
`,E+=` Duration: ${e.number_of_days} days
`,E+=` Passengers: ${M} pax (${e.number_of_adults} adults, ${e.number_of_children} children)
`,E+=` Transportation: ${e.transportation_mode}

`,E+=` DAY-BY-DAY ITINERARY:

`,P.dayPlans.forEach(I=>{if(E+=` DAY ${I.day}:
`,I.sightseeing.length>0&&(E+=` SIGHTSEEING:
`,I.sightseeing.forEach(Y=>{const G=a.find(Z=>Z.id===Y);G&&(E+=`    ${G.name}
`)})),I.hotel){const Y=n.find(Z=>Z.id===I.hotel.hotelId),G=Y==null?void 0:Y.roomTypes.find(Z=>Z.id===I.hotel.roomTypeId);Y&&G&&(E+=` ACCOMMODATION:
`,E+=`    ${Y.name} - ${G.name}
`,E+=`    Location: ${Y.place}
`)}I.activities.length>0&&(E+=` ACTIVITIES:
`,I.activities.forEach(Y=>{const G=i.find(X=>X.id===Y.activityId),Z=G==null?void 0:G.options.find(X=>X.id===Y.optionId);G&&Z&&(E+=`    ${G.name} - ${Z.name}
`)})),I.entryTickets.length>0&&(E+=` ENTRY TICKETS:
`,I.entryTickets.forEach(Y=>{const G=o.find(Z=>Z.id===Y);G&&(E+=`    ${G.name}
`)})),I.meals.length>0&&(E+=` MEALS:
`,I.meals.forEach(Y=>{const G=l.find(Z=>Z.id===Y);G&&(E+=`    ${G.type.charAt(0).toUpperCase()+G.type.slice(1)} at ${G.place}
`)})),E+=`
`}),E+=` PREMIUM PACKAGE PRICING:
`,E+=` Total Package Price: $${A.total_cost.toFixed(2)}
`,E+=` Total Package Price (INR): ${(A.total_cost*85).toLocaleString("en-IN")}
`,E+=` Exchange Rate: 1 USD = 85

`,E+=` SALES CONTACT:
`,E+=`${e.name} Premium Travel Package
`,E+=`Nomadller Solutions - Sales Department
`,E+=`Professional Travel Planning Services

`,E+=`Generated on: ${new Date().toLocaleDateString()}
`,E+=`Package ID: ${e.id}
`,navigator.clipboard.writeText(E).then(()=>{alert(" Complete itinerary copied to clipboard! Ready to share on WhatsApp.")}).catch(()=>{alert(" Failed to copy itinerary. Please try again.")})};return p?s.jsx(Kt,{title:"View Itinerary History",subtitle:e.name,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading itinerary versions..."})]})}):c.length===0?s.jsxs(Kt,{title:"View Itinerary History",subtitle:e.name,children:[s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(Gt,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium text-slate-700 mb-2",children:"No itinerary versions found"}),s.jsx("p",{className:"text-slate-500",children:"This client does not have any itinerary versions yet."})]})]}):s.jsxs(Kt,{title:"View Itinerary History",subtitle:e.name,children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 rounded-xl shadow-sm p-6 mb-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:e.name}),s.jsx("p",{className:"text-blue-100",children:"Complete Itinerary Version History"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:b,className:"inline-flex items-center px-6 py-3 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-all font-medium shadow-lg",children:[s.jsx(ni,{className:"h-5 w-5 mr-2"}),"Copy for WhatsApp"]}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2",children:[s.jsx("p",{className:"text-sm text-blue-100",children:"Total Versions"}),s.jsx("p",{className:"text-3xl font-bold",children:c.length})]})]})]})}),s.jsx("div",{className:"space-y-4",children:c.map((A,N)=>{const P=N===0,M=j===A.version_number,{client:E,itinerary:I}=k(A);return s.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-2 transition-all ${P?"border-green-500":"border-slate-200"}`,children:[s.jsx("div",{className:"p-6 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>_(A.version_number),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-bold ${P?"bg-green-100 text-green-800":"bg-slate-100 text-slate-700"}`,children:["Version ",A.version_number]}),P&&s.jsx("div",{className:"px-3 py-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-full text-xs font-semibold",children:"CURRENT VERSION"}),s.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${v(A.associated_follow_up_status)}`,children:x(A.associated_follow_up_status)})]}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:A.change_description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(nt,{className:"h-4 w-4 mr-2 text-blue-600"}),"Created: ",new Date(A.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(Zs,{className:"h-4 w-4 mr-2 text-purple-600"}),new Date(A.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(rs,{className:"h-4 w-4 mr-2 text-green-600"}),"Total Cost: ",A.total_cost.toLocaleString()]})]})]}),s.jsx("button",{className:"ml-4 p-2 hover:bg-slate-200 rounded-lg transition-colors",onClick:Y=>{Y.stopPropagation(),_(A.version_number)},children:M?s.jsx(O4,{className:"h-5 w-5 text-slate-600"}):s.jsx(I4,{className:"h-5 w-5 text-slate-600"})})]})}),M&&s.jsxs("div",{className:"border-t border-slate-200 p-6 bg-slate-50",children:[s.jsx("div",{className:"mb-4",children:s.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2 uppercase tracking-wide",children:"Complete Itinerary Details"})}),s.jsx("div",{className:"bg-white rounded-lg p-4",children:s.jsx(Qb,{itinerary:I,onStartNew:()=>{},onBack:t,onBackToDashboard:t,isViewMode:!0})})]})]},A.id)})}),s.jsx("div",{className:"mt-8 bg-slate-100 rounded-xl p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600 text-sm mb-1",children:"Latest Version"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["v",(S=c[0])==null?void 0:S.version_number]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600 text-sm mb-1",children:"Current Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",(L=c[0])==null?void 0:L.total_cost.toLocaleString()]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600 text-sm mb-1",children:"Last Updated"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:new Date((T=c[0])==null?void 0:T.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})})]})},__=({client:e,onBack:t})=>{const[r,n]=ne.useState([]),[a,i]=ne.useState(!0);ne.useEffect(()=>{o()},[e.id]);const o=async()=>{i(!0);try{const u=await o6(e.id);n(u)}catch(u){console.error("Error loading follow-up history:",u)}finally{i(!1)}},l=u=>{switch(u){case"itinerary-created":return"bg-blue-100 text-blue-800 border-blue-200";case"itinerary-sent":return"bg-purple-100 text-purple-800 border-purple-200";case"1st-follow-up":case"2nd-follow-up":case"3rd-follow-up":case"4th-follow-up":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"itinerary-edited":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"updated-itinerary-sent":return"bg-cyan-100 text-cyan-800 border-cyan-200";case"advance-paid-confirmed":return"bg-green-100 text-green-800 border-green-200";case"dead":return"bg-red-100 text-red-800 border-red-200";default:return"bg-slate-100 text-slate-800 border-slate-200"}},c=u=>u.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ");return s.jsxs(Kt,{title:"Client Details",subtitle:e.name,children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-teal-600 rounded-xl shadow-sm p-6 mb-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm mb-1",children:"Current Status"}),s.jsx("h2",{className:"text-2xl font-bold",children:c(e.current_follow_up_status)})]}),e.next_follow_up_date&&s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-3",children:[s.jsx("p",{className:"text-xs text-blue-100 mb-1",children:"Next Follow-up"}),s.jsx("p",{className:"font-semibold",children:new Date(e.next_follow_up_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.next_follow_up_time&&s.jsx("p",{className:"text-sm text-blue-100",children:e.next_follow_up_time})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6 pb-3 border-b border-slate-200",children:"Client Information"}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Personal Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Name"}),s.jsx("p",{className:"font-medium text-slate-900",children:e.name})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Wn,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"WhatsApp"}),s.jsxs("p",{className:"font-medium text-slate-900",children:[e.country_code," ",e.whatsapp]})]})]}),e.email&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ai,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Email"}),s.jsx("p",{className:"font-medium text-slate-900 break-all",children:e.email})]})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide mb-3",children:"Travel Details"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(nt,{className:"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Travel Date"}),s.jsx("p",{className:"font-medium text-slate-900",children:new Date(e.travel_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Zs,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Duration"}),s.jsxs("p",{className:"font-medium text-slate-900",children:[e.number_of_days," Days"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ut,{className:"h-5 w-5 text-teal-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Passengers"}),s.jsxs("p",{className:"font-medium text-slate-900",children:[e.number_of_adults," ",e.number_of_adults===1?"Adult":"Adults",e.number_of_children>0&&`, ${e.number_of_children} ${e.number_of_children===1?"Child":"Children"}`]})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Nn,{className:"h-5 w-5 text-indigo-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Transportation"}),s.jsx("p",{className:"font-medium text-slate-900",children:e.transportation_mode})]})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(rs,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Total Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",e.total_cost.toLocaleString()]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Booking Progress"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2.5 mr-3",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2.5 rounded-full transition-all",style:{width:`${e.booking_completion_percentage}%`}})}),s.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[e.booking_completion_percentage,"%"]})]})]})]})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pb-3 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Follow-up History"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[s.jsx(uh,{className:"h-4 w-4"}),s.jsxs("span",{children:[r.length," ",r.length===1?"entry":"entries"]})]})]}),a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(uh,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500 font-medium",children:"No follow-up history yet"}),s.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Follow-ups will appear here as they are added"})]}):s.jsx("div",{className:"space-y-4",children:r.map((u,p)=>s.jsxs("div",{className:"relative pl-8 pb-6 border-l-2 border-slate-200 last:border-l-0 last:pb-0",children:[s.jsx("div",{className:"absolute left-0 top-0 -ml-[9px] w-4 h-4 rounded-full bg-white border-2 border-blue-600"}),s.jsxs("div",{className:`border-2 rounded-lg p-4 ${l(u.status)}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"inline-block px-2.5 py-1 bg-white rounded-full text-xs font-bold text-slate-700",children:["#",r.length-p]}),s.jsx("span",{className:"font-semibold text-sm",children:c(u.status)}),u.itinerary_version_number&&s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-white rounded-full text-xs font-medium text-blue-700",children:[s.jsx(Gt,{className:"h-3 w-3 mr-1"}),"v",u.itinerary_version_number]})]}),s.jsxs("div",{className:"text-right text-xs",children:[s.jsx("div",{className:"font-medium",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsx("div",{className:"text-slate-600",children:new Date(u.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("div",{className:"mt-3 bg-white/60 rounded p-3",children:[s.jsx("p",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide mb-1",children:"Remarks"}),s.jsx("p",{className:"text-sm text-slate-900 leading-relaxed whitespace-pre-wrap",children:u.remarks})]}),u.next_follow_up_date&&s.jsxs("div",{className:"mt-3 flex items-center space-x-4 text-xs text-slate-700",children:[s.jsxs("div",{className:"flex items-center bg-white/60 rounded px-2 py-1",children:[s.jsx(nt,{className:"h-3 w-3 mr-1"}),"Next: ",new Date(u.next_follow_up_date).toLocaleDateString()]}),u.next_follow_up_time&&s.jsxs("div",{className:"flex items-center bg-white/60 rounded px-2 py-1",children:[s.jsx(Zs,{className:"h-3 w-3 mr-1"}),u.next_follow_up_time]})]})]})]},u.id))})]})})]})]})},S_=({client:e,onBack:t})=>{const{state:r}=Ht(),[n,a]=ne.useState(!1),[i,o]=ne.useState(!1),[l,c]=ne.useState("details"),[u,p]=ne.useState({name:e.name,email:e.email||"",country_code:e.country_code,whatsapp:e.whatsapp,travel_date:e.travel_date,number_of_days:e.number_of_days,number_of_adults:e.number_of_adults,number_of_children:e.number_of_children,transportation_mode:e.transportation_mode}),[f,j]=ne.useState(null),[m,y]=ne.useState([]),[_,k]=ne.useState(null),[v,x]=ne.useState(""),[b,S]=ne.useState(!1),[L,T]=ne.useState(e.number_of_days);ne.useEffect(()=>{A()},[e.id]);const A=async()=>{try{const q=await Cb(e.id);j(q),q&&q.itinerary_data&&q.itinerary_data.days&&y(q.itinerary_data.days)}catch(q){console.error("Error loading latest itinerary version:",q)}},N=async()=>{try{await T0(e.id,{name:u.name,email:u.email||void 0,country_code:u.country_code,whatsapp:u.whatsapp,travel_date:u.travel_date,number_of_days:u.number_of_days,number_of_adults:u.number_of_adults,number_of_children:u.number_of_children,transportation_mode:u.transportation_mode}),u.number_of_days!==L&&P(u.number_of_days),alert("Client details updated successfully!"),a(!1),T(u.number_of_days),t()}catch(q){console.error("Error updating client:",q),alert("Failed to update client details. Please try again.")}},P=q=>{const $=m.length;if(q>$){const ee=[];for(let te=$+1;te<=q;te++)ee.push({day:te,sightseeing:[],hotel:null,activities:[],entryTickets:[],meals:[]});y([...m,...ee])}else q<$&&y(m.slice(0,q))},M=()=>{if(!f){alert("No itinerary found to edit.");return}P(u.number_of_days),o(!0),c("dayPlanning")},E=q=>{y(q),c("review")},I=()=>{o(!1),c("details")},Y=q=>{k(q),S(!0)},G=()=>{c("dayPlanning")},Z=async()=>{var q;if(!v.trim()){alert("Please describe what changed in this version.");return}if(!_){alert("Missing itinerary data.");return}try{const $=(q=r.user)==null?void 0:q.id;if(!$)throw new Error("User must be authenticated");const ee=await Tb(e.id,{days:_.dayPlans},_.finalPrice,v,e.current_follow_up_status,$);ee&&(await T0(e.id,{itinerary_data:{days:_.dayPlans},total_cost:_.finalPrice}),alert(`New itinerary version ${ee.version_number} created successfully!`),S(!1),x(""),o(!1),c("details"),t())}catch($){console.error("Error creating new version:",$),alert("Failed to create new version. Please try again.")}},X=[{code:"+1",country:"US/CA"},{code:"+44",country:"UK"},{code:"+91",country:"IN"},{code:"+61",country:"AU"},{code:"+49",country:"DE"},{code:"+33",country:"FR"},{code:"+81",country:"JP"},{code:"+86",country:"CN"},{code:"+65",country:"SG"},{code:"+60",country:"MY"},{code:"+62",country:"ID"}];if(i&&l==="dayPlanning"){const q={id:e.id,name:u.name,email:u.email||void 0,whatsapp:u.whatsapp,countryCode:u.country_code,travelDates:{startDate:u.travel_date,endDate:u.travel_date,isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:u.number_of_adults,children:u.number_of_children},numberOfDays:u.number_of_days,transportationMode:u.transportation_mode,createdAt:e.created_at,createdBy:e.sales_person_id};return s.jsx(nd,{client:q,initialDayPlans:m,onNext:E,onBack:I,isAgent:!1})}if(i&&l==="review"){const q={id:e.id,name:u.name,email:u.email||void 0,whatsapp:u.whatsapp,countryCode:u.country_code,travelDates:{startDate:u.travel_date,endDate:u.travel_date,isFlexible:!1,flexibleMonth:""},numberOfPax:{adults:u.number_of_adults,children:u.number_of_children},numberOfDays:u.number_of_days,transportationMode:u.transportation_mode,createdAt:e.created_at,createdBy:e.sales_person_id};return s.jsx(Xb,{client:q,dayPlans:m,onNext:Y,onBack:G})}return s.jsxs(Kt,{title:"Edit Client",subtitle:e.name,children:[s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Client Basic Details"}),n?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{a(!1),p({name:e.name,email:e.email||"",country_code:e.country_code,whatsapp:e.whatsapp,travel_date:e.travel_date,number_of_days:e.number_of_days,number_of_adults:e.number_of_adults,number_of_children:e.number_of_children,transportation_mode:e.transportation_mode})},className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):s.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(s1,{className:"h-4 w-4 mr-2"}),"Edit Details"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Client Name"}),s.jsx("input",{type:"text",value:u.name,onChange:q=>p({...u,name:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:u.email,onChange:q=>p({...u,email:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600",placeholder:"Optional"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Country Code"}),s.jsx("select",{value:u.country_code,onChange:q=>p({...u,country_code:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600",children:X.map(({code:q,country:$})=>s.jsxs("option",{value:q,children:[q," (",$,")"]},q))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"WhatsApp Number"}),s.jsx("input",{type:"tel",value:u.whatsapp,onChange:q=>p({...u,whatsapp:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Travel Date"}),s.jsx("input",{type:"date",value:u.travel_date,onChange:q=>p({...u,travel_date:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Days"}),s.jsx("input",{type:"number",min:"1",value:u.number_of_days,onChange:q=>p({...u,number_of_days:parseInt(q.target.value)||1}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Adults"}),s.jsx("input",{type:"number",min:"1",value:u.number_of_adults,onChange:q=>p({...u,number_of_adults:parseInt(q.target.value)||1}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Number of Children"}),s.jsx("input",{type:"number",min:"0",value:u.number_of_children,onChange:q=>p({...u,number_of_children:parseInt(q.target.value)||0}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transportation Mode"}),s.jsx("input",{type:"text",value:u.transportation_mode,onChange:q=>p({...u,transportation_mode:q.target.value}),disabled:!n,className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-slate-50 disabled:text-slate-600"})]})]})]}),f&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Current Itinerary"}),s.jsxs("p",{className:"text-sm text-slate-600",children:["Version ",f.version_number,"  Last updated"," ",new Date(f.created_at).toLocaleDateString()]})]}),s.jsxs("button",{onClick:M,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all font-medium",children:[s.jsx(s1,{className:"h-4 w-4 mr-2"}),"Edit Itinerary"]})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-slate-700",children:[s.jsx("span",{className:"font-medium",children:"Change Description:"})," ",f.change_description]}),s.jsxs("p",{className:"text-sm text-slate-700 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Total Cost:"})," ",f.total_cost.toLocaleString()]}),s.jsxs("p",{className:"text-sm text-slate-700 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Days in Itinerary:"})," ",m.length]})]})]}),b&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Describe the Changes"}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Please provide a brief description of what changed in this new version. This helps track the itinerary evolution."}),s.jsx("textarea",{value:v,onChange:q=>x(q.target.value),placeholder:"E.g., Changed hotel in Day 2 from Grand Hotel to Royal Resort, added sunset cruise activity",className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,autoFocus:!0}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{S(!1),x("")},className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Z,className:"px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all font-medium",children:"Create New Version"})]})]})})]})},k_=({client:e,onBack:t})=>{const{state:r}=Ht(),[n,a]=ne.useState({status:p(e.current_follow_up_status),remarks:"",nextFollowUpDate:"",nextFollowUpTime:"10:00"}),[i,o]=ne.useState(!1),[l,c]=ne.useState(null);ne.useEffect(()=>{u()},[e.id]);const u=async()=>{try{const _=await Cb(e.id);_&&c(_.version_number)}catch(_){console.error("Error loading latest version:",_)}};function p(_){const k=["itinerary-created","itinerary-sent","1st-follow-up","2nd-follow-up","3rd-follow-up","4th-follow-up","itinerary-edited","updated-itinerary-sent","advance-paid-confirmed","dead"],v=["1st-follow-up","2nd-follow-up","3rd-follow-up","4th-follow-up"];if(v.includes(_)){const b=v.indexOf(_);if(b<v.length-1)return v[b+1]}const x=k.indexOf(_);return x>=0&&x<k.length-1?k[x+1]:_}const f=[{value:"1st-follow-up",label:"1st Follow Up"},{value:"2nd-follow-up",label:"2nd Follow Up"},{value:"3rd-follow-up",label:"3rd Follow Up"},{value:"4th-follow-up",label:"4th Follow Up"},{value:"itinerary-created",label:"Itinerary Created"},{value:"itinerary-sent",label:"Itinerary Sent"},{value:"itinerary-edited",label:"Itinerary Edited"},{value:"updated-itinerary-sent",label:"Updated Itinerary Sent"},{value:"advance-paid-confirmed",label:"Advance Paid & Confirmed"},{value:"dead",label:"Dead"}],m=!["advance-paid-confirmed","dead"].includes(n.status),y=async _=>{var k;if(_.preventDefault(),!n.remarks.trim()){alert("Remarks are mandatory");return}if(m&&(!n.nextFollowUpDate||!n.nextFollowUpTime)){alert("Next follow-up date and time are required for this status");return}o(!0);try{const v=(k=r.user)==null?void 0:k.id;if(!v)throw new Error("User must be authenticated");const x={current_follow_up_status:n.status};m?(x.next_follow_up_date=n.nextFollowUpDate,x.next_follow_up_time=n.nextFollowUpTime):(x.next_follow_up_date=null,x.next_follow_up_time=null),await T0(e.id,x),await n6({client_id:e.id,sales_person_id:e.sales_person_id,status:n.status,remarks:n.remarks,next_follow_up_date:m?n.nextFollowUpDate:void 0,next_follow_up_time:m?n.nextFollowUpTime:void 0,itinerary_version_number:l||void 0,created_by:v}),alert(`Follow-up updated to: ${n.status.replace(/-/g," ").toUpperCase()}

Remarks: ${n.remarks}`),t()}catch(v){console.error("Error updating follow-up:",v),alert("Failed to update follow-up. Please try again.")}finally{o(!1)}};return s.jsxs(Kt,{title:"Follow-up Management",subtitle:e.name,children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:[s.jsxs("div",{className:"mb-6 pb-6 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Current Status"}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"inline-block px-4 py-2 bg-slate-100 rounded-lg",children:s.jsx("span",{className:"text-slate-700 font-medium",children:e.current_follow_up_status.replace(/-/g," ").toUpperCase()})}),l&&s.jsxs("div",{className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-800 rounded-lg",children:[s.jsx(Gt,{className:"h-4 w-4 mr-1.5"}),s.jsxs("span",{className:"text-sm font-medium",children:["Current: v",l]})]})]}),e.next_follow_up_date&&s.jsxs("div",{className:"mt-3 text-sm text-slate-600",children:["Next follow-up: ",new Date(e.next_follow_up_date).toLocaleDateString(),e.next_follow_up_time&&` at ${e.next_follow_up_time}`]}),l&&s.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["This follow-up will be linked to itinerary version ",l]})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Update Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{value:n.status,onChange:_=>a({...n,status:_.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:f.map(_=>s.jsx("option",{value:_.value,children:_.label},_.value))}),s.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:[s.jsx(Rt,{className:"h-4 w-4 inline mr-1"}),"Suggested next status based on workflow"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[s.jsx(R4,{className:"h-4 w-4 inline mr-1"}),"Remarks ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:n.remarks,onChange:_=>a({...n,remarks:_.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Enter detailed remarks about this follow-up...",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Add notes about client conversation, concerns, or next steps"})]}),m&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-4",children:["Schedule Next Follow-up ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[s.jsx(nt,{className:"h-4 w-4 inline mr-1"}),"Date"]}),s.jsx("input",{type:"date",value:n.nextFollowUpDate,onChange:_=>a({...n,nextFollowUpDate:_.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[s.jsx(Zs,{className:"h-4 w-4 inline mr-1"}),"Time"]}),s.jsx("input",{type:"time",value:n.nextFollowUpTime,onChange:_=>a({...n,nextFollowUpTime:_.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]}),!m&&s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-amber-800",children:[" No follow-up scheduling required for status: ",s.jsx("strong",{children:n.status.replace(/-/g," ").toUpperCase()})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors font-medium",disabled:i,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg hover:from-amber-700 hover:to-orange-700 transition-all font-medium disabled:opacity-50",disabled:i,children:i?"Updating...":"Update Follow-up"})]})]})]})]})},A_=()=>{var G,Z;const{state:e,logout:t}=Ht(),[r,n]=ne.useState("all"),[a,i]=ne.useState([]),[o,l]=ne.useState([]),[c,u]=ne.useState([]),[p,f]=ne.useState(!0),[j,m]=ne.useState(!1),[y,_]=ne.useState(null),[k,v]=ne.useState(null);ne.useEffect(()=>{x()},[(G=e.user)==null?void 0:G.id]);const x=async()=>{var X;if((X=e.user)!=null&&X.id){f(!0);try{const[q,$,ee]=await Promise.all([Z3(e.user.id),e6(e.user.id),t6(e.user.id)]);i(q),l($),u(ee)}catch(q){console.error("Error loading sales data:",q)}finally{f(!1)}}},S=(()=>{switch(r){case"confirmed":return o;case"followups":return c;default:return a}})(),L=X=>{switch(X){case"itinerary-created":return"bg-blue-100 text-blue-800";case"itinerary-sent":return"bg-purple-100 text-purple-800";case"1st-follow-up":case"2nd-follow-up":case"3rd-follow-up":case"4th-follow-up":return"bg-yellow-100 text-yellow-800";case"itinerary-edited":return"bg-indigo-100 text-indigo-800";case"updated-itinerary-sent":return"bg-cyan-100 text-cyan-800";case"advance-paid-confirmed":return"bg-green-100 text-green-800";case"dead":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},T=X=>X.split("-").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" "),A=X=>{_(X),v("viewDetails")},N=X=>{_(X),v("edit")},P=async(X,q)=>{if(confirm(`Are you sure you want to delete client "${q}"? This will also delete all associated booking checklists.`))try{await r6(X),await x()}catch($){console.error("Error deleting client:",$),alert("Failed to delete client. Please try again.")}},M=X=>{_(X),v("followUp")},E=X=>{_(X),v("viewItinerary")},I=X=>{const q=encodeURIComponent(`Hello ${X.name}! This is regarding your ${X.number_of_days}-day travel package. How can I assist you today?`),$=`https://wa.me/${X.country_code.replace("+","")}${X.whatsapp}?text=${q}`;window.open($,"_blank")},Y=async()=>{confirm("Are you sure you want to logout?")&&await t()};if(j)return s.jsx(ph,{children:s.jsx(N_,{onBackToDashboard:()=>{m(!1),x()}})});if(k&&y){const X=()=>{v(null),_(null),x()};return s.jsxs(ph,{children:[k==="viewItinerary"&&s.jsx(j_,{client:y,onBack:X}),k==="viewDetails"&&s.jsx(__,{client:y,onBack:X}),k==="edit"&&s.jsx(S_,{client:y,onBack:X}),k==="followUp"&&s.jsx(k_,{client:y,onBack:X})]})}return p?s.jsx(Kt,{title:"Sales Portal",subtitle:"Manage your clients and itineraries",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading..."})]})})}):s.jsxs(Kt,{title:"Sales Portal",subtitle:"Manage your clients and itineraries",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(ut,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Logged in as"}),s.jsx("p",{className:"font-medium text-slate-900",children:(Z=e.user)==null?void 0:Z.email})]})]}),s.jsxs("button",{onClick:Y,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all",children:[s.jsx(xl,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>n("all"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="all"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{className:"h-5 w-5"}),s.jsx("span",{children:"All Clients"}),s.jsx("span",{className:"bg-slate-100 text-slate-600 py-0.5 px-2 rounded-full text-xs",children:a.length})]})}),s.jsx("button",{onClick:()=>n("confirmed"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="confirmed"?"border-green-600 text-green-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rt,{className:"h-5 w-5"}),s.jsx("span",{children:"Confirmed Clients"}),s.jsx("span",{className:"bg-slate-100 text-slate-600 py-0.5 px-2 rounded-full text-xs",children:o.length})]})}),s.jsx("button",{onClick:()=>n("followups"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${r==="followups"?"border-orange-600 text-orange-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zs,{className:"h-5 w-5"}),s.jsx("span",{children:"Today's Follow Ups"}),s.jsx("span",{className:"bg-slate-100 text-slate-600 py-0.5 px-2 rounded-full text-xs",children:c.length})]})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Clients"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(ut,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Confirmed"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:o.length})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(Rt,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Today's Follow Ups"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:c.length})]}),s.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:s.jsx(Zs,{className:"h-6 w-6 text-orange-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["",o.reduce((X,q)=>X+q.total_cost,0).toLocaleString()]})]}),s.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:s.jsx(rs,{className:"h-6 w-6 text-emerald-600"})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:[r==="all"&&"All Clients",r==="confirmed"&&"Confirmed Clients",r==="followups"&&"Today's Follow Ups"]}),s.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-teal-600 text-white rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Client"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:S.length===0?s.jsxs("div",{className:"p-12 text-center text-slate-500",children:[s.jsx(ut,{className:"h-12 w-12 mx-auto mb-4 text-slate-300"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"No clients found"}),s.jsxs("p",{className:"text-sm",children:[r==="all"&&"Start by adding your first client",r==="confirmed"&&"No confirmed bookings yet",r==="followups"&&"No follow-ups scheduled for today"]})]}):s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Client Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Travel Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Next Follow-up"}),r==="confirmed"&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Booking Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:S.map(X=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:X.name}),s.jsxs("div",{className:"flex items-center text-slate-500 text-sm",children:[s.jsx(Wn,{className:"h-4 w-4 mr-1"}),X.country_code," ",X.whatsapp]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-slate-900 flex items-center",children:[s.jsx(nt,{className:"h-4 w-4 mr-1"}),new Date(X.travel_date).toLocaleDateString()]}),s.jsxs("div",{className:"text-slate-500",children:[X.number_of_days," days  ",X.number_of_adults+X.number_of_children," pax"]}),s.jsxs("div",{className:"text-slate-500 flex items-center",children:[s.jsx(Nn,{className:"h-4 w-4 mr-1"}),X.transportation_mode]})]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(X.current_follow_up_status)}`,children:T(X.current_follow_up_status)}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["",X.total_cost.toLocaleString()]})]}),s.jsx("td",{className:"px-6 py-4",children:X.next_follow_up_date?s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"text-slate-900",children:new Date(X.next_follow_up_date).toLocaleDateString()}),X.next_follow_up_time&&s.jsx("div",{className:"text-slate-500",children:X.next_follow_up_time})]}):s.jsx("span",{className:"text-slate-400 text-sm",children:"Not scheduled"})}),r==="confirmed"&&s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${X.booking_completion_percentage}%`}})}),s.jsxs("span",{className:"text-sm text-slate-600",children:[X.booking_completion_percentage,"%"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>E(X),className:"p-2 text-teal-600 hover:bg-teal-100 rounded-lg transition-colors",title:"View Itinerary",children:s.jsx(Gt,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>A(X),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"View Details",children:s.jsx(Hi,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>N(X),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Edit Client",children:s.jsx(Gn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>M(X),className:"p-2 text-amber-600 hover:bg-amber-100 rounded-lg transition-colors",title:"Follow Up",children:s.jsx(uh,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>I(X),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"WhatsApp Chat",children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>P(X.id,X.name),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Client",children:s.jsx(ir,{className:"h-4 w-4"})})]})})]},X.id))})]})})]})]})},C_=({operationsPersonId:e,onViewChecklist:t})=>{const[r,n]=ne.useState([]),[a,i]=ne.useState(!0),[o,l]=ne.useState("all");ne.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{i(!0);const{data:y,error:_}=await fe.from("package_assignments").select(`
          *,
          sales_person:sales_persons(full_name, email)
        `).eq("operations_person_id",e).order("assigned_at",{ascending:!1});if(_)throw _;const k=await Promise.all((y||[]).map(async v=>{const{data:x,error:b}=await fe.from("booking_checklist").select("is_completed").eq("assignment_id",v.id);if(b)return console.error("Error fetching checklist:",b),{...v,checklist_stats:{total:0,completed:0},itinerary_data:null};const S=localStorage.getItem("itineraries");let L=null;return S&&(L=JSON.parse(S).find(A=>A.id===v.itinerary_id)),{...v,checklist_stats:{total:(x==null?void 0:x.length)||0,completed:(x==null?void 0:x.filter(T=>T.is_completed).length)||0},itinerary_data:L}}));n(k)}catch(y){console.error("Error fetching assignments:",y)}finally{i(!1)}},u=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-slate-100 text-slate-800"}},p=y=>{switch(y){case"pending":return s.jsx(Zs,{className:"h-4 w-4"});case"in_progress":return s.jsx(va,{className:"h-4 w-4"});case"completed":return s.jsx(t1,{className:"h-4 w-4"});default:return s.jsx(xc,{className:"h-4 w-4"})}},f=y=>y.total===0?0:Math.round(y.completed/y.total*100),j=r.filter(y=>o==="all"?!0:y.status===o),m={total:r.length,pending:r.filter(y=>y.status==="pending").length,in_progress:r.filter(y=>y.status==="in_progress").length,completed:r.filter(y=>y.status==="completed").length};return a?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-orange-600 border-r-transparent"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading your packages..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Total Packages"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:m.total})]}),s.jsx("div",{className:"bg-slate-100 p-3 rounded-lg",children:s.jsx(xc,{className:"h-6 w-6 text-slate-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:m.pending})]}),s.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:s.jsx(Zs,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:m.in_progress})]}),s.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:s.jsx(va,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:m.completed})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:s.jsx(t1,{className:"h-6 w-6 text-green-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed"].map(y=>s.jsx("button",{onClick:()=>l(y),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o===y?"bg-orange-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:y==="all"?"All Packages":y.replace("_"," ").replace(/\b\w/g,_=>_.toUpperCase())},y))})}),s.jsx("div",{className:"space-y-4",children:j.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:[s.jsx(xc,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No packages found"}),s.jsx("p",{className:"text-slate-600",children:o==="all"?"You have no assigned packages yet":`No ${o.replace("_"," ")} packages`})]}):j.map(y=>{const _=f(y.checklist_stats),k=y.itinerary_data;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${u(y.status)}`,children:[p(y.status),y.status.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase())]}),y.sales_person&&s.jsxs("span",{className:"text-sm text-slate-600",children:["by ",y.sales_person.full_name]})]}),k&&s.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:[k.client.name," - ",k.client.numberOfDays," Days Trip"]})]})}),k&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(ut,{className:"h-4 w-4"}),s.jsxs("span",{children:[k.client.numberOfPax.adults+k.client.numberOfPax.children," passengers"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(nt,{className:"h-4 w-4"}),s.jsx("span",{children:new Date(k.client.travelDates.startDate).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(xc,{className:"h-4 w-4"}),s.jsxs("span",{children:["Rp ",k.finalPrice.toLocaleString("id-ID")]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Booking Progress"}),s.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[y.checklist_stats.completed," / ",y.checklist_stats.total," items"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all ${_===100?"bg-green-600":_>50?"bg-blue-600":"bg-orange-600"}`,style:{width:`${_}%`}})}),s.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[_,"% complete"]})]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:s.jsxs("button",{onClick:()=>t(y.id),className:"inline-flex items-center justify-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:["View Checklist",s.jsx(Eu,{className:"h-4 w-4 ml-1"})]})})]})},y.id)})})]})},T_=({assignmentId:e,operationsPersonId:t,onBack:r})=>{const[n,a]=ne.useState([]),[i,o]=ne.useState(!0),[l,c]=ne.useState(!1),[u,p]=ne.useState(null),[f,j]=ne.useState(null),[m,y]=ne.useState({booking_reference:"",notes:""}),[_,k]=ne.useState([]),[v,x]=ne.useState(""),[b,S]=ne.useState(!1),[L,T]=ne.useState(null);ne.useEffect(()=>{N(),A(),P()},[e]);const A=async()=>{try{const{data:re,error:D}=await fe.from("package_assignments").select(`
          *,
          sales_person:sales_persons(full_name, email)
        `).eq("id",e).maybeSingle();if(D)throw D;T(re)}catch(re){console.error("Error fetching assignment data:",re)}},N=async()=>{try{o(!0);const{data:re,error:D}=await fe.from("booking_checklist").select("*").eq("assignment_id",e).order("day_number",{ascending:!0});if(D)throw D;a(re||[])}catch(re){console.error("Error fetching checklist:",re)}finally{o(!1)}},P=async()=>{try{const{data:re,error:D}=await fe.from("operations_chat").select("*").eq("assignment_id",e).order("created_at",{ascending:!0});if(D)throw D;k(re||[])}catch(re){console.error("Error fetching chat messages:",re)}},M=async(re,D)=>{try{c(!0);const{error:R}=await fe.from("booking_checklist").update({is_completed:!D,completed_at:D?null:new Date().toISOString(),completed_by:D?null:t}).eq("id",re);if(R)throw R;p({type:"success",text:"Item updated successfully"}),N(),Y()}catch(R){console.error("Error updating item:",R),p({type:"error",text:"Failed to update item"})}finally{c(!1)}},E=re=>{j(re.id),y({booking_reference:re.booking_reference||"",notes:re.notes||""})},I=async re=>{try{c(!0);const{error:D}=await fe.from("booking_checklist").update({booking_reference:m.booking_reference||null,notes:m.notes||null}).eq("id",re);if(D)throw D;p({type:"success",text:"Details saved successfully"}),j(null),N()}catch(D){console.error("Error saving details:",D),p({type:"error",text:"Failed to save details"})}finally{c(!1)}},Y=async()=>{try{const{data:re,error:D}=await fe.from("booking_checklist").select("is_completed").eq("assignment_id",e);if(D)throw D;const R=re==null?void 0:re.every(se=>se.is_completed),V=re==null?void 0:re.some(se=>se.is_completed);let Q="pending";R?Q="completed":V&&(Q="in_progress"),await fe.from("package_assignments").update({status:Q,completed_at:R?new Date().toISOString():null}).eq("id",e)}catch(re){console.error("Error updating assignment status:",re)}},G=async()=>{if(v.trim())try{const{data:re}=await fe.from("operations_persons").select("full_name").eq("id",t).maybeSingle(),{error:D}=await fe.from("operations_chat").insert([{assignment_id:e,sender_id:t,sender_type:"operations",sender_name:(re==null?void 0:re.full_name)||"Operations",message:v.trim()}]);if(D)throw D;x(""),P()}catch(re){console.error("Error sending message:",re)}},Z=re=>{switch(re){case"hotel":return s.jsx(wt,{className:"h-5 w-5"});case"transportation":return s.jsx(Nn,{className:"h-5 w-5"});case"activity":return s.jsx(hs,{className:"h-5 w-5"});case"entry_ticket":return s.jsx(As,{className:"h-5 w-5"});case"meal":return s.jsx(ns,{className:"h-5 w-5"});case"sightseeing":return s.jsx(ft,{className:"h-5 w-5"});default:return null}},X=re=>{switch(re){case"hotel":return"bg-blue-100 text-blue-700";case"transportation":return"bg-green-100 text-green-700";case"activity":return"bg-purple-100 text-purple-700";case"entry_ticket":return"bg-orange-100 text-orange-700";case"meal":return"bg-pink-100 text-pink-700";case"sightseeing":return"bg-teal-100 text-teal-700";default:return"bg-slate-100 text-slate-700"}},q=n.reduce((re,D)=>{const R=D.day_number||0;return re[R]||(re[R]=[]),re[R].push(D),re},{}),$=n.filter(re=>re.is_completed).length,ee=n.length,te=ee>0?Math.round($/ee*100):0;return i?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-orange-600 border-r-transparent"}),s.jsx("p",{className:"mt-2 text-slate-600",children:"Loading checklist..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("button",{onClick:r,className:"inline-flex items-center text-slate-600 hover:text-slate-900",children:[s.jsx(Nr,{className:"h-5 w-5 mr-2"}),"Back to Dashboard"]}),s.jsxs("button",{onClick:()=>S(!b),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(uh,{className:"h-4 w-4 mr-2"}),"Chat with Sales"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Package Booking Checklist"}),(L==null?void 0:L.sales_person)&&s.jsxs("p",{className:"text-slate-600 mt-1",children:["Sales Person: ",L.sales_person.full_name]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[te,"%"]}),s.jsxs("p",{className:"text-sm text-slate-600",children:[$," / ",ee," completed"]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:s.jsx("div",{className:`h-3 rounded-full transition-all ${te===100?"bg-green-600":"bg-orange-600"}`,style:{width:`${te}%`}})})})]}),u&&s.jsx("div",{className:`p-4 rounded-lg ${u.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${u.type==="success"?"text-green-700":"text-red-700"}`,children:u.text})}),b&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Chat with Sales Team"}),s.jsx("div",{className:"space-y-3 mb-4 max-h-[300px] overflow-y-auto",children:_.length===0?s.jsx("p",{className:"text-center text-slate-500 py-8",children:"No messages yet. Start the conversation!"}):_.map(re=>s.jsx("div",{className:`flex ${re.sender_type==="operations"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${re.sender_type==="operations"?"bg-orange-600 text-white":"bg-slate-100 text-slate-900"}`,children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:re.sender_name}),s.jsx("p",{className:"text-sm",children:re.message}),s.jsx("p",{className:`text-xs mt-1 ${re.sender_type==="operations"?"text-orange-100":"text-slate-500"}`,children:new Date(re.created_at).toLocaleTimeString()})]})},re.id))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:v,onChange:re=>x(re.target.value),onKeyPress:re=>re.key==="Enter"&&G(),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),s.jsx("button",{onClick:G,disabled:!v.trim(),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(xb,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"space-y-6",children:Object.keys(q).length===0?s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-12 text-center",children:s.jsx("p",{className:"text-slate-600",children:"No checklist items found"})}):Object.entries(q).sort(([re],[D])=>Number(re)-Number(D)).map(([re,D])=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:re==="0"?"General Items":`Day ${re}`}),s.jsx("div",{className:"space-y-3",children:D.map(R=>s.jsx("div",{className:`border-2 rounded-lg p-4 transition-colors ${R.is_completed?"border-green-200 bg-green-50":"border-slate-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("button",{onClick:()=>M(R.id,R.is_completed),disabled:l,className:`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${R.is_completed?"bg-green-600 border-green-600 text-white":"border-slate-300 hover:border-orange-600"}`,children:R.is_completed&&s.jsx(Bh,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${X(R.item_type)}`,children:[Z(R.item_type),R.item_type.replace("_"," ").replace(/\b\w/g,V=>V.toUpperCase())]})}),s.jsx("h4",{className:`font-medium ${R.is_completed?"text-green-900 line-through":"text-slate-900"}`,children:R.item_name}),f===R.id?s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("input",{type:"text",value:m.booking_reference,onChange:V=>y({...m,booking_reference:V.target.value}),placeholder:"Booking reference number",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),s.jsx("textarea",{value:m.notes,onChange:V=>y({...m,notes:V.target.value}),placeholder:"Add notes...",rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>I(R.id),disabled:l,className:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm",children:[s.jsx(bs,{className:"h-4 w-4 mr-1"}),"Save"]}),s.jsx("button",{onClick:()=>j(null),className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-sm",children:"Cancel"})]})]}):s.jsxs("div",{className:"mt-2 space-y-1",children:[R.booking_reference&&s.jsxs("p",{className:"text-sm text-slate-600",children:[s.jsx("span",{className:"font-medium",children:"Reference:"})," ",R.booking_reference]}),R.notes&&s.jsxs("p",{className:"text-sm text-slate-600",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]}),s.jsx("button",{onClick:()=>E(R),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:R.booking_reference||R.notes?"Edit details":"Add booking details"})]})]})]})},R.id))})]},re))})]})},P_=()=>{const{logout:e,state:t}=Ht(),[r,n]=ne.useState("dashboard"),[a,i]=ne.useState(!1),[o,l]=ne.useState(null),[c,u]=ne.useState(null);ne.useEffect(()=>{p()},[t.user]);const p=async()=>{var _;if((_=t.user)!=null&&_.email)try{const{data:k,error:v}=await fe.from("operations_persons").select("*").eq("email",t.user.email).eq("is_active",!0).maybeSingle();if(v)throw v;l(k)}catch(k){console.error("Error fetching operations person:",k)}},f=[{id:"dashboard",name:"My Packages",icon:dh,description:"View assigned packages"}],j=_=>{u(_),n("checklist"),i(!1)},m=()=>{u(null),n("dashboard")},y=()=>r==="checklist"&&c?s.jsx(T_,{assignmentId:c,operationsPersonId:(o==null?void 0:o.id)||"",onBack:m}):s.jsx(C_,{operationsPersonId:(o==null?void 0:o.id)||"",onViewChecklist:j});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-slate-200 sticky top-0 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-pink-500 p-2 rounded-lg",children:s.jsx(xc,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Operations Portal"}),o&&s.jsx("p",{className:"text-xs text-slate-600",children:o.full_name})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:e,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(xl,{className:"h-4 w-4 mr-2"}),"Logout"]}),s.jsx("button",{onClick:()=>i(!a),className:"lg:hidden p-2 rounded-lg text-slate-600 hover:bg-slate-100",children:a?s.jsx(Is,{className:"h-6 w-6"}):s.jsx(Bp,{className:"h-6 w-6"})})]})]})})}),a&&s.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>i(!1),children:s.jsx("div",{className:"fixed inset-y-0 left-0 w-64 bg-white shadow-xl",onClick:_=>_.stopPropagation(),children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Menu"}),s.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(Is,{className:"h-5 w-5"})})]}),s.jsx("nav",{className:"space-y-2",children:f.map(_=>{const k=_.icon;return s.jsxs("button",{onClick:()=>{n(_.id),i(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${r===_.id?"bg-orange-50 text-orange-700 font-medium":"text-slate-700 hover:bg-slate-50"}`,children:[s.jsx(k,{className:"h-5 w-5"}),s.jsx("span",{children:_.name})]},_.id)})})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:y()})]})};function L_(){var t,r,n,a;const{state:e}=Ht();return e.isAuthenticated?((t=e.user)==null?void 0:t.role)==="admin"?s.jsx(g_,{}):((r=e.user)==null?void 0:r.role)==="agent"?s.jsx(w_,{}):((n=e.user)==null?void 0:n.role)==="sales"?s.jsx(A_,{}):((a=e.user)==null?void 0:a.role)==="operations"?s.jsx(P_,{}):s.jsx(n1,{}):s.jsx(n1,{})}function E_(){return s.jsx(A4,{children:s.jsx(L_,{})})}H2(document.getElementById("root")).render(s.jsx(ne.StrictMode,{children:s.jsx(E_,{})}));export{kt as _,Jr as c,Fy as g};
